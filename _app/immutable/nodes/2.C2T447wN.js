var Jn=Object.defineProperty;var Yn=(n,e,t)=>e in n?Jn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ge=(n,e,t)=>Yn(n,typeof e!="symbol"?e+"":e,t);import{r as Ge,s as he,c as $n,e as T,b as P,v as Te,d as b,f as D,i as m,j as R,y as d,k as V,T as G,u as An,g as Vn,a as jn,t as q,h as X,z as L,l as v,m as ee,U as nt,V as Yt,W as Ne,n as Q,X as le,Y as _t,A as Xe,Z as Zt,o as Me,_ as Mt,$ as Zn,x as Pn,a0 as Lt,a1 as Qt,a2 as xt,a3 as Ue,a4 as en,a5 as Ee,a6 as De,a7 as gt,a8 as pt,a9 as Rn,F as Ln,aa as Qn}from"../chunks/scheduler.wXDW__MU.js";import{a as z,t as B,S as me,i as ve,b as te,d as ne,m as ie,e as se,g as Be,c as ze,f as Ht,h as Hn,j as Fn}from"../chunks/index.d4iYPt1k.js";import{b as tt,w as Tt,d as bt}from"../chunks/paths.Ce7pNdHa.js";function Ie(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function xn(n,e){n.d(1),e.delete(n.key)}function ei(n,e){z(n,1,1,()=>{e.delete(n.key)})}function Un(n,e,t,i,s,r,l,o,a,c,u,f){let h=n.length,_=r.length,k=h;const y={};for(;k--;)y[n[k].key]=k;const M=[],N=new Map,A=new Map,S=[];for(k=_;k--;){const I=f(s,r,k),g=t(I);let p=l.get(g);p?S.push(()=>p.p(I,e)):(p=c(g,I),p.c()),N.set(g,M[k]=p),g in y&&A.set(g,Math.abs(k-y[g]))}const O=new Set,C=new Set;function j(I){B(I,1),I.m(o,u),l.set(I.key,I),u=I.first,_--}for(;h&&_;){const I=M[_-1],g=n[h-1],p=I.key,w=g.key;I===g?(u=I.first,h--,_--):N.has(w)?!l.has(p)||O.has(p)?j(I):C.has(w)?h--:A.get(p)>A.get(w)?(C.add(p),j(I)):(O.add(w),h--):(a(g,l),h--)}for(;h--;){const I=n[h];N.has(I.key)||a(I,l)}for(;_;)j(M[_-1]);return Ge(S),M}function St(n,e){const t={},i={},s={$$scope:1};let r=n.length;for(;r--;){const l=n[r],o=e[r];if(o){for(const a in l)a in o||(i[a]=1);for(const a in o)s[a]||(t[a]=o[a],s[a]=1);n[r]=o}else for(const a in l)s[a]=1}for(const l in i)l in t||(t[l]=void 0);return t}function Bn(n){return typeof n=="object"&&n!==null?n:{}}const ti=tt+"/ring2.wav";let zn=function(){},lt,Ot,Gn=.5,ft;if(typeof window<"u"){let n=window.AudioContext||window.webkitAudioContext;lt=new n,fetch(ti).then(e=>e.arrayBuffer()).then(e=>lt.decodeAudioData(e)).then(e=>{Ot=e}).catch(e=>console.error("Error loading sound file:",e)),zn=function(){if(!Ot)return;ft=lt.createBufferSource(),ft.buffer=Ot;let e=lt.createGain();e.gain.value=Gn,ft.connect(e),e.connect(lt.destination),ft.start(0)}}function Ft(){zn()}function ni(n,e){Gn=n,Ft()}function tn(n){let e,t;return{c(){e=T("div"),t=q(n[0]),this.h()},l(i){e=b(i,"DIV",{style:!0,class:!0});var s=D(e);t=X(s,n[0]),s.forEach(m),this.h()},h(){L(e,"top",n[3]+"px"),L(e,"left",n[2]+"px"),d(e,"class","tooltip svelte-43gogz")},m(i,s){V(i,e,s),v(e,t)},p(i,s){s&1&&ee(t,i[0]),s&8&&L(e,"top",i[3]+"px"),s&4&&L(e,"left",i[2]+"px")},d(i){i&&m(e)}}}function ii(n){let e,t,i,s,r,l;const o=n[8].default,a=$n(o,n,n[7],null);let c=n[1]&&tn(n);return{c(){e=T("div"),a&&a.c(),t=P(),c&&c.c(),i=Te(),this.h()},l(u){e=b(u,"DIV",{"aria-hidden":!0});var f=D(e);a&&a.l(f),f.forEach(m),t=R(u),c&&c.l(u),i=Te(),this.h()},h(){d(e,"aria-hidden","true")},m(u,f){V(u,e,f),a&&a.m(e,null),V(u,t,f),c&&c.m(u,f),V(u,i,f),s=!0,r||(l=[G(e,"mouseover",n[4]),G(e,"mouseleave",n[6]),G(e,"mousemove",n[5]),G(e,"focus",si)],r=!0)},p(u,[f]){a&&a.p&&(!s||f&128)&&An(a,o,u,u[7],s?jn(o,u[7],f,null):Vn(u[7]),null),u[1]?c?c.p(u,f):(c=tn(u),c.c(),c.m(i.parentNode,i)):c&&(c.d(1),c=null)},i(u){s||(B(a,u),s=!0)},o(u){z(a,u),s=!1},d(u){u&&(m(e),m(t),m(i)),a&&a.d(u),c&&c.d(u),r=!1,Ge(l)}}}const si=function(){};function li(n,e,t){let{$$slots:i={},$$scope:s}=e,{title:r=""}=e,l=!1,o,a;function c(h){t(1,l=!0),t(2,o=h.pageX+10),t(3,a=h.pageY+10)}function u(h){t(2,o=h.pageX+10),t(3,a=h.pageY+10)}function f(){t(1,l=!1)}return n.$$set=h=>{"title"in h&&t(0,r=h.title),"$$scope"in h&&t(7,s=h.$$scope)},[r,l,o,a,c,u,f,s,i]}class Ut extends me{constructor(e){super(),ve(this,e,li,ii,he,{title:0})}}function nn(n){let e=Math.floor(n/60),t=Math.floor(n%60).toString().padStart(2,"0"),i=e.toString().padStart(2,"0");if(e>60){let s=Math.floor(e/60);return i=Math.floor(e%60).toString().padStart(2,"0"),`${s}:${i}:${t}`}return`${i}:${t}`}function sn(n){let e=Math.floor(n/60),t=Math.floor(n%60);if(e>60){let i=Math.floor(e/60);return e=Math.floor(e%60),`${i}h ${e} min`}else return e>0?`${e} min`:`${t} sec`}function ln(n){let e=Math.floor(n/3600);e>0&&(n=n-e*3600);let t=Math.floor(n/60),i=Math.floor(n%60);return e==1?`${e} hour ${t} min`:e>0?`${e} hours ${t} min`:t>=5?`${t} min`:t>1?`${t} min ${i} sec`:`${i} sec`}class ri{constructor(e,t,i,s=300){ge(this,"intervalId",0);ge(this,"duration",0);ge(this,"start",0);ge(this,"remain",0);ge(this,"onSec",e=>{});ge(this,"onAlarm",()=>{});this.duration=e,this.remain=e-1,e>0&&(this.onSec=t,this.onAlarm=i,this.start=Date.now(),this.intervalId=setInterval(()=>{const r=Math.ceil((Date.now()-this.start)/1e3);let l=this.duration-r;l!=this.remain&&(t(this.remain),this.remain=l,this.remain<=0&&(this.onAlarm(),clearInterval(this.intervalId)))},s))}stop(){clearInterval(this.intervalId)}}function oi(n){let e,t=nn(n[0])+"",i,s,r;return{c(){e=T("button"),i=q(t),this.h()},l(l){e=b(l,"BUTTON",{id:!0,class:!0});var o=D(e);i=X(o,t),o.forEach(m),this.h()},h(){d(e,"id","watch"),d(e,"class","svelte-1kj7nhv")},m(l,o){V(l,e,o),v(e,i),s||(r=G(e,"click",n[1]),s=!0)},p(l,o){o&1&&t!==(t=nn(l[0])+"")&&ee(i,t)},d(l){l&&m(e),s=!1,r()}}}function ai(n){let e,t;return e=new Ut({props:{title:"stop timer",$$slots:{default:[oi]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(i){ne(e.$$.fragment,i)},m(i,s){ie(e,i,s),t=!0},p(i,[s]){const r={};s&257&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){z(e.$$.fragment,i),t=!1},d(i){se(e,i)}}}function ci(n,e,t){let{time:i=0}=e,{remainedSeconds:s=0}=e;var r;const l=nt();function o(f){r!=null&&r.stop(),r=new ri(f,a,c),t(0,s=f)}function a(f){t(0,s=f)}function c(){Ft(),l("alarming")}function u(){l("stop")}return n.$$set=f=>{"time"in f&&t(2,i=f.time),"remainedSeconds"in f&&t(0,s=f.remainedSeconds)},n.$$.update=()=>{n.$$.dirty&4&&o(i)},[s,u,i]}class ui extends me{constructor(e){super(),ve(this,e,ci,ai,he,{time:2,remainedSeconds:0})}}function fi(n){let e,t,i,s,r,l;return{c(){e=T("button"),t=q(n[1]),i=q(" min"),this.h()},l(o){e=b(o,"BUTTON",{class:!0});var a=D(e);t=X(a,n[1]),i=X(a," min"),a.forEach(m),this.h()},h(){d(e,"class",s=Yt(n[2])+" svelte-8w7xxt"),Ne(e,"pressed",n[0])},m(o,a){V(o,e,a),v(e,t),v(e,i),r||(l=G(e,"click",n[5]),r=!0)},p(o,[a]){a&2&&ee(t,o[1]),a&4&&s!==(s=Yt(o[2])+" svelte-8w7xxt")&&d(e,"class",s),a&5&&Ne(e,"pressed",o[0])},i:Q,o:Q,d(o){o&&m(e),r=!1,l()}}}function di(n,e,t){const i=nt();let{value:s}=e,{name:r}=e,{pressed:l=!1}=e;function o(u,f){i("start",{name:u,val:f}),t(0,l=!0)}function a(){t(0,l=!1)}const c=function(){o(r,s)};return n.$$set=u=>{"value"in u&&t(1,s=u.value),"name"in u&&t(2,r=u.name),"pressed"in u&&t(0,l=u.pressed)},[l,s,r,o,a,c]}class Wn extends me{constructor(e){super(),ve(this,e,di,fi,he,{value:1,name:2,pressed:0,reset:4})}get reset(){return this.$$.ctx[4]}}const ye={WORK:"work",REST:"rest"},hi={afterClockIntervalS:3,afterClockTimeoutS:10,timersMultiplier:1},mi={afterClockIntervalS:10,afterClockTimeoutS:60*15,timersMultiplier:1*60};function et(n){return n?hi:mi}function rn(n,e,t){const i=n.slice();return i[9]=e[t],i[10]=e,i[11]=t,i}const vi=n=>({}),on=n=>({class:"item svelte-1rvg6ah"});function an(n,e,t){const i=n.slice();return i[9]=e[t],i[12]=e,i[11]=t,i}function cn(n){let e,t=n[11],i,s,r;const l=()=>n[6](e,t),o=()=>n[6](null,t);let a={value:n[9],name:ye.WORK};return e=new Wn({props:a}),l(),e.$on("start",n[2]),{c(){te(e.$$.fragment),i=P(),s=T("br")},l(c){ne(e.$$.fragment,c),i=R(c),s=b(c,"BR",{})},m(c,u){ie(e,c,u),V(c,i,u),V(c,s,u),r=!0},p(c,u){t!==c[11]&&(o(),t=c[11],l());const f={};e.$set(f)},i(c){r||(B(e.$$.fragment,c),r=!0)},o(c){z(e.$$.fragment,c),r=!1},d(c){c&&(m(i),m(s)),o(),se(e,c)}}}function un(n){let e,t=n[11],i,s,r;const l=()=>n[7](e,t),o=()=>n[7](null,t);let a={value:n[9],name:ye.REST};return e=new Wn({props:a}),l(),e.$on("start",n[2]),{c(){te(e.$$.fragment),i=P(),s=T("br")},l(c){ne(e.$$.fragment,c),i=R(c),s=b(c,"BR",{})},m(c,u){ie(e,c,u),V(c,i,u),V(c,s,u),r=!0},p(c,u){t!==c[11]&&(o(),t=c[11],l());const f={};e.$set(f)},i(c){r||(B(e.$$.fragment,c),r=!0)},o(c){z(e.$$.fragment,c),r=!1},d(c){c&&(m(i),m(s)),o(),se(e,c)}}}function _i(n){let e,t,i,s,r="Active",l,o,a,c,u,f,h="Rest",_,k,y,M=Ie(n[1]),N=[];for(let g=0;g<M.length;g+=1)N[g]=cn(an(n,M,g));const A=g=>z(N[g],1,1,()=>{N[g]=null}),S=n[5].default,O=$n(S,n,n[4],on);let C=Ie(n[1]),j=[];for(let g=0;g<C.length;g+=1)j[g]=un(rn(n,C,g));const I=g=>z(j[g],1,1,()=>{j[g]=null});return{c(){e=T("div"),t=T("div"),i=T("div"),s=T("span"),s.textContent=r,l=T("br"),o=P();for(let g=0;g<N.length;g+=1)N[g].c();a=P(),O&&O.c(),c=P(),u=T("div"),f=T("span"),f.textContent=h,_=T("br"),k=P();for(let g=0;g<j.length;g+=1)j[g].c();this.h()},l(g){e=b(g,"DIV",{});var p=D(e);t=b(p,"DIV",{class:!0});var w=D(t);i=b(w,"DIV",{class:!0});var E=D(i);s=b(E,"SPAN",{class:!0,"data-svelte-h":!0}),le(s)!=="svelte-19szg5l"&&(s.textContent=r),l=b(E,"BR",{}),o=R(E);for(let $=0;$<N.length;$+=1)N[$].l(E);E.forEach(m),a=R(w),O&&O.l(w),c=R(w),u=b(w,"DIV",{class:!0});var F=D(u);f=b(F,"SPAN",{class:!0,"data-svelte-h":!0}),le(f)!=="svelte-1gtata5"&&(f.textContent=h),_=b(F,"BR",{}),k=R(F);for(let $=0;$<j.length;$+=1)j[$].l(F);F.forEach(m),w.forEach(m),p.forEach(m),this.h()},h(){d(s,"class","label svelte-1rvg6ah"),d(i,"class","item svelte-1rvg6ah"),d(f,"class","label svelte-1rvg6ah"),d(u,"class","item svelte-1rvg6ah"),d(t,"class","grid-container svelte-1rvg6ah")},m(g,p){V(g,e,p),v(e,t),v(t,i),v(i,s),v(i,l),v(i,o);for(let w=0;w<N.length;w+=1)N[w]&&N[w].m(i,null);v(t,a),O&&O.m(t,null),v(t,c),v(t,u),v(u,f),v(u,_),v(u,k);for(let w=0;w<j.length;w+=1)j[w]&&j[w].m(u,null);y=!0},p(g,[p]){if(p&7){M=Ie(g[1]);let w;for(w=0;w<M.length;w+=1){const E=an(g,M,w);N[w]?(N[w].p(E,p),B(N[w],1)):(N[w]=cn(E),N[w].c(),B(N[w],1),N[w].m(i,null))}for(Be(),w=M.length;w<N.length;w+=1)A(w);ze()}if(O&&O.p&&(!y||p&16)&&An(O,S,g,g[4],y?jn(S,g[4],p,vi):Vn(g[4]),on),p&7){C=Ie(g[1]);let w;for(w=0;w<C.length;w+=1){const E=rn(g,C,w);j[w]?(j[w].p(E,p),B(j[w],1)):(j[w]=un(E),j[w].c(),B(j[w],1),j[w].m(u,null))}for(Be(),w=C.length;w<j.length;w+=1)I(w);ze()}},i(g){if(!y){for(let p=0;p<M.length;p+=1)B(N[p]);B(O,g);for(let p=0;p<C.length;p+=1)B(j[p]);y=!0}},o(g){N=N.filter(Boolean);for(let p=0;p<N.length;p+=1)z(N[p]);z(O,g),j=j.filter(Boolean);for(let p=0;p<j.length;p+=1)z(j[p]);y=!1},d(g){g&&m(e),_t(N,g),O&&O.d(g),_t(j,g)}}}function gi(n,e,t){let{$$slots:i={},$$scope:s}=e;const r=nt();let l=[],o=[5,10,15,20,25,120];function a(h){r("start",{timer:h.detail.val,name:h.detail.name}),console.log("handleTimerStart")}function c(){l.forEach(h=>{h&&h.reset()})}function u(h,_){Xe[h?"unshift":"push"](()=>{l[_]=h,t(0,l)})}function f(h,_){Xe[h?"unshift":"push"](()=>{l[_+l.length]=h,t(0,l)})}return n.$$set=h=>{"$$scope"in h&&t(4,s=h.$$scope)},[l,o,a,c,s,i,u,f]}class pi extends me{constructor(e){super(),ve(this,e,gi,_i,he,{clear:3})}get clear(){return this.$$.ctx[3]}}/*! js-cookie v3.0.5 | MIT */function dt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)n[i]=t[i]}return n}var ki={read:function(n){return n[0]==='"'&&(n=n.slice(1,-1)),n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(n){return encodeURIComponent(n).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function jt(n,e){function t(s,r,l){if(!(typeof document>"u")){l=dt({},e,l),typeof l.expires=="number"&&(l.expires=new Date(Date.now()+l.expires*864e5)),l.expires&&(l.expires=l.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var a in l)l[a]&&(o+="; "+a,l[a]!==!0&&(o+="="+l[a].split(";")[0]));return document.cookie=s+"="+n.write(r,s)+o}}function i(s){if(!(typeof document>"u"||arguments.length&&!s)){for(var r=document.cookie?document.cookie.split("; "):[],l={},o=0;o<r.length;o++){var a=r[o].split("="),c=a.slice(1).join("=");try{var u=decodeURIComponent(a[0]);if(l[u]=n.read(c,u),s===u)break}catch{}}return s?l[s]:l}}return Object.create({set:t,get:i,remove:function(s,r){t(s,"",dt({},r,{expires:-1}))},withAttributes:function(s){return jt(this.converter,dt({},this.attributes,s))},withConverter:function(s){return jt(dt({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(n)}})}var Ve=jt(ki,{path:"/"});class Oe{constructor(e=0,t="",i=new Date,s=new Date){ge(this,"start");ge(this,"finish");ge(this,"name");ge(this,"value");this.start=i,this.finish=s,this.name=t,this.value=e}setDuration(e){this.finish=new Date(this.start.getTime()+e*1e3)}durationS(){return(this.finish.getTime()-this.start.getTime())/1e3}}const fe={RUNNING:"RUNNING",STOPPED:"STOPPED",WAITING_FOR_STOP:"WAITING_FOR_STOP"};var Fe=(n=>(n[n.EMIT=1]="EMIT",n[n.DO_NOT_EMIT=2]="DO_NOT_EMIT",n))(Fe||{});let qn=60,wi=5*60;function Bt(n,e,t=qn){return(e.start.getTime()-n.finish.getTime())/1e3>t}function Ti(n,e=qn){var t=[],i=0;if(n.length<=1)return n;t.push(n[0]),i=0;for(let s=1;s<n.length;s++){const r=n[s];if(t[i].name!=r.name){t.push(r),i++;continue}Bt(t[i],r,e)?(t.push(r),i++):t[i].finish=r.finish}return t}function Ct(n,e=ye.REST,t=wi){var i=[],s=0;if(n.length<=1)return n;i.push(n[0]),s=0;for(let l=1;l<n.length;l++){const o=n[l];if(Bt(i[s],o,t)){var r=new Oe(0,e,i[s].finish,o.start);i.push(r),s++}i.push(o),s++}return i}function bi(n){return n.forEach(e=>{if(!("name"in e&&"start"in e&&"finish"in e))return!1}),!0}function Si(n){let e=[];try{const t=JSON.parse(n);let i=[];bi(t)&&t.forEach(s=>{i.push(new Oe(0,s.name,new Date(s.start*1e3),new Date(s.finish*1e3)))}),console.log("deserialized logs:",i),e=i}catch{e=[]}return new Pt(e)}class Pt{constructor(e){ge(this,"additionalS",0);ge(this,"list",[]);this.list=Ct(e,ye.REST)}serialize(){let e=[];return this.list.forEach(t=>{e.push({name:t.name,start:Math.floor(t.start.getTime()/1e3),finish:Math.floor(t.finish.getTime()/1e3)})}),JSON.stringify(e)}_normalize(){this.list=Ct(this.list,ye.REST),this.list=Ti(this.list,0)}addTimer(e){return this.list.push(e),this._normalize(),this}remove(e){for(var t=0;t<this.list.length;)this.list[t].start===e?this.list.splice(t,1):++t;this._normalize()}total(){let e=0;return this.list.forEach(t=>{t.name==ye.WORK&&(e+=t.durationS())}),e}fillGaps(e=new Oe){if(this.list=Ct(this.list),this.list.length>0){let t=this.list[this.list.length-1];Bt(t,e)&&this.list.push(new Oe(0,ye.REST,t.finish,e.start))}return this}}class Ei{constructor(){ge(this,"timerHistory");ge(this,"active");this.timerHistory=new Pt([])}addTimer(e){return this.active=void 0,this.timerHistory.addTimer(e),this}remove(e){return this.timerHistory.remove(e),this}clearLogs(){return this.timerHistory=new Pt([]),this}resetActive(){return this.active=void 0,this}tick(e,t){if(!this.active)return!1;const i=this.active.value*t,s=(e.getTime()-this.active.start.getTime())/1e3,r=15*t;return s>i+r?(this.active.finish=new Date(this.active.start.getTime()+(i+r)*1e3),this.addTimer(this.active),!0):(this.active.finish=e,!1)}getRecoveryStatus(e,t){if(!this.active)return{shouldResume:!1,shouldArchive:!1,remainingMinutes:0};const i=(e.getTime()-this.active.start.getTime())/1e3,s=this.active.value*t,r=15*t;if(i>=s+r)return{shouldResume:!1,shouldArchive:!0,remainingMinutes:0};const l=s-i;return{shouldResume:l>0,shouldArchive:!1,remainingMinutes:Math.max(0,l/t)}}setActive(e){return this.active=e,this.timerHistory.fillGaps(),this}totalTime(){let e=this.timerHistory.total();return this.active&&this.active.name==ye.WORK&&(e+=this.active.durationS()),e}}function Xn(n,e,t={storage:"cookies",cookieExpireDays:31}){const i=t.serialize||JSON.stringify,s=t.deserialize||JSON.parse;let r=e;try{const o=t.storage==="cookies"?Ve.get(n):localStorage.getItem(n);o&&(r=s(o))}catch(o){console.warn(`Failed to load ${n} from ${t.storage}:`,o)}const l=Tt(r);return l.subscribe(o=>{try{const a=i(o);t.storage==="cookies"?Ve.set(n,a,{expires:t.cookieExpireDays||31}):localStorage.setItem(n,a)}catch(a){console.warn(`Failed to save ${n} to ${t.storage}:`,a)}}),l}function Di(){let n=new Ei;{const t=Ve.get("logs");console.log("Loading pomApp from cookies:",t),t&&(n.timerHistory=Si(t));const i=Ve.get("activeTimer");if(i)try{const s=JSON.parse(i),r=new Date(s.start),l=new Date;(l.getTime()-r.getTime())/(1e3*60*60)<1?(n.active=new Oe(s.value,s.name,r,l),console.log("Loaded active timer from cookies:",n.active)):(console.log("Active timer too old, not restoring"),Ve.remove("activeTimer"))}catch(s){console.error("Failed to parse active timer:",s)}}const e=Tt(n);return e.subscribe(t=>{const i=t.timerHistory.serialize();if(Ve.set("logs",i,{expires:31}),t.active){const s={name:t.active.name,start:t.active.start.getTime(),finish:t.active.finish.getTime(),value:t.active.value};Ve.set("activeTimer",JSON.stringify(s),{expires:31})}else Ve.remove("activeTimer")}),e}const we=Di();function Ii(){{const n=Ve.get("darkmode");return n!==void 0?n==="true":window.matchMedia("(prefers-color-scheme: dark)").matches}}const Rt=Xn("darkmode",Ii(),{storage:"cookies",serialize:n=>n.toString(),deserialize:n=>n==="true"}),yi=bt(we,n=>n.totalTime()),ht=Xn("volume",10,{storage:"cookies",serialize:n=>n.toString(),deserialize:n=>parseInt(n,10)});function Mi(n){let e,t,i,s=`<img src="${tt}/volume_mute.svg" alt="Mute icon"/>`,r,l,o,a,c=`<img src="${tt}/volume_up.svg" alt="Volume max icon"/>`,u,f;return{c(){e=T("label"),t=T("div"),i=T("button"),i.innerHTML=s,r=P(),l=T("input"),o=P(),a=T("button"),a.innerHTML=c,this.h()},l(h){e=b(h,"LABEL",{});var _=D(e);t=b(_,"DIV",{class:!0});var k=D(t);i=b(k,"BUTTON",{class:!0,"data-svelte-h":!0}),le(i)!=="svelte-t9bnpg"&&(i.innerHTML=s),r=R(k),l=b(k,"INPUT",{class:!0,type:!0,min:!0,max:!0}),o=R(k),a=b(k,"BUTTON",{class:!0,"data-svelte-h":!0}),le(a)!=="svelte-yorq7f"&&(a.innerHTML=c),k.forEach(m),_.forEach(m),this.h()},h(){d(i,"class","leftbutton svelte-1vsc329"),d(l,"class","slider bar svelte-1vsc329"),d(l,"type","range"),d(l,"min","0"),d(l,"max","100"),d(a,"class","svelte-1vsc329"),d(t,"class","container svelte-1vsc329")},m(h,_){V(h,e,_),v(e,t),v(t,i),v(t,r),v(t,l),Zt(l,n[0]),v(t,o),v(t,a),u||(f=[G(i,"click",n[2]),G(l,"change",n[5]),G(l,"input",n[5]),G(l,"mouseup",n[1]),G(a,"click",n[3])],u=!0)},p(h,[_]){_&1&&Zt(l,h[0])},i:Q,o:Q,d(h){h&&m(e),u=!1,Ge(f)}}}function Oi(n,e,t){let i;Me(n,ht,c=>t(4,i=c));let s=i;function r(c){Mt(ht,i=parseInt(c.target.value,10),i)}function l(){Mt(ht,i=0,i)}function o(){Mt(ht,i=100,i)}function a(){s=Zn(this.value),t(0,s),t(4,i)}return n.$$.update=()=>{n.$$.dirty&16&&(console.log("volume",i),ni(i/100),t(0,s=i))},[s,r,l,o,i,a]}class Ci extends me{constructor(e){super(),ve(this,e,Oi,Mi,he,{})}}function Ni(n,e,t){const i=nt();let{debugFlag:s}=e,{active:r=!0}=e,l=0,o=0;function a(u){console.log("run annoyer",u),clearInterval(l),clearTimeout(o),u&&(l=setInterval(()=>{Ft(),r||clearInterval(l)},et(s).afterClockIntervalS*1e3),o=setTimeout(()=>{t(0,r=!1),clearInterval(l),c()},et(s).afterClockTimeoutS*1e3))}function c(){i("off")}return n.$$set=u=>{"debugFlag"in u&&t(1,s=u.debugFlag),"active"in u&&t(0,r=u.active)},n.$$.update=()=>{n.$$.dirty&1&&a(r)},[r,s]}class $i extends me{constructor(e){super(),ve(this,e,Ni,null,he,{debugFlag:1,active:0})}}const fn=tt+"/tea.png",Ai=tt+"/clock_red.png",Vi=tt+"/clock_yellow.png";function ji(n){if(console.log("changeFavicon",n),typeof document>"u"||document===null)return;const e=document.getElementById("favicon");if(e!==null)switch(n){case fe.STOPPED:e.href=fn;break;case fe.RUNNING:e.href=Ai;break;case fe.WAITING_FOR_STOP:e.href=Vi;break;default:e.href=fn}}function Pi(){const{subscribe:n,set:e,update:t}=Tt({state:fe.STOPPED,currentTimer:new Oe,clockDuration:0});return{subscribe:n,start:(i,s,r)=>{const l=et(r).timersMultiplier;t(o=>({state:fe.RUNNING,currentTimer:new Oe(i,s),clockDuration:i*l}))},alarm:i=>{t(s=>{if(i){const r=Object.assign(Object.create(Object.getPrototypeOf(s.currentTimer)),s.currentTimer,{finish:new Date});return{...s,state:fe.STOPPED,clockDuration:0,currentTimer:r}}else return{...s,state:fe.WAITING_FOR_STOP}})},stop:()=>{t(i=>{const s=Object.assign(Object.create(Object.getPrototypeOf(i.currentTimer)),i.currentTimer,{finish:new Date});return{...i,state:fe.STOPPED,clockDuration:0,currentTimer:s}})},reset:()=>{e({state:fe.STOPPED,currentTimer:new Oe,clockDuration:0})}}}const je=Pi(),Ri=bt(je,n=>n.state),Li=bt(je,n=>n.currentTimer),Hi=bt(je,n=>n.clockDuration);function Fi(n){let e,t,i;return e=new Ci({}),{c(){te(e.$$.fragment),t=T("br")},l(s){ne(e.$$.fragment,s),t=b(s,"BR",{})},m(s,r){ie(e,s,r),V(s,t,r),i=!0},p:Q,i(s){i||(B(e.$$.fragment,s),i=!0)},o(s){z(e.$$.fragment,s),i=!1},d(s){s&&m(t),se(e,s)}}}function dn(n){let e,t;return e=new Ut({props:{title:"stop and don't save logs",$$slots:{default:[Ui]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(i){ne(e.$$.fragment,i)},m(i,s){ie(e,i,s),t=!0},p(i,s){const r={};s&65536&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){z(e.$$.fragment,i),t=!1},d(i){se(e,i)}}}function Ui(n){let e,t="cancel",i,s,r,l;return{c(){e=T("button"),e.textContent=t,i=P(),s=T("br"),this.h()},l(o){e=b(o,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),le(e)!=="svelte-1wi9d3u"&&(e.textContent=t),i=R(o),s=b(o,"BR",{}),this.h()},h(){d(e,"id","stopper"),d(e,"class","svelte-1viwsah")},m(o,a){V(o,e,a),V(o,i,a),V(o,s,a),r||(l=G(e,"click",n[8]),r=!0)},p:Q,d(o){o&&(m(e),m(i),m(s)),r=!1,l()}}}function Bi(n){let e,t,i,s,r,l,o;function a(f){n[10](f)}let c={time:n[4]};n[0]!==void 0&&(c.remainedSeconds=n[0]),t=new ui({props:c}),Xe.push(()=>Ht(t,"remainedSeconds",a)),t.$on("alarming",n[6]),t.$on("stop",n[9]),r=new Ut({props:{title:"Volume",$$slots:{default:[Fi]},$$scope:{ctx:n}}});let u=n[2]!==fe.STOPPED&&dn(n);return{c(){e=T("div"),te(t.$$.fragment),s=P(),te(r.$$.fragment),l=P(),u&&u.c(),this.h()},l(f){e=b(f,"DIV",{class:!0});var h=D(e);ne(t.$$.fragment,h),s=R(h),ne(r.$$.fragment,h),l=R(h),u&&u.l(h),h.forEach(m),this.h()},h(){d(e,"class","clock svelte-1viwsah")},m(f,h){V(f,e,h),ie(t,e,null),v(e,s),ie(r,e,null),v(e,l),u&&u.m(e,null),o=!0},p(f,h){const _={};h&16&&(_.time=f[4]),!i&&h&1&&(i=!0,_.remainedSeconds=f[0],Lt(()=>i=!1)),t.$set(_);const k={};h&65536&&(k.$$scope={dirty:h,ctx:f}),r.$set(k),f[2]!==fe.STOPPED?u?(u.p(f,h),h&4&&B(u,1)):(u=dn(f),u.c(),B(u,1),u.m(e,null)):u&&(Be(),z(u,1,1,()=>{u=null}),ze())},i(f){o||(B(t.$$.fragment,f),B(r.$$.fragment,f),B(u),o=!0)},o(f){z(t.$$.fragment,f),z(r.$$.fragment,f),z(u),o=!1},d(f){f&&m(e),se(t),se(r),u&&u.d()}}}function zi(n){let e,t,i,s,r={$$slots:{default:[Bi]},$$scope:{ctx:n}};return e=new pi({props:r}),n[11](e),e.$on("start",n[5]),e.$on("stop",n[12]),i=new $i({props:{active:n[2]===fe.WAITING_FOR_STOP,debugFlag:n[1]}}),i.$on("off",n[13]),{c(){te(e.$$.fragment),t=P(),te(i.$$.fragment)},l(l){ne(e.$$.fragment,l),t=R(l),ne(i.$$.fragment,l)},m(l,o){ie(e,l,o),V(l,t,o),ie(i,l,o),s=!0},p(l,[o]){const a={};o&65557&&(a.$$scope={dirty:o,ctx:l}),e.$set(a);const c={};o&4&&(c.active=l[2]===fe.WAITING_FOR_STOP),o&2&&(c.debugFlag=l[1]),i.$set(c)},i(l){s||(B(e.$$.fragment,l),B(i.$$.fragment,l),s=!0)},o(l){z(e.$$.fragment,l),z(i.$$.fragment,l),s=!1},d(l){l&&m(t),n[11](null),se(e,l),se(i,l)}}}function Gi(n,e,t){let i,s,r;Me(n,Ri,S=>t(2,i=S)),Me(n,Li,S=>t(14,s=S)),Me(n,Hi,S=>t(4,r=S));const l=nt();let{debugFlag:o}=e,{remainedSeconds:a}=e,c;function u(S){i===fe.RUNNING&&h(Fe.EMIT),je.start(S.detail.timer,S.detail.name,o),l("current",s)}function f(){const S=typeof document<"u"&&document.visibilityState==="visible";je.alarm(S),S&&(c&&c.clear(),l("timer",s))}function h(S=Fe.EMIT){je.stop(),c&&c.clear(),S===Fe.EMIT&&l("timer",s)}function _(){je.reset(),c&&c.clear(),l("cancel")}function k(){i!==fe.STOPPED&&h(Fe.EMIT)}Pn(()=>{document.addEventListener("visibilitychange",function(){i===fe.WAITING_FOR_STOP&&document.visibilityState==="visible"&&(console.log("visibility change to visible"),h(Fe.EMIT))})});function y(S){a=S,t(0,a)}function M(S){Xe[S?"unshift":"push"](()=>{c=S,t(3,c)})}const N=()=>h(Fe.DO_NOT_EMIT),A=()=>h(Fe.DO_NOT_EMIT);return n.$$set=S=>{"debugFlag"in S&&t(1,o=S.debugFlag),"remainedSeconds"in S&&t(0,a=S.remainedSeconds)},n.$$.update=()=>{n.$$.dirty&4&&ji(i)},[a,o,i,c,r,u,f,h,_,k,y,M,N,A]}class Wi extends me{constructor(e){super(),ve(this,e,Gi,zi,he,{debugFlag:1,remainedSeconds:0})}}function qi(n){let e;return{c(){e=q("Active for")},l(t){e=X(t,"Active for")},m(t,i){V(t,e,i)},d(t){t&&m(e)}}}function Xi(n){let e;return{c(){e=q("Rest for")},l(t){e=X(t,"Rest for")},m(t,i){V(t,e,i)},d(t){t&&m(e)}}}function hn(n){let e,t="running";return{c(){e=T("span"),e.textContent=t,this.h()},l(i){e=b(i,"SPAN",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-1383egi"&&(e.textContent=t),this.h()},h(){d(e,"class","active-badge svelte-2774qv")},m(i,s){V(i,e,s)},d(i){i&&m(e)}}}function Ki(n){let e,t,i,s,r,l,o,a=sn(n[2])+"",c,u,f,h;function _(N,A){return N[1]?Xi:qi}let k=_(n),y=k(n),M=n[0]&&hn();return{c(){e=T("div"),t=T("snap"),i=q(n[3]),s=P(),r=T("snap"),y.c(),l=P(),o=T("snap"),c=q(a),u=P(),M&&M.c(),this.h()},l(N){e=b(N,"DIV",{class:!0});var A=D(e);t=b(A,"SNAP",{class:!0});var S=D(t);i=X(S,n[3]),S.forEach(m),s=R(A),r=b(A,"SNAP",{});var O=D(r);y.l(O),O.forEach(m),l=R(A),o=b(A,"SNAP",{class:!0});var C=D(o);c=X(C,a),C.forEach(m),u=R(A),M&&M.l(A),A.forEach(m),this.h()},h(){d(t,"class","time work svelte-2774qv"),d(o,"class","duration svelte-2774qv"),d(e,"class","logline svelte-2774qv"),Ne(e,"topLog",n[0]),Ne(e,"rest",n[1]),Ne(e,"clickable",!n[0])},m(N,A){V(N,e,A),v(e,t),v(t,i),v(e,s),v(e,r),y.m(r,null),v(e,l),v(e,o),v(o,c),v(e,u),M&&M.m(e,null),f||(h=G(e,"click",n[4]),f=!0)},p(N,[A]){k!==(k=_(N))&&(y.d(1),y=k(N),y&&(y.c(),y.m(r,null))),A&4&&a!==(a=sn(N[2])+"")&&ee(c,a),N[0]?M||(M=hn(),M.c(),M.m(e,null)):M&&(M.d(1),M=null),A&1&&Ne(e,"topLog",N[0]),A&2&&Ne(e,"rest",N[1]),A&1&&Ne(e,"clickable",!N[0])},i:Q,o:Q,d(N){N&&m(e),y.d(),M&&M.d(),f=!1,h()}}}function Ji(n){let e=n.getHours().toString().padStart(2,"0"),t=n.getMinutes().toString().padStart(2,"0");return`${e}:${t}`}function Yi(n,e,t){let i,s,{start:r}=e,{finish:l}=e,{name:o}=e,{value:a=0}=e,{topLog:c=!1}=e;const u=nt();let f=Ji(r);function h(){c||u("click")}return n.$$set=_=>{"start"in _&&t(5,r=_.start),"finish"in _&&t(6,l=_.finish),"name"in _&&t(7,o=_.name),"value"in _&&t(8,a=_.value),"topLog"in _&&t(0,c=_.topLog)},n.$$.update=()=>{n.$$.dirty&96&&t(2,i=(l.getTime()-r.getTime())/1e3),n.$$.dirty&128&&t(1,s=o===ye.REST)},[c,s,i,f,h,r,l,o,a]}class Kn extends me{constructor(e){super(),ve(this,e,Yi,Ki,he,{start:5,finish:6,name:7,value:8,topLog:0})}}const zt=Tt(null);function vt(n){zt.set(n)}function mt(){zt.set(null)}function Zi(n){const e=n.slice(),t=e[23].getTime()-e[1].start.getTime();e[25]=t;const i=e[1].finish.getTime()-e[1].start.getTime();e[5]=i;const s=e[25]/e[5]*e[24];e[26]=s;const r=e[24]-e[26];e[27]=r;const l=parseFloat(e[20].left)+e[26];return e[28]=l,e}function Nt(n){const e=n.slice(),t=e[8](e[1]);e[20]=t;const i=e[9](e[1]);e[21]=i;const s=e[10](e[1],e[4]);e[22]=s;const r=e[22]?e[11](e[1],e[4]):null;e[23]=r;const l=parseFloat(e[20].width);return e[24]=l,e}function mn(n,e,t){const i=n.slice();i[29]=e[t];const s=i[8](i[29]);i[20]=s;const r=i[9](i[29]);i[21]=r;const l=i[10](i[29],i[0]);i[22]=l;const o=i[22]?i[11](i[29],i[0]):null;i[23]=o;const a=parseFloat(i[20].width);i[24]=a;const c=!i[21]&&i[24]<.5?"2px":i[20].width;return i[30]=c,i}function Qi(n){const e=n.slice(),t=e[23].getTime()-e[29].start.getTime();e[25]=t;const i=e[29].finish.getTime()-e[29].start.getTime();e[5]=i;const s=e[25]/e[5]*e[24];e[26]=s;const r=e[24]-e[26];e[27]=r;const l=parseFloat(e[20].left)+e[26];return e[28]=l,e}function vn(n,e,t){const i=n.slice();return i[33]=e[t],i}function _n(n){let e;return{c(){e=T("div"),this.h()},l(t){e=b(t,"DIV",{class:!0,style:!0,title:!0}),D(e).forEach(m),this.h()},h(){d(e,"class","future-overlay svelte-1k1xkrk"),L(e,"left",n[6].left),L(e,"width",n[6].width),d(e,"title","Future time")},m(t,i){V(t,e,i)},p(t,i){i[0]&64&&L(e,"left",t[6].left),i[0]&64&&L(e,"width",t[6].width)},d(t){t&&m(e)}}}function gn(n){let e,t,i=n[33].label+"",s,r;return{c(){e=T("div"),t=T("div"),s=q(i),r=P(),this.h()},l(l){e=b(l,"DIV",{class:!0,style:!0});var o=D(e);t=b(o,"DIV",{class:!0});var a=D(t);s=X(a,i),a.forEach(m),r=R(o),o.forEach(m),this.h()},h(){d(t,"class","grid-label svelte-1k1xkrk"),d(e,"class","grid-line svelte-1k1xkrk"),L(e,"left",n[33].position+"%")},m(l,o){V(l,e,o),v(e,t),v(t,s),v(e,r)},p(l,o){o[0]&128&&i!==(i=l[33].label+"")&&ee(s,i),o[0]&128&&L(e,"left",l[33].position+"%")},d(l){l&&m(e)}}}function xi(n){let e,t,i,s,r;function l(){return n[16](n[29])}return{c(){e=T("div"),this.h()},l(o){e=b(o,"DIV",{class:!0,style:!0,title:!0}),D(e).forEach(m),this.h()},h(){d(e,"class",t="timer-block "+(n[21]?n[22]?"overtime":"work":"rest")+" svelte-1k1xkrk"),L(e,"left",n[20].left),L(e,"width",n[30]),L(e,"min-width",n[21]?"0":"2px"),L(e,"cursor","pointer"),d(e,"title",i=Y(n[29].start)+" - "+Y(n[29].finish)+" ("+kt(n[29])+")"+(n[22]?" âš ï¸ Overtime":""))},m(o,a){V(o,e,a),s||(r=G(e,"click",l),s=!0)},p(o,a){n=o,a[0]&1&&t!==(t="timer-block "+(n[21]?n[22]?"overtime":"work":"rest")+" svelte-1k1xkrk")&&d(e,"class",t),a[0]&1&&L(e,"left",n[20].left),a[0]&1&&L(e,"width",n[30]),a[0]&1&&L(e,"min-width",n[21]?"0":"2px"),a[0]&1&&i!==(i=Y(n[29].start)+" - "+Y(n[29].finish)+" ("+kt(n[29])+")"+(n[22]?" âš ï¸ Overtime":""))&&d(e,"title",i)},d(o){o&&m(e),s=!1,r()}}}function pn(n){let e,t,i,s,r,l,o;function a(){return n[14](n[29])}function c(){return n[15](n[29])}return{c(){e=T("div"),i=P(),s=T("div"),this.h()},l(u){e=b(u,"DIV",{class:!0,style:!0,title:!0}),D(e).forEach(m),i=R(u),s=b(u,"DIV",{class:!0,style:!0,title:!0}),D(s).forEach(m),this.h()},h(){d(e,"class","timer-block work svelte-1k1xkrk"),L(e,"left",n[20].left),L(e,"width",n[26]+"%"),L(e,"cursor","pointer"),d(e,"title",t=Y(n[29].start)+" - "+Y(n[23])+" (Normal)"),d(s,"class","timer-block overtime svelte-1k1xkrk"),L(s,"left",n[28]+"%"),L(s,"width",n[27]+"%"),L(s,"cursor","pointer"),d(s,"title",r=Y(n[23])+" - "+Y(n[29].finish)+" âš ï¸ Overtime")},m(u,f){V(u,e,f),V(u,i,f),V(u,s,f),l||(o=[G(e,"click",a),G(s,"click",c)],l=!0)},p(u,f){n=u,f[0]&1&&L(e,"left",n[20].left),f[0]&1&&L(e,"width",n[26]+"%"),f[0]&1&&t!==(t=Y(n[29].start)+" - "+Y(n[23])+" (Normal)")&&d(e,"title",t),f[0]&1&&L(s,"left",n[28]+"%"),f[0]&1&&L(s,"width",n[27]+"%"),f[0]&1&&r!==(r=Y(n[23])+" - "+Y(n[29].finish)+" âš ï¸ Overtime")&&d(s,"title",r)},d(u){u&&(m(e),m(i),m(s)),l=!1,Ge(o)}}}function kn(n,e){let t,i,s;function r(c,u){return u[0]&1&&(i=null),i==null&&(i=!!(c[21]&&c[23]&&c[23].getTime()>c[29].start.getTime()&&c[23].getTime()<c[29].finish.getTime())),i?pn:xi}function l(c,u){return u===pn?Qi(c):c}let o=r(e,[-1,-1]),a=o(l(e,o));return{key:n,first:null,c(){t=Te(),a.c(),s=Te(),this.h()},l(c){t=Te(),a.l(c),s=Te(),this.h()},h(){this.first=t},m(c,u){V(c,t,u),a.m(c,u),V(c,s,u)},p(c,u){e=c,o===(o=r(e,u))&&a?a.p(l(e,o),u):(a.d(1),a=o(l(e,o)),a&&(a.c(),a.m(s.parentNode,s)))},d(c){c&&(m(t),m(s)),a.d(c)}}}function wn(n){let e,t;function i(o,a){return a[0]&18&&(e=null),e==null&&(e=!!(o[21]&&o[23]&&o[23].getTime()>o[1].start.getTime()&&o[23].getTime()<o[1].finish.getTime())),e?Tn:es}function s(o,a){return a===Tn?Zi(o):o}let r=i(n,[-1,-1]),l=r(s(n,r));return{c(){l.c(),t=Te()},l(o){l.l(o),t=Te()},m(o,a){l.m(o,a),V(o,t,a)},p(o,a){r===(r=i(o,a))&&l?l.p(s(o,r),a):(l.d(1),l=r(s(o,r)),l&&(l.c(),l.m(t.parentNode,t)))},d(o){o&&m(t),l.d(o)}}}function es(n){let e,t,i;return{c(){e=T("div"),this.h()},l(s){e=b(s,"DIV",{class:!0,style:!0,title:!0}),D(e).forEach(m),this.h()},h(){d(e,"class",t="timer-block active "+(n[21]?n[22]?"overtime":"work":"rest")+" svelte-1k1xkrk"),L(e,"left",n[20].left),L(e,"width",n[20].width),d(e,"title",i="Active: "+Y(n[1].start)+" - now ("+kt(n[1])+")"+(n[22]?" âš ï¸ Overtime":""))},m(s,r){V(s,e,r)},p(s,r){r[0]&18&&t!==(t="timer-block active "+(s[21]?s[22]?"overtime":"work":"rest")+" svelte-1k1xkrk")&&d(e,"class",t),r[0]&2&&L(e,"left",s[20].left),r[0]&2&&L(e,"width",s[20].width),r[0]&18&&i!==(i="Active: "+Y(s[1].start)+" - now ("+kt(s[1])+")"+(s[22]?" âš ï¸ Overtime":""))&&d(e,"title",i)},d(s){s&&m(e)}}}function Tn(n){let e,t,i,s,r;return{c(){e=T("div"),i=P(),s=T("div"),this.h()},l(l){e=b(l,"DIV",{class:!0,style:!0,title:!0}),D(e).forEach(m),i=R(l),s=b(l,"DIV",{class:!0,style:!0,title:!0}),D(s).forEach(m),this.h()},h(){d(e,"class","timer-block active work svelte-1k1xkrk"),L(e,"left",n[20].left),L(e,"width",n[26]+"%"),d(e,"title",t="Active: "+Y(n[1].start)+" - "+Y(n[23])+" (Normal)"),d(s,"class","timer-block active overtime svelte-1k1xkrk"),L(s,"left",n[28]+"%"),L(s,"width",n[27]+"%"),d(s,"title",r="Active: "+Y(n[23])+" - now âš ï¸ Overtime")},m(l,o){V(l,e,o),V(l,i,o),V(l,s,o)},p(l,o){o[0]&2&&L(e,"left",l[20].left),o[0]&18&&L(e,"width",l[26]+"%"),o[0]&18&&t!==(t="Active: "+Y(l[1].start)+" - "+Y(l[23])+" (Normal)")&&d(e,"title",t),o[0]&18&&L(s,"left",l[28]+"%"),o[0]&18&&L(s,"width",l[27]+"%"),o[0]&18&&r!==(r="Active: "+Y(l[23])+" - now âš ï¸ Overtime")&&d(s,"title",r)},d(l){l&&(m(e),m(i),m(s))}}}function ts(n){let e,t,i='<span class="timeline-title svelte-1k1xkrk">Timeline</span> <div class="legend svelte-1k1xkrk"><span class="legend-item svelte-1k1xkrk"><span class="legend-color work svelte-1k1xkrk"></span> <span>Work</span></span> <span class="legend-item svelte-1k1xkrk" title="Overtime: 2+ min after alarm, or 25+ min for consecutive work"><span class="legend-color overtime svelte-1k1xkrk"></span> <span>Overtime</span></span> <span class="legend-item svelte-1k1xkrk"><span class="legend-color rest svelte-1k1xkrk"></span> <span>Rest</span></span></div>',s,r,l,o=Y(new Date(n[2]))+"",a,c,u,f=Y(new Date(n[3]))+"",h,_,k,y,M=[],N=new Map,A,S=n[6].visible&&_n(n),O=Ie(n[7]),C=[];for(let p=0;p<O.length;p+=1)C[p]=gn(vn(n,O,p));let j=Ie(n[0]);const I=p=>p[29].start;for(let p=0;p<j.length;p+=1){let w=mn(n,j,p),E=I(w);N.set(E,M[p]=kn(E,w))}let g=n[1]&&wn(Nt(n));return{c(){e=T("div"),t=T("div"),t.innerHTML=i,s=P(),r=T("div"),l=T("div"),a=q(o),c=P(),u=T("div"),h=q(f),_=P(),S&&S.c(),k=P();for(let p=0;p<C.length;p+=1)C[p].c();y=P();for(let p=0;p<M.length;p+=1)M[p].c();A=P(),g&&g.c(),this.h()},l(p){e=b(p,"DIV",{class:!0});var w=D(e);t=b(w,"DIV",{class:!0,"data-svelte-h":!0}),le(t)!=="svelte-1sof6z9"&&(t.innerHTML=i),s=R(w),r=b(w,"DIV",{class:!0});var E=D(r);l=b(E,"DIV",{class:!0});var F=D(l);a=X(F,o),F.forEach(m),c=R(E),u=b(E,"DIV",{class:!0});var $=D(u);h=X($,f),$.forEach(m),_=R(E),S&&S.l(E),k=R(E);for(let U=0;U<C.length;U+=1)C[U].l(E);y=R(E);for(let U=0;U<M.length;U+=1)M[U].l(E);A=R(E),g&&g.l(E),E.forEach(m),w.forEach(m),this.h()},h(){d(t,"class","timeline-header svelte-1k1xkrk"),d(l,"class","time-label start svelte-1k1xkrk"),d(u,"class","time-label end svelte-1k1xkrk"),d(r,"class","timeline-bar svelte-1k1xkrk"),d(e,"class","timeline-container svelte-1k1xkrk")},m(p,w){V(p,e,w),v(e,t),v(e,s),v(e,r),v(r,l),v(l,a),v(r,c),v(r,u),v(u,h),v(r,_),S&&S.m(r,null),v(r,k);for(let E=0;E<C.length;E+=1)C[E]&&C[E].m(r,null);v(r,y);for(let E=0;E<M.length;E+=1)M[E]&&M[E].m(r,null);v(r,A),g&&g.m(r,null)},p(p,w){if(w[0]&4&&o!==(o=Y(new Date(p[2]))+"")&&ee(a,o),w[0]&8&&f!==(f=Y(new Date(p[3]))+"")&&ee(h,f),p[6].visible?S?S.p(p,w):(S=_n(p),S.c(),S.m(r,k)):S&&(S.d(1),S=null),w[0]&128){O=Ie(p[7]);let E;for(E=0;E<O.length;E+=1){const F=vn(p,O,E);C[E]?C[E].p(F,w):(C[E]=gn(F),C[E].c(),C[E].m(r,y))}for(;E<C.length;E+=1)C[E].d(1);C.length=O.length}w[0]&3841&&(j=Ie(p[0]),M=Un(M,w,I,1,p,j,N,r,xn,kn,A,mn)),p[1]?g?g.p(Nt(p),w):(g=wn(Nt(p)),g.c(),g.m(r,null)):g&&(g.d(1),g=null)},i:Q,o:Q,d(p){p&&m(e),S&&S.d(),_t(C,p);for(let w=0;w<M.length;w+=1)M[w].d();g&&g.d()}}}function Y(n){return n.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!1})}function kt(n){return`${Math.round(n.durationS()/60)} min`}function ns(n,e,t){let i,s,r,l,o,a,{timers:c=[]}=e,{activeTimer:u=null}=e;const f=40*60*1e3;let h=0,_=0;function k(I){if(s===0)return{left:"0%",width:"0%"};const g=I.start.getTime()-r,p=I.finish.getTime()-I.start.getTime(),w=g/s*100,E=p/s*100;return{left:`${w}%`,width:`${E}%`}}function y(I){return I.name===ye.WORK}function M(I,g){const p=g.findIndex($=>$.start.getTime()===I.start.getTime());if(p<=0)return!0;const w=g[p-1];return y(w)?(I.start.getTime()-w.finish.getTime())/(1e3*60)>=5:w.durationS()/60>=5}function N(I,g){if(!y(I))return[];const p=[I],w=g.findIndex(E=>E.start.getTime()===I.start.getTime());for(let E=w-1;E>=0;E--){const F=g[E],$=p[0],J=($.start.getTime()-F.finish.getTime())/(1e3*60);if(y(F)&&J<5)p.unshift(F);else{if(!y(F)&&F.durationS()/60<5)continue;if(!y(F)&&M($,g))break}}return p}function A(I,g){if(!y(I)||!I.value||I.value===0)return!1;const p=2,w=25,E=N(I,g);if(E.length===1){const F=I.durationS()/60,$=I.value;return F>$+p}else{const F=E.reduce((U,J)=>U+(J.value||0),0);return E.reduce((U,J)=>U+J.durationS()/60,0)>F+w}}function S(I,g){if(!A(I,g)||!I.value)return null;const p=2,w=25,E=N(I,g);if(E.length===1){const F=I.start.getTime()+(I.value+p)*60*1e3;return new Date(F)}else{const $=E.reduce((J,x)=>J+(x.value||0),0)+w;let U=0;for(const J of E){const x=J.durationS()/60,Se=U+x;if(Se>$){const Ce=$-U,$e=J.start.getTime()+Ce*60*1e3;return new Date($e)}U=Se}}return null}const O=I=>vt(I),C=I=>vt(I),j=I=>vt(I);return n.$$set=I=>{"timers"in I&&t(0,c=I.timers),"activeTimer"in I&&t(1,u=I.activeTimer)},n.$$.update=()=>{n.$$.dirty[0]&3&&t(4,i=u?[...c,u]:c),n.$$.dirty[0]&16&&t(2,r=i.length===0?Date.now():Math.min(...i.map(I=>I.start.getTime()))),n.$$.dirty[0]&12310&&t(3,l=(()=>{if(i.length===0)return Date.now()+f;const g=Math.max(...i.map(w=>w.finish.getTime()));let p=Math.max(g,r+f);if(p+=h*36e5,u&&p!==_){const w=u.finish.getTime(),E=p-w,F=10*60*1e3;E<F&&(t(12,h++,h),p+=36e5,t(13,_=p),console.log("Extended timeline, total extensions:",h,"new end:",new Date(p)))}return p})()),n.$$.dirty[0]&12&&t(5,s=l-r),n.$$.dirty[0]&44&&t(7,o=(()=>{if(s===0)return[];const I=[],g=new Date(r),p=new Date(l),w=new Date(g);for(w.setMinutes(0,0,0),w.setHours(w.getHours()+1);w.getTime()<=p.getTime();){const F=(w.getTime()-r)/s*100;if(F>=0&&F<=100){const $=F<5||F>95;I.push({position:F,label:$?"":w.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!1})})}w.setHours(w.getHours()+1)}return I})()),n.$$.dirty[0]&44&&t(6,a=(()=>{const I=Date.now();if(l>I){const g=Math.max(r,I),p=g-r,w=l-g,E=p/s*100,F=w/s*100;return{left:`${E}%`,width:`${F}%`,visible:F>0}}return{left:"0%",width:"0%",visible:!1}})())},[c,u,r,l,i,s,a,o,k,y,A,S,h,_,O,C,j]}class is extends me{constructor(e){super(),ve(this,e,ns,ts,he,{timers:0,activeTimer:1},null,[-1,-1])}}function $t(n){const e=n.slice(),t=e[10](e[0],e[7].finish);return e[37]=t,e}function At(n){const e=n.slice(),t=e[10](e[1],e[0]);return e[37]=t,e}function Vt(n){const e=n.slice(),t=e[10](e[8].start,e[1]);return e[37]=t,e}function bn(n,e,t){const i=n.slice();return i[38]=e[t],i}function Sn(n){let e,t,i,s,r="Edit Timer",l,o,a="Ã—",c,u,f,h,_,k="Type:",y,M,N=n[4].name+"",A,S,O,C,j="Duration:",I,g,p,w,E,F,$,U,J,x=de(n[2])+"",Se,Ce,$e,We=de(n[3])+"",Ke,it,_e,H,K,pe,re,Je="ðŸ’¡ Drag the edges to adjust timer boundaries",qe,W,ke,Pe="Delete",st,Ae,Et,Re,Gt="Cancel",Dt,Le,Wt="Save",It,qt,oe=n[6].length>0&&En(n),ae=n[8]&&In(Vt(n)),ce=n[4]&&yn(At(n)),ue=n[7]&&Mn($t(n));return{c(){e=T("div"),t=T("div"),i=T("div"),s=T("h2"),s.textContent=r,l=P(),o=T("button"),o.textContent=a,c=P(),u=T("div"),f=T("div"),h=T("div"),_=T("span"),_.textContent=k,y=P(),M=T("span"),A=q(N),S=P(),O=T("div"),C=T("span"),C.textContent=j,I=P(),g=T("span"),p=q(n[9]),w=q(" min"),E=P(),oe&&oe.c(),F=P(),$=T("div"),U=T("div"),J=T("span"),Se=q(x),Ce=P(),$e=T("span"),Ke=q(We),it=P(),_e=T("div"),ae&&ae.c(),H=P(),ce&&ce.c(),K=P(),ue&&ue.c(),pe=P(),re=T("div"),re.textContent=Je,qe=P(),W=T("div"),ke=T("button"),ke.textContent=Pe,st=P(),Ae=T("div"),Et=P(),Re=T("button"),Re.textContent=Gt,Dt=P(),Le=T("button"),Le.textContent=Wt,this.h()},l(Z){e=b(Z,"DIV",{class:!0});var be=D(e);t=b(be,"DIV",{class:!0});var Ye=D(t);i=b(Ye,"DIV",{class:!0});var rt=D(i);s=b(rt,"H2",{class:!0,"data-svelte-h":!0}),le(s)!=="svelte-1ut3txv"&&(s.textContent=r),l=R(rt),o=b(rt,"BUTTON",{class:!0,"data-svelte-h":!0}),le(o)!=="svelte-y9ayml"&&(o.textContent=a),rt.forEach(m),c=R(Ye),u=b(Ye,"DIV",{class:!0});var Ze=D(u);f=b(Ze,"DIV",{class:!0});var ot=D(f);h=b(ot,"DIV",{class:!0});var at=D(h);_=b(at,"SPAN",{class:!0,"data-svelte-h":!0}),le(_)!=="svelte-owo3qx"&&(_.textContent=k),y=R(at),M=b(at,"SPAN",{class:!0});var Xt=D(M);A=X(Xt,N),Xt.forEach(m),at.forEach(m),S=R(ot),O=b(ot,"DIV",{class:!0});var ct=D(O);C=b(ct,"SPAN",{class:!0,"data-svelte-h":!0}),le(C)!=="svelte-2ef875"&&(C.textContent=j),I=R(ct),g=b(ct,"SPAN",{class:!0});var yt=D(g);p=X(yt,n[9]),w=X(yt," min"),yt.forEach(m),ct.forEach(m),ot.forEach(m),E=R(Ze),oe&&oe.l(Ze),F=R(Ze),$=b(Ze,"DIV",{class:!0});var Qe=D($);U=b(Qe,"DIV",{class:!0});var ut=D(U);J=b(ut,"SPAN",{});var Kt=D(J);Se=X(Kt,x),Kt.forEach(m),Ce=R(ut),$e=b(ut,"SPAN",{});var Jt=D($e);Ke=X(Jt,We),Jt.forEach(m),ut.forEach(m),it=R(Qe),_e=b(Qe,"DIV",{class:!0});var xe=D(_e);ae&&ae.l(xe),H=R(xe),ce&&ce.l(xe),K=R(xe),ue&&ue.l(xe),xe.forEach(m),pe=R(Qe),re=b(Qe,"DIV",{class:!0,"data-svelte-h":!0}),le(re)!=="svelte-173xjy6"&&(re.textContent=Je),Qe.forEach(m),Ze.forEach(m),qe=R(Ye),W=b(Ye,"DIV",{class:!0});var He=D(W);ke=b(He,"BUTTON",{class:!0,"data-svelte-h":!0}),le(ke)!=="svelte-6r50uh"&&(ke.textContent=Pe),st=R(He),Ae=b(He,"DIV",{class:!0}),D(Ae).forEach(m),Et=R(He),Re=b(He,"BUTTON",{class:!0,"data-svelte-h":!0}),le(Re)!=="svelte-1ph2inm"&&(Re.textContent=Gt),Dt=R(He),Le=b(He,"BUTTON",{class:!0,"data-svelte-h":!0}),le(Le)!=="svelte-9t0vpj"&&(Le.textContent=Wt),He.forEach(m),Ye.forEach(m),be.forEach(m),this.h()},h(){d(s,"class","svelte-khj96w"),d(o,"class","close-btn svelte-khj96w"),d(i,"class","modal-header svelte-khj96w"),d(_,"class","label svelte-khj96w"),d(M,"class","value svelte-khj96w"),d(h,"class","info svelte-khj96w"),d(C,"class","label svelte-khj96w"),d(g,"class","value svelte-khj96w"),d(O,"class","info svelte-khj96w"),d(f,"class","info-row svelte-khj96w"),d(U,"class","timeline-labels svelte-khj96w"),d(_e,"class","timeline-track svelte-khj96w"),d(re,"class","timeline-hint svelte-khj96w"),d($,"class","timeline-editor svelte-khj96w"),d(u,"class","modal-body svelte-khj96w"),d(ke,"class","btn btn-delete svelte-khj96w"),d(Ae,"class","spacer svelte-khj96w"),d(Re,"class","btn btn-cancel svelte-khj96w"),d(Le,"class","btn btn-save svelte-khj96w"),d(W,"class","modal-footer svelte-khj96w"),d(t,"class","modal svelte-khj96w"),d(e,"class","modal-backdrop svelte-khj96w")},m(Z,be){V(Z,e,be),v(e,t),v(t,i),v(i,s),v(i,l),v(i,o),v(t,c),v(t,u),v(u,f),v(f,h),v(h,_),v(h,y),v(h,M),v(M,A),v(f,S),v(f,O),v(O,C),v(O,I),v(O,g),v(g,p),v(g,w),v(u,E),oe&&oe.m(u,null),v(u,F),v(u,$),v($,U),v(U,J),v(J,Se),v(U,Ce),v(U,$e),v($e,Ke),v($,it),v($,_e),ae&&ae.m(_e,null),v(_e,H),ce&&ce.m(_e,null),v(_e,K),ue&&ue.m(_e,null),v($,pe),v($,re),n[30]($),v(t,qe),v(t,W),v(W,ke),v(W,st),v(W,Ae),v(W,Et),v(W,Re),v(W,Dt),v(W,Le),It||(qt=[G(o,"click",n[16]),G(i,"click",Qt(n[27])),G(u,"click",Qt(n[26])),G(ke,"click",n[17]),G(Re,"click",n[16]),G(Le,"click",n[15]),G(e,"click",n[16])],It=!0)},p(Z,be){be[0]&16&&N!==(N=Z[4].name+"")&&ee(A,N),be[0]&512&&ee(p,Z[9]),Z[6].length>0?oe?oe.p(Z,be):(oe=En(Z),oe.c(),oe.m(u,F)):oe&&(oe.d(1),oe=null),be[0]&4&&x!==(x=de(Z[2])+"")&&ee(Se,x),be[0]&8&&We!==(We=de(Z[3])+"")&&ee(Ke,We),Z[8]?ae?ae.p(Vt(Z),be):(ae=In(Vt(Z)),ae.c(),ae.m(_e,H)):ae&&(ae.d(1),ae=null),Z[4]?ce?ce.p(At(Z),be):(ce=yn(At(Z)),ce.c(),ce.m(_e,K)):ce&&(ce.d(1),ce=null),Z[7]?ue?ue.p($t(Z),be):(ue=Mn($t(Z)),ue.c(),ue.m(_e,null)):ue&&(ue.d(1),ue=null)},d(Z){Z&&m(e),oe&&oe.d(),ae&&ae.d(),ce&&ce.d(),ue&&ue.d(),n[30](null),It=!1,Ge(qt)}}}function En(n){let e,t=Ie(n[6]),i=[];for(let s=0;s<t.length;s+=1)i[s]=Dn(bn(n,t,s));return{c(){e=T("div");for(let s=0;s<i.length;s+=1)i[s].c();this.h()},l(s){e=b(s,"DIV",{class:!0});var r=D(e);for(let l=0;l<i.length;l+=1)i[l].l(r);r.forEach(m),this.h()},h(){d(e,"class","warnings svelte-khj96w")},m(s,r){V(s,e,r);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(e,null)},p(s,r){if(r[0]&64){t=Ie(s[6]);let l;for(l=0;l<t.length;l+=1){const o=bn(s,t,l);i[l]?i[l].p(o,r):(i[l]=Dn(o),i[l].c(),i[l].m(e,null))}for(;l<i.length;l+=1)i[l].d(1);i.length=t.length}},d(s){s&&m(e),_t(i,s)}}}function Dn(n){let e,t,i=n[38]+"",s;return{c(){e=T("div"),t=q("âš ï¸ "),s=q(i),this.h()},l(r){e=b(r,"DIV",{class:!0});var l=D(e);t=X(l,"âš ï¸ "),s=X(l,i),l.forEach(m),this.h()},h(){d(e,"class","warning-item svelte-khj96w")},m(r,l){V(r,e,l),v(e,t),v(e,s)},p(r,l){l[0]&64&&i!==(i=r[38]+"")&&ee(s,i)},d(r){r&&m(e)}}}function In(n){let e,t,i=n[8].name+"",s,r,l;return{c(){e=T("div"),t=T("span"),s=q(i),this.h()},l(o){e=b(o,"DIV",{class:!0,style:!0,title:!0});var a=D(e);t=b(a,"SPAN",{class:!0});var c=D(t);s=X(c,i),c.forEach(m),a.forEach(m),this.h()},h(){d(t,"class","timer-label svelte-khj96w"),d(e,"class",r="timer-block prev "+(n[14](n[8])?"work":"rest")+" svelte-khj96w"),L(e,"left",n[37].left),L(e,"width",n[37].width),d(e,"title",l=n[8].name+": "+de(n[8].start)+" - "+de(n[1]))},m(o,a){V(o,e,a),v(e,t),v(t,s)},p(o,a){a[0]&256&&i!==(i=o[8].name+"")&&ee(s,i),a[0]&256&&r!==(r="timer-block prev "+(o[14](o[8])?"work":"rest")+" svelte-khj96w")&&d(e,"class",r),a[0]&258&&L(e,"left",o[37].left),a[0]&258&&L(e,"width",o[37].width),a[0]&258&&l!==(l=o[8].name+": "+de(o[8].start)+" - "+de(o[1]))&&d(e,"title",l)},d(o){o&&m(e)}}}function yn(n){let e,t,i,s,r,l=n[4].name+"",o,a,c,u=de(n[1])+"",f,h,_=de(n[0])+"",k,y,M,N,A,S;return{c(){e=T("div"),t=T("div"),i=P(),s=T("div"),r=T("div"),o=q(l),a=P(),c=T("div"),f=q(u),h=q(" - "),k=q(_),y=P(),M=T("div"),this.h()},l(O){e=b(O,"DIV",{class:!0,style:!0});var C=D(e);t=b(C,"DIV",{class:!0,title:!0}),D(t).forEach(m),i=R(C),s=b(C,"DIV",{class:!0});var j=D(s);r=b(j,"DIV",{class:!0});var I=D(r);o=X(I,l),I.forEach(m),a=R(j),c=b(j,"DIV",{class:!0});var g=D(c);f=X(g,u),h=X(g," - "),k=X(g,_),g.forEach(m),j.forEach(m),y=R(C),M=b(C,"DIV",{class:!0,title:!0}),D(M).forEach(m),C.forEach(m),this.h()},h(){d(t,"class","drag-handle left svelte-khj96w"),d(t,"title","Drag to adjust start time"),d(r,"class","timer-label svelte-khj96w"),d(c,"class","timer-times svelte-khj96w"),d(s,"class","timer-content svelte-khj96w"),d(M,"class","drag-handle right svelte-khj96w"),d(M,"title","Drag to adjust end time"),d(e,"class",N="timer-block current "+(n[14](n[4])?"work":"rest")+" svelte-khj96w"),L(e,"left",n[37].left),L(e,"width",n[37].width)},m(O,C){V(O,e,C),v(e,t),v(e,i),v(e,s),v(s,r),v(r,o),v(s,a),v(s,c),v(c,f),v(c,h),v(c,k),v(e,y),v(e,M),A||(S=[G(t,"mousedown",n[28]),G(M,"mousedown",n[29])],A=!0)},p(O,C){C[0]&16&&l!==(l=O[4].name+"")&&ee(o,l),C[0]&2&&u!==(u=de(O[1])+"")&&ee(f,u),C[0]&1&&_!==(_=de(O[0])+"")&&ee(k,_),C[0]&16&&N!==(N="timer-block current "+(O[14](O[4])?"work":"rest")+" svelte-khj96w")&&d(e,"class",N),C[0]&3&&L(e,"left",O[37].left),C[0]&3&&L(e,"width",O[37].width)},d(O){O&&m(e),A=!1,Ge(S)}}}function Mn(n){let e,t,i=n[7].name+"",s,r,l;return{c(){e=T("div"),t=T("span"),s=q(i),this.h()},l(o){e=b(o,"DIV",{class:!0,style:!0,title:!0});var a=D(e);t=b(a,"SPAN",{class:!0});var c=D(t);s=X(c,i),c.forEach(m),a.forEach(m),this.h()},h(){d(t,"class","timer-label svelte-khj96w"),d(e,"class",r="timer-block next "+(n[14](n[7])?"work":"rest")+" svelte-khj96w"),L(e,"left",n[37].left),L(e,"width",n[37].width),d(e,"title",l=n[7].name+": "+de(n[0])+" - "+de(n[7].finish))},m(o,a){V(o,e,a),v(e,t),v(t,s)},p(o,a){a[0]&128&&i!==(i=o[7].name+"")&&ee(s,i),a[0]&128&&r!==(r="timer-block next "+(o[14](o[7])?"work":"rest")+" svelte-khj96w")&&d(e,"class",r),a[0]&129&&L(e,"left",o[37].left),a[0]&129&&L(e,"width",o[37].width),a[0]&129&&l!==(l=o[7].name+": "+de(o[0])+" - "+de(o[7].finish))&&d(e,"title",l)},d(o){o&&m(e)}}}function ss(n){let e,t,i,s=n[4]&&Sn(n);return{c(){s&&s.c(),e=Te()},l(r){s&&s.l(r),e=Te()},m(r,l){s&&s.m(r,l),V(r,e,l),t||(i=[G(window,"keydown",n[18]),G(window,"mousemove",n[12]),G(window,"mouseup",n[13])],t=!0)},p(r,l){r[4]?s?s.p(r,l):(s=Sn(r),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},i:Q,o:Q,d(r){r&&m(e),s&&s.d(r),t=!1,Ge(i)}}}function de(n){return n.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!1})}function ls(n,e,t){let i,s,r,l,o,a,c,u,f,h,_,k;Me(n,zt,H=>t(4,_=H)),Me(n,we,H=>t(25,k=H));let y=0,M=0,N,A,S=null,O=!1,C=null,j=0,I=400,g;function p(){const H=[];if(s&&(c.getTime()-s.start.getTime())/(1e3*60)<.5&&H.push(`Previous ${s.name} will be removed (< 30 sec)`),r){const K=u;(r.finish.getTime()-K.getTime())/(1e3*60)<.5&&H.push(`Next ${r.name} will be removed (< 30 sec)`)}return H}function w(H,K){const pe=H.getTime()-l.getTime(),re=K.getTime()-H.getTime(),Je=pe/a*100,qe=re/a*100;return{left:`${Je}%`,width:`${qe}%`}}function E(H,K){O=!0,C=H,j=K.clientX,g&&(I=g.offsetWidth),K.preventDefault()}function F(H){if(!O||!C)return;const pe=(H.clientX-j)/I*a,re=Math.round(pe/(60*1e3));C==="start"?t(19,y=re):t(20,M=re)}function $(){O=!1,C=null}function U(H){return H.name===ye.WORK}function J(){if(_){if(c>=u){alert("Start time must be before finish time");return}h.length>0&&!confirm(`Warning:
${h.join(`
`)}

Continue with save?`)||(we.update(H=>{const K=H.timerHistory.list.findIndex(W=>W.start.getTime()===_.start.getTime());if(K===-1)return H;const pe=H.timerHistory.list[K],re=[];if(K>0){const W=H.timerHistory.list[K-1],ke=pe.start.getTime();if(c.getTime()!==ke){const Pe=new Date(c);if((Pe.getTime()-W.start.getTime())/1e3<30)re.push(K-1);else{const Ae=new Oe(W.value,W.name,W.start,Pe);H.timerHistory.list[K-1]=Ae}}}if(K<H.timerHistory.list.length-1){const W=H.timerHistory.list[K+1],ke=pe.finish.getTime();if(u.getTime()!==ke){const Pe=new Date(u);if((W.finish.getTime()-Pe.getTime())/1e3<30)re.push(K+1);else{const Ae=new Oe(W.value,W.name,Pe,W.finish);H.timerHistory.list[K+1]=Ae}}}re.sort((W,ke)=>ke-W).forEach(W=>{H.timerHistory.list.splice(W,1)});const Je=K-re.filter(W=>W<K).length,qe=new Oe(pe.value,pe.name,c,u);return H.timerHistory.list[Je]=qe,H}),mt())}}function x(){mt()}function Se(){_&&confirm("Delete this timer?")&&(we.update(H=>H.remove(_.start)),mt())}function Ce(H){H.key==="Escape"&&mt()}function $e(H){xt.call(this,n,H)}function We(H){xt.call(this,n,H)}const Ke=H=>E("start",H),it=H=>E("end",H);function _e(H){Xe[H?"unshift":"push"](()=>{g=H,t(5,g)})}return n.$$.update=()=>{n.$$.dirty[0]&33554448&&t(24,i=_?k.timerHistory.list.findIndex(H=>H.start.getTime()===_.start.getTime()):-1),n.$$.dirty[0]&50331648&&t(8,s=i>0?k.timerHistory.list[i-1]:null),n.$$.dirty[0]&50331648&&t(7,r=i>=0&&i<k.timerHistory.list.length-1?k.timerHistory.list[i+1]:null),n.$$.dirty[0]&8388624&&_&&_.start.getTime()!==S&&(t(23,S=_.start.getTime()),t(21,N=_.start instanceof Date?_.start:new Date(_.start)),t(22,A=_.finish instanceof Date?_.finish:new Date(_.finish)),t(19,y=0),t(20,M=0)),n.$$.dirty[0]&2097152&&t(2,l=N?new Date(N.getTime()-30*60*1e3):new Date),n.$$.dirty[0]&4194304&&t(3,o=A?new Date(A.getTime()+30*60*1e3):new Date),n.$$.dirty[0]&12&&(a=o.getTime()-l.getTime()),n.$$.dirty[0]&16&&(_||t(23,S=null)),n.$$.dirty[0]&2621440&&t(1,c=N?new Date(N.getTime()+y*60*1e3):new Date),n.$$.dirty[0]&5242880&&t(0,u=A?new Date(A.getTime()+M*60*1e3):new Date),n.$$.dirty[0]&19&&t(9,f=_?Math.round((u.getTime()-c.getTime())/(1e3*60)):0)},t(6,h=p()),[u,c,l,o,_,g,h,r,s,f,w,E,F,$,U,J,x,Se,Ce,y,M,N,A,S,i,k,$e,We,Ke,it,_e]}class rs extends me{constructor(e){super(),ve(this,e,ls,ss,he,{},null,[-1,-1])}}function os(n){let e,t,i,s,r,l,o,a,c,u;return{c(){e=T("div"),t=T("button"),i=q(n[1]),r=P(),l=T("button"),o=q(n[2]),this.h()},l(f){e=b(f,"DIV",{class:!0});var h=D(e);t=b(h,"BUTTON",{class:!0});var _=D(t);i=X(_,n[1]),_.forEach(m),r=R(h),l=b(h,"BUTTON",{class:!0});var k=D(l);o=X(k,n[2]),k.forEach(m),h.forEach(m),this.h()},h(){d(t,"class",s="tab "+(n[0]?"":"active")+" svelte-1hgfxul"),d(l,"class",a="tab "+(n[0]?"active":"")+" svelte-1hgfxul"),d(e,"class","tabs-container svelte-1hgfxul")},m(f,h){V(f,e,h),v(e,t),v(t,i),v(e,r),v(e,l),v(l,o),c||(u=[G(t,"click",n[3]),G(l,"click",n[4])],c=!0)},p(f,[h]){h&2&&ee(i,f[1]),h&1&&s!==(s="tab "+(f[0]?"":"active")+" svelte-1hgfxul")&&d(t,"class",s),h&4&&ee(o,f[2]),h&1&&a!==(a="tab "+(f[0]?"active":"")+" svelte-1hgfxul")&&d(l,"class",a)},i:Q,o:Q,d(f){f&&m(e),c=!1,Ge(u)}}}function as(n,e,t){let{checked:i=!1}=e,{leftLabel:s=""}=e,{rightLabel:r=""}=e;const l=()=>t(0,i=!1),o=()=>t(0,i=!0);return n.$$set=a=>{"checked"in a&&t(0,i=a.checked),"leftLabel"in a&&t(1,s=a.leftLabel),"rightLabel"in a&&t(2,r=a.rightLabel)},[i,s,r,l,o]}class cs extends me{constructor(e){super(),ve(this,e,as,os,he,{checked:0,leftLabel:1,rightLabel:2})}}function On(n,e,t){const i=n.slice();return i[8]=e[t],i}function us(n){let e,t,i=[],s=new Map,r,l=n[0].active&&Cn(n),o=Ie([...n[1]].reverse());const a=c=>c[8].start;for(let c=0;c<o.length;c+=1){let u=On(n,o,c),f=a(u);s.set(f,i[c]=Nn(f,u))}return{c(){e=T("div"),l&&l.c(),t=P();for(let c=0;c<i.length;c+=1)i[c].c();this.h()},l(c){e=b(c,"DIV",{class:!0});var u=D(e);l&&l.l(u),t=R(u);for(let f=0;f<i.length;f+=1)i[f].l(u);u.forEach(m),this.h()},h(){d(e,"class","logs svelte-rjdqds")},m(c,u){V(c,e,u),l&&l.m(e,null),v(e,t);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(e,null);r=!0},p(c,u){c[0].active?l?(l.p(c,u),u&1&&B(l,1)):(l=Cn(c),l.c(),B(l,1),l.m(e,t)):l&&(Be(),z(l,1,1,()=>{l=null}),ze()),u&2&&(o=Ie([...c[1]].reverse()),Be(),i=Un(i,u,a,1,c,o,s,e,ei,Nn,null,On),ze())},i(c){if(!r){B(l);for(let u=0;u<o.length;u+=1)B(i[u]);r=!0}},o(c){z(l);for(let u=0;u<i.length;u+=1)z(i[u]);r=!1},d(c){c&&m(e),l&&l.d();for(let u=0;u<i.length;u+=1)i[u].d()}}}function fs(n){let e,t;return e=new is({props:{timers:n[1],activeTimer:n[0].active}}),{c(){te(e.$$.fragment)},l(i){ne(e.$$.fragment,i)},m(i,s){ie(e,i,s),t=!0},p(i,s){const r={};s&2&&(r.timers=i[1]),s&1&&(r.activeTimer=i[0].active),e.$set(r)},i(i){t||(B(e.$$.fragment,i),t=!0)},o(i){z(e.$$.fragment,i),t=!1},d(i){se(e,i)}}}function Cn(n){let e,t;const i=[n[0].active,{topLog:!0}];let s={};for(let r=0;r<i.length;r+=1)s=Ue(s,i[r]);return e=new Kn({props:s}),{c(){te(e.$$.fragment)},l(r){ne(e.$$.fragment,r)},m(r,l){ie(e,r,l),t=!0},p(r,l){const o=l&1?St(i,[Bn(r[0].active),i[1]]):{};e.$set(o)},i(r){t||(B(e.$$.fragment,r),t=!0)},o(r){z(e.$$.fragment,r),t=!1},d(r){se(e,r)}}}function Nn(n,e){let t,i,s;const r=[e[8],{topLog:!1}];function l(){return e[6](e[8])}let o={};for(let a=0;a<r.length;a+=1)o=Ue(o,r[a]);return i=new Kn({props:o}),i.$on("click",l),i.$on("remove",e[7]),{key:n,first:null,c(){t=Te(),te(i.$$.fragment),this.h()},l(a){t=Te(),ne(i.$$.fragment,a),this.h()},h(){this.first=t},m(a,c){V(a,t,c),ie(i,a,c),s=!0},p(a,c){e=a;const u=c&2?St(r,[Bn(e[8]),r[1]]):{};i.$set(u)},i(a){s||(B(i.$$.fragment,a),s=!0)},o(a){z(i.$$.fragment,a),s=!1},d(a){a&&m(t),se(i,a)}}}function ds(n){let e,t,i,s,r="Clear logs",l,o,a="Active time: ",c,u=ln(n[3])+"",f,h,_,k,y,M,N,A,S,O,C,j,I;e=new rs({});function g($){n[5]($)}let p={leftLabel:"Logs",rightLabel:"Graph"};n[2]!==void 0&&(p.checked=n[2]),y=new cs({props:p}),Xe.push(()=>Ht(y,"checked",g));const w=[fs,us],E=[];function F($,U){return $[2]?0:1}return S=F(n),O=E[S]=w[S](n),{c(){te(e.$$.fragment),t=P(),i=T("div"),s=T("button"),s.textContent=r,l=P(),o=T("span"),o.textContent=a,c=T("span"),f=q(u),h=P(),_=T("div"),k=T("div"),te(y.$$.fragment),N=P(),A=T("div"),O.c(),this.h()},l($){ne(e.$$.fragment,$),t=R($),i=b($,"DIV",{class:!0});var U=D(i);s=b(U,"BUTTON",{class:!0,"data-svelte-h":!0}),le(s)!=="svelte-1renoko"&&(s.textContent=r),l=R(U),o=b(U,"SPAN",{class:!0,"data-svelte-h":!0}),le(o)!=="svelte-18pz33x"&&(o.textContent=a),c=b(U,"SPAN",{class:!0});var J=D(c);f=X(J,u),J.forEach(m),U.forEach(m),h=R($),_=b($,"DIV",{class:!0});var x=D(_);k=b(x,"DIV",{class:!0});var Se=D(k);ne(y.$$.fragment,Se),Se.forEach(m),N=R(x),A=b(x,"DIV",{class:!0});var Ce=D(A);O.l(Ce),Ce.forEach(m),x.forEach(m),this.h()},h(){d(s,"class","clear svelte-rjdqds"),d(o,"class","svelte-rjdqds"),d(c,"class","svelte-rjdqds"),d(i,"class","header svelte-rjdqds"),d(k,"class","tabs-header svelte-rjdqds"),d(A,"class","content-wrapper svelte-rjdqds"),d(_,"class","content-section svelte-rjdqds")},m($,U){ie(e,$,U),V($,t,U),V($,i,U),v(i,s),v(i,l),v(i,o),v(i,c),v(c,f),V($,h,U),V($,_,U),v(_,k),ie(y,k,null),v(_,N),v(_,A),E[S].m(A,null),C=!0,j||(I=G(s,"click",n[4]),j=!0)},p($,[U]){(!C||U&8)&&u!==(u=ln($[3])+"")&&ee(f,u);const J={};!M&&U&4&&(M=!0,J.checked=$[2],Lt(()=>M=!1)),y.$set(J);let x=S;S=F($),S===x?E[S].p($,U):(Be(),z(E[x],1,1,()=>{E[x]=null}),ze(),O=E[S],O?O.p($,U):(O=E[S]=w[S]($),O.c()),B(O,1),O.m(A,null))},i($){C||(B(e.$$.fragment,$),B(y.$$.fragment,$),B(O),C=!0)},o($){z(e.$$.fragment,$),z(y.$$.fragment,$),z(O),C=!1},d($){$&&(m(t),m(i),m(h),m(_)),se(e,$),se(y),E[S].d(),j=!1,I()}}}function hs(n,e,t){let i,s;Me(n,we,f=>t(0,i=f)),Me(n,yi,f=>t(3,s=f));var r=[];let l=!0;const o=()=>we.update(f=>f.clearLogs());function a(f){l=f,t(2,l)}const c=f=>vt(f),u=f=>we.update(h=>h.remove(f.detail));return n.$$.update=()=>{var f;n.$$.dirty&1&&t(1,r=((f=i==null?void 0:i.timerHistory)==null?void 0:f.list)||[])},[i,r,l,s,o,a,c,u]}class ms extends me{constructor(e){super(),ve(this,e,hs,ds,he,{})}}function vs(n){const e=n-1;return e*e*e+1}function wt(n,{delay:e=0,duration:t=400,easing:i=vs,x:s=0,y:r=0,opacity:l=0}={}){const o=getComputedStyle(n),a=+o.opacity,c=o.transform==="none"?"":o.transform,u=a*(1-l),[f,h]=en(s),[_,k]=en(r);return{delay:e,duration:t,easing:i,css:(y,M)=>`
			transform: ${c} translate(${(1-y)*f}${h}, ${(1-y)*_}${k});
			opacity: ${a-u*M}`}}function _s(n){let e,t,i,s,r,l,o,a,c,u,f=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 24 24"},{fill:"none"},{stroke:"currentColor"},{"stroke-width":"2"},{"stroke-linecap":"round"},{"stroke-linejoin":"round"},n[0]],h={};for(let _=0;_<f.length;_+=1)h=Ue(h,f[_]);return{c(){e=Ee("svg"),t=Ee("circle"),i=Ee("line"),s=Ee("line"),r=Ee("line"),l=Ee("line"),o=Ee("line"),a=Ee("line"),c=Ee("line"),u=Ee("line"),this.h()},l(_){e=De(_,"svg",{xmlns:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0});var k=D(e);t=De(k,"circle",{cx:!0,cy:!0,r:!0}),D(t).forEach(m),i=De(k,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),D(i).forEach(m),s=De(k,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),D(s).forEach(m),r=De(k,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),D(r).forEach(m),l=De(k,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),D(l).forEach(m),o=De(k,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),D(o).forEach(m),a=De(k,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),D(a).forEach(m),c=De(k,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),D(c).forEach(m),u=De(k,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),D(u).forEach(m),k.forEach(m),this.h()},h(){d(t,"cx","12"),d(t,"cy","12"),d(t,"r","5"),d(i,"x1","12"),d(i,"y1","1"),d(i,"x2","12"),d(i,"y2","3"),d(s,"x1","12"),d(s,"y1","21"),d(s,"x2","12"),d(s,"y2","23"),d(r,"x1","4.22"),d(r,"y1","4.22"),d(r,"x2","5.64"),d(r,"y2","5.64"),d(l,"x1","18.36"),d(l,"y1","18.36"),d(l,"x2","19.78"),d(l,"y2","19.78"),d(o,"x1","1"),d(o,"y1","12"),d(o,"x2","3"),d(o,"y2","12"),d(a,"x1","21"),d(a,"y1","12"),d(a,"x2","23"),d(a,"y2","12"),d(c,"x1","4.22"),d(c,"y1","19.78"),d(c,"x2","5.64"),d(c,"y2","18.36"),d(u,"x1","18.36"),d(u,"y1","5.64"),d(u,"x2","19.78"),d(u,"y2","4.22"),gt(e,h)},m(_,k){V(_,e,k),v(e,t),v(e,i),v(e,s),v(e,r),v(e,l),v(e,o),v(e,a),v(e,c),v(e,u)},p(_,[k]){gt(e,h=St(f,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 24 24"},{fill:"none"},{stroke:"currentColor"},{"stroke-width":"2"},{"stroke-linecap":"round"},{"stroke-linejoin":"round"},k&1&&_[0]]))},i:Q,o:Q,d(_){_&&m(e)}}}function gs(n,e,t){const i=[];let s=pt(e,i);return n.$$set=r=>{e=Ue(Ue({},e),Rn(r)),t(0,s=pt(e,i))},[s]}class ps extends me{constructor(e){super(),ve(this,e,gs,_s,he,{})}}function ks(n){let e,t,i=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 24 24"},{fill:"none"},{stroke:"currentColor"},{"stroke-width":"2"},{"stroke-linecap":"round"},{"stroke-linejoin":"round"},n[0]],s={};for(let r=0;r<i.length;r+=1)s=Ue(s,i[r]);return{c(){e=Ee("svg"),t=Ee("path"),this.h()},l(r){e=De(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0});var l=D(e);t=De(l,"path",{d:!0}),D(t).forEach(m),l.forEach(m),this.h()},h(){d(t,"d","M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"),gt(e,s)},m(r,l){V(r,e,l),v(e,t)},p(r,[l]){gt(e,s=St(i,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 24 24"},{fill:"none"},{stroke:"currentColor"},{"stroke-width":"2"},{"stroke-linecap":"round"},{"stroke-linejoin":"round"},l&1&&r[0]]))},i:Q,o:Q,d(r){r&&m(e)}}}function ws(n,e,t){const i=[];let s=pt(e,i);return n.$$set=r=>{e=Ue(Ue({},e),Rn(r)),t(0,s=pt(e,i))},[s]}class Ts extends me{constructor(e){super(),ve(this,e,ws,ks,he,{})}}function bs(n){let e,t,i,s,r;return t=new ps({}),{c(){e=T("div"),te(t.$$.fragment),this.h()},l(l){e=b(l,"DIV",{class:!0});var o=D(e);ne(t.$$.fragment,o),o.forEach(m),this.h()},h(){d(e,"class","icon sun svelte-1u641rb")},m(l,o){V(l,e,o),ie(t,e,null),r=!0},i(l){r||(B(t.$$.fragment,l),l&&Ln(()=>{r&&(s&&s.end(1),i=Hn(e,wt,{y:20,duration:400}),i.start())}),r=!0)},o(l){z(t.$$.fragment,l),i&&i.invalidate(),l&&(s=Fn(e,wt,{y:-20,duration:400})),r=!1},d(l){l&&m(e),se(t),l&&s&&s.end()}}}function Ss(n){let e,t,i,s,r;return t=new Ts({}),{c(){e=T("div"),te(t.$$.fragment),this.h()},l(l){e=b(l,"DIV",{class:!0});var o=D(e);ne(t.$$.fragment,o),o.forEach(m),this.h()},h(){d(e,"class","icon moon svelte-1u641rb")},m(l,o){V(l,e,o),ie(t,e,null),r=!0},i(l){r||(B(t.$$.fragment,l),l&&Ln(()=>{r&&(s&&s.end(1),i=Hn(e,wt,{y:20,duration:400}),i.start())}),r=!0)},o(l){z(t.$$.fragment,l),i&&i.invalidate(),l&&(s=Fn(e,wt,{y:-20,duration:400})),r=!1},d(l){l&&m(e),se(t),l&&s&&s.end()}}}function Es(n){let e,t,i,s,r,l,o,a;const c=[Ss,bs],u=[];function f(h,_){return h[0]?0:1}return i=f(n),s=u[i]=c[i](n),{c(){e=T("button"),t=T("div"),s.c(),this.h()},l(h){e=b(h,"BUTTON",{class:!0,"aria-label":!0,title:!0});var _=D(e);t=b(_,"DIV",{class:!0});var k=D(t);s.l(k),k.forEach(m),_.forEach(m),this.h()},h(){d(t,"class","icon-container svelte-1u641rb"),d(e,"class","theme-toggle svelte-1u641rb"),d(e,"aria-label","Toggle dark mode"),d(e,"title",r=n[0]?"Switch to light mode":"Switch to dark mode")},m(h,_){V(h,e,_),v(e,t),u[i].m(t,null),l=!0,o||(a=G(e,"click",n[1]),o=!0)},p(h,[_]){let k=i;i=f(h),i!==k&&(Be(),z(u[k],1,1,()=>{u[k]=null}),ze(),s=u[i],s||(s=u[i]=c[i](h),s.c()),B(s,1),s.m(t,null)),(!l||_&1&&r!==(r=h[0]?"Switch to light mode":"Switch to dark mode"))&&d(e,"title",r)},i(h){l||(B(s),l=!0)},o(h){z(s),l=!1},d(h){h&&m(e),u[i].d(),o=!1,a()}}}function Ds(n,e,t){let i;Me(n,Rt,r=>t(0,i=r));function s(){Rt.update(r=>!r)}return[i,s]}class Is extends me{constructor(e){super(),ve(this,e,Ds,Es,he,{})}}function ys(n){let e,t,i,s,r,l="Let's Pomodoro!",o,a,c,u,f,h,_,k,y,M;c=new Is({});function N(S){n[9](S)}let A={debugFlag:n[0]};return n[1]!==void 0&&(A.remainedSeconds=n[1]),f=new Wi({props:A}),Xe.push(()=>Ht(f,"remainedSeconds",N)),f.$on("timer",n[4]),f.$on("current",n[5]),f.$on("cancel",n[6]),y=new ms({}),{c(){e=T("main"),t=T("div"),i=T("div"),s=T("div"),r=T("h1"),r.textContent=l,o=P(),a=T("div"),te(c.$$.fragment),u=P(),te(f.$$.fragment),_=P(),k=T("div"),te(y.$$.fragment),this.h()},l(S){e=b(S,"MAIN",{class:!0});var O=D(e);t=b(O,"DIV",{class:!0});var C=D(t);i=b(C,"DIV",{class:!0});var j=D(i);s=b(j,"DIV",{class:!0});var I=D(s);r=b(I,"H1",{class:!0,"data-svelte-h":!0}),le(r)!=="svelte-cxq7y3"&&(r.textContent=l),o=R(I),a=b(I,"DIV",{class:!0});var g=D(a);ne(c.$$.fragment,g),g.forEach(m),I.forEach(m),u=R(j),ne(f.$$.fragment,j),j.forEach(m),_=R(C),k=b(C,"DIV",{class:!0});var p=D(k);ne(y.$$.fragment,p),p.forEach(m),C.forEach(m),O.forEach(m),this.h()},h(){d(r,"class","logo svelte-k3ou4y"),d(a,"class","toggle-wrapper svelte-k3ou4y"),d(s,"class","header-row svelte-k3ou4y"),d(i,"class","pomodoro svelte-k3ou4y"),d(k,"class","logs svelte-k3ou4y"),d(t,"class","container svelte-k3ou4y"),d(e,"class","svelte-k3ou4y"),Ne(e,"dark",n[3])},m(S,O){V(S,e,O),v(e,t),v(t,i),v(i,s),v(s,r),v(s,o),v(s,a),ie(c,a,null),v(i,u),ie(f,i,null),v(t,_),v(t,k),ie(y,k,null),M=!0},p(S,O){const C={};O&1&&(C.debugFlag=S[0]),!h&&O&2&&(h=!0,C.remainedSeconds=S[1],Lt(()=>h=!1)),f.$set(C),(!M||O&8)&&Ne(e,"dark",S[3])},i(S){M||(B(c.$$.fragment,S),B(f.$$.fragment,S),B(y.$$.fragment,S),M=!0)},o(S){z(c.$$.fragment,S),z(f.$$.fragment,S),z(y.$$.fragment,S),M=!1},d(S){S&&m(e),se(c),se(f),se(y)}}}function Ms(n){let e;return{c(){e=T("main"),this.h()},l(t){e=b(t,"MAIN",{style:!0,class:!0}),D(e).forEach(m),this.h()},h(){L(e,"background-color","gray"),L(e,"height","90 vh"),d(e,"class","svelte-k3ou4y")},m(t,i){V(t,e,i)},p:Q,i:Q,o:Q,d(t){t&&m(e)}}}function Os(n){let e,t,i,s,r;const l=[Ms,ys],o=[];function a(c,u){return c[2]?0:1}return e=a(n),t=o[e]=l[e](n),{c(){t.c(),i=P(),s=Te()},l(c){t.l(c),i=R(c),s=Te()},m(c,u){o[e].m(c,u),V(c,i,u),V(c,s,u),r=!0},p(c,[u]){let f=e;e=a(c),e===f?o[e].p(c,u):(Be(),z(o[f],1,1,()=>{o[f]=null}),ze(),t=o[e],t?t.p(c,u):(t=o[e]=l[e](c),t.c()),B(t,1),t.m(i.parentNode,i))},i(c){r||(B(t),r=!0)},o(c){z(t),r=!1},d(c){c&&(m(i),m(s)),o[e].d(c)}}}function Cs(n,e,t){let i,s;Me(n,Rt,k=>t(3,i=k)),Me(n,we,k=>t(8,s=k));let r=!1,l,o=!0,a;Qn(()=>{a&&clearInterval(a)});function c(k){we.update(y=>y.addTimer(k.detail))}function u(k){we.update(y=>y.setActive(k.detail))}function f(){we.update(k=>k.resetActive())}Pn(()=>{if(console.log("get darkmode:",i),s!=null&&s.active){const k=s.getRecoveryStatus(new Date,et(r).timersMultiplier);k.shouldArchive?(we.update(y=>(y.active&&y.addTimer(y.active),y)),console.log("Timer expired beyond cap while closed, archived to history")):k.shouldResume?(je.start(k.remainingMinutes,s.active.name,r),console.log("Resumed timer with",k.remainingMinutes,"minutes remaining")):console.log("Timer in overtime, resumed background monitoring")}t(2,o=!1)});function h(k){l=k,t(1,l)}function _(){r=this.checked,t(0,r)}return n.$$.update=()=>{n.$$.dirty&259&&s&&l!==void 0&&we.update(k=>(k.tick(new Date,et(r).timersMultiplier),k)),n.$$.dirty&385&&(s!=null&&s.active?a||t(7,a=setInterval(()=>{we.update(k=>{const y=et(r).timersMultiplier;return k.tick(new Date,y)&&je.stop(),k})},1e3)):a&&(clearInterval(a),t(7,a=void 0)))},[r,l,o,i,c,u,f,a,s,h,_]}class js extends me{constructor(e){super(),ve(this,e,Cs,Os,he,{})}}export{js as component};
