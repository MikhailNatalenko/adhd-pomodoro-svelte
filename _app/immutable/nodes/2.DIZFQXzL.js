var lt=Object.defineProperty;var it=(n,e,t)=>e in n?lt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var W=(n,e,t)=>it(n,typeof e!="symbol"?e+"":e,t);import{A as he,s as ee,c as Xe,e as T,b as A,p as ie,d as S,f as R,i as m,j as L,v as k,k as b,O as V,u as Ye,g as Qe,a as Ke,t as H,h as q,w as pe,l as $,m as me,P as de,Q as Ne,R as ve,n as se,S as x,T as Oe,r as ye,U as st,V as Pe,x as rt,W as ot}from"../chunks/scheduler.w4DLfyO8.js";import{a as B,t as M,S as te,i as ne,b as J,d as X,m as Y,e as Q,g as ue,c as ce,f as at}from"../chunks/index.DZv-TxQa.js";import{b as ae}from"../chunks/paths.DVi-NAKD.js";function oe(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Se(n,e){B(n,1,1,()=>{e.delete(n.key)})}function we(n,e,t,l,i,s,o,r,a,u,c,f){let h=n.length,_=s.length,C=h;const N={};for(;C--;)N[n[C].key]=C;const y=[],D=new Map,z=new Map,U=[];for(C=_;C--;){const g=f(i,s,C),I=t(g);let O=o.get(I);O?U.push(()=>O.p(g,e)):(O=u(I,g),O.c()),D.set(I,y[C]=O),I in N&&z.set(I,Math.abs(C-N[I]))}const w=new Set,j=new Set;function G(g){M(g,1),g.m(r,c),o.set(g.key,g),c=g.first,_--}for(;h&&_;){const g=y[_-1],I=n[h-1],O=g.key,p=I.key;g===I?(c=g.first,h--,_--):D.has(p)?!o.has(O)||w.has(O)?G(g):j.has(p)?h--:z.get(O)>z.get(p)?(j.add(O),G(g)):(w.add(p),h--):(a(I,o),h--)}for(;h--;){const g=n[h];D.has(g.key)||a(g,o)}for(;_;)G(y[_-1]);return he(U),y}function ft(n,e){const t={},l={},i={$$scope:1};let s=n.length;for(;s--;){const o=n[s],r=e[s];if(r){for(const a in o)a in r||(l[a]=1);for(const a in r)i[a]||(t[a]=r[a],i[a]=1);n[s]=r}else for(const a in o)i[a]=1}for(const o in l)o in t||(t[o]=void 0);return t}function ut(n){return typeof n=="object"&&n!==null?n:{}}const ct=ae+"/ring2.wav";let Ze=function(){},fe,ke,xe=.5,_e;if(typeof window<"u"){let n=window.AudioContext||window.webkitAudioContext;fe=new n,fetch(ct).then(e=>e.arrayBuffer()).then(e=>fe.decodeAudioData(e)).then(e=>{ke=e}).catch(e=>console.error("Error loading sound file:",e)),Ze=function(){if(!ke)return;_e=fe.createBufferSource(),_e.buffer=ke;let e=fe.createGain();e.gain.value=xe,_e.connect(e),e.connect(fe.destination),_e.start(0)}}function Ee(){Ze()}function ht(n,e){xe=n,Ee()}function De(n){let e,t;return{c(){e=T("div"),t=H(n[0]),this.h()},l(l){e=S(l,"DIV",{style:!0,class:!0});var i=R(e);t=q(i,n[0]),i.forEach(m),this.h()},h(){pe(e,"top",n[3]+"px"),pe(e,"left",n[2]+"px"),k(e,"class","tooltip svelte-43gogz")},m(l,i){b(l,e,i),$(e,t)},p(l,i){i&1&&me(t,l[0]),i&8&&pe(e,"top",l[3]+"px"),i&4&&pe(e,"left",l[2]+"px")},d(l){l&&m(e)}}}function mt(n){let e,t,l,i,s,o;const r=n[8].default,a=Xe(r,n,n[7],null);let u=n[1]&&De(n);return{c(){e=T("div"),a&&a.c(),t=A(),u&&u.c(),l=ie(),this.h()},l(c){e=S(c,"DIV",{"aria-hidden":!0});var f=R(e);a&&a.l(f),f.forEach(m),t=L(c),u&&u.l(c),l=ie(),this.h()},h(){k(e,"aria-hidden","true")},m(c,f){b(c,e,f),a&&a.m(e,null),b(c,t,f),u&&u.m(c,f),b(c,l,f),i=!0,s||(o=[V(e,"mouseover",n[4]),V(e,"mouseleave",n[6]),V(e,"mousemove",n[5]),V(e,"focus",dt)],s=!0)},p(c,[f]){a&&a.p&&(!i||f&128)&&Ye(a,r,c,c[7],i?Ke(r,c[7],f,null):Qe(c[7]),null),c[1]?u?u.p(c,f):(u=De(c),u.c(),u.m(l.parentNode,l)):u&&(u.d(1),u=null)},i(c){i||(M(a,c),i=!0)},o(c){B(a,c),i=!1},d(c){c&&(m(e),m(t),m(l)),a&&a.d(c),u&&u.d(c),s=!1,he(o)}}}const dt=function(){};function pt(n,e,t){let{$$slots:l={},$$scope:i}=e,{title:s=""}=e,o=!1,r,a;function u(h){t(1,o=!0),t(2,r=h.pageX+10),t(3,a=h.pageY+10)}function c(h){t(2,r=h.pageX+10),t(3,a=h.pageY+10)}function f(){t(1,o=!1)}return n.$$set=h=>{"title"in h&&t(0,s=h.title),"$$scope"in h&&t(7,i=h.$$scope)},[s,o,r,a,u,c,f,i,l]}class $e extends te{constructor(e){super(),ne(this,e,pt,mt,ee,{title:0})}}class Ce{constructor(e=0,t=""){W(this,"start");W(this,"finish");W(this,"name");W(this,"value");this.start=new Date,this.finish=new Date,this.name=t,this.value=e}}const F={RUNNING:"RUNNING",STOPPED:"STOPPED",WAITING_FOR_STOP:"WAITING_FOR_STOP"};function Ae(n){let e=Math.floor(n/60).toString().padStart(2,"0"),t=Math.floor(n%60).toString().padStart(2,"0");return`${e}:${t}`}function Le(n){let e=Math.floor(n/60),t=Math.floor(n%60);if(e>60){let l=Math.floor(e/60);return e=Math.floor(e%60),`${l}h ${e} min`}else return e>0?`${e} min`:`${t} sec`}function Me(n){let e=Math.floor(n/3600);e>0&&(n=n-e*3600);let t=Math.floor(n/60),l=Math.floor(n%60);return e==1?`${e} hour ${t} min`:e>0?`${e} hours ${t} min`:t>10?`${t} min`:t>1?`${t} min ${l} sec`:`${l} sec`}class _t{constructor(e,t,l,i=500){W(this,"intervalId",0);W(this,"duration",0);W(this,"start",new Date);W(this,"remain",0);W(this,"onSec",e=>{});W(this,"onAlarm",()=>{});this.duration=e,this.remain=e,e>0&&(this.onSec=t,this.onAlarm=l,this.start=new Date,this.intervalId=setInterval(()=>{let s=this.duration-Math.floor((Date.now()-this.start.getTime())/1e3);console.log("interval id {}, duration {}, remaining",this.intervalId,this.duration,s),s!=this.remain&&(t(this.remain),this.remain=s,this.remain<=0&&(this.onAlarm(),clearInterval(this.intervalId)))},i))}stop(){clearInterval(this.intervalId)}}function gt(n){let e,t=Ae(n[0])+"",l,i,s;return{c(){e=T("button"),l=H(t),this.h()},l(o){e=S(o,"BUTTON",{id:!0,class:!0});var r=R(e);l=q(r,t),r.forEach(m),this.h()},h(){k(e,"id","watch"),k(e,"class","svelte-wj6dup")},m(o,r){b(o,e,r),$(e,l),i||(s=V(e,"click",n[1]),i=!0)},p(o,r){r&1&&t!==(t=Ae(o[0])+"")&&me(l,t)},d(o){o&&m(e),i=!1,s()}}}function vt(n){let e,t;return e=new $e({props:{title:"stop timer",$$slots:{default:[gt]},$$scope:{ctx:n}}}),{c(){J(e.$$.fragment)},l(l){X(e.$$.fragment,l)},m(l,i){Y(e,l,i),t=!0},p(l,[i]){const s={};i&257&&(s.$$scope={dirty:i,ctx:l}),e.$set(s)},i(l){t||(M(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function bt(n,e,t){let{time:l=0}=e;var i,s=0;const o=de();function r(f){i!=null&&i.stop(),i=new _t(f,a,u),t(0,s=f)}function a(f){t(0,s=f)}function u(){Ee(),o("alarming")}function c(){o("stop")}return n.$$set=f=>{"time"in f&&t(2,l=f.time)},n.$$.update=()=>{n.$$.dirty&4&&r(l)},[s,c,l]}class kt extends te{constructor(e){super(),ne(this,e,bt,vt,ee,{time:2})}}function Tt(n){let e,t,l,i,s,o;return{c(){e=T("button"),t=H(n[1]),l=H(" min"),this.h()},l(r){e=S(r,"BUTTON",{class:!0});var a=R(e);t=q(a,n[1]),l=q(a," min"),a.forEach(m),this.h()},h(){k(e,"class",i=Ne(n[2])+" svelte-14qegn3"),e.disabled=n[3],ve(e,"pressed",n[0])},m(r,a){b(r,e,a),$(e,t),$(e,l),s||(o=V(e,"click",n[5]),s=!0)},p(r,[a]){a&2&&me(t,r[1]),a&4&&i!==(i=Ne(r[2])+" svelte-14qegn3")&&k(e,"class",i),a&8&&(e.disabled=r[3]),a&5&&ve(e,"pressed",r[0])},i:se,o:se,d(r){r&&m(e),s=!1,o()}}}function St(n,e,t){const l=de();let{value:i}=e,{name:s}=e,{disabled:o=!1}=e,{pressed:r=!1}=e;function a(f,h){l("start",{name:f,val:h}),t(0,r=!0)}function u(f){f||t(0,r=!1)}const c=function(){a(s,i)};return n.$$set=f=>{"value"in f&&t(1,i=f.value),"name"in f&&t(2,s=f.name),"disabled"in f&&t(3,o=f.disabled),"pressed"in f&&t(0,r=f.pressed)},n.$$.update=()=>{n.$$.dirty&8&&u(o)},[r,i,s,o,a,c]}class et extends te{constructor(e){super(),ne(this,e,St,Tt,ee,{value:1,name:2,disabled:3,pressed:0})}}function Re(n,e,t){const l=n.slice();return l[6]=e[t],l}const wt=n=>({}),Be=n=>({class:"item svelte-1rvg6ah"});function Ue(n,e,t){const l=n.slice();return l[6]=e[t],l}function Ve(n,e){let t,l,i,s,o;return l=new et({props:{value:e[6],name:"work",disabled:!e[0]}}),l.$on("start",e[2]),{key:n,first:null,c(){t=ie(),J(l.$$.fragment),i=A(),s=T("br"),this.h()},l(r){t=ie(),X(l.$$.fragment,r),i=L(r),s=S(r,"BR",{}),this.h()},h(){this.first=t},m(r,a){b(r,t,a),Y(l,r,a),b(r,i,a),b(r,s,a),o=!0},p(r,a){e=r;const u={};a&1&&(u.disabled=!e[0]),l.$set(u)},i(r){o||(M(l.$$.fragment,r),o=!0)},o(r){B(l.$$.fragment,r),o=!1},d(r){r&&(m(t),m(i),m(s)),Q(l,r)}}}function Ge(n,e){let t,l,i,s,o;return l=new et({props:{value:e[6],name:"rest",disabled:!e[0]}}),l.$on("start",e[2]),{key:n,first:null,c(){t=ie(),J(l.$$.fragment),i=A(),s=T("br"),this.h()},l(r){t=ie(),X(l.$$.fragment,r),i=L(r),s=S(r,"BR",{}),this.h()},h(){this.first=t},m(r,a){b(r,t,a),Y(l,r,a),b(r,i,a),b(r,s,a),o=!0},p(r,a){e=r;const u={};a&1&&(u.disabled=!e[0]),l.$set(u)},i(r){o||(M(l.$$.fragment,r),o=!0)},o(r){B(l.$$.fragment,r),o=!1},d(r){r&&(m(t),m(i),m(s)),Q(l,r)}}}function Ct(n){let e,t,l,i,s="Active",o,r,a=[],u=new Map,c,f,h,_,C="Rest",N,y,D=[],z=new Map,U,w=oe(n[1]);const j=p=>p[6];for(let p=0;p<w.length;p+=1){let v=Ue(n,w,p),P=j(v);u.set(P,a[p]=Ve(P,v))}const G=n[4].default,g=Xe(G,n,n[3],Be);let I=oe(n[1]);const O=p=>p[6];for(let p=0;p<I.length;p+=1){let v=Re(n,I,p),P=O(v);z.set(P,D[p]=Ge(P,v))}return{c(){e=T("div"),t=T("div"),l=T("div"),i=T("span"),i.textContent=s,o=T("br"),r=A();for(let p=0;p<a.length;p+=1)a[p].c();c=A(),g&&g.c(),f=A(),h=T("div"),_=T("span"),_.textContent=C,N=T("br"),y=A();for(let p=0;p<D.length;p+=1)D[p].c();this.h()},l(p){e=S(p,"DIV",{});var v=R(e);t=S(v,"DIV",{class:!0});var P=R(t);l=S(P,"DIV",{class:!0});var K=R(l);i=S(K,"SPAN",{class:!0,"data-svelte-h":!0}),x(i)!=="svelte-19szg5l"&&(i.textContent=s),o=S(K,"BR",{}),r=L(K);for(let d=0;d<a.length;d+=1)a[d].l(K);K.forEach(m),c=L(P),g&&g.l(P),f=L(P),h=S(P,"DIV",{class:!0});var le=R(h);_=S(le,"SPAN",{class:!0,"data-svelte-h":!0}),x(_)!=="svelte-1gtata5"&&(_.textContent=C),N=S(le,"BR",{}),y=L(le);for(let d=0;d<D.length;d+=1)D[d].l(le);le.forEach(m),P.forEach(m),v.forEach(m),this.h()},h(){k(i,"class","label svelte-1rvg6ah"),k(l,"class","item svelte-1rvg6ah"),k(_,"class","label svelte-1rvg6ah"),k(h,"class","item svelte-1rvg6ah"),k(t,"class","grid-container svelte-1rvg6ah")},m(p,v){b(p,e,v),$(e,t),$(t,l),$(l,i),$(l,o),$(l,r);for(let P=0;P<a.length;P+=1)a[P]&&a[P].m(l,null);$(t,c),g&&g.m(t,null),$(t,f),$(t,h),$(h,_),$(h,N),$(h,y);for(let P=0;P<D.length;P+=1)D[P]&&D[P].m(h,null);U=!0},p(p,[v]){v&7&&(w=oe(p[1]),ue(),a=we(a,v,j,1,p,w,u,l,Se,Ve,null,Ue),ce()),g&&g.p&&(!U||v&8)&&Ye(g,G,p,p[3],U?Ke(G,p[3],v,wt):Qe(p[3]),Be),v&7&&(I=oe(p[1]),ue(),D=we(D,v,O,1,p,I,z,h,Se,Ge,null,Re),ce())},i(p){if(!U){for(let v=0;v<w.length;v+=1)M(a[v]);M(g,p);for(let v=0;v<I.length;v+=1)M(D[v]);U=!0}},o(p){for(let v=0;v<a.length;v+=1)B(a[v]);B(g,p);for(let v=0;v<D.length;v+=1)B(D[v]);U=!1},d(p){p&&m(e);for(let v=0;v<a.length;v+=1)a[v].d();g&&g.d(p);for(let v=0;v<D.length;v+=1)D[v].d()}}}function It(n,e,t){let{$$slots:l={},$$scope:i}=e;const s=de();let o=[5,10,15,20,25];function r(u){s("start",{timer:u.detail.val,name:u.detail.name}),console.log("handleTimerStart")}let{active:a=!0}=e;return n.$$set=u=>{"active"in u&&t(0,a=u.active),"$$scope"in u&&t(3,i=u.$$scope)},[a,o,r,i,l]}class yt extends te{constructor(e){super(),ne(this,e,It,Ct,ee,{active:0})}}/*! js-cookie v3.0.5 | MIT */function ge(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var l in t)n[l]=t[l]}return n}var Pt={read:function(n){return n[0]==='"'&&(n=n.slice(1,-1)),n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(n){return encodeURIComponent(n).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function Ie(n,e){function t(i,s,o){if(!(typeof document>"u")){o=ge({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var r="";for(var a in o)o[a]&&(r+="; "+a,o[a]!==!0&&(r+="="+o[a].split(";")[0]));return document.cookie=i+"="+n.write(s,i)+r}}function l(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var s=document.cookie?document.cookie.split("; "):[],o={},r=0;r<s.length;r++){var a=s[r].split("="),u=a.slice(1).join("=");try{var c=decodeURIComponent(a[0]);if(o[c]=n.read(u,c),i===c)break}catch{}}return i?o[i]:o}}return Object.create({set:t,get:l,remove:function(i,s){t(i,"",ge({},s,{expires:-1}))},withAttributes:function(i){return Ie(this.converter,ge({},this.attributes,i))},withConverter:function(i){return Ie(ge({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(n)}})}var re=Ie(Pt,{path:"/"});function Et(n){let e,t,l,i=`<img src="${ae}/volume_mute.svg" alt="Mute icon"/>`,s,o,r,a,u=`<img src="${ae}/volume_up.svg" alt="Volume max icon"/>`,c,f;return{c(){e=T("label"),t=T("div"),l=T("button"),l.innerHTML=i,s=A(),o=T("input"),r=A(),a=T("button"),a.innerHTML=u,this.h()},l(h){e=S(h,"LABEL",{});var _=R(e);t=S(_,"DIV",{class:!0});var C=R(t);l=S(C,"BUTTON",{class:!0,"data-svelte-h":!0}),x(l)!=="svelte-3ybpa7"&&(l.innerHTML=i),s=L(C),o=S(C,"INPUT",{class:!0,type:!0,min:!0,max:!0}),r=L(C),a=S(C,"BUTTON",{class:!0,"data-svelte-h":!0}),x(a)!=="svelte-vae9t2"&&(a.innerHTML=u),C.forEach(m),_.forEach(m),this.h()},h(){k(l,"class","leftbutton svelte-14xuhg1"),k(o,"class","slider bar svelte-14xuhg1"),k(o,"type","range"),k(o,"min","0"),k(o,"max","100"),k(a,"class","svelte-14xuhg1"),k(t,"class","container svelte-14xuhg1")},m(h,_){b(h,e,_),$(e,t),$(t,l),$(t,s),$(t,o),Oe(o,n[0]),$(t,r),$(t,a),c||(f=[V(l,"click",n[2]),V(o,"change",n[7]),V(o,"input",n[7]),V(o,"mouseup",n[1]),V(a,"click",n[3])],c=!0)},p(h,[_]){_&1&&Oe(o,h[0])},i:se,o:se,d(h){h&&m(e),c=!1,he(f)}}}function $t(n,e,t){let l,i,s,o=!1;function r(f){t(6,l=f.target.value)}function a(){t(6,l=0)}function u(){t(6,l=100),t(0,i=100)}ye(()=>{const f=re.get("volume");if(console.log("vol",f),t(5,o=!0),f==null){t(4,s=10);return}t(4,s=parseInt(f))});function c(){i=st(this.value),t(0,i),t(6,l),t(4,s)}return n.$$.update=()=>{n.$$.dirty&16&&t(6,l=s),n.$$.dirty&64&&t(0,i=l),n.$$.dirty&96&&o&&(console.log("volume",l),ht(l/100),re.set("volume",l.toString(),{expires:31}))},[i,r,a,u,s,o,l,c]}class Nt extends te{constructor(e){super(),ne(this,e,$t,Et,ee,{})}}function Ot(n,e,t){const l=de();let{intervalS:i=0}=e,{timeoutS:s=0}=e,{active:o=!0}=e,r=0,a=0;function u(f){console.log("run annoyer",f),clearInterval(r),clearTimeout(a),f&&(r=setInterval(()=>{Ee(),o||clearInterval(r)},i*1e3),a=setTimeout(()=>{f=!1,c()},s*1e3))}function c(){l("off")}return n.$$set=f=>{"intervalS"in f&&t(0,i=f.intervalS),"timeoutS"in f&&t(1,s=f.timeoutS),"active"in f&&t(2,o=f.active)},n.$$.update=()=>{n.$$.dirty&4&&u(o)},[i,s,o]}class Dt extends te{constructor(e){super(),ne(this,e,Ot,null,ee,{intervalS:0,timeoutS:1,active:2})}}const Fe=ae+"/tea.png",At=ae+"/clock_red.png",Lt=ae+"/clock_yellow.png";function Mt(n){if(console.log("changeFavicon",n),typeof document>"u"||document===null)return;const e=document.getElementById("favicon");if(e!==null)switch(n){case F.STOPPED:e.href=Fe;break;case F.RUNNING:e.href=At;break;case F.WAITING_FOR_STOP:e.href=Lt;break;default:e.href=Fe}}function Rt(n){let e,t,l;return e=new Nt({}),{c(){J(e.$$.fragment),t=T("br")},l(i){X(e.$$.fragment,i),t=S(i,"BR",{})},m(i,s){Y(e,i,s),b(i,t,s),l=!0},p:se,i(i){l||(M(e.$$.fragment,i),l=!0)},o(i){B(e.$$.fragment,i),l=!1},d(i){i&&m(t),Q(e,i)}}}function ze(n){let e,t;return e=new $e({props:{title:"stop and don't save logs",$$slots:{default:[Bt]},$$scope:{ctx:n}}}),{c(){J(e.$$.fragment)},l(l){X(e.$$.fragment,l)},m(l,i){Y(e,l,i),t=!0},p(l,i){const s={};i&8196&&(s.$$scope={dirty:i,ctx:l}),e.$set(s)},i(l){t||(M(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function Bt(n){let e,t,l,i,s,o,r;return{c(){e=T("button"),t=H("cancel"),i=A(),s=T("br"),this.h()},l(a){e=S(a,"BUTTON",{id:!0,class:!0});var u=R(e);t=q(u,"cancel"),u.forEach(m),i=L(a),s=S(a,"BR",{}),this.h()},h(){k(e,"id","stopper"),e.hidden=l=n[2]===F.STOPPED,k(e,"class","svelte-15io30k")},m(a,u){b(a,e,u),$(e,t),b(a,i,u),b(a,s,u),o||(r=V(e,"click",n[7]),o=!0)},p(a,u){u&4&&l!==(l=a[2]===F.STOPPED)&&(e.hidden=l)},d(a){a&&(m(e),m(i),m(s)),o=!1,r()}}}function Ut(n){let e,t,l,i,s,o;t=new kt({props:{time:n[3]}}),t.$on("alarming",n[5]),t.$on("stop",n[8]),i=new $e({props:{title:"Volume",$$slots:{default:[Rt]},$$scope:{ctx:n}}});let r=n[2]!==F.STOPPED&&ze(n);return{c(){e=T("div"),J(t.$$.fragment),l=A(),J(i.$$.fragment),s=A(),r&&r.c(),this.h()},l(a){e=S(a,"DIV",{class:!0});var u=R(e);X(t.$$.fragment,u),l=L(u),X(i.$$.fragment,u),s=L(u),r&&r.l(u),u.forEach(m),this.h()},h(){k(e,"class","clock svelte-15io30k")},m(a,u){b(a,e,u),Y(t,e,null),$(e,l),Y(i,e,null),$(e,s),r&&r.m(e,null),o=!0},p(a,u){const c={};u&8&&(c.time=a[3]),t.$set(c);const f={};u&8192&&(f.$$scope={dirty:u,ctx:a}),i.$set(f),a[2]!==F.STOPPED?r?(r.p(a,u),u&4&&M(r,1)):(r=ze(a),r.c(),M(r,1),r.m(e,null)):r&&(ue(),B(r,1,1,()=>{r=null}),ce())},i(a){o||(M(t.$$.fragment,a),M(i.$$.fragment,a),M(r),o=!0)},o(a){B(t.$$.fragment,a),B(i.$$.fragment,a),B(r),o=!1},d(a){a&&m(e),Q(t),Q(i),r&&r.d()}}}function Vt(n){let e,t,l,i;return e=new yt({props:{active:n[2]===F.STOPPED,$$slots:{default:[Ut]},$$scope:{ctx:n}}}),e.$on("start",n[4]),e.$on("stop",n[6]),l=new Dt({props:{active:n[2]===F.WAITING_FOR_STOP,intervalS:n[0],timeoutS:n[1]}}),l.$on("off",n[6]),{c(){J(e.$$.fragment),t=A(),J(l.$$.fragment)},l(s){X(e.$$.fragment,s),t=L(s),X(l.$$.fragment,s)},m(s,o){Y(e,s,o),b(s,t,o),Y(l,s,o),i=!0},p(s,[o]){const r={};o&4&&(r.active=s[2]===F.STOPPED),o&8204&&(r.$$scope={dirty:o,ctx:s}),e.$set(r);const a={};o&4&&(a.active=s[2]===F.WAITING_FOR_STOP),o&1&&(a.intervalS=s[0]),o&2&&(a.timeoutS=s[1]),l.$set(a)},i(s){i||(M(e.$$.fragment,s),M(l.$$.fragment,s),i=!0)},o(s){B(e.$$.fragment,s),B(l.$$.fragment,s),i=!1},d(s){s&&m(t),Q(e,s),Q(l,s)}}}function Gt(n,e,t){const l=de();let{timersMultiplier:i}=e,{afterClockIntervaltS:s}=e,{afterClockTimeoutS:o}=e,r=F.STOPPED,a=new Ce,u=0;function c(y){t(3,u=y*i)}function f(y){t(2,r=F.RUNNING),c(y.detail.timer),a=new Ce(y.detail.timer,y.detail.name)}function h(){if(typeof document<"u"&&document.visibilityState==="visible"){_(!0);return}t(2,r=F.WAITING_FOR_STOP)}function _(y=!0){t(2,r=F.STOPPED),a.finish=new Date,t(3,u=0),y&&l("timer",a)}function C(){_(!1)}function N(){r!==F.STOPPED&&_(!0)}return ye(()=>{document.addEventListener("visibilitychange",function(){r===F.WAITING_FOR_STOP&&document.visibilityState==="visible"&&(console.log("visibility change to visible"),_(!0))}),setInterval(function(){r==F.RUNNING&&(a.finish=new Date,l("timer",a))},5e3)}),n.$$set=y=>{"timersMultiplier"in y&&t(9,i=y.timersMultiplier),"afterClockIntervaltS"in y&&t(0,s=y.afterClockIntervaltS),"afterClockTimeoutS"in y&&t(1,o=y.afterClockTimeoutS)},n.$$.update=()=>{n.$$.dirty&4&&Mt(r)},[s,o,r,u,f,h,_,C,N,i]}class tt extends te{constructor(e){super(),ne(this,e,Gt,Vt,ee,{timersMultiplier:9,afterClockIntervaltS:0,afterClockTimeoutS:1})}}function Ft(n){let e;return{c(){e=H("Active for")},l(t){e=q(t,"Active for")},m(t,l){b(t,e,l)},d(t){t&&m(e)}}}function zt(n){let e;return{c(){e=H("Rest for")},l(t){e=q(t,"Rest for")},m(t,l){b(t,e,l)},d(t){t&&m(e)}}}function jt(n){let e,t,l,i,s,o,r,a=Le(n[1])+"",u;function c(_,C){return _[0]?zt:Ft}let f=c(n),h=f(n);return{c(){e=T("snap"),t=T("snap"),l=H(n[2]),i=A(),s=T("snap"),h.c(),o=A(),r=T("snap"),u=H(a),this.h()},l(_){e=S(_,"SNAP",{class:!0});var C=R(e);t=S(C,"SNAP",{class:!0});var N=R(t);l=q(N,n[2]),N.forEach(m),i=L(C),s=S(C,"SNAP",{});var y=R(s);h.l(y),y.forEach(m),o=L(C),r=S(C,"SNAP",{class:!0});var D=R(r);u=q(D,a),D.forEach(m),C.forEach(m),this.h()},h(){k(t,"class","time work svelte-1qlajhd"),k(r,"class","duration svelte-1qlajhd"),k(e,"class","logline svelte-1qlajhd"),ve(e,"rest",n[0])},m(_,C){b(_,e,C),$(e,t),$(t,l),$(e,i),$(e,s),h.m(s,null),$(e,o),$(e,r),$(r,u)},p(_,[C]){f!==(f=c(_))&&(h.d(1),h=f(_),h&&(h.c(),h.m(s,null))),C&2&&a!==(a=Le(_[1])+"")&&me(u,a),C&1&&ve(e,"rest",_[0])},i:se,o:se,d(_){_&&m(e),h.d()}}}function Wt(n){let e=n.getHours().toString().padStart(2,"0"),t=n.getMinutes().toString().padStart(2,"0");return`${e}:${t}`}function Ht(n,e,t){let l,i,{start:s}=e,{finish:o}=e,{name:r}=e,a=Wt(s);return n.$$set=u=>{"start"in u&&t(3,s=u.start),"finish"in u&&t(4,o=u.finish),"name"in u&&t(5,r=u.name)},n.$$.update=()=>{n.$$.dirty&24&&t(1,l=(o.getTime()-s.getTime())/1e3),n.$$.dirty&32&&t(0,i=r==="rest")},[i,l,a,s,o,r]}class qt extends te{constructor(e){super(),ne(this,e,Ht,jt,ee,{start:3,finish:4,name:5})}}function nt(n,e,t){return(e.start.getTime()-n.finish.getTime())/1e3>t}function Jt(n,e=60){var t=[],l=0;if(n.length<=1)return n;t.push(n[0]),l=0;for(let i=1;i<n.length;i++){const s=n[i];t[l].name==s.name?nt(t[l],s,e)?(t.push(s),l++):t[l].finish=s.finish:(t.push(s),l++)}return t}function je(n,e="rest",t=60*5){var l=[],i=0;if(n.length<=1)return n;l.push(n[0]),i=0;for(let o=1;o<n.length;o++){const r=n[o];if(nt(l[i],r,t)){var s=new Ce;s.start=l[i].finish,s.finish=r.start,s.name=e,l.push(s),i++}l.push(r),i++}return l}function Xt(n){return n.forEach(e=>{if(!("name"in e&&"start"in e&&"finish"in e))return!1}),!0}class Te{constructor(e){W(this,"list",[]);W(this,"rest_name","rest");W(this,"work_name","work");try{const t=JSON.parse(e);let l=[];Xt(t)&&t.forEach(i=>{l.push({value:0,name:i.name,finish:new Date(i.finish*1e3),start:new Date(i.start*1e3)})}),console.log("deserialized logs:",l),this.list=l}catch{this.list=[]}}normalize(e,t){var l=this.list;return t&&(l=je(l,"rest")),e&&(l=Jt(l)),l}serialize(){let e=[];return this.list.forEach(t=>{e.push({name:t.name,start:Math.floor(t.start.getTime()/1e3),finish:Math.floor(t.finish.getTime()/1e3)})}),console.log("Serializing logs:",JSON.stringify(e)),JSON.stringify(e)}push(e){return this.list.length>0&&this.list[this.list.length-1].start==e.start?(this.list[this.list.length-1].finish=e.finish,this.list=this.list,this):(this.list.push(e),this)}changeLineType(e){this.list.forEach(t=>{t.start===e&&(t.name=t.name===this.rest_name?this.work_name:this.rest_name)})}remove(e){for(var t=0;t<this.list.length;)this.list[t].start===e?this.list.splice(t,1):++t}total(){let e=0;return this.list.forEach(t=>{t.name==this.work_name&&(e+=(t.finish.getTime()-t.start.getTime())/1e3)}),e}glueGaps(){return this.list=je(this.list,this.rest_name),this}}function We(n,e,t){const l=n.slice();return l[17]=e[t],l}function He(n){let e,t="Save gaps",l,i;return{c(){e=T("button"),e.textContent=t,this.h()},l(s){e=S(s,"BUTTON",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-1iff94b"&&(e.textContent=t),this.h()},h(){k(e,"class","save svelte-pr9b5e")},m(s,o){b(s,e,o),l||(i=V(e,"click",n[10]),l=!0)},p:se,d(s){s&&m(e),l=!1,i()}}}function qe(n){let e,t,l,i,s,o,r;function a(){return n[11](n[17])}function u(){return n[12](n[17])}return{c(){e=T("button"),t=H("ch"),l=A(),i=T("button"),s=H("x"),this.h()},l(c){e=S(c,"BUTTON",{class:!0});var f=R(e);t=q(f,"ch"),f.forEach(m),l=L(c),i=S(c,"BUTTON",{class:!0});var h=R(i);s=q(h,"x"),h.forEach(m),this.h()},h(){k(e,"class","mini svelte-pr9b5e"),e.hidden=n[4],k(i,"class","mini svelte-pr9b5e"),i.hidden=n[4]},m(c,f){b(c,e,f),$(e,t),b(c,l,f),b(c,i,f),$(i,s),o||(r=[V(e,"click",a),V(i,"click",u)],o=!0)},p(c,f){n=c,f&16&&(e.hidden=n[4]),f&16&&(i.hidden=n[4])},d(c){c&&(m(e),m(l),m(i)),o=!1,he(r)}}}function Je(n,e){let t,l,i,s,o,r;const a=[e[17]];let u={};for(let f=0;f<a.length;f+=1)u=Pe(u,a[f]);l=new qt({props:u});let c=e[4]&&qe(e);return{key:n,first:null,c(){t=ie(),J(l.$$.fragment),i=A(),c&&c.c(),s=A(),o=T("br"),this.h()},l(f){t=ie(),X(l.$$.fragment,f),i=L(f),c&&c.l(f),s=L(f),o=S(f,"BR",{}),this.h()},h(){this.first=t},m(f,h){b(f,t,h),Y(l,f,h),b(f,i,h),c&&c.m(f,h),b(f,s,h),b(f,o,h),r=!0},p(f,h){e=f;const _=h&8?ft(a,[ut(e[17])]):{};l.$set(_),e[4]?c?c.p(e,h):(c=qe(e),c.c(),c.m(s.parentNode,s)):c&&(c.d(1),c=null)},i(f){r||(M(l.$$.fragment,f),r=!0)},o(f){B(l.$$.fragment,f),r=!1},d(f){f&&(m(t),m(i),m(s),m(o)),Q(l,f),c&&c.d(f)}}}function Yt(n){let e,t="Clear logs",l,i,s="Active time: ",o,r=Me(n[0].total())+"",a,u,c,f,h,_="Collapse",C,N,y,D="Fill gaps",z,U,w,j,G,g=[],I=new Map,O,p,v,P=n[2]&&He(n),K=oe(n[3]);const le=d=>d[17].start;for(let d=0;d<K.length;d+=1){let E=We(n,K,d),Z=le(E);I.set(Z,g[d]=Je(Z,E))}return{c(){e=T("button"),e.textContent=t,l=A(),i=T("span"),i.textContent=s,o=T("span"),a=H(r),u=A(),c=T("input"),f=A(),h=T("label"),h.textContent=_,C=A(),N=T("input"),y=T("label"),y.textContent=D,z=A(),P&&P.c(),U=A(),w=T("br"),j=A(),G=T("div");for(let d=0;d<g.length;d+=1)g[d].c();this.h()},l(d){e=S(d,"BUTTON",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-16kso6c"&&(e.textContent=t),l=L(d),i=S(d,"SPAN",{class:!0,"data-svelte-h":!0}),x(i)!=="svelte-18pz33x"&&(i.textContent=s),o=S(d,"SPAN",{class:!0});var E=R(o);a=q(E,r),E.forEach(m),u=L(d),c=S(d,"INPUT",{type:!0,id:!0,name:!0}),f=L(d),h=S(d,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),x(h)!=="svelte-1bo9096"&&(h.textContent=_),C=L(d),N=S(d,"INPUT",{type:!0,id:!0,name:!0}),y=S(d,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),x(y)!=="svelte-1y7lnfx"&&(y.textContent=D),z=L(d),P&&P.l(d),U=L(d),w=S(d,"BR",{}),j=L(d),G=S(d,"DIV",{class:!0});var Z=R(G);for(let be=0;be<g.length;be+=1)g[be].l(Z);Z.forEach(m),this.h()},h(){k(e,"class","clear svelte-pr9b5e"),k(i,"class","svelte-pr9b5e"),k(o,"class","svelte-pr9b5e"),k(c,"type","checkbox"),k(c,"id","collapse"),k(c,"name","collapse"),k(h,"for","collapse"),k(h,"class","svelte-pr9b5e"),k(N,"type","checkbox"),k(N,"id","fillRests"),k(N,"name","fill rests gaps"),k(y,"for","fillRests"),k(y,"class","svelte-pr9b5e"),k(G,"class","logs svelte-pr9b5e")},m(d,E){b(d,e,E),b(d,l,E),b(d,i,E),b(d,o,E),$(o,a),b(d,u,E),b(d,c,E),c.checked=n[1],b(d,f,E),b(d,h,E),b(d,C,E),b(d,N,E),N.checked=n[2],b(d,y,E),b(d,z,E),P&&P.m(d,E),b(d,U,E),b(d,w,E),b(d,j,E),b(d,G,E);for(let Z=0;Z<g.length;Z+=1)g[Z]&&g[Z].m(G,null);O=!0,p||(v=[V(e,"click",n[7]),V(c,"change",n[8]),V(N,"change",n[9])],p=!0)},p(d,[E]){(!O||E&1)&&r!==(r=Me(d[0].total())+"")&&me(a,r),E&2&&(c.checked=d[1]),E&4&&(N.checked=d[2]),d[2]?P?P.p(d,E):(P=He(d),P.c(),P.m(U.parentNode,U)):P&&(P.d(1),P=null),E&120&&(K=oe(d[3]),ue(),g=we(g,E,le,1,d,K,I,G,Se,Je,null,We),ce())},i(d){if(!O){for(let E=0;E<K.length;E+=1)M(g[E]);O=!0}},o(d){for(let E=0;E<g.length;E+=1)B(g[E]);O=!1},d(d){d&&(m(e),m(l),m(i),m(o),m(u),m(c),m(f),m(h),m(C),m(N),m(y),m(z),m(U),m(w),m(j),m(G)),P&&P.d(d);for(let E=0;E<g.length;E+=1)g[E].d();p=!1,he(v)}}}function Qt(n,e,t){let l,{timerLogs:i=new Te("")}=e;var s=!0,o=!0,r=[];let a=!1;function u(w){w!=null&&a&&re.set("logs",w.serialize(),{expires:31})}function c(w,j){a&&re.set(j,w?"true":"false",{expires:31})}function f(w){i.changeLineType(w),t(0,i)}function h(w){i.remove(w),t(0,i)}function _(w){return w==null?[]:w.normalize(s,o)}ye(()=>{let w=re.get("logs");console.log("cookies for logs contain",w),w!=null&&(t(1,s=re.get("collapsed")==="true"),t(2,o=re.get("fill_gaps")==="true"),t(0,i=new Te(w)),a=!0)});const C=()=>t(0,i=new Te(""));function N(){s=this.checked,t(1,s)}function y(){o=this.checked,t(2,o)}const D=()=>t(0,i=i.glueGaps()),z=w=>f(w.start),U=w=>h(w.start);return n.$$set=w=>{"timerLogs"in w&&t(0,i=w.timerLogs)},n.$$.update=()=>{n.$$.dirty&2&&c(s,"collapsed"),n.$$.dirty&4&&c(o,"fill_gaps"),n.$$.dirty&1&&u(i),n.$$.dirty&1&&t(3,r=_(i)),n.$$.dirty&6&&t(4,l=!(s||o))},[i,s,o,r,l,f,h,C,N,y,D,z,U]}class Kt extends te{constructor(e){super(),ne(this,e,Qt,Yt,ee,{timerLogs:0})}}const Zt={afterClockIntervaltS:3,afterClockTimeoutS:10,timersMultiplier:1},xt={afterClockIntervaltS:10,afterClockTimeoutS:60*15,timersMultiplier:1*60};function en(n){let e,t;const l=[xt];let i={};for(let s=0;s<l.length;s+=1)i=Pe(i,l[s]);return e=new tt({props:i}),e.$on("timer",n[2]),{c(){J(e.$$.fragment)},l(s){X(e.$$.fragment,s)},m(s,o){Y(e,s,o),t=!0},p(s,o){const r={};e.$set(r)},i(s){t||(M(e.$$.fragment,s),t=!0)},o(s){B(e.$$.fragment,s),t=!1},d(s){Q(e,s)}}}function tn(n){let e,t;const l=[Zt];let i={};for(let s=0;s<l.length;s+=1)i=Pe(i,l[s]);return e=new tt({props:i}),e.$on("timer",n[2]),{c(){J(e.$$.fragment)},l(s){X(e.$$.fragment,s)},m(s,o){Y(e,s,o),t=!0},p(s,o){const r={};e.$set(r)},i(s){t||(M(e.$$.fragment,s),t=!0)},o(s){B(e.$$.fragment,s),t=!1},d(s){Q(e,s)}}}function nn(n){let e,t,l,i="Let's Pomodoro!",s,o,r,a,u,c,f,h,_,C,N,y,D,z;const U=[tn,en],w=[];function j(I,O){return I[0]?0:1}o=j(n),r=w[o]=U[o](n);function G(I){n[3](I)}let g={};return n[1]!==void 0&&(g.timerLogs=n[1]),u=new Kt({props:g}),rt.push(()=>at(u,"timerLogs",G)),{c(){e=T("main"),t=T("div"),l=T("h1"),l.textContent=i,s=A(),r.c(),a=A(),J(u.$$.fragment),f=A(),h=T("div"),_=T("label"),C=H("Debug:"),N=T("input"),this.h()},l(I){e=S(I,"MAIN",{class:!0});var O=R(e);t=S(O,"DIV",{class:!0});var p=R(t);l=S(p,"H1",{class:!0,"data-svelte-h":!0}),x(l)!=="svelte-cxq7y3"&&(l.textContent=i),s=L(p),r.l(p),a=L(p),X(u.$$.fragment,p),p.forEach(m),O.forEach(m),f=L(I),h=S(I,"DIV",{class:!0});var v=R(h);_=S(v,"LABEL",{id:!0});var P=R(_);C=q(P,"Debug:"),N=S(P,"INPUT",{type:!0}),P.forEach(m),v.forEach(m),this.h()},h(){k(l,"class","logo svelte-b2iouv"),k(t,"class","centered-div"),k(e,"class","svelte-b2iouv"),k(N,"type","checkbox"),k(_,"id","debug"),k(h,"class","debug-div svelte-b2iouv")},m(I,O){b(I,e,O),$(e,t),$(t,l),$(t,s),w[o].m(t,null),$(t,a),Y(u,t,null),b(I,f,O),b(I,h,O),$(h,_),$(_,C),$(_,N),N.checked=n[0],y=!0,D||(z=V(N,"change",n[4]),D=!0)},p(I,[O]){let p=o;o=j(I),o===p?w[o].p(I,O):(ue(),B(w[p],1,1,()=>{w[p]=null}),ce(),r=w[o],r?r.p(I,O):(r=w[o]=U[o](I),r.c()),M(r,1),r.m(t,a));const v={};!c&&O&2&&(c=!0,v.timerLogs=I[1],ot(()=>c=!1)),u.$set(v),O&1&&(N.checked=I[0])},i(I){y||(M(r),M(u.$$.fragment,I),y=!0)},o(I){B(r),B(u.$$.fragment,I),y=!1},d(I){I&&(m(e),m(f),m(h)),w[o].d(),Q(u),D=!1,z()}}}function ln(n,e,t){let l=!1,i;function s(a){t(1,i=i.push(a.detail))}function o(a){i=a,t(1,i)}function r(){l=this.checked,t(0,l)}return[l,i,s,o,r]}class fn extends te{constructor(e){super(),ne(this,e,ln,nn,ee,{})}}export{fn as component};
