var lt=Object.defineProperty;var st=(n,e,t)=>e in n?lt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var le=(n,e,t)=>st(n,typeof e!="symbol"?e+"":e,t);import{A as he,s as x,c as Xe,e as T,b as L,p as se,d as S,f as R,i as m,j as M,v as k,k as b,O as V,u as Ye,g as Qe,a as Ke,t as W,h as H,w as pe,l as $,m as me,P as de,Q as Ne,R as ve,n as ie,S as Z,T as Oe,r as ye,U as it,V as Ee,x as rt,W as ot}from"../chunks/scheduler.w4DLfyO8.js";import{a as B,t as A,S as ee,i as te,b as q,d as J,m as X,e as Y,g as fe,c as ce,f as at}from"../chunks/index.DZv-TxQa.js";import{b as ae}from"../chunks/paths.DV71YOK5.js";function oe(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Se(n,e){B(n,1,1,()=>{e.delete(n.key)})}function we(n,e,t,l,s,i,o,r,a,f,c,u){let h=n.length,_=i.length,C=h;const N={};for(;C--;)N[n[C].key]=C;const y=[],D=new Map,z=new Map,U=[];for(C=_;C--;){const g=u(s,i,C),I=t(g);let O=o.get(I);O?U.push(()=>O.p(g,e)):(O=f(I,g),O.c()),D.set(I,y[C]=O),I in N&&z.set(I,Math.abs(C-N[I]))}const w=new Set,j=new Set;function G(g){A(g,1),g.m(r,c),o.set(g.key,g),c=g.first,_--}for(;h&&_;){const g=y[_-1],I=n[h-1],O=g.key,p=I.key;g===I?(c=g.first,h--,_--):D.has(p)?!o.has(O)||w.has(O)?G(g):j.has(p)?h--:z.get(O)>z.get(p)?(j.add(O),G(g)):(w.add(p),h--):(a(I,o),h--)}for(;h--;){const g=n[h];D.has(g.key)||a(g,o)}for(;_;)G(y[_-1]);return he(U),y}function ut(n,e){const t={},l={},s={$$scope:1};let i=n.length;for(;i--;){const o=n[i],r=e[i];if(r){for(const a in o)a in r||(l[a]=1);for(const a in r)s[a]||(t[a]=r[a],s[a]=1);n[i]=r}else for(const a in o)s[a]=1}for(const o in l)o in t||(t[o]=void 0);return t}function ft(n){return typeof n=="object"&&n!==null?n:{}}const ct=ae+"/ring2.wav";let Ze=function(){},ue,ke,xe=.5,_e;if(typeof window<"u"){let n=window.AudioContext||window.webkitAudioContext;ue=new n,fetch(ct).then(e=>e.arrayBuffer()).then(e=>ue.decodeAudioData(e)).then(e=>{ke=e}).catch(e=>console.error("Error loading sound file:",e)),Ze=function(){if(!ke)return;_e=ue.createBufferSource(),_e.buffer=ke;let e=ue.createGain();e.gain.value=xe,_e.connect(e),e.connect(ue.destination),_e.start(0)}}function Pe(){Ze()}function ht(n,e){xe=n,Pe()}function De(n){let e,t;return{c(){e=T("div"),t=W(n[0]),this.h()},l(l){e=S(l,"DIV",{style:!0,class:!0});var s=R(e);t=H(s,n[0]),s.forEach(m),this.h()},h(){pe(e,"top",n[3]+"px"),pe(e,"left",n[2]+"px"),k(e,"class","tooltip svelte-43gogz")},m(l,s){b(l,e,s),$(e,t)},p(l,s){s&1&&me(t,l[0]),s&8&&pe(e,"top",l[3]+"px"),s&4&&pe(e,"left",l[2]+"px")},d(l){l&&m(e)}}}function mt(n){let e,t,l,s,i,o;const r=n[8].default,a=Xe(r,n,n[7],null);let f=n[1]&&De(n);return{c(){e=T("div"),a&&a.c(),t=L(),f&&f.c(),l=se(),this.h()},l(c){e=S(c,"DIV",{"aria-hidden":!0});var u=R(e);a&&a.l(u),u.forEach(m),t=M(c),f&&f.l(c),l=se(),this.h()},h(){k(e,"aria-hidden","true")},m(c,u){b(c,e,u),a&&a.m(e,null),b(c,t,u),f&&f.m(c,u),b(c,l,u),s=!0,i||(o=[V(e,"mouseover",n[4]),V(e,"mouseleave",n[6]),V(e,"mousemove",n[5]),V(e,"focus",dt)],i=!0)},p(c,[u]){a&&a.p&&(!s||u&128)&&Ye(a,r,c,c[7],s?Ke(r,c[7],u,null):Qe(c[7]),null),c[1]?f?f.p(c,u):(f=De(c),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null)},i(c){s||(A(a,c),s=!0)},o(c){B(a,c),s=!1},d(c){c&&(m(e),m(t),m(l)),a&&a.d(c),f&&f.d(c),i=!1,he(o)}}}const dt=function(){};function pt(n,e,t){let{$$slots:l={},$$scope:s}=e,{title:i=""}=e,o=!1,r,a;function f(h){t(1,o=!0),t(2,r=h.pageX+10),t(3,a=h.pageY+10)}function c(h){t(2,r=h.pageX+10),t(3,a=h.pageY+10)}function u(){t(1,o=!1)}return n.$$set=h=>{"title"in h&&t(0,i=h.title),"$$scope"in h&&t(7,s=h.$$scope)},[i,o,r,a,f,c,u,s,l]}class $e extends ee{constructor(e){super(),te(this,e,pt,mt,x,{title:0})}}class Ce{constructor(e=0,t=""){le(this,"start");le(this,"finish");le(this,"name");le(this,"value");this.start=new Date,this.finish=new Date,this.name=t,this.value=e}}const F={RUNNING:"RUNNING",STOPPED:"STOPPED",WAITING_FOR_STOP:"WAITING_FOR_STOP"};function Le(n){let e=Math.floor(n/60).toString().padStart(2,"0"),t=Math.floor(n%60).toString().padStart(2,"0");return`${e}:${t}`}function Me(n){let e=Math.floor(n/60),t=Math.floor(n%60);if(e>60){let l=Math.floor(e/60);return e=Math.floor(e%60),`${l}h ${e} min`}else return e>0?`${e} min`:`${t} sec`}function Ae(n){let e=Math.floor(n/3600);e>0&&(n=n-e*3600);let t=Math.floor(n/60),l=Math.floor(n%60);return e==1?`${e} hour ${t} min`:e>0?`${e} hours ${t} min`:t>10?`${t} min`:t>1?`${t} min ${l} sec`:`${l} sec`}function _t(n){let e,t=Le(n[0])+"",l,s,i;return{c(){e=T("button"),l=W(t),this.h()},l(o){e=S(o,"BUTTON",{id:!0,class:!0});var r=R(e);l=H(r,t),r.forEach(m),this.h()},h(){k(e,"id","watch"),k(e,"class","svelte-wj6dup")},m(o,r){b(o,e,r),$(e,l),s||(i=V(e,"click",n[1]),s=!0)},p(o,r){r&1&&t!==(t=Le(o[0])+"")&&me(l,t)},d(o){o&&m(e),s=!1,i()}}}function gt(n){let e,t;return e=new $e({props:{title:"stop timer",$$slots:{default:[_t]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,s){X(e,l,s),t=!0},p(l,[s]){const i={};s&257&&(i.$$scope={dirty:s,ctx:l}),e.$set(i)},i(l){t||(A(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){Y(e,l)}}}function vt(n,e,t){let{time:l=0}=e;const s=de();let i=new Date,o=0,r=0;function a(u){console.log("runTimer",u),i=new Date,clearInterval(r),t(0,o=u),l!=0&&(r=setInterval(()=>{let h=l-Math.floor((Date.now()-i.getTime())/1e3);if(h<=0){f(),clearInterval(r);return}t(0,o=h)},500))}function f(){Pe(),s("alarming")}function c(){s("stop")}return n.$$set=u=>{"time"in u&&t(2,l=u.time)},n.$$.update=()=>{n.$$.dirty&4&&a(l)},[o,c,l]}class bt extends ee{constructor(e){super(),te(this,e,vt,gt,x,{time:2})}}function kt(n){let e,t,l,s,i,o;return{c(){e=T("button"),t=W(n[1]),l=W(" min"),this.h()},l(r){e=S(r,"BUTTON",{class:!0});var a=R(e);t=H(a,n[1]),l=H(a," min"),a.forEach(m),this.h()},h(){k(e,"class",s=Ne(n[2])+" svelte-14qegn3"),e.disabled=n[3],ve(e,"pressed",n[0])},m(r,a){b(r,e,a),$(e,t),$(e,l),i||(o=V(e,"click",n[5]),i=!0)},p(r,[a]){a&2&&me(t,r[1]),a&4&&s!==(s=Ne(r[2])+" svelte-14qegn3")&&k(e,"class",s),a&8&&(e.disabled=r[3]),a&5&&ve(e,"pressed",r[0])},i:ie,o:ie,d(r){r&&m(e),i=!1,o()}}}function Tt(n,e,t){const l=de();let{value:s}=e,{name:i}=e,{disabled:o=!1}=e,{pressed:r=!1}=e;function a(u,h){l("start",{name:u,val:h}),t(0,r=!0)}function f(u){u||t(0,r=!1)}const c=function(){a(i,s)};return n.$$set=u=>{"value"in u&&t(1,s=u.value),"name"in u&&t(2,i=u.name),"disabled"in u&&t(3,o=u.disabled),"pressed"in u&&t(0,r=u.pressed)},n.$$.update=()=>{n.$$.dirty&8&&f(o)},[r,s,i,o,a,c]}class et extends ee{constructor(e){super(),te(this,e,Tt,kt,x,{value:1,name:2,disabled:3,pressed:0})}}function Re(n,e,t){const l=n.slice();return l[6]=e[t],l}const St=n=>({}),Be=n=>({class:"item svelte-1rvg6ah"});function Ue(n,e,t){const l=n.slice();return l[6]=e[t],l}function Ve(n,e){let t,l,s,i,o;return l=new et({props:{value:e[6],name:"work",disabled:!e[0]}}),l.$on("start",e[2]),{key:n,first:null,c(){t=se(),q(l.$$.fragment),s=L(),i=T("br"),this.h()},l(r){t=se(),J(l.$$.fragment,r),s=M(r),i=S(r,"BR",{}),this.h()},h(){this.first=t},m(r,a){b(r,t,a),X(l,r,a),b(r,s,a),b(r,i,a),o=!0},p(r,a){e=r;const f={};a&1&&(f.disabled=!e[0]),l.$set(f)},i(r){o||(A(l.$$.fragment,r),o=!0)},o(r){B(l.$$.fragment,r),o=!1},d(r){r&&(m(t),m(s),m(i)),Y(l,r)}}}function Ge(n,e){let t,l,s,i,o;return l=new et({props:{value:e[6],name:"rest",disabled:!e[0]}}),l.$on("start",e[2]),{key:n,first:null,c(){t=se(),q(l.$$.fragment),s=L(),i=T("br"),this.h()},l(r){t=se(),J(l.$$.fragment,r),s=M(r),i=S(r,"BR",{}),this.h()},h(){this.first=t},m(r,a){b(r,t,a),X(l,r,a),b(r,s,a),b(r,i,a),o=!0},p(r,a){e=r;const f={};a&1&&(f.disabled=!e[0]),l.$set(f)},i(r){o||(A(l.$$.fragment,r),o=!0)},o(r){B(l.$$.fragment,r),o=!1},d(r){r&&(m(t),m(s),m(i)),Y(l,r)}}}function wt(n){let e,t,l,s,i="Active",o,r,a=[],f=new Map,c,u,h,_,C="Rest",N,y,D=[],z=new Map,U,w=oe(n[1]);const j=p=>p[6];for(let p=0;p<w.length;p+=1){let v=Ue(n,w,p),E=j(v);f.set(E,a[p]=Ve(E,v))}const G=n[4].default,g=Xe(G,n,n[3],Be);let I=oe(n[1]);const O=p=>p[6];for(let p=0;p<I.length;p+=1){let v=Re(n,I,p),E=O(v);z.set(E,D[p]=Ge(E,v))}return{c(){e=T("div"),t=T("div"),l=T("div"),s=T("span"),s.textContent=i,o=T("br"),r=L();for(let p=0;p<a.length;p+=1)a[p].c();c=L(),g&&g.c(),u=L(),h=T("div"),_=T("span"),_.textContent=C,N=T("br"),y=L();for(let p=0;p<D.length;p+=1)D[p].c();this.h()},l(p){e=S(p,"DIV",{});var v=R(e);t=S(v,"DIV",{class:!0});var E=R(t);l=S(E,"DIV",{class:!0});var Q=R(l);s=S(Q,"SPAN",{class:!0,"data-svelte-h":!0}),Z(s)!=="svelte-19szg5l"&&(s.textContent=i),o=S(Q,"BR",{}),r=M(Q);for(let d=0;d<a.length;d+=1)a[d].l(Q);Q.forEach(m),c=M(E),g&&g.l(E),u=M(E),h=S(E,"DIV",{class:!0});var ne=R(h);_=S(ne,"SPAN",{class:!0,"data-svelte-h":!0}),Z(_)!=="svelte-1gtata5"&&(_.textContent=C),N=S(ne,"BR",{}),y=M(ne);for(let d=0;d<D.length;d+=1)D[d].l(ne);ne.forEach(m),E.forEach(m),v.forEach(m),this.h()},h(){k(s,"class","label svelte-1rvg6ah"),k(l,"class","item svelte-1rvg6ah"),k(_,"class","label svelte-1rvg6ah"),k(h,"class","item svelte-1rvg6ah"),k(t,"class","grid-container svelte-1rvg6ah")},m(p,v){b(p,e,v),$(e,t),$(t,l),$(l,s),$(l,o),$(l,r);for(let E=0;E<a.length;E+=1)a[E]&&a[E].m(l,null);$(t,c),g&&g.m(t,null),$(t,u),$(t,h),$(h,_),$(h,N),$(h,y);for(let E=0;E<D.length;E+=1)D[E]&&D[E].m(h,null);U=!0},p(p,[v]){v&7&&(w=oe(p[1]),fe(),a=we(a,v,j,1,p,w,f,l,Se,Ve,null,Ue),ce()),g&&g.p&&(!U||v&8)&&Ye(g,G,p,p[3],U?Ke(G,p[3],v,St):Qe(p[3]),Be),v&7&&(I=oe(p[1]),fe(),D=we(D,v,O,1,p,I,z,h,Se,Ge,null,Re),ce())},i(p){if(!U){for(let v=0;v<w.length;v+=1)A(a[v]);A(g,p);for(let v=0;v<I.length;v+=1)A(D[v]);U=!0}},o(p){for(let v=0;v<a.length;v+=1)B(a[v]);B(g,p);for(let v=0;v<D.length;v+=1)B(D[v]);U=!1},d(p){p&&m(e);for(let v=0;v<a.length;v+=1)a[v].d();g&&g.d(p);for(let v=0;v<D.length;v+=1)D[v].d()}}}function Ct(n,e,t){let{$$slots:l={},$$scope:s}=e;const i=de();let o=[5,10,15,20,25];function r(f){i("start",{timer:f.detail.val,name:f.detail.name}),console.log("handleTimerStart")}let{active:a=!0}=e;return n.$$set=f=>{"active"in f&&t(0,a=f.active),"$$scope"in f&&t(3,s=f.$$scope)},[a,o,r,s,l]}class It extends ee{constructor(e){super(),te(this,e,Ct,wt,x,{active:0})}}/*! js-cookie v3.0.5 | MIT */function ge(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var l in t)n[l]=t[l]}return n}var yt={read:function(n){return n[0]==='"'&&(n=n.slice(1,-1)),n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(n){return encodeURIComponent(n).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function Ie(n,e){function t(s,i,o){if(!(typeof document>"u")){o=ge({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var r="";for(var a in o)o[a]&&(r+="; "+a,o[a]!==!0&&(r+="="+o[a].split(";")[0]));return document.cookie=s+"="+n.write(i,s)+r}}function l(s){if(!(typeof document>"u"||arguments.length&&!s)){for(var i=document.cookie?document.cookie.split("; "):[],o={},r=0;r<i.length;r++){var a=i[r].split("="),f=a.slice(1).join("=");try{var c=decodeURIComponent(a[0]);if(o[c]=n.read(f,c),s===c)break}catch{}}return s?o[s]:o}}return Object.create({set:t,get:l,remove:function(s,i){t(s,"",ge({},i,{expires:-1}))},withAttributes:function(s){return Ie(this.converter,ge({},this.attributes,s))},withConverter:function(s){return Ie(ge({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(n)}})}var re=Ie(yt,{path:"/"});function Et(n){let e,t,l,s=`<img src="${ae}/volume_mute.svg" alt="Mute icon"/>`,i,o,r,a,f=`<img src="${ae}/volume_up.svg" alt="Volume max icon"/>`,c,u;return{c(){e=T("label"),t=T("div"),l=T("button"),l.innerHTML=s,i=L(),o=T("input"),r=L(),a=T("button"),a.innerHTML=f,this.h()},l(h){e=S(h,"LABEL",{});var _=R(e);t=S(_,"DIV",{class:!0});var C=R(t);l=S(C,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(l)!=="svelte-3ybpa7"&&(l.innerHTML=s),i=M(C),o=S(C,"INPUT",{class:!0,type:!0,min:!0,max:!0}),r=M(C),a=S(C,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(a)!=="svelte-vae9t2"&&(a.innerHTML=f),C.forEach(m),_.forEach(m),this.h()},h(){k(l,"class","leftbutton svelte-14xuhg1"),k(o,"class","slider bar svelte-14xuhg1"),k(o,"type","range"),k(o,"min","0"),k(o,"max","100"),k(a,"class","svelte-14xuhg1"),k(t,"class","container svelte-14xuhg1")},m(h,_){b(h,e,_),$(e,t),$(t,l),$(t,i),$(t,o),Oe(o,n[0]),$(t,r),$(t,a),c||(u=[V(l,"click",n[2]),V(o,"change",n[7]),V(o,"input",n[7]),V(o,"mouseup",n[1]),V(a,"click",n[3])],c=!0)},p(h,[_]){_&1&&Oe(o,h[0])},i:ie,o:ie,d(h){h&&m(e),c=!1,he(u)}}}function Pt(n,e,t){let l,s,i,o=!1;function r(u){t(6,l=u.target.value)}function a(){t(6,l=0)}function f(){t(6,l=100),t(0,s=100)}ye(()=>{const u=re.get("volume");if(console.log("vol",u),t(5,o=!0),u==null){t(4,i=10);return}t(4,i=parseInt(u))});function c(){s=it(this.value),t(0,s),t(6,l),t(4,i)}return n.$$.update=()=>{n.$$.dirty&16&&t(6,l=i),n.$$.dirty&64&&t(0,s=l),n.$$.dirty&96&&o&&(console.log("volume",l),ht(l/100),re.set("volume",l.toString(),{expires:31}))},[s,r,a,f,i,o,l,c]}class $t extends ee{constructor(e){super(),te(this,e,Pt,Et,x,{})}}function Nt(n,e,t){const l=de();let{intervalS:s=0}=e,{timeoutS:i=0}=e,{active:o=!0}=e,r=0,a=0;function f(u){console.log("run annoyer",u),clearInterval(r),clearTimeout(a),u&&(r=setInterval(()=>{Pe(),o||clearInterval(r)},s*1e3),a=setTimeout(()=>{u=!1,c()},i*1e3))}function c(){l("off")}return n.$$set=u=>{"intervalS"in u&&t(0,s=u.intervalS),"timeoutS"in u&&t(1,i=u.timeoutS),"active"in u&&t(2,o=u.active)},n.$$.update=()=>{n.$$.dirty&4&&f(o)},[s,i,o]}class Ot extends ee{constructor(e){super(),te(this,e,Nt,null,x,{intervalS:0,timeoutS:1,active:2})}}const Fe=ae+"/tea.png",Dt=ae+"/clock_red.png",Lt=ae+"/clock_yellow.png";function Mt(n){if(console.log("changeFavicon",n),typeof document>"u"||document===null)return;const e=document.getElementById("favicon");if(e!==null)switch(n){case F.STOPPED:e.href=Fe;break;case F.RUNNING:e.href=Dt;break;case F.WAITING_FOR_STOP:e.href=Lt;break;default:e.href=Fe}}function At(n){let e,t,l;return e=new $t({}),{c(){q(e.$$.fragment),t=T("br")},l(s){J(e.$$.fragment,s),t=S(s,"BR",{})},m(s,i){X(e,s,i),b(s,t,i),l=!0},p:ie,i(s){l||(A(e.$$.fragment,s),l=!0)},o(s){B(e.$$.fragment,s),l=!1},d(s){s&&m(t),Y(e,s)}}}function ze(n){let e,t;return e=new $e({props:{title:"stop and don't save logs",$$slots:{default:[Rt]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,s){X(e,l,s),t=!0},p(l,s){const i={};s&8196&&(i.$$scope={dirty:s,ctx:l}),e.$set(i)},i(l){t||(A(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){Y(e,l)}}}function Rt(n){let e,t,l,s,i,o,r;return{c(){e=T("button"),t=W("cancel"),s=L(),i=T("br"),this.h()},l(a){e=S(a,"BUTTON",{id:!0,class:!0});var f=R(e);t=H(f,"cancel"),f.forEach(m),s=M(a),i=S(a,"BR",{}),this.h()},h(){k(e,"id","stopper"),e.hidden=l=n[2]===F.STOPPED,k(e,"class","svelte-15io30k")},m(a,f){b(a,e,f),$(e,t),b(a,s,f),b(a,i,f),o||(r=V(e,"click",n[7]),o=!0)},p(a,f){f&4&&l!==(l=a[2]===F.STOPPED)&&(e.hidden=l)},d(a){a&&(m(e),m(s),m(i)),o=!1,r()}}}function Bt(n){let e,t,l,s,i,o;t=new bt({props:{time:n[3]}}),t.$on("alarming",n[5]),t.$on("stop",n[8]),s=new $e({props:{title:"Volume",$$slots:{default:[At]},$$scope:{ctx:n}}});let r=n[2]!==F.STOPPED&&ze(n);return{c(){e=T("div"),q(t.$$.fragment),l=L(),q(s.$$.fragment),i=L(),r&&r.c(),this.h()},l(a){e=S(a,"DIV",{class:!0});var f=R(e);J(t.$$.fragment,f),l=M(f),J(s.$$.fragment,f),i=M(f),r&&r.l(f),f.forEach(m),this.h()},h(){k(e,"class","clock svelte-15io30k")},m(a,f){b(a,e,f),X(t,e,null),$(e,l),X(s,e,null),$(e,i),r&&r.m(e,null),o=!0},p(a,f){const c={};f&8&&(c.time=a[3]),t.$set(c);const u={};f&8192&&(u.$$scope={dirty:f,ctx:a}),s.$set(u),a[2]!==F.STOPPED?r?(r.p(a,f),f&4&&A(r,1)):(r=ze(a),r.c(),A(r,1),r.m(e,null)):r&&(fe(),B(r,1,1,()=>{r=null}),ce())},i(a){o||(A(t.$$.fragment,a),A(s.$$.fragment,a),A(r),o=!0)},o(a){B(t.$$.fragment,a),B(s.$$.fragment,a),B(r),o=!1},d(a){a&&m(e),Y(t),Y(s),r&&r.d()}}}function Ut(n){let e,t,l,s;return e=new It({props:{active:n[2]===F.STOPPED,$$slots:{default:[Bt]},$$scope:{ctx:n}}}),e.$on("start",n[4]),e.$on("stop",n[6]),l=new Ot({props:{active:n[2]===F.WAITING_FOR_STOP,intervalS:n[0],timeoutS:n[1]}}),l.$on("off",n[6]),{c(){q(e.$$.fragment),t=L(),q(l.$$.fragment)},l(i){J(e.$$.fragment,i),t=M(i),J(l.$$.fragment,i)},m(i,o){X(e,i,o),b(i,t,o),X(l,i,o),s=!0},p(i,[o]){const r={};o&4&&(r.active=i[2]===F.STOPPED),o&8204&&(r.$$scope={dirty:o,ctx:i}),e.$set(r);const a={};o&4&&(a.active=i[2]===F.WAITING_FOR_STOP),o&1&&(a.intervalS=i[0]),o&2&&(a.timeoutS=i[1]),l.$set(a)},i(i){s||(A(e.$$.fragment,i),A(l.$$.fragment,i),s=!0)},o(i){B(e.$$.fragment,i),B(l.$$.fragment,i),s=!1},d(i){i&&m(t),Y(e,i),Y(l,i)}}}function Vt(n,e,t){const l=de();let{timersMultiplier:s}=e,{afterClockIntervaltS:i}=e,{afterClockTimeoutS:o}=e,r=F.STOPPED,a=new Ce,f=0;function c(y){t(3,f=y*s)}function u(y){t(2,r=F.RUNNING),c(y.detail.timer),a=new Ce(y.detail.timer,y.detail.name)}function h(){if(typeof document<"u"&&document.visibilityState==="visible"){_(!0);return}t(2,r=F.WAITING_FOR_STOP)}function _(y=!0){t(2,r=F.STOPPED),a.finish=new Date,t(3,f=0),y&&l("timer",a)}function C(){_(!1)}function N(){r!==F.STOPPED&&_(!0)}return ye(()=>{document.addEventListener("visibilitychange",function(){r===F.WAITING_FOR_STOP&&document.visibilityState==="visible"&&(console.log("visibility change to visible"),_(!0))}),setInterval(function(){r==F.RUNNING&&(a.finish=new Date,l("timer",a))},5e3)}),n.$$set=y=>{"timersMultiplier"in y&&t(9,s=y.timersMultiplier),"afterClockIntervaltS"in y&&t(0,i=y.afterClockIntervaltS),"afterClockTimeoutS"in y&&t(1,o=y.afterClockTimeoutS)},n.$$.update=()=>{n.$$.dirty&4&&Mt(r)},[i,o,r,f,u,h,_,C,N,s]}class tt extends ee{constructor(e){super(),te(this,e,Vt,Ut,x,{timersMultiplier:9,afterClockIntervaltS:0,afterClockTimeoutS:1})}}function Gt(n){let e;return{c(){e=W("Active for")},l(t){e=H(t,"Active for")},m(t,l){b(t,e,l)},d(t){t&&m(e)}}}function Ft(n){let e;return{c(){e=W("Rest for")},l(t){e=H(t,"Rest for")},m(t,l){b(t,e,l)},d(t){t&&m(e)}}}function zt(n){let e,t,l,s,i,o,r,a=Me(n[1])+"",f;function c(_,C){return _[0]?Ft:Gt}let u=c(n),h=u(n);return{c(){e=T("snap"),t=T("snap"),l=W(n[2]),s=L(),i=T("snap"),h.c(),o=L(),r=T("snap"),f=W(a),this.h()},l(_){e=S(_,"SNAP",{class:!0});var C=R(e);t=S(C,"SNAP",{class:!0});var N=R(t);l=H(N,n[2]),N.forEach(m),s=M(C),i=S(C,"SNAP",{});var y=R(i);h.l(y),y.forEach(m),o=M(C),r=S(C,"SNAP",{class:!0});var D=R(r);f=H(D,a),D.forEach(m),C.forEach(m),this.h()},h(){k(t,"class","time work svelte-1qlajhd"),k(r,"class","duration svelte-1qlajhd"),k(e,"class","logline svelte-1qlajhd"),ve(e,"rest",n[0])},m(_,C){b(_,e,C),$(e,t),$(t,l),$(e,s),$(e,i),h.m(i,null),$(e,o),$(e,r),$(r,f)},p(_,[C]){u!==(u=c(_))&&(h.d(1),h=u(_),h&&(h.c(),h.m(i,null))),C&2&&a!==(a=Me(_[1])+"")&&me(f,a),C&1&&ve(e,"rest",_[0])},i:ie,o:ie,d(_){_&&m(e),h.d()}}}function jt(n){let e=n.getHours().toString().padStart(2,"0"),t=n.getMinutes().toString().padStart(2,"0");return`${e}:${t}`}function Wt(n,e,t){let l,s,{start:i}=e,{finish:o}=e,{name:r}=e,a=jt(i);return n.$$set=f=>{"start"in f&&t(3,i=f.start),"finish"in f&&t(4,o=f.finish),"name"in f&&t(5,r=f.name)},n.$$.update=()=>{n.$$.dirty&24&&t(1,l=(o.getTime()-i.getTime())/1e3),n.$$.dirty&32&&t(0,s=r==="rest")},[s,l,a,i,o,r]}class Ht extends ee{constructor(e){super(),te(this,e,Wt,zt,x,{start:3,finish:4,name:5})}}function nt(n,e,t){return(e.start.getTime()-n.finish.getTime())/1e3>t}function qt(n,e=60){var t=[],l=0;if(n.length<=1)return n;t.push(n[0]),l=0;for(let s=1;s<n.length;s++){const i=n[s];t[l].name==i.name?nt(t[l],i,e)?(t.push(i),l++):t[l].finish=i.finish:(t.push(i),l++)}return t}function je(n,e="rest",t=60*5){var l=[],s=0;if(n.length<=1)return n;l.push(n[0]),s=0;for(let o=1;o<n.length;o++){const r=n[o];if(nt(l[s],r,t)){var i=new Ce;i.start=l[s].finish,i.finish=r.start,i.name=e,l.push(i),s++}l.push(r),s++}return l}function Jt(n){return n.forEach(e=>{if(!("name"in e&&"start"in e&&"finish"in e))return!1}),!0}class Te{constructor(e){le(this,"list",[]);le(this,"rest_name","rest");le(this,"work_name","work");try{const t=JSON.parse(e);let l=[];Jt(t)&&t.forEach(s=>{l.push({value:0,name:s.name,finish:new Date(s.finish*1e3),start:new Date(s.start*1e3)})}),console.log("deserialized logs:",l),this.list=l}catch{this.list=[]}}normalize(e,t){var l=this.list;return t&&(l=je(l,"rest")),e&&(l=qt(l)),l}serialize(){let e=[];return this.list.forEach(t=>{e.push({name:t.name,start:Math.floor(t.start.getTime()/1e3),finish:Math.floor(t.finish.getTime()/1e3)})}),console.log("Serializing logs:",JSON.stringify(e)),JSON.stringify(e)}push(e){return this.list.length>0&&this.list[this.list.length-1].start==e.start?(this.list[this.list.length-1].finish=e.finish,this.list=this.list,this):(this.list.push(e),this)}changeLineType(e){this.list.forEach(t=>{t.start===e&&(t.name=t.name===this.rest_name?this.work_name:this.rest_name)})}remove(e){for(var t=0;t<this.list.length;)this.list[t].start===e?this.list.splice(t,1):++t}total(){let e=0;return this.list.forEach(t=>{t.name==this.work_name&&(e+=(t.finish.getTime()-t.start.getTime())/1e3)}),e}glueGaps(){return this.list=je(this.list,this.rest_name),this}}function We(n,e,t){const l=n.slice();return l[17]=e[t],l}function He(n){let e,t="Save gaps",l,s;return{c(){e=T("button"),e.textContent=t,this.h()},l(i){e=S(i,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-1iff94b"&&(e.textContent=t),this.h()},h(){k(e,"class","save svelte-pr9b5e")},m(i,o){b(i,e,o),l||(s=V(e,"click",n[10]),l=!0)},p:ie,d(i){i&&m(e),l=!1,s()}}}function qe(n){let e,t,l,s,i,o,r;function a(){return n[11](n[17])}function f(){return n[12](n[17])}return{c(){e=T("button"),t=W("ch"),l=L(),s=T("button"),i=W("x"),this.h()},l(c){e=S(c,"BUTTON",{class:!0});var u=R(e);t=H(u,"ch"),u.forEach(m),l=M(c),s=S(c,"BUTTON",{class:!0});var h=R(s);i=H(h,"x"),h.forEach(m),this.h()},h(){k(e,"class","mini svelte-pr9b5e"),e.hidden=n[4],k(s,"class","mini svelte-pr9b5e"),s.hidden=n[4]},m(c,u){b(c,e,u),$(e,t),b(c,l,u),b(c,s,u),$(s,i),o||(r=[V(e,"click",a),V(s,"click",f)],o=!0)},p(c,u){n=c,u&16&&(e.hidden=n[4]),u&16&&(s.hidden=n[4])},d(c){c&&(m(e),m(l),m(s)),o=!1,he(r)}}}function Je(n,e){let t,l,s,i,o,r;const a=[e[17]];let f={};for(let u=0;u<a.length;u+=1)f=Ee(f,a[u]);l=new Ht({props:f});let c=e[4]&&qe(e);return{key:n,first:null,c(){t=se(),q(l.$$.fragment),s=L(),c&&c.c(),i=L(),o=T("br"),this.h()},l(u){t=se(),J(l.$$.fragment,u),s=M(u),c&&c.l(u),i=M(u),o=S(u,"BR",{}),this.h()},h(){this.first=t},m(u,h){b(u,t,h),X(l,u,h),b(u,s,h),c&&c.m(u,h),b(u,i,h),b(u,o,h),r=!0},p(u,h){e=u;const _=h&8?ut(a,[ft(e[17])]):{};l.$set(_),e[4]?c?c.p(e,h):(c=qe(e),c.c(),c.m(i.parentNode,i)):c&&(c.d(1),c=null)},i(u){r||(A(l.$$.fragment,u),r=!0)},o(u){B(l.$$.fragment,u),r=!1},d(u){u&&(m(t),m(s),m(i),m(o)),Y(l,u),c&&c.d(u)}}}function Xt(n){let e,t="Clear logs",l,s,i="Active time: ",o,r=Ae(n[0].total())+"",a,f,c,u,h,_="Collapse",C,N,y,D="Fill gaps",z,U,w,j,G,g=[],I=new Map,O,p,v,E=n[2]&&He(n),Q=oe(n[3]);const ne=d=>d[17].start;for(let d=0;d<Q.length;d+=1){let P=We(n,Q,d),K=ne(P);I.set(K,g[d]=Je(K,P))}return{c(){e=T("button"),e.textContent=t,l=L(),s=T("span"),s.textContent=i,o=T("span"),a=W(r),f=L(),c=T("input"),u=L(),h=T("label"),h.textContent=_,C=L(),N=T("input"),y=T("label"),y.textContent=D,z=L(),E&&E.c(),U=L(),w=T("br"),j=L(),G=T("div");for(let d=0;d<g.length;d+=1)g[d].c();this.h()},l(d){e=S(d,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-16kso6c"&&(e.textContent=t),l=M(d),s=S(d,"SPAN",{class:!0,"data-svelte-h":!0}),Z(s)!=="svelte-18pz33x"&&(s.textContent=i),o=S(d,"SPAN",{class:!0});var P=R(o);a=H(P,r),P.forEach(m),f=M(d),c=S(d,"INPUT",{type:!0,id:!0,name:!0}),u=M(d),h=S(d,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Z(h)!=="svelte-1bo9096"&&(h.textContent=_),C=M(d),N=S(d,"INPUT",{type:!0,id:!0,name:!0}),y=S(d,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Z(y)!=="svelte-1y7lnfx"&&(y.textContent=D),z=M(d),E&&E.l(d),U=M(d),w=S(d,"BR",{}),j=M(d),G=S(d,"DIV",{class:!0});var K=R(G);for(let be=0;be<g.length;be+=1)g[be].l(K);K.forEach(m),this.h()},h(){k(e,"class","clear svelte-pr9b5e"),k(s,"class","svelte-pr9b5e"),k(o,"class","svelte-pr9b5e"),k(c,"type","checkbox"),k(c,"id","collapse"),k(c,"name","collapse"),k(h,"for","collapse"),k(h,"class","svelte-pr9b5e"),k(N,"type","checkbox"),k(N,"id","fillRests"),k(N,"name","fill rests gaps"),k(y,"for","fillRests"),k(y,"class","svelte-pr9b5e"),k(G,"class","logs svelte-pr9b5e")},m(d,P){b(d,e,P),b(d,l,P),b(d,s,P),b(d,o,P),$(o,a),b(d,f,P),b(d,c,P),c.checked=n[1],b(d,u,P),b(d,h,P),b(d,C,P),b(d,N,P),N.checked=n[2],b(d,y,P),b(d,z,P),E&&E.m(d,P),b(d,U,P),b(d,w,P),b(d,j,P),b(d,G,P);for(let K=0;K<g.length;K+=1)g[K]&&g[K].m(G,null);O=!0,p||(v=[V(e,"click",n[7]),V(c,"change",n[8]),V(N,"change",n[9])],p=!0)},p(d,[P]){(!O||P&1)&&r!==(r=Ae(d[0].total())+"")&&me(a,r),P&2&&(c.checked=d[1]),P&4&&(N.checked=d[2]),d[2]?E?E.p(d,P):(E=He(d),E.c(),E.m(U.parentNode,U)):E&&(E.d(1),E=null),P&120&&(Q=oe(d[3]),fe(),g=we(g,P,ne,1,d,Q,I,G,Se,Je,null,We),ce())},i(d){if(!O){for(let P=0;P<Q.length;P+=1)A(g[P]);O=!0}},o(d){for(let P=0;P<g.length;P+=1)B(g[P]);O=!1},d(d){d&&(m(e),m(l),m(s),m(o),m(f),m(c),m(u),m(h),m(C),m(N),m(y),m(z),m(U),m(w),m(j),m(G)),E&&E.d(d);for(let P=0;P<g.length;P+=1)g[P].d();p=!1,he(v)}}}function Yt(n,e,t){let l,{timerLogs:s=new Te("")}=e;var i=!0,o=!0,r=[];let a=!1;function f(w){w!=null&&a&&re.set("logs",w.serialize(),{expires:31})}function c(w,j){a&&re.set(j,w?"true":"false",{expires:31})}function u(w){s.changeLineType(w),t(0,s)}function h(w){s.remove(w),t(0,s)}function _(w){return w==null?[]:w.normalize(i,o)}ye(()=>{let w=re.get("logs");console.log("cookies for logs contain",w),w!=null&&(t(1,i=re.get("collapsed")==="true"),t(2,o=re.get("fill_gaps")==="true"),t(0,s=new Te(w)),a=!0)});const C=()=>t(0,s=new Te(""));function N(){i=this.checked,t(1,i)}function y(){o=this.checked,t(2,o)}const D=()=>t(0,s=s.glueGaps()),z=w=>u(w.start),U=w=>h(w.start);return n.$$set=w=>{"timerLogs"in w&&t(0,s=w.timerLogs)},n.$$.update=()=>{n.$$.dirty&2&&c(i,"collapsed"),n.$$.dirty&4&&c(o,"fill_gaps"),n.$$.dirty&1&&f(s),n.$$.dirty&1&&t(3,r=_(s)),n.$$.dirty&6&&t(4,l=!(i||o))},[s,i,o,r,l,u,h,C,N,y,D,z,U]}class Qt extends ee{constructor(e){super(),te(this,e,Yt,Xt,x,{timerLogs:0})}}const Kt={afterClockIntervaltS:3,afterClockTimeoutS:10,timersMultiplier:1},Zt={afterClockIntervaltS:10,afterClockTimeoutS:60*15,timersMultiplier:1*60};function xt(n){let e,t;const l=[Zt];let s={};for(let i=0;i<l.length;i+=1)s=Ee(s,l[i]);return e=new tt({props:s}),e.$on("timer",n[2]),{c(){q(e.$$.fragment)},l(i){J(e.$$.fragment,i)},m(i,o){X(e,i,o),t=!0},p(i,o){const r={};e.$set(r)},i(i){t||(A(e.$$.fragment,i),t=!0)},o(i){B(e.$$.fragment,i),t=!1},d(i){Y(e,i)}}}function en(n){let e,t;const l=[Kt];let s={};for(let i=0;i<l.length;i+=1)s=Ee(s,l[i]);return e=new tt({props:s}),e.$on("timer",n[2]),{c(){q(e.$$.fragment)},l(i){J(e.$$.fragment,i)},m(i,o){X(e,i,o),t=!0},p(i,o){const r={};e.$set(r)},i(i){t||(A(e.$$.fragment,i),t=!0)},o(i){B(e.$$.fragment,i),t=!1},d(i){Y(e,i)}}}function tn(n){let e,t,l,s="Let's Pomodoro!",i,o,r,a,f,c,u,h,_,C,N,y,D,z;const U=[en,xt],w=[];function j(I,O){return I[0]?0:1}o=j(n),r=w[o]=U[o](n);function G(I){n[3](I)}let g={};return n[1]!==void 0&&(g.timerLogs=n[1]),f=new Qt({props:g}),rt.push(()=>at(f,"timerLogs",G)),{c(){e=T("main"),t=T("div"),l=T("h1"),l.textContent=s,i=L(),r.c(),a=L(),q(f.$$.fragment),u=L(),h=T("div"),_=T("label"),C=W("Debug:"),N=T("input"),this.h()},l(I){e=S(I,"MAIN",{class:!0});var O=R(e);t=S(O,"DIV",{class:!0});var p=R(t);l=S(p,"H1",{class:!0,"data-svelte-h":!0}),Z(l)!=="svelte-cxq7y3"&&(l.textContent=s),i=M(p),r.l(p),a=M(p),J(f.$$.fragment,p),p.forEach(m),O.forEach(m),u=M(I),h=S(I,"DIV",{class:!0});var v=R(h);_=S(v,"LABEL",{id:!0});var E=R(_);C=H(E,"Debug:"),N=S(E,"INPUT",{type:!0}),E.forEach(m),v.forEach(m),this.h()},h(){k(l,"class","logo svelte-b2iouv"),k(t,"class","centered-div"),k(e,"class","svelte-b2iouv"),k(N,"type","checkbox"),k(_,"id","debug"),k(h,"class","debug-div svelte-b2iouv")},m(I,O){b(I,e,O),$(e,t),$(t,l),$(t,i),w[o].m(t,null),$(t,a),X(f,t,null),b(I,u,O),b(I,h,O),$(h,_),$(_,C),$(_,N),N.checked=n[0],y=!0,D||(z=V(N,"change",n[4]),D=!0)},p(I,[O]){let p=o;o=j(I),o===p?w[o].p(I,O):(fe(),B(w[p],1,1,()=>{w[p]=null}),ce(),r=w[o],r?r.p(I,O):(r=w[o]=U[o](I),r.c()),A(r,1),r.m(t,a));const v={};!c&&O&2&&(c=!0,v.timerLogs=I[1],ot(()=>c=!1)),f.$set(v),O&1&&(N.checked=I[0])},i(I){y||(A(r),A(f.$$.fragment,I),y=!0)},o(I){B(r),B(f.$$.fragment,I),y=!1},d(I){I&&(m(e),m(u),m(h)),w[o].d(),Y(f),D=!1,z()}}}function nn(n,e,t){let l=!1,s;function i(a){t(1,s=s.push(a.detail))}function o(a){s=a,t(1,s)}function r(){l=this.checked,t(0,l)}return[l,s,i,o,r]}class an extends ee{constructor(e){super(),te(this,e,nn,tn,x,{})}}export{an as component};
