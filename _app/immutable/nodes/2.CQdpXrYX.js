var $n=Object.defineProperty;var Hn=(t,e,n)=>e in t?$n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var me=(t,e,n)=>Hn(t,typeof e!="symbol"?e+"":e,n);import{r as Ae,s as ke,c as Sn,e as w,b as j,v as Se,d as b,f as C,i as m,j as R,y as v,k as V,P as G,u as Dn,g as En,a as In,t as X,h as K,z as L,l as d,m as x,Q as tt,R as Bt,S as $e,n as ne,T as ee,U as ut,A as Be,V as Gt,o as Me,W as kt,X as Fn,x as On,Y as Nt,Z as zt,_ as Wt,$ as Mn,a0 as Un}from"../chunks/scheduler.DYyfv4AD.js";import{a as z,t as B,S as Te,i as we,b as ce,d as fe,m as ue,e as he,g as Ge,c as ze,f as At}from"../chunks/index.D_Djm4rE.js";import{b as Qe,w as dt,d as mt}from"../chunks/paths.VGf_otNY.js";function De(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Bn(t,e){t.d(1),e.delete(t.key)}function Gn(t,e){z(t,1,1,()=>{e.delete(t.key)})}function Cn(t,e,n,i,s,r,l,o,f,c,a,u){let h=t.length,k=r.length,O=h;const T={};for(;O--;)T[t[O].key]=O;const M=[],S=new Map,y=new Map,D=[];for(O=k;O--;){const I=u(s,r,O),_=n(I);let g=l.get(_);g?D.push(()=>g.p(I,e)):(g=c(_,I),g.c()),S.set(_,M[O]=g),_ in T&&y.set(_,Math.abs(O-T[_]))}const A=new Set,P=new Set;function H(I){B(I,1),I.m(o,a),l.set(I.key,I),a=I.first,k--}for(;h&&k;){const I=M[k-1],_=t[h-1],g=I.key,p=_.key;I===_?(a=I.first,h--,k--):S.has(p)?!l.has(g)||A.has(g)?H(I):P.has(p)?h--:y.get(g)>y.get(p)?(P.add(g),H(I)):(A.add(p),h--):(f(_,l),h--)}for(;h--;){const I=t[h];S.has(I.key)||f(I,l)}for(;k;)H(M[k-1]);return Ae(D),M}function Nn(t,e){const n={},i={},s={$$scope:1};let r=t.length;for(;r--;){const l=t[r],o=e[r];if(o){for(const f in l)f in o||(i[f]=1);for(const f in o)s[f]||(n[f]=o[f],s[f]=1);t[r]=o}else for(const f in l)s[f]=1}for(const l in i)l in n||(n[l]=void 0);return n}function An(t){return typeof t=="object"&&t!==null?t:{}}const zn=Qe+"/ring2.wav";let Pn=function(){},et,Tt,yn=.5,ot;if(typeof window<"u"){let t=window.AudioContext||window.webkitAudioContext;et=new t,fetch(zn).then(e=>e.arrayBuffer()).then(e=>et.decodeAudioData(e)).then(e=>{Tt=e}).catch(e=>console.error("Error loading sound file:",e)),Pn=function(){if(!Tt)return;ot=et.createBufferSource(),ot.buffer=Tt;let e=et.createGain();e.gain.value=yn,ot.connect(e),e.connect(et.destination),ot.start(0)}}function Pt(){Pn()}function Wn(t,e){yn=t,Pt()}function Xt(t){let e,n;return{c(){e=w("div"),n=X(t[0]),this.h()},l(i){e=b(i,"DIV",{style:!0,class:!0});var s=C(e);n=K(s,t[0]),s.forEach(m),this.h()},h(){L(e,"top",t[3]+"px"),L(e,"left",t[2]+"px"),v(e,"class","tooltip svelte-43gogz")},m(i,s){V(i,e,s),d(e,n)},p(i,s){s&1&&x(n,i[0]),s&8&&L(e,"top",i[3]+"px"),s&4&&L(e,"left",i[2]+"px")},d(i){i&&m(e)}}}function Xn(t){let e,n,i,s,r,l;const o=t[8].default,f=Sn(o,t,t[7],null);let c=t[1]&&Xt(t);return{c(){e=w("div"),f&&f.c(),n=j(),c&&c.c(),i=Se(),this.h()},l(a){e=b(a,"DIV",{"aria-hidden":!0});var u=C(e);f&&f.l(u),u.forEach(m),n=R(a),c&&c.l(a),i=Se(),this.h()},h(){v(e,"aria-hidden","true")},m(a,u){V(a,e,u),f&&f.m(e,null),V(a,n,u),c&&c.m(a,u),V(a,i,u),s=!0,r||(l=[G(e,"mouseover",t[4]),G(e,"mouseleave",t[6]),G(e,"mousemove",t[5]),G(e,"focus",Kn)],r=!0)},p(a,[u]){f&&f.p&&(!s||u&128)&&Dn(f,o,a,a[7],s?In(o,a[7],u,null):En(a[7]),null),a[1]?c?c.p(a,u):(c=Xt(a),c.c(),c.m(i.parentNode,i)):c&&(c.d(1),c=null)},i(a){s||(B(f,a),s=!0)},o(a){z(f,a),s=!1},d(a){a&&(m(e),m(n),m(i)),f&&f.d(a),c&&c.d(a),r=!1,Ae(l)}}}const Kn=function(){};function Jn(t,e,n){let{$$slots:i={},$$scope:s}=e,{title:r=""}=e,l=!1,o,f;function c(h){n(1,l=!0),n(2,o=h.pageX+10),n(3,f=h.pageY+10)}function a(h){n(2,o=h.pageX+10),n(3,f=h.pageY+10)}function u(){n(1,l=!1)}return t.$$set=h=>{"title"in h&&n(0,r=h.title),"$$scope"in h&&n(7,s=h.$$scope)},[r,l,o,f,c,a,u,s,i]}class yt extends Te{constructor(e){super(),we(this,e,Jn,Xn,ke,{title:0})}}function Kt(t){let e=Math.floor(t/60),n=Math.floor(t%60).toString().padStart(2,"0"),i=e.toString().padStart(2,"0");if(e>60){let s=Math.floor(e/60);return i=Math.floor(e%60).toString().padStart(2,"0"),`${s}:${i}:${n}`}return`${i}:${n}`}function Jt(t){let e=Math.floor(t/60),n=Math.floor(t%60);if(e>60){let i=Math.floor(e/60);return e=Math.floor(e%60),`${i}h ${e} min`}else return e>0?`${e} min`:`${n} sec`}function qt(t){let e=Math.floor(t/3600);e>0&&(t=t-e*3600);let n=Math.floor(t/60),i=Math.floor(t%60);return e==1?`${e} hour ${n} min`:e>0?`${e} hours ${n} min`:n>=5?`${n} min`:n>1?`${n} min ${i} sec`:`${i} sec`}class qn{constructor(e,n,i,s=300){me(this,"intervalId",0);me(this,"duration",0);me(this,"start",0);me(this,"remain",0);me(this,"onSec",e=>{});me(this,"onAlarm",()=>{});this.duration=e,this.remain=e-1,e>0&&(this.onSec=n,this.onAlarm=i,this.start=Date.now(),this.intervalId=setInterval(()=>{const r=Math.ceil((Date.now()-this.start)/1e3);let l=this.duration-r;l!=this.remain&&(n(this.remain),this.remain=l,this.remain<=0&&(this.onAlarm(),clearInterval(this.intervalId)))},s))}stop(){clearInterval(this.intervalId)}}function Yn(t){let e,n=Kt(t[0])+"",i,s,r;return{c(){e=w("button"),i=X(n),this.h()},l(l){e=b(l,"BUTTON",{id:!0,class:!0});var o=C(e);i=K(o,n),o.forEach(m),this.h()},h(){v(e,"id","watch"),v(e,"class","svelte-1kj7nhv")},m(l,o){V(l,e,o),d(e,i),s||(r=G(e,"click",t[1]),s=!0)},p(l,o){o&1&&n!==(n=Kt(l[0])+"")&&x(i,n)},d(l){l&&m(e),s=!1,r()}}}function Qn(t){let e,n;return e=new yt({props:{title:"stop timer",$$slots:{default:[Yn]},$$scope:{ctx:t}}}),{c(){ce(e.$$.fragment)},l(i){fe(e.$$.fragment,i)},m(i,s){ue(e,i,s),n=!0},p(i,[s]){const r={};s&257&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(B(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){he(e,i)}}}function Zn(t,e,n){let{time:i=0}=e,{remainedSeconds:s=0}=e;var r;const l=tt();function o(u){r!=null&&r.stop(),r=new qn(u,f,c),n(0,s=u)}function f(u){n(0,s=u)}function c(){Pt(),l("alarming")}function a(){l("stop")}return t.$$set=u=>{"time"in u&&n(2,i=u.time),"remainedSeconds"in u&&n(0,s=u.remainedSeconds)},t.$$.update=()=>{t.$$.dirty&4&&o(i)},[s,a,i]}class xn extends Te{constructor(e){super(),we(this,e,Zn,Qn,ke,{time:2,remainedSeconds:0})}}function ei(t){let e,n,i,s,r,l;return{c(){e=w("button"),n=X(t[1]),i=X(" min"),this.h()},l(o){e=b(o,"BUTTON",{class:!0});var f=C(e);n=K(f,t[1]),i=K(f," min"),f.forEach(m),this.h()},h(){v(e,"class",s=Bt(t[2])+" svelte-8w7xxt"),$e(e,"pressed",t[0])},m(o,f){V(o,e,f),d(e,n),d(e,i),r||(l=G(e,"click",t[5]),r=!0)},p(o,[f]){f&2&&x(n,o[1]),f&4&&s!==(s=Bt(o[2])+" svelte-8w7xxt")&&v(e,"class",s),f&5&&$e(e,"pressed",o[0])},i:ne,o:ne,d(o){o&&m(e),r=!1,l()}}}function ti(t,e,n){const i=tt();let{value:s}=e,{name:r}=e,{pressed:l=!1}=e;function o(a,u){i("start",{name:a,val:u}),n(0,l=!0)}function f(){n(0,l=!1)}const c=function(){o(r,s)};return t.$$set=a=>{"value"in a&&n(1,s=a.value),"name"in a&&n(2,r=a.name),"pressed"in a&&n(0,l=a.pressed)},[l,s,r,o,f,c]}class Vn extends Te{constructor(e){super(),we(this,e,ti,ei,ke,{value:1,name:2,pressed:0,reset:4})}get reset(){return this.$$.ctx[4]}}const Ee={WORK:"work",REST:"rest"},ni={afterClockIntervalS:3,afterClockTimeoutS:10,timersMultiplier:1},ii={afterClockIntervalS:10,afterClockTimeoutS:60*15,timersMultiplier:1*60};function Ot(t){return t?ni:ii}function Yt(t,e,n){const i=t.slice();return i[9]=e[n],i[10]=e,i[11]=n,i}const si=t=>({}),Qt=t=>({class:"item svelte-1rvg6ah"});function Zt(t,e,n){const i=t.slice();return i[9]=e[n],i[12]=e,i[11]=n,i}function xt(t){let e,n=t[11],i,s,r;const l=()=>t[6](e,n),o=()=>t[6](null,n);let f={value:t[9],name:Ee.WORK};return e=new Vn({props:f}),l(),e.$on("start",t[2]),{c(){ce(e.$$.fragment),i=j(),s=w("br")},l(c){fe(e.$$.fragment,c),i=R(c),s=b(c,"BR",{})},m(c,a){ue(e,c,a),V(c,i,a),V(c,s,a),r=!0},p(c,a){n!==c[11]&&(o(),n=c[11],l());const u={};e.$set(u)},i(c){r||(B(e.$$.fragment,c),r=!0)},o(c){z(e.$$.fragment,c),r=!1},d(c){c&&(m(i),m(s)),o(),he(e,c)}}}function en(t){let e,n=t[11],i,s,r;const l=()=>t[7](e,n),o=()=>t[7](null,n);let f={value:t[9],name:Ee.REST};return e=new Vn({props:f}),l(),e.$on("start",t[2]),{c(){ce(e.$$.fragment),i=j(),s=w("br")},l(c){fe(e.$$.fragment,c),i=R(c),s=b(c,"BR",{})},m(c,a){ue(e,c,a),V(c,i,a),V(c,s,a),r=!0},p(c,a){n!==c[11]&&(o(),n=c[11],l());const u={};e.$set(u)},i(c){r||(B(e.$$.fragment,c),r=!0)},o(c){z(e.$$.fragment,c),r=!1},d(c){c&&(m(i),m(s)),o(),he(e,c)}}}function li(t){let e,n,i,s,r="Active",l,o,f,c,a,u,h="Rest",k,O,T,M=De(t[1]),S=[];for(let _=0;_<M.length;_+=1)S[_]=xt(Zt(t,M,_));const y=_=>z(S[_],1,1,()=>{S[_]=null}),D=t[5].default,A=Sn(D,t,t[4],Qt);let P=De(t[1]),H=[];for(let _=0;_<P.length;_+=1)H[_]=en(Yt(t,P,_));const I=_=>z(H[_],1,1,()=>{H[_]=null});return{c(){e=w("div"),n=w("div"),i=w("div"),s=w("span"),s.textContent=r,l=w("br"),o=j();for(let _=0;_<S.length;_+=1)S[_].c();f=j(),A&&A.c(),c=j(),a=w("div"),u=w("span"),u.textContent=h,k=w("br"),O=j();for(let _=0;_<H.length;_+=1)H[_].c();this.h()},l(_){e=b(_,"DIV",{});var g=C(e);n=b(g,"DIV",{class:!0});var p=C(n);i=b(p,"DIV",{class:!0});var E=C(i);s=b(E,"SPAN",{class:!0,"data-svelte-h":!0}),ee(s)!=="svelte-19szg5l"&&(s.textContent=r),l=b(E,"BR",{}),o=R(E);for(let N=0;N<S.length;N+=1)S[N].l(E);E.forEach(m),f=R(p),A&&A.l(p),c=R(p),a=b(p,"DIV",{class:!0});var F=C(a);u=b(F,"SPAN",{class:!0,"data-svelte-h":!0}),ee(u)!=="svelte-1gtata5"&&(u.textContent=h),k=b(F,"BR",{}),O=R(F);for(let N=0;N<H.length;N+=1)H[N].l(F);F.forEach(m),p.forEach(m),g.forEach(m),this.h()},h(){v(s,"class","label svelte-1rvg6ah"),v(i,"class","item svelte-1rvg6ah"),v(u,"class","label svelte-1rvg6ah"),v(a,"class","item svelte-1rvg6ah"),v(n,"class","grid-container svelte-1rvg6ah")},m(_,g){V(_,e,g),d(e,n),d(n,i),d(i,s),d(i,l),d(i,o);for(let p=0;p<S.length;p+=1)S[p]&&S[p].m(i,null);d(n,f),A&&A.m(n,null),d(n,c),d(n,a),d(a,u),d(a,k),d(a,O);for(let p=0;p<H.length;p+=1)H[p]&&H[p].m(a,null);T=!0},p(_,[g]){if(g&7){M=De(_[1]);let p;for(p=0;p<M.length;p+=1){const E=Zt(_,M,p);S[p]?(S[p].p(E,g),B(S[p],1)):(S[p]=xt(E),S[p].c(),B(S[p],1),S[p].m(i,null))}for(Ge(),p=M.length;p<S.length;p+=1)y(p);ze()}if(A&&A.p&&(!T||g&16)&&Dn(A,D,_,_[4],T?In(D,_[4],g,si):En(_[4]),Qt),g&7){P=De(_[1]);let p;for(p=0;p<P.length;p+=1){const E=Yt(_,P,p);H[p]?(H[p].p(E,g),B(H[p],1)):(H[p]=en(E),H[p].c(),B(H[p],1),H[p].m(a,null))}for(Ge(),p=P.length;p<H.length;p+=1)I(p);ze()}},i(_){if(!T){for(let g=0;g<M.length;g+=1)B(S[g]);B(A,_);for(let g=0;g<P.length;g+=1)B(H[g]);T=!0}},o(_){S=S.filter(Boolean);for(let g=0;g<S.length;g+=1)z(S[g]);z(A,_),H=H.filter(Boolean);for(let g=0;g<H.length;g+=1)z(H[g]);T=!1},d(_){_&&m(e),ut(S,_),A&&A.d(_),ut(H,_)}}}function ri(t,e,n){let{$$slots:i={},$$scope:s}=e;const r=tt();let l=[],o=[5,10,15,20,25,120];function f(h){r("start",{timer:h.detail.val,name:h.detail.name}),console.log("handleTimerStart")}function c(){l.forEach(h=>{h&&h.reset()})}function a(h,k){Be[h?"unshift":"push"](()=>{l[k]=h,n(0,l)})}function u(h,k){Be[h?"unshift":"push"](()=>{l[k+l.length]=h,n(0,l)})}return t.$$set=h=>{"$$scope"in h&&n(4,s=h.$$scope)},[l,o,f,c,s,i,a,u]}class oi extends Te{constructor(e){super(),we(this,e,ri,li,ke,{clear:3})}get clear(){return this.$$.ctx[3]}}/*! js-cookie v3.0.5 | MIT */function at(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}var ai={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function Mt(t,e){function n(s,r,l){if(!(typeof document>"u")){l=at({},e,l),typeof l.expires=="number"&&(l.expires=new Date(Date.now()+l.expires*864e5)),l.expires&&(l.expires=l.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var f in l)l[f]&&(o+="; "+f,l[f]!==!0&&(o+="="+l[f].split(";")[0]));return document.cookie=s+"="+t.write(r,s)+o}}function i(s){if(!(typeof document>"u"||arguments.length&&!s)){for(var r=document.cookie?document.cookie.split("; "):[],l={},o=0;o<r.length;o++){var f=r[o].split("="),c=f.slice(1).join("=");try{var a=decodeURIComponent(f[0]);if(l[a]=t.read(c,a),s===a)break}catch{}}return s?l[s]:l}}return Object.create({set:n,get:i,remove:function(s,r){n(s,"",at({},r,{expires:-1}))},withAttributes:function(s){return Mt(this.converter,at({},this.attributes,s))},withConverter:function(s){return Mt(at({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var Le=Mt(ai,{path:"/"});class Ie{constructor(e=0,n="",i=new Date,s=new Date){me(this,"start");me(this,"finish");me(this,"name");me(this,"value");this.start=i,this.finish=s,this.name=n,this.value=e}setDuration(e){this.finish=new Date(this.start.getTime()+e*1e3)}durationS(){return(this.finish.getTime()-this.start.getTime())/1e3}}const oe={RUNNING:"RUNNING",STOPPED:"STOPPED",WAITING_FOR_STOP:"WAITING_FOR_STOP"};var Re=(t=>(t[t.EMIT=1]="EMIT",t[t.DO_NOT_EMIT=2]="DO_NOT_EMIT",t))(Re||{});let jn=60,ci=5*60;function Vt(t,e,n=jn){return(e.start.getTime()-t.finish.getTime())/1e3>n}function fi(t,e=jn){var n=[],i=0;if(t.length<=1)return t;n.push(t[0]),i=0;for(let s=1;s<t.length;s++){const r=t[s];if(n[i].name!=r.name){n.push(r),i++;continue}Vt(n[i],r,e)?(n.push(r),i++):n[i].finish=r.finish}return n}function wt(t,e=Ee.REST,n=ci){var i=[],s=0;if(t.length<=1)return t;i.push(t[0]),s=0;for(let l=1;l<t.length;l++){const o=t[l];if(Vt(i[s],o,n)){var r=new Ie(0,e,i[s].finish,o.start);i.push(r),s++}i.push(o),s++}return i}function ui(t){return t.forEach(e=>{if(!("name"in e&&"start"in e&&"finish"in e))return!1}),!0}function hi(t){let e=[];try{const n=JSON.parse(t);let i=[];ui(n)&&n.forEach(s=>{i.push(new Ie(0,s.name,new Date(s.start*1e3),new Date(s.finish*1e3)))}),console.log("deserialized logs:",i),e=i}catch{e=[]}return new Ct(e)}class Ct{constructor(e){me(this,"additionalS",0);me(this,"list",[]);this.list=wt(e,Ee.REST)}serialize(){let e=[];return this.list.forEach(n=>{e.push({name:n.name,start:Math.floor(n.start.getTime()/1e3),finish:Math.floor(n.finish.getTime()/1e3)})}),JSON.stringify(e)}_normalize(){this.list=wt(this.list,Ee.REST),this.list=fi(this.list,0)}addTimer(e){return this.list.push(e),this._normalize(),this}remove(e){for(var n=0;n<this.list.length;)this.list[n].start===e?this.list.splice(n,1):++n;this._normalize()}total(){let e=0;return this.list.forEach(n=>{n.name==Ee.WORK&&(e+=n.durationS())}),e}fillGaps(e=new Ie){if(this.list=wt(this.list),this.list.length>0){let n=this.list[this.list.length-1];Vt(n,e)&&this.list.push(new Ie(0,Ee.REST,n.finish,e.start))}return this}}class di{constructor(){me(this,"timerHistory");me(this,"active");this.timerHistory=new Ct([])}addTimer(e){return this.active=void 0,this.timerHistory.addTimer(e),this}remove(e){return this.timerHistory.remove(e),this}clearLogs(){return this.timerHistory=new Ct([]),this}resetActive(){return this.active=void 0,this}updateActiveTimer(){return this.active&&(this.active.finish=new Date),this}setActive(e){return this.active=e,this.timerHistory.fillGaps(),this}totalTime(){let e=this.timerHistory.total();return this.active&&this.active.name==Ee.WORK&&(e+=this.active.durationS()),e}}function Rn(t,e,n={storage:"cookies",cookieExpireDays:31}){const i=n.serialize||JSON.stringify,s=n.deserialize||JSON.parse;let r=e;try{const o=n.storage==="cookies"?Le.get(t):localStorage.getItem(t);o&&(r=s(o))}catch(o){console.warn(`Failed to load ${t} from ${n.storage}:`,o)}const l=dt(r);return l.subscribe(o=>{try{const f=i(o);n.storage==="cookies"?Le.set(t,f,{expires:n.cookieExpireDays||31}):localStorage.setItem(t,f)}catch(f){console.warn(`Failed to save ${t} to ${n.storage}:`,f)}}),l}function mi(){let t=new di;{const n=Le.get("logs");console.log("Loading pomApp from cookies:",n),n&&(t.timerHistory=hi(n));const i=Le.get("activeTimer");if(i)try{const s=JSON.parse(i),r=new Date(s.start),l=new Date;(l.getTime()-r.getTime())/(1e3*60*60)<1?(t.active=new Ie(s.value,s.name,r,l),console.log("Loaded active timer from cookies:",t.active)):(console.log("Active timer too old, not restoring"),Le.remove("activeTimer"))}catch(s){console.error("Failed to parse active timer:",s)}}const e=dt(t);return e.subscribe(n=>{const i=n.timerHistory.serialize();if(Le.set("logs",i,{expires:31}),n.active){const s={name:n.active.name,start:n.active.start.getTime(),finish:n.active.finish.getTime(),value:n.active.value};Le.set("activeTimer",JSON.stringify(s),{expires:31}),console.log("Saved active timer:",n.active.name,"start:",n.active.start,"finish:",n.active.finish)}else Le.remove("activeTimer"),console.log("Removed active timer (app.active is undefined)");console.log("Saved pomApp to cookies")}),e}const ge=mi(),tn=Rn("darkmode",!1,{storage:"cookies",serialize:t=>t.toString(),deserialize:t=>t==="true"}),vi=mt(ge,t=>t.totalTime()),ct=Rn("volume",10,{storage:"cookies",serialize:t=>t.toString(),deserialize:t=>parseInt(t,10)});function _i(t){let e,n,i,s=`<img src="${Qe}/volume_mute.svg" alt="Mute icon"/>`,r,l,o,f,c=`<img src="${Qe}/volume_up.svg" alt="Volume max icon"/>`,a,u;return{c(){e=w("label"),n=w("div"),i=w("button"),i.innerHTML=s,r=j(),l=w("input"),o=j(),f=w("button"),f.innerHTML=c,this.h()},l(h){e=b(h,"LABEL",{});var k=C(e);n=b(k,"DIV",{class:!0});var O=C(n);i=b(O,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(i)!=="svelte-t9bnpg"&&(i.innerHTML=s),r=R(O),l=b(O,"INPUT",{class:!0,type:!0,min:!0,max:!0}),o=R(O),f=b(O,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(f)!=="svelte-yorq7f"&&(f.innerHTML=c),O.forEach(m),k.forEach(m),this.h()},h(){v(i,"class","leftbutton svelte-1vsc329"),v(l,"class","slider bar svelte-1vsc329"),v(l,"type","range"),v(l,"min","0"),v(l,"max","100"),v(f,"class","svelte-1vsc329"),v(n,"class","container svelte-1vsc329")},m(h,k){V(h,e,k),d(e,n),d(n,i),d(n,r),d(n,l),Gt(l,t[0]),d(n,o),d(n,f),a||(u=[G(i,"click",t[2]),G(l,"change",t[5]),G(l,"input",t[5]),G(l,"mouseup",t[1]),G(f,"click",t[3])],a=!0)},p(h,[k]){k&1&&Gt(l,h[0])},i:ne,o:ne,d(h){h&&m(e),a=!1,Ae(u)}}}function gi(t,e,n){let i;Me(t,ct,c=>n(4,i=c));let s=i;function r(c){kt(ct,i=parseInt(c.target.value,10),i)}function l(){kt(ct,i=0,i)}function o(){kt(ct,i=100,i)}function f(){s=Fn(this.value),n(0,s),n(4,i)}return t.$$.update=()=>{t.$$.dirty&16&&(console.log("volume",i),Wn(i/100),n(0,s=i))},[s,r,l,o,i,f]}class pi extends Te{constructor(e){super(),we(this,e,gi,_i,ke,{})}}function ki(t,e,n){const i=tt();let{debugFlag:s}=e,{active:r=!0}=e,l=0,o=0;function f(a){console.log("run annoyer",a),clearInterval(l),clearTimeout(o),a&&(l=setInterval(()=>{Pt(),r||clearInterval(l)},Ot(s).afterClockIntervalS*1e3),o=setTimeout(()=>{n(0,r=!1),clearInterval(l),c()},Ot(s).afterClockTimeoutS*1e3))}function c(){i("off")}return t.$$set=a=>{"debugFlag"in a&&n(1,s=a.debugFlag),"active"in a&&n(0,r=a.active)},t.$$.update=()=>{t.$$.dirty&1&&f(r)},[r,s]}class Ti extends Te{constructor(e){super(),we(this,e,ki,null,ke,{debugFlag:1,active:0})}}const nn=Qe+"/tea.png",wi=Qe+"/clock_red.png",bi=Qe+"/clock_yellow.png";function Si(t){if(console.log("changeFavicon",t),typeof document>"u"||document===null)return;const e=document.getElementById("favicon");if(e!==null)switch(t){case oe.STOPPED:e.href=nn;break;case oe.RUNNING:e.href=wi;break;case oe.WAITING_FOR_STOP:e.href=bi;break;default:e.href=nn}}function Di(){const{subscribe:t,set:e,update:n}=dt({state:oe.STOPPED,currentTimer:new Ie,clockDuration:0});return{subscribe:t,start:(i,s,r)=>{const l=Ot(r).timersMultiplier;n(o=>({state:oe.RUNNING,currentTimer:new Ie(i,s),clockDuration:i*l}))},alarm:i=>{n(s=>{if(i){const r=Object.assign(Object.create(Object.getPrototypeOf(s.currentTimer)),s.currentTimer,{finish:new Date});return{...s,state:oe.STOPPED,clockDuration:0,currentTimer:r}}else return{...s,state:oe.WAITING_FOR_STOP}})},stop:()=>{n(i=>{const s=Object.assign(Object.create(Object.getPrototypeOf(i.currentTimer)),i.currentTimer,{finish:new Date});return{...i,state:oe.STOPPED,clockDuration:0,currentTimer:s}})},reset:()=>{e({state:oe.STOPPED,currentTimer:new Ie,clockDuration:0})}}}const He=Di(),Ei=mt(He,t=>t.state),Ii=mt(He,t=>t.currentTimer),Oi=mt(He,t=>t.clockDuration);function Mi(t){let e,n,i;return e=new pi({}),{c(){ce(e.$$.fragment),n=w("br")},l(s){fe(e.$$.fragment,s),n=b(s,"BR",{})},m(s,r){ue(e,s,r),V(s,n,r),i=!0},p:ne,i(s){i||(B(e.$$.fragment,s),i=!0)},o(s){z(e.$$.fragment,s),i=!1},d(s){s&&m(n),he(e,s)}}}function sn(t){let e,n;return e=new yt({props:{title:"stop and don't save logs",$$slots:{default:[Ci]},$$scope:{ctx:t}}}),{c(){ce(e.$$.fragment)},l(i){fe(e.$$.fragment,i)},m(i,s){ue(e,i,s),n=!0},p(i,s){const r={};s&65536&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(B(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){he(e,i)}}}function Ci(t){let e,n="cancel",i,s,r,l;return{c(){e=w("button"),e.textContent=n,i=j(),s=w("br"),this.h()},l(o){e=b(o,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-1wi9d3u"&&(e.textContent=n),i=R(o),s=b(o,"BR",{}),this.h()},h(){v(e,"id","stopper"),v(e,"class","svelte-1viwsah")},m(o,f){V(o,e,f),V(o,i,f),V(o,s,f),r||(l=G(e,"click",t[8]),r=!0)},p:ne,d(o){o&&(m(e),m(i),m(s)),r=!1,l()}}}function Ni(t){let e,n,i,s,r,l,o;function f(u){t[10](u)}let c={time:t[4]};t[0]!==void 0&&(c.remainedSeconds=t[0]),n=new xn({props:c}),Be.push(()=>At(n,"remainedSeconds",f)),n.$on("alarming",t[6]),n.$on("stop",t[9]),r=new yt({props:{title:"Volume",$$slots:{default:[Mi]},$$scope:{ctx:t}}});let a=t[2]!==oe.STOPPED&&sn(t);return{c(){e=w("div"),ce(n.$$.fragment),s=j(),ce(r.$$.fragment),l=j(),a&&a.c(),this.h()},l(u){e=b(u,"DIV",{class:!0});var h=C(e);fe(n.$$.fragment,h),s=R(h),fe(r.$$.fragment,h),l=R(h),a&&a.l(h),h.forEach(m),this.h()},h(){v(e,"class","clock svelte-1viwsah")},m(u,h){V(u,e,h),ue(n,e,null),d(e,s),ue(r,e,null),d(e,l),a&&a.m(e,null),o=!0},p(u,h){const k={};h&16&&(k.time=u[4]),!i&&h&1&&(i=!0,k.remainedSeconds=u[0],Nt(()=>i=!1)),n.$set(k);const O={};h&65536&&(O.$$scope={dirty:h,ctx:u}),r.$set(O),u[2]!==oe.STOPPED?a?(a.p(u,h),h&4&&B(a,1)):(a=sn(u),a.c(),B(a,1),a.m(e,null)):a&&(Ge(),z(a,1,1,()=>{a=null}),ze())},i(u){o||(B(n.$$.fragment,u),B(r.$$.fragment,u),B(a),o=!0)},o(u){z(n.$$.fragment,u),z(r.$$.fragment,u),z(a),o=!1},d(u){u&&m(e),he(n),he(r),a&&a.d()}}}function Ai(t){let e,n,i,s,r={$$slots:{default:[Ni]},$$scope:{ctx:t}};return e=new oi({props:r}),t[11](e),e.$on("start",t[5]),e.$on("stop",t[12]),i=new Ti({props:{active:t[2]===oe.WAITING_FOR_STOP,debugFlag:t[1]}}),i.$on("off",t[13]),{c(){ce(e.$$.fragment),n=j(),ce(i.$$.fragment)},l(l){fe(e.$$.fragment,l),n=R(l),fe(i.$$.fragment,l)},m(l,o){ue(e,l,o),V(l,n,o),ue(i,l,o),s=!0},p(l,[o]){const f={};o&65557&&(f.$$scope={dirty:o,ctx:l}),e.$set(f);const c={};o&4&&(c.active=l[2]===oe.WAITING_FOR_STOP),o&2&&(c.debugFlag=l[1]),i.$set(c)},i(l){s||(B(e.$$.fragment,l),B(i.$$.fragment,l),s=!0)},o(l){z(e.$$.fragment,l),z(i.$$.fragment,l),s=!1},d(l){l&&m(n),t[11](null),he(e,l),he(i,l)}}}function Pi(t,e,n){let i,s,r;Me(t,Ei,D=>n(2,i=D)),Me(t,Ii,D=>n(14,s=D)),Me(t,Oi,D=>n(4,r=D));const l=tt();let{debugFlag:o}=e,{remainedSeconds:f}=e,c;function a(D){i===oe.RUNNING&&h(Re.EMIT),He.start(D.detail.timer,D.detail.name,o),l("current",s)}function u(){const D=typeof document<"u"&&document.visibilityState==="visible";He.alarm(D),D&&(c&&c.clear(),l("timer",s))}function h(D=Re.EMIT){He.stop(),c&&c.clear(),D===Re.EMIT&&l("timer",s)}function k(){He.reset(),c&&c.clear(),l("cancel")}function O(){i!==oe.STOPPED&&h(Re.EMIT)}On(()=>{document.addEventListener("visibilitychange",function(){i===oe.WAITING_FOR_STOP&&document.visibilityState==="visible"&&(console.log("visibility change to visible"),h(Re.EMIT))})});function T(D){f=D,n(0,f)}function M(D){Be[D?"unshift":"push"](()=>{c=D,n(3,c)})}const S=()=>h(Re.DO_NOT_EMIT),y=()=>h(Re.DO_NOT_EMIT);return t.$$set=D=>{"debugFlag"in D&&n(1,o=D.debugFlag),"remainedSeconds"in D&&n(0,f=D.remainedSeconds)},t.$$.update=()=>{t.$$.dirty&4&&Si(i)},[f,o,i,c,r,a,u,h,k,O,T,M,S,y]}class yi extends Te{constructor(e){super(),we(this,e,Pi,Ai,ke,{debugFlag:1,remainedSeconds:0})}}function Vi(t){let e;return{c(){e=X("Active for")},l(n){e=K(n,"Active for")},m(n,i){V(n,e,i)},d(n){n&&m(e)}}}function ji(t){let e;return{c(){e=X("Rest for")},l(n){e=K(n,"Rest for")},m(n,i){V(n,e,i)},d(n){n&&m(e)}}}function Ri(t){let e,n,i,s,r,l,o,f=Jt(t[2])+"",c;function a(k,O){return k[1]?ji:Vi}let u=a(t),h=u(t);return{c(){e=w("snap"),n=w("snap"),i=X(t[3]),s=j(),r=w("snap"),h.c(),l=j(),o=w("snap"),c=X(f),this.h()},l(k){e=b(k,"SNAP",{class:!0});var O=C(e);n=b(O,"SNAP",{class:!0});var T=C(n);i=K(T,t[3]),T.forEach(m),s=R(O),r=b(O,"SNAP",{});var M=C(r);h.l(M),M.forEach(m),l=R(O),o=b(O,"SNAP",{class:!0});var S=C(o);c=K(S,f),S.forEach(m),O.forEach(m),this.h()},h(){v(n,"class","time work svelte-i9m2em"),v(o,"class","duration svelte-i9m2em"),v(e,"class","logline svelte-i9m2em"),$e(e,"topLog",t[0]),$e(e,"rest",t[1])},m(k,O){V(k,e,O),d(e,n),d(n,i),d(e,s),d(e,r),h.m(r,null),d(e,l),d(e,o),d(o,c)},p(k,[O]){u!==(u=a(k))&&(h.d(1),h=u(k),h&&(h.c(),h.m(r,null))),O&4&&f!==(f=Jt(k[2])+"")&&x(c,f),O&1&&$e(e,"topLog",k[0]),O&2&&$e(e,"rest",k[1])},i:ne,o:ne,d(k){k&&m(e),h.d()}}}function Li(t){let e=t.getHours().toString().padStart(2,"0"),n=t.getMinutes().toString().padStart(2,"0");return`${e}:${n}`}function $i(t,e,n){let i,s,{start:r}=e,{finish:l}=e,{name:o}=e,{topLog:f=!1}=e,c=Li(r);return t.$$set=a=>{"start"in a&&n(4,r=a.start),"finish"in a&&n(5,l=a.finish),"name"in a&&n(6,o=a.name),"topLog"in a&&n(0,f=a.topLog)},t.$$.update=()=>{t.$$.dirty&48&&n(2,i=(l.getTime()-r.getTime())/1e3),t.$$.dirty&64&&n(1,s=o===Ee.REST)},[f,s,i,c,r,l,o]}class Ln extends Te{constructor(e){super(),we(this,e,$i,Ri,ke,{start:4,finish:5,name:6,topLog:0})}}const jt=dt(null);function bt(t){jt.set(t)}function ft(){jt.set(null)}function Hi(t){const e=t.slice(),n=e[23].getTime()-e[1].start.getTime();e[25]=n;const i=e[1].finish.getTime()-e[1].start.getTime();e[5]=i;const s=e[25]/e[5]*e[24];e[26]=s;const r=e[24]-e[26];e[27]=r;const l=parseFloat(e[20].left)+e[26];return e[28]=l,e}function St(t){const e=t.slice(),n=e[8](e[1]);e[20]=n;const i=e[9](e[1]);e[21]=i;const s=e[10](e[1],e[4]);e[22]=s;const r=e[22]?e[11](e[1],e[4]):null;e[23]=r;const l=parseFloat(e[20].width);return e[24]=l,e}function ln(t,e,n){const i=t.slice();i[29]=e[n];const s=i[8](i[29]);i[20]=s;const r=i[9](i[29]);i[21]=r;const l=i[10](i[29],i[0]);i[22]=l;const o=i[22]?i[11](i[29],i[0]):null;i[23]=o;const f=parseFloat(i[20].width);i[24]=f;const c=!i[21]&&i[24]<.5?"2px":i[20].width;return i[30]=c,i}function Fi(t){const e=t.slice(),n=e[23].getTime()-e[29].start.getTime();e[25]=n;const i=e[29].finish.getTime()-e[29].start.getTime();e[5]=i;const s=e[25]/e[5]*e[24];e[26]=s;const r=e[24]-e[26];e[27]=r;const l=parseFloat(e[20].left)+e[26];return e[28]=l,e}function rn(t,e,n){const i=t.slice();return i[33]=e[n],i}function on(t){let e;return{c(){e=w("div"),this.h()},l(n){e=b(n,"DIV",{class:!0,style:!0,title:!0}),C(e).forEach(m),this.h()},h(){v(e,"class","future-overlay svelte-1k1xkrk"),L(e,"left",t[6].left),L(e,"width",t[6].width),v(e,"title","Future time")},m(n,i){V(n,e,i)},p(n,i){i[0]&64&&L(e,"left",n[6].left),i[0]&64&&L(e,"width",n[6].width)},d(n){n&&m(e)}}}function an(t){let e,n,i=t[33].label+"",s,r;return{c(){e=w("div"),n=w("div"),s=X(i),r=j(),this.h()},l(l){e=b(l,"DIV",{class:!0,style:!0});var o=C(e);n=b(o,"DIV",{class:!0});var f=C(n);s=K(f,i),f.forEach(m),r=R(o),o.forEach(m),this.h()},h(){v(n,"class","grid-label svelte-1k1xkrk"),v(e,"class","grid-line svelte-1k1xkrk"),L(e,"left",t[33].position+"%")},m(l,o){V(l,e,o),d(e,n),d(n,s),d(e,r)},p(l,o){o[0]&128&&i!==(i=l[33].label+"")&&x(s,i),o[0]&128&&L(e,"left",l[33].position+"%")},d(l){l&&m(e)}}}function Ui(t){let e,n,i,s,r;function l(){return t[16](t[29])}return{c(){e=w("div"),this.h()},l(o){e=b(o,"DIV",{class:!0,style:!0,title:!0}),C(e).forEach(m),this.h()},h(){v(e,"class",n="timer-block "+(t[21]?t[22]?"overtime":"work":"rest")+" svelte-1k1xkrk"),L(e,"left",t[20].left),L(e,"width",t[30]),L(e,"min-width",t[21]?"0":"2px"),L(e,"cursor","pointer"),v(e,"title",i=Y(t[29].start)+" - "+Y(t[29].finish)+" ("+ht(t[29])+")"+(t[22]?" âš ï¸ Overtime":""))},m(o,f){V(o,e,f),s||(r=G(e,"click",l),s=!0)},p(o,f){t=o,f[0]&1&&n!==(n="timer-block "+(t[21]?t[22]?"overtime":"work":"rest")+" svelte-1k1xkrk")&&v(e,"class",n),f[0]&1&&L(e,"left",t[20].left),f[0]&1&&L(e,"width",t[30]),f[0]&1&&L(e,"min-width",t[21]?"0":"2px"),f[0]&1&&i!==(i=Y(t[29].start)+" - "+Y(t[29].finish)+" ("+ht(t[29])+")"+(t[22]?" âš ï¸ Overtime":""))&&v(e,"title",i)},d(o){o&&m(e),s=!1,r()}}}function cn(t){let e,n,i,s,r,l,o;function f(){return t[14](t[29])}function c(){return t[15](t[29])}return{c(){e=w("div"),i=j(),s=w("div"),this.h()},l(a){e=b(a,"DIV",{class:!0,style:!0,title:!0}),C(e).forEach(m),i=R(a),s=b(a,"DIV",{class:!0,style:!0,title:!0}),C(s).forEach(m),this.h()},h(){v(e,"class","timer-block work svelte-1k1xkrk"),L(e,"left",t[20].left),L(e,"width",t[26]+"%"),L(e,"cursor","pointer"),v(e,"title",n=Y(t[29].start)+" - "+Y(t[23])+" (Normal)"),v(s,"class","timer-block overtime svelte-1k1xkrk"),L(s,"left",t[28]+"%"),L(s,"width",t[27]+"%"),L(s,"cursor","pointer"),v(s,"title",r=Y(t[23])+" - "+Y(t[29].finish)+" âš ï¸ Overtime")},m(a,u){V(a,e,u),V(a,i,u),V(a,s,u),l||(o=[G(e,"click",f),G(s,"click",c)],l=!0)},p(a,u){t=a,u[0]&1&&L(e,"left",t[20].left),u[0]&1&&L(e,"width",t[26]+"%"),u[0]&1&&n!==(n=Y(t[29].start)+" - "+Y(t[23])+" (Normal)")&&v(e,"title",n),u[0]&1&&L(s,"left",t[28]+"%"),u[0]&1&&L(s,"width",t[27]+"%"),u[0]&1&&r!==(r=Y(t[23])+" - "+Y(t[29].finish)+" âš ï¸ Overtime")&&v(s,"title",r)},d(a){a&&(m(e),m(i),m(s)),l=!1,Ae(o)}}}function fn(t,e){let n,i,s;function r(c,a){return a[0]&1&&(i=null),i==null&&(i=!!(c[21]&&c[23]&&c[23].getTime()>c[29].start.getTime()&&c[23].getTime()<c[29].finish.getTime())),i?cn:Ui}function l(c,a){return a===cn?Fi(c):c}let o=r(e,[-1,-1]),f=o(l(e,o));return{key:t,first:null,c(){n=Se(),f.c(),s=Se(),this.h()},l(c){n=Se(),f.l(c),s=Se(),this.h()},h(){this.first=n},m(c,a){V(c,n,a),f.m(c,a),V(c,s,a)},p(c,a){e=c,o===(o=r(e,a))&&f?f.p(l(e,o),a):(f.d(1),f=o(l(e,o)),f&&(f.c(),f.m(s.parentNode,s)))},d(c){c&&(m(n),m(s)),f.d(c)}}}function un(t){let e,n;function i(o,f){return f[0]&18&&(e=null),e==null&&(e=!!(o[21]&&o[23]&&o[23].getTime()>o[1].start.getTime()&&o[23].getTime()<o[1].finish.getTime())),e?hn:Bi}function s(o,f){return f===hn?Hi(o):o}let r=i(t,[-1,-1]),l=r(s(t,r));return{c(){l.c(),n=Se()},l(o){l.l(o),n=Se()},m(o,f){l.m(o,f),V(o,n,f)},p(o,f){r===(r=i(o,f))&&l?l.p(s(o,r),f):(l.d(1),l=r(s(o,r)),l&&(l.c(),l.m(n.parentNode,n)))},d(o){o&&m(n),l.d(o)}}}function Bi(t){let e,n,i;return{c(){e=w("div"),this.h()},l(s){e=b(s,"DIV",{class:!0,style:!0,title:!0}),C(e).forEach(m),this.h()},h(){v(e,"class",n="timer-block active "+(t[21]?t[22]?"overtime":"work":"rest")+" svelte-1k1xkrk"),L(e,"left",t[20].left),L(e,"width",t[20].width),v(e,"title",i="Active: "+Y(t[1].start)+" - now ("+ht(t[1])+")"+(t[22]?" âš ï¸ Overtime":""))},m(s,r){V(s,e,r)},p(s,r){r[0]&18&&n!==(n="timer-block active "+(s[21]?s[22]?"overtime":"work":"rest")+" svelte-1k1xkrk")&&v(e,"class",n),r[0]&2&&L(e,"left",s[20].left),r[0]&2&&L(e,"width",s[20].width),r[0]&18&&i!==(i="Active: "+Y(s[1].start)+" - now ("+ht(s[1])+")"+(s[22]?" âš ï¸ Overtime":""))&&v(e,"title",i)},d(s){s&&m(e)}}}function hn(t){let e,n,i,s,r;return{c(){e=w("div"),i=j(),s=w("div"),this.h()},l(l){e=b(l,"DIV",{class:!0,style:!0,title:!0}),C(e).forEach(m),i=R(l),s=b(l,"DIV",{class:!0,style:!0,title:!0}),C(s).forEach(m),this.h()},h(){v(e,"class","timer-block active work svelte-1k1xkrk"),L(e,"left",t[20].left),L(e,"width",t[26]+"%"),v(e,"title",n="Active: "+Y(t[1].start)+" - "+Y(t[23])+" (Normal)"),v(s,"class","timer-block active overtime svelte-1k1xkrk"),L(s,"left",t[28]+"%"),L(s,"width",t[27]+"%"),v(s,"title",r="Active: "+Y(t[23])+" - now âš ï¸ Overtime")},m(l,o){V(l,e,o),V(l,i,o),V(l,s,o)},p(l,o){o[0]&2&&L(e,"left",l[20].left),o[0]&18&&L(e,"width",l[26]+"%"),o[0]&18&&n!==(n="Active: "+Y(l[1].start)+" - "+Y(l[23])+" (Normal)")&&v(e,"title",n),o[0]&18&&L(s,"left",l[28]+"%"),o[0]&18&&L(s,"width",l[27]+"%"),o[0]&18&&r!==(r="Active: "+Y(l[23])+" - now âš ï¸ Overtime")&&v(s,"title",r)},d(l){l&&(m(e),m(i),m(s))}}}function Gi(t){let e,n,i='<span class="timeline-title svelte-1k1xkrk">Timeline</span> <div class="legend svelte-1k1xkrk"><span class="legend-item svelte-1k1xkrk"><span class="legend-color work svelte-1k1xkrk"></span> <span>Work</span></span> <span class="legend-item svelte-1k1xkrk" title="Overtime: 2+ min after alarm, or 25+ min for consecutive work"><span class="legend-color overtime svelte-1k1xkrk"></span> <span>Overtime</span></span> <span class="legend-item svelte-1k1xkrk"><span class="legend-color rest svelte-1k1xkrk"></span> <span>Rest</span></span></div>',s,r,l,o=Y(new Date(t[2]))+"",f,c,a,u=Y(new Date(t[3]))+"",h,k,O,T,M=[],S=new Map,y,D=t[6].visible&&on(t),A=De(t[7]),P=[];for(let g=0;g<A.length;g+=1)P[g]=an(rn(t,A,g));let H=De(t[0]);const I=g=>g[29].start;for(let g=0;g<H.length;g+=1){let p=ln(t,H,g),E=I(p);S.set(E,M[g]=fn(E,p))}let _=t[1]&&un(St(t));return{c(){e=w("div"),n=w("div"),n.innerHTML=i,s=j(),r=w("div"),l=w("div"),f=X(o),c=j(),a=w("div"),h=X(u),k=j(),D&&D.c(),O=j();for(let g=0;g<P.length;g+=1)P[g].c();T=j();for(let g=0;g<M.length;g+=1)M[g].c();y=j(),_&&_.c(),this.h()},l(g){e=b(g,"DIV",{class:!0});var p=C(e);n=b(p,"DIV",{class:!0,"data-svelte-h":!0}),ee(n)!=="svelte-1sof6z9"&&(n.innerHTML=i),s=R(p),r=b(p,"DIV",{class:!0});var E=C(r);l=b(E,"DIV",{class:!0});var F=C(l);f=K(F,o),F.forEach(m),c=R(E),a=b(E,"DIV",{class:!0});var N=C(a);h=K(N,u),N.forEach(m),k=R(E),D&&D.l(E),O=R(E);for(let U=0;U<P.length;U+=1)P[U].l(E);T=R(E);for(let U=0;U<M.length;U+=1)M[U].l(E);y=R(E),_&&_.l(E),E.forEach(m),p.forEach(m),this.h()},h(){v(n,"class","timeline-header svelte-1k1xkrk"),v(l,"class","time-label start svelte-1k1xkrk"),v(a,"class","time-label end svelte-1k1xkrk"),v(r,"class","timeline-bar svelte-1k1xkrk"),v(e,"class","timeline-container svelte-1k1xkrk")},m(g,p){V(g,e,p),d(e,n),d(e,s),d(e,r),d(r,l),d(l,f),d(r,c),d(r,a),d(a,h),d(r,k),D&&D.m(r,null),d(r,O);for(let E=0;E<P.length;E+=1)P[E]&&P[E].m(r,null);d(r,T);for(let E=0;E<M.length;E+=1)M[E]&&M[E].m(r,null);d(r,y),_&&_.m(r,null)},p(g,p){if(p[0]&4&&o!==(o=Y(new Date(g[2]))+"")&&x(f,o),p[0]&8&&u!==(u=Y(new Date(g[3]))+"")&&x(h,u),g[6].visible?D?D.p(g,p):(D=on(g),D.c(),D.m(r,O)):D&&(D.d(1),D=null),p[0]&128){A=De(g[7]);let E;for(E=0;E<A.length;E+=1){const F=rn(g,A,E);P[E]?P[E].p(F,p):(P[E]=an(F),P[E].c(),P[E].m(r,T))}for(;E<P.length;E+=1)P[E].d(1);P.length=A.length}p[0]&3841&&(H=De(g[0]),M=Cn(M,p,I,1,g,H,S,r,Bn,fn,y,ln)),g[1]?_?_.p(St(g),p):(_=un(St(g)),_.c(),_.m(r,null)):_&&(_.d(1),_=null)},i:ne,o:ne,d(g){g&&m(e),D&&D.d(),ut(P,g);for(let p=0;p<M.length;p+=1)M[p].d();_&&_.d()}}}function Y(t){return t.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!1})}function ht(t){return`${Math.round(t.durationS()/60)} min`}function zi(t,e,n){let i,s,r,l,o,f,{timers:c=[]}=e,{activeTimer:a=null}=e;const u=40*60*1e3;let h=0,k=0;function O(I){if(s===0)return{left:"0%",width:"0%"};const _=I.start.getTime()-r,g=I.finish.getTime()-I.start.getTime(),p=_/s*100,E=g/s*100;return{left:`${p}%`,width:`${E}%`}}function T(I){return I.name===Ee.WORK}function M(I,_){const g=_.findIndex(N=>N.start.getTime()===I.start.getTime());if(g<=0)return!0;const p=_[g-1];return T(p)?(I.start.getTime()-p.finish.getTime())/(1e3*60)>=5:p.durationS()/60>=5}function S(I,_){if(!T(I))return[];const g=[I],p=_.findIndex(E=>E.start.getTime()===I.start.getTime());for(let E=p-1;E>=0;E--){const F=_[E],N=g[0],q=(N.start.getTime()-F.finish.getTime())/(1e3*60);if(T(F)&&q<5)g.unshift(F);else{if(!T(F)&&F.durationS()/60<5)continue;if(!T(F)&&M(N,_))break}}return g}function y(I,_){if(!T(I)||!I.value||I.value===0)return!1;const g=2,p=25,E=S(I,_);if(E.length===1){const F=I.durationS()/60,N=I.value;return F>N+g}else{const F=E.reduce((U,q)=>U+(q.value||0),0);return E.reduce((U,q)=>U+q.durationS()/60,0)>F+p}}function D(I,_){if(!y(I,_)||!I.value)return null;const g=2,p=25,E=S(I,_);if(E.length===1){const F=I.start.getTime()+(I.value+g)*60*1e3;return new Date(F)}else{const N=E.reduce((q,Z)=>q+(Z.value||0),0)+p;let U=0;for(const q of E){const Z=q.durationS()/60,be=U+Z;if(be>N){const Oe=N-U,Ce=q.start.getTime()+Oe*60*1e3;return new Date(Ce)}U=be}}return null}const A=I=>bt(I),P=I=>bt(I),H=I=>bt(I);return t.$$set=I=>{"timers"in I&&n(0,c=I.timers),"activeTimer"in I&&n(1,a=I.activeTimer)},t.$$.update=()=>{t.$$.dirty[0]&3&&n(4,i=a?[...c,a]:c),t.$$.dirty[0]&16&&n(2,r=i.length===0?Date.now():Math.min(...i.map(I=>I.start.getTime()))),t.$$.dirty[0]&12310&&n(3,l=(()=>{if(i.length===0)return Date.now()+u;const _=Math.max(...i.map(p=>p.finish.getTime()));let g=Math.max(_,r+u);if(g+=h*36e5,a&&g!==k){const p=a.finish.getTime(),E=g-p,F=10*60*1e3;E<F&&(n(12,h++,h),g+=36e5,n(13,k=g),console.log("Extended timeline, total extensions:",h,"new end:",new Date(g)))}return g})()),t.$$.dirty[0]&12&&n(5,s=l-r),t.$$.dirty[0]&44&&n(7,o=(()=>{if(s===0)return[];const I=[],_=new Date(r),g=new Date(l),p=new Date(_);for(p.setMinutes(0,0,0),p.setHours(p.getHours()+1);p.getTime()<=g.getTime();){const F=(p.getTime()-r)/s*100;if(F>=0&&F<=100){const N=F<5||F>95;I.push({position:F,label:N?"":p.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!1})})}p.setHours(p.getHours()+1)}return I})()),t.$$.dirty[0]&44&&n(6,f=(()=>{const I=Date.now();if(l>I){const _=Math.max(r,I),g=_-r,p=l-_,E=g/s*100,F=p/s*100;return{left:`${E}%`,width:`${F}%`,visible:F>0}}return{left:"0%",width:"0%",visible:!1}})())},[c,a,r,l,i,s,f,o,O,T,y,D,h,k,A,P,H]}class Wi extends Te{constructor(e){super(),we(this,e,zi,Gi,ke,{timers:0,activeTimer:1},null,[-1,-1])}}function Dt(t){const e=t.slice(),n=e[10](e[0],e[7].finish);return e[37]=n,e}function Et(t){const e=t.slice(),n=e[10](e[1],e[0]);return e[37]=n,e}function It(t){const e=t.slice(),n=e[10](e[8].start,e[1]);return e[37]=n,e}function dn(t,e,n){const i=t.slice();return i[38]=e[n],i}function mn(t){let e,n,i,s,r="Edit Timer",l,o,f="Ã—",c,a,u,h,k,O="Type:",T,M,S=t[4].name+"",y,D,A,P,H="Duration:",I,_,g,p,E,F,N,U,q,Z=ae(t[2])+"",be,Oe,Ce,Fe=ae(t[3])+"",We,Ze,de,$,J,ve,te,Xe="ðŸ’¡ Drag the edges to adjust timer boundaries",Ue,W,_e,Pe="Delete",xe,Ne,vt,ye,Rt="Cancel",_t,Ve,Lt="Save",gt,$t,ie=t[6].length>0&&vn(t),se=t[8]&&gn(It(t)),le=t[4]&&pn(Et(t)),re=t[7]&&kn(Dt(t));return{c(){e=w("div"),n=w("div"),i=w("div"),s=w("h2"),s.textContent=r,l=j(),o=w("button"),o.textContent=f,c=j(),a=w("div"),u=w("div"),h=w("div"),k=w("span"),k.textContent=O,T=j(),M=w("span"),y=X(S),D=j(),A=w("div"),P=w("span"),P.textContent=H,I=j(),_=w("span"),g=X(t[9]),p=X(" min"),E=j(),ie&&ie.c(),F=j(),N=w("div"),U=w("div"),q=w("span"),be=X(Z),Oe=j(),Ce=w("span"),We=X(Fe),Ze=j(),de=w("div"),se&&se.c(),$=j(),le&&le.c(),J=j(),re&&re.c(),ve=j(),te=w("div"),te.textContent=Xe,Ue=j(),W=w("div"),_e=w("button"),_e.textContent=Pe,xe=j(),Ne=w("div"),vt=j(),ye=w("button"),ye.textContent=Rt,_t=j(),Ve=w("button"),Ve.textContent=Lt,this.h()},l(Q){e=b(Q,"DIV",{class:!0});var pe=C(e);n=b(pe,"DIV",{class:!0});var Ke=C(n);i=b(Ke,"DIV",{class:!0});var nt=C(i);s=b(nt,"H2",{class:!0,"data-svelte-h":!0}),ee(s)!=="svelte-1ut3txv"&&(s.textContent=r),l=R(nt),o=b(nt,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(o)!=="svelte-y9ayml"&&(o.textContent=f),nt.forEach(m),c=R(Ke),a=b(Ke,"DIV",{class:!0});var Je=C(a);u=b(Je,"DIV",{class:!0});var it=C(u);h=b(it,"DIV",{class:!0});var st=C(h);k=b(st,"SPAN",{class:!0,"data-svelte-h":!0}),ee(k)!=="svelte-owo3qx"&&(k.textContent=O),T=R(st),M=b(st,"SPAN",{class:!0});var Ht=C(M);y=K(Ht,S),Ht.forEach(m),st.forEach(m),D=R(it),A=b(it,"DIV",{class:!0});var lt=C(A);P=b(lt,"SPAN",{class:!0,"data-svelte-h":!0}),ee(P)!=="svelte-2ef875"&&(P.textContent=H),I=R(lt),_=b(lt,"SPAN",{class:!0});var pt=C(_);g=K(pt,t[9]),p=K(pt," min"),pt.forEach(m),lt.forEach(m),it.forEach(m),E=R(Je),ie&&ie.l(Je),F=R(Je),N=b(Je,"DIV",{class:!0});var qe=C(N);U=b(qe,"DIV",{class:!0});var rt=C(U);q=b(rt,"SPAN",{});var Ft=C(q);be=K(Ft,Z),Ft.forEach(m),Oe=R(rt),Ce=b(rt,"SPAN",{});var Ut=C(Ce);We=K(Ut,Fe),Ut.forEach(m),rt.forEach(m),Ze=R(qe),de=b(qe,"DIV",{class:!0});var Ye=C(de);se&&se.l(Ye),$=R(Ye),le&&le.l(Ye),J=R(Ye),re&&re.l(Ye),Ye.forEach(m),ve=R(qe),te=b(qe,"DIV",{class:!0,"data-svelte-h":!0}),ee(te)!=="svelte-173xjy6"&&(te.textContent=Xe),qe.forEach(m),Je.forEach(m),Ue=R(Ke),W=b(Ke,"DIV",{class:!0});var je=C(W);_e=b(je,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(_e)!=="svelte-6r50uh"&&(_e.textContent=Pe),xe=R(je),Ne=b(je,"DIV",{class:!0}),C(Ne).forEach(m),vt=R(je),ye=b(je,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(ye)!=="svelte-1ph2inm"&&(ye.textContent=Rt),_t=R(je),Ve=b(je,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(Ve)!=="svelte-9t0vpj"&&(Ve.textContent=Lt),je.forEach(m),Ke.forEach(m),pe.forEach(m),this.h()},h(){v(s,"class","svelte-khj96w"),v(o,"class","close-btn svelte-khj96w"),v(i,"class","modal-header svelte-khj96w"),v(k,"class","label svelte-khj96w"),v(M,"class","value svelte-khj96w"),v(h,"class","info svelte-khj96w"),v(P,"class","label svelte-khj96w"),v(_,"class","value svelte-khj96w"),v(A,"class","info svelte-khj96w"),v(u,"class","info-row svelte-khj96w"),v(U,"class","timeline-labels svelte-khj96w"),v(de,"class","timeline-track svelte-khj96w"),v(te,"class","timeline-hint svelte-khj96w"),v(N,"class","timeline-editor svelte-khj96w"),v(a,"class","modal-body svelte-khj96w"),v(_e,"class","btn btn-delete svelte-khj96w"),v(Ne,"class","spacer svelte-khj96w"),v(ye,"class","btn btn-cancel svelte-khj96w"),v(Ve,"class","btn btn-save svelte-khj96w"),v(W,"class","modal-footer svelte-khj96w"),v(n,"class","modal svelte-khj96w"),v(e,"class","modal-backdrop svelte-khj96w")},m(Q,pe){V(Q,e,pe),d(e,n),d(n,i),d(i,s),d(i,l),d(i,o),d(n,c),d(n,a),d(a,u),d(u,h),d(h,k),d(h,T),d(h,M),d(M,y),d(u,D),d(u,A),d(A,P),d(A,I),d(A,_),d(_,g),d(_,p),d(a,E),ie&&ie.m(a,null),d(a,F),d(a,N),d(N,U),d(U,q),d(q,be),d(U,Oe),d(U,Ce),d(Ce,We),d(N,Ze),d(N,de),se&&se.m(de,null),d(de,$),le&&le.m(de,null),d(de,J),re&&re.m(de,null),d(N,ve),d(N,te),t[30](N),d(n,Ue),d(n,W),d(W,_e),d(W,xe),d(W,Ne),d(W,vt),d(W,ye),d(W,_t),d(W,Ve),gt||($t=[G(o,"click",t[16]),G(i,"click",zt(t[27])),G(a,"click",zt(t[26])),G(_e,"click",t[17]),G(ye,"click",t[16]),G(Ve,"click",t[15]),G(e,"click",t[16])],gt=!0)},p(Q,pe){pe[0]&16&&S!==(S=Q[4].name+"")&&x(y,S),pe[0]&512&&x(g,Q[9]),Q[6].length>0?ie?ie.p(Q,pe):(ie=vn(Q),ie.c(),ie.m(a,F)):ie&&(ie.d(1),ie=null),pe[0]&4&&Z!==(Z=ae(Q[2])+"")&&x(be,Z),pe[0]&8&&Fe!==(Fe=ae(Q[3])+"")&&x(We,Fe),Q[8]?se?se.p(It(Q),pe):(se=gn(It(Q)),se.c(),se.m(de,$)):se&&(se.d(1),se=null),Q[4]?le?le.p(Et(Q),pe):(le=pn(Et(Q)),le.c(),le.m(de,J)):le&&(le.d(1),le=null),Q[7]?re?re.p(Dt(Q),pe):(re=kn(Dt(Q)),re.c(),re.m(de,null)):re&&(re.d(1),re=null)},d(Q){Q&&m(e),ie&&ie.d(),se&&se.d(),le&&le.d(),re&&re.d(),t[30](null),gt=!1,Ae($t)}}}function vn(t){let e,n=De(t[6]),i=[];for(let s=0;s<n.length;s+=1)i[s]=_n(dn(t,n,s));return{c(){e=w("div");for(let s=0;s<i.length;s+=1)i[s].c();this.h()},l(s){e=b(s,"DIV",{class:!0});var r=C(e);for(let l=0;l<i.length;l+=1)i[l].l(r);r.forEach(m),this.h()},h(){v(e,"class","warnings svelte-khj96w")},m(s,r){V(s,e,r);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(e,null)},p(s,r){if(r[0]&64){n=De(s[6]);let l;for(l=0;l<n.length;l+=1){const o=dn(s,n,l);i[l]?i[l].p(o,r):(i[l]=_n(o),i[l].c(),i[l].m(e,null))}for(;l<i.length;l+=1)i[l].d(1);i.length=n.length}},d(s){s&&m(e),ut(i,s)}}}function _n(t){let e,n,i=t[38]+"",s;return{c(){e=w("div"),n=X("âš ï¸ "),s=X(i),this.h()},l(r){e=b(r,"DIV",{class:!0});var l=C(e);n=K(l,"âš ï¸ "),s=K(l,i),l.forEach(m),this.h()},h(){v(e,"class","warning-item svelte-khj96w")},m(r,l){V(r,e,l),d(e,n),d(e,s)},p(r,l){l[0]&64&&i!==(i=r[38]+"")&&x(s,i)},d(r){r&&m(e)}}}function gn(t){let e,n,i=t[8].name+"",s,r,l;return{c(){e=w("div"),n=w("span"),s=X(i),this.h()},l(o){e=b(o,"DIV",{class:!0,style:!0,title:!0});var f=C(e);n=b(f,"SPAN",{class:!0});var c=C(n);s=K(c,i),c.forEach(m),f.forEach(m),this.h()},h(){v(n,"class","timer-label svelte-khj96w"),v(e,"class",r="timer-block prev "+(t[14](t[8])?"work":"rest")+" svelte-khj96w"),L(e,"left",t[37].left),L(e,"width",t[37].width),v(e,"title",l=t[8].name+": "+ae(t[8].start)+" - "+ae(t[1]))},m(o,f){V(o,e,f),d(e,n),d(n,s)},p(o,f){f[0]&256&&i!==(i=o[8].name+"")&&x(s,i),f[0]&256&&r!==(r="timer-block prev "+(o[14](o[8])?"work":"rest")+" svelte-khj96w")&&v(e,"class",r),f[0]&258&&L(e,"left",o[37].left),f[0]&258&&L(e,"width",o[37].width),f[0]&258&&l!==(l=o[8].name+": "+ae(o[8].start)+" - "+ae(o[1]))&&v(e,"title",l)},d(o){o&&m(e)}}}function pn(t){let e,n,i,s,r,l=t[4].name+"",o,f,c,a=ae(t[1])+"",u,h,k=ae(t[0])+"",O,T,M,S,y,D;return{c(){e=w("div"),n=w("div"),i=j(),s=w("div"),r=w("div"),o=X(l),f=j(),c=w("div"),u=X(a),h=X(" - "),O=X(k),T=j(),M=w("div"),this.h()},l(A){e=b(A,"DIV",{class:!0,style:!0});var P=C(e);n=b(P,"DIV",{class:!0,title:!0}),C(n).forEach(m),i=R(P),s=b(P,"DIV",{class:!0});var H=C(s);r=b(H,"DIV",{class:!0});var I=C(r);o=K(I,l),I.forEach(m),f=R(H),c=b(H,"DIV",{class:!0});var _=C(c);u=K(_,a),h=K(_," - "),O=K(_,k),_.forEach(m),H.forEach(m),T=R(P),M=b(P,"DIV",{class:!0,title:!0}),C(M).forEach(m),P.forEach(m),this.h()},h(){v(n,"class","drag-handle left svelte-khj96w"),v(n,"title","Drag to adjust start time"),v(r,"class","timer-label svelte-khj96w"),v(c,"class","timer-times svelte-khj96w"),v(s,"class","timer-content svelte-khj96w"),v(M,"class","drag-handle right svelte-khj96w"),v(M,"title","Drag to adjust end time"),v(e,"class",S="timer-block current "+(t[14](t[4])?"work":"rest")+" svelte-khj96w"),L(e,"left",t[37].left),L(e,"width",t[37].width)},m(A,P){V(A,e,P),d(e,n),d(e,i),d(e,s),d(s,r),d(r,o),d(s,f),d(s,c),d(c,u),d(c,h),d(c,O),d(e,T),d(e,M),y||(D=[G(n,"mousedown",t[28]),G(M,"mousedown",t[29])],y=!0)},p(A,P){P[0]&16&&l!==(l=A[4].name+"")&&x(o,l),P[0]&2&&a!==(a=ae(A[1])+"")&&x(u,a),P[0]&1&&k!==(k=ae(A[0])+"")&&x(O,k),P[0]&16&&S!==(S="timer-block current "+(A[14](A[4])?"work":"rest")+" svelte-khj96w")&&v(e,"class",S),P[0]&3&&L(e,"left",A[37].left),P[0]&3&&L(e,"width",A[37].width)},d(A){A&&m(e),y=!1,Ae(D)}}}function kn(t){let e,n,i=t[7].name+"",s,r,l;return{c(){e=w("div"),n=w("span"),s=X(i),this.h()},l(o){e=b(o,"DIV",{class:!0,style:!0,title:!0});var f=C(e);n=b(f,"SPAN",{class:!0});var c=C(n);s=K(c,i),c.forEach(m),f.forEach(m),this.h()},h(){v(n,"class","timer-label svelte-khj96w"),v(e,"class",r="timer-block next "+(t[14](t[7])?"work":"rest")+" svelte-khj96w"),L(e,"left",t[37].left),L(e,"width",t[37].width),v(e,"title",l=t[7].name+": "+ae(t[0])+" - "+ae(t[7].finish))},m(o,f){V(o,e,f),d(e,n),d(n,s)},p(o,f){f[0]&128&&i!==(i=o[7].name+"")&&x(s,i),f[0]&128&&r!==(r="timer-block next "+(o[14](o[7])?"work":"rest")+" svelte-khj96w")&&v(e,"class",r),f[0]&129&&L(e,"left",o[37].left),f[0]&129&&L(e,"width",o[37].width),f[0]&129&&l!==(l=o[7].name+": "+ae(o[0])+" - "+ae(o[7].finish))&&v(e,"title",l)},d(o){o&&m(e)}}}function Xi(t){let e,n,i,s=t[4]&&mn(t);return{c(){s&&s.c(),e=Se()},l(r){s&&s.l(r),e=Se()},m(r,l){s&&s.m(r,l),V(r,e,l),n||(i=[G(window,"keydown",t[18]),G(window,"mousemove",t[12]),G(window,"mouseup",t[13])],n=!0)},p(r,l){r[4]?s?s.p(r,l):(s=mn(r),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},i:ne,o:ne,d(r){r&&m(e),s&&s.d(r),n=!1,Ae(i)}}}function ae(t){return t.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!1})}function Ki(t,e,n){let i,s,r,l,o,f,c,a,u,h,k,O;Me(t,jt,$=>n(4,k=$)),Me(t,ge,$=>n(25,O=$));let T=0,M=0,S,y,D=null,A=!1,P=null,H=0,I=400,_;function g(){const $=[];if(s&&(c.getTime()-s.start.getTime())/(1e3*60)<.5&&$.push(`Previous ${s.name} will be removed (< 30 sec)`),r){const J=a;(r.finish.getTime()-J.getTime())/(1e3*60)<.5&&$.push(`Next ${r.name} will be removed (< 30 sec)`)}return $}function p($,J){const ve=$.getTime()-l.getTime(),te=J.getTime()-$.getTime(),Xe=ve/f*100,Ue=te/f*100;return{left:`${Xe}%`,width:`${Ue}%`}}function E($,J){A=!0,P=$,H=J.clientX,_&&(I=_.offsetWidth),J.preventDefault()}function F($){if(!A||!P)return;const ve=($.clientX-H)/I*f,te=Math.round(ve/(60*1e3));P==="start"?n(19,T=te):n(20,M=te)}function N(){A=!1,P=null}function U($){return $.name===Ee.WORK}function q(){if(k){if(c>=a){alert("Start time must be before finish time");return}h.length>0&&!confirm(`Warning:
${h.join(`
`)}

Continue with save?`)||(ge.update($=>{const J=$.timerHistory.list.findIndex(W=>W.start.getTime()===k.start.getTime());if(J===-1)return $;const ve=$.timerHistory.list[J],te=[];if(J>0){const W=$.timerHistory.list[J-1],_e=ve.start.getTime();if(c.getTime()!==_e){const Pe=new Date(c);if((Pe.getTime()-W.start.getTime())/1e3<30)te.push(J-1);else{const Ne=new Ie(W.value,W.name,W.start,Pe);$.timerHistory.list[J-1]=Ne}}}if(J<$.timerHistory.list.length-1){const W=$.timerHistory.list[J+1],_e=ve.finish.getTime();if(a.getTime()!==_e){const Pe=new Date(a);if((W.finish.getTime()-Pe.getTime())/1e3<30)te.push(J+1);else{const Ne=new Ie(W.value,W.name,Pe,W.finish);$.timerHistory.list[J+1]=Ne}}}te.sort((W,_e)=>_e-W).forEach(W=>{$.timerHistory.list.splice(W,1)});const Xe=J-te.filter(W=>W<J).length,Ue=new Ie(ve.value,ve.name,c,a);return $.timerHistory.list[Xe]=Ue,$}),ft())}}function Z(){ft()}function be(){k&&confirm("Delete this timer?")&&(ge.update($=>$.remove(k.start)),ft())}function Oe($){$.key==="Escape"&&ft()}function Ce($){Wt.call(this,t,$)}function Fe($){Wt.call(this,t,$)}const We=$=>E("start",$),Ze=$=>E("end",$);function de($){Be[$?"unshift":"push"](()=>{_=$,n(5,_)})}return t.$$.update=()=>{t.$$.dirty[0]&33554448&&n(24,i=k?O.timerHistory.list.findIndex($=>$.start.getTime()===k.start.getTime()):-1),t.$$.dirty[0]&50331648&&n(8,s=i>0?O.timerHistory.list[i-1]:null),t.$$.dirty[0]&50331648&&n(7,r=i>=0&&i<O.timerHistory.list.length-1?O.timerHistory.list[i+1]:null),t.$$.dirty[0]&8388624&&k&&k.start.getTime()!==D&&(n(23,D=k.start.getTime()),n(21,S=k.start instanceof Date?k.start:new Date(k.start)),n(22,y=k.finish instanceof Date?k.finish:new Date(k.finish)),n(19,T=0),n(20,M=0)),t.$$.dirty[0]&2097152&&n(2,l=S?new Date(S.getTime()-30*60*1e3):new Date),t.$$.dirty[0]&4194304&&n(3,o=y?new Date(y.getTime()+30*60*1e3):new Date),t.$$.dirty[0]&12&&(f=o.getTime()-l.getTime()),t.$$.dirty[0]&16&&(k||n(23,D=null)),t.$$.dirty[0]&2621440&&n(1,c=S?new Date(S.getTime()+T*60*1e3):new Date),t.$$.dirty[0]&5242880&&n(0,a=y?new Date(y.getTime()+M*60*1e3):new Date),t.$$.dirty[0]&19&&n(9,u=k?Math.round((a.getTime()-c.getTime())/(1e3*60)):0)},n(6,h=g()),[a,c,l,o,k,_,h,r,s,u,p,E,F,N,U,q,Z,be,Oe,T,M,S,y,D,i,O,Ce,Fe,We,Ze,de]}class Ji extends Te{constructor(e){super(),we(this,e,Ki,Xi,ke,{},null,[-1,-1])}}function qi(t){let e,n,i,s,r,l,o,f,c,a;return{c(){e=w("div"),n=w("button"),i=X(t[1]),r=j(),l=w("button"),o=X(t[2]),this.h()},l(u){e=b(u,"DIV",{class:!0});var h=C(e);n=b(h,"BUTTON",{class:!0});var k=C(n);i=K(k,t[1]),k.forEach(m),r=R(h),l=b(h,"BUTTON",{class:!0});var O=C(l);o=K(O,t[2]),O.forEach(m),h.forEach(m),this.h()},h(){v(n,"class",s="tab "+(t[0]?"":"active")+" svelte-1hgfxul"),v(l,"class",f="tab "+(t[0]?"active":"")+" svelte-1hgfxul"),v(e,"class","tabs-container svelte-1hgfxul")},m(u,h){V(u,e,h),d(e,n),d(n,i),d(e,r),d(e,l),d(l,o),c||(a=[G(n,"click",t[3]),G(l,"click",t[4])],c=!0)},p(u,[h]){h&2&&x(i,u[1]),h&1&&s!==(s="tab "+(u[0]?"":"active")+" svelte-1hgfxul")&&v(n,"class",s),h&4&&x(o,u[2]),h&1&&f!==(f="tab "+(u[0]?"active":"")+" svelte-1hgfxul")&&v(l,"class",f)},i:ne,o:ne,d(u){u&&m(e),c=!1,Ae(a)}}}function Yi(t,e,n){let{checked:i=!1}=e,{leftLabel:s=""}=e,{rightLabel:r=""}=e;const l=()=>n(0,i=!1),o=()=>n(0,i=!0);return t.$$set=f=>{"checked"in f&&n(0,i=f.checked),"leftLabel"in f&&n(1,s=f.leftLabel),"rightLabel"in f&&n(2,r=f.rightLabel)},[i,s,r,l,o]}class Qi extends Te{constructor(e){super(),we(this,e,Yi,qi,ke,{checked:0,leftLabel:1,rightLabel:2})}}function Tn(t,e,n){const i=t.slice();return i[7]=e[n],i}function Zi(t){let e,n,i=[],s=new Map,r,l=t[0].active&&wn(t),o=De([...t[1]].reverse());const f=c=>c[7].start;for(let c=0;c<o.length;c+=1){let a=Tn(t,o,c),u=f(a);s.set(u,i[c]=bn(u,a))}return{c(){e=w("div"),l&&l.c(),n=j();for(let c=0;c<i.length;c+=1)i[c].c();this.h()},l(c){e=b(c,"DIV",{class:!0});var a=C(e);l&&l.l(a),n=R(a);for(let u=0;u<i.length;u+=1)i[u].l(a);a.forEach(m),this.h()},h(){v(e,"class","logs svelte-jk1hst")},m(c,a){V(c,e,a),l&&l.m(e,null),d(e,n);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(e,null);r=!0},p(c,a){c[0].active?l?(l.p(c,a),a&1&&B(l,1)):(l=wn(c),l.c(),B(l,1),l.m(e,n)):l&&(Ge(),z(l,1,1,()=>{l=null}),ze()),a&2&&(o=De([...c[1]].reverse()),Ge(),i=Cn(i,a,f,1,c,o,s,e,Gn,bn,null,Tn),ze())},i(c){if(!r){B(l);for(let a=0;a<o.length;a+=1)B(i[a]);r=!0}},o(c){z(l);for(let a=0;a<i.length;a+=1)z(i[a]);r=!1},d(c){c&&m(e),l&&l.d();for(let a=0;a<i.length;a+=1)i[a].d()}}}function xi(t){let e,n;return e=new Wi({props:{timers:t[1],activeTimer:t[0].active}}),{c(){ce(e.$$.fragment)},l(i){fe(e.$$.fragment,i)},m(i,s){ue(e,i,s),n=!0},p(i,s){const r={};s&2&&(r.timers=i[1]),s&1&&(r.activeTimer=i[0].active),e.$set(r)},i(i){n||(B(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){he(e,i)}}}function wn(t){let e,n,i;const s=[t[0].active,{topLog:!0}];let r={};for(let l=0;l<s.length;l+=1)r=Mn(r,s[l]);return e=new Ln({props:r}),{c(){ce(e.$$.fragment),n=w("br")},l(l){fe(e.$$.fragment,l),n=b(l,"BR",{})},m(l,o){ue(e,l,o),V(l,n,o),i=!0},p(l,o){const f=o&1?Nn(s,[An(l[0].active),s[1]]):{};e.$set(f)},i(l){i||(B(e.$$.fragment,l),i=!0)},o(l){z(e.$$.fragment,l),i=!1},d(l){l&&m(n),he(e,l)}}}function bn(t,e){let n,i,s,r,l;const o=[e[7],{topLog:!1}];let f={};for(let c=0;c<o.length;c+=1)f=Mn(f,o[c]);return i=new Ln({props:f}),i.$on("remove",e[6]),{key:t,first:null,c(){n=Se(),ce(i.$$.fragment),s=j(),r=w("br"),this.h()},l(c){n=Se(),fe(i.$$.fragment,c),s=R(c),r=b(c,"BR",{}),this.h()},h(){this.first=n},m(c,a){V(c,n,a),ue(i,c,a),V(c,s,a),V(c,r,a),l=!0},p(c,a){e=c;const u=a&2?Nn(o,[An(e[7]),o[1]]):{};i.$set(u)},i(c){l||(B(i.$$.fragment,c),l=!0)},o(c){z(i.$$.fragment,c),l=!1},d(c){c&&(m(n),m(s),m(r)),he(i,c)}}}function es(t){let e,n,i,s,r="Clear logs",l,o,f="Active time: ",c,a=qt(t[3])+"",u,h,k,O,T,M,S,y,D,A,P,H,I;e=new Ji({});function _(N){t[5](N)}let g={leftLabel:"Logs",rightLabel:"Graph"};t[2]!==void 0&&(g.checked=t[2]),T=new Qi({props:g}),Be.push(()=>At(T,"checked",_));const p=[xi,Zi],E=[];function F(N,U){return N[2]?0:1}return D=F(t),A=E[D]=p[D](t),{c(){ce(e.$$.fragment),n=j(),i=w("div"),s=w("button"),s.textContent=r,l=j(),o=w("span"),o.textContent=f,c=w("span"),u=X(a),h=j(),k=w("div"),O=w("div"),ce(T.$$.fragment),S=j(),y=w("div"),A.c(),this.h()},l(N){fe(e.$$.fragment,N),n=R(N),i=b(N,"DIV",{class:!0});var U=C(i);s=b(U,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(s)!=="svelte-1renoko"&&(s.textContent=r),l=R(U),o=b(U,"SPAN",{class:!0,"data-svelte-h":!0}),ee(o)!=="svelte-18pz33x"&&(o.textContent=f),c=b(U,"SPAN",{class:!0});var q=C(c);u=K(q,a),q.forEach(m),U.forEach(m),h=R(N),k=b(N,"DIV",{class:!0});var Z=C(k);O=b(Z,"DIV",{class:!0});var be=C(O);fe(T.$$.fragment,be),be.forEach(m),S=R(Z),y=b(Z,"DIV",{class:!0});var Oe=C(y);A.l(Oe),Oe.forEach(m),Z.forEach(m),this.h()},h(){v(s,"class","clear svelte-jk1hst"),v(o,"class","svelte-jk1hst"),v(c,"class","svelte-jk1hst"),v(i,"class","header svelte-jk1hst"),v(O,"class","tabs-header svelte-jk1hst"),v(y,"class","content-wrapper svelte-jk1hst"),v(k,"class","content-section svelte-jk1hst")},m(N,U){ue(e,N,U),V(N,n,U),V(N,i,U),d(i,s),d(i,l),d(i,o),d(i,c),d(c,u),V(N,h,U),V(N,k,U),d(k,O),ue(T,O,null),d(k,S),d(k,y),E[D].m(y,null),P=!0,H||(I=G(s,"click",t[4]),H=!0)},p(N,[U]){(!P||U&8)&&a!==(a=qt(N[3])+"")&&x(u,a);const q={};!M&&U&4&&(M=!0,q.checked=N[2],Nt(()=>M=!1)),T.$set(q);let Z=D;D=F(N),D===Z?E[D].p(N,U):(Ge(),z(E[Z],1,1,()=>{E[Z]=null}),ze(),A=E[D],A?A.p(N,U):(A=E[D]=p[D](N),A.c()),B(A,1),A.m(y,null))},i(N){P||(B(e.$$.fragment,N),B(T.$$.fragment,N),B(A),P=!0)},o(N){z(e.$$.fragment,N),z(T.$$.fragment,N),z(A),P=!1},d(N){N&&(m(n),m(i),m(h),m(k)),he(e,N),he(T),E[D].d(),H=!1,I()}}}function ts(t,e,n){let i,s;Me(t,ge,a=>n(0,i=a)),Me(t,vi,a=>n(3,s=a));var r=[];let l=!0;const o=()=>ge.update(a=>a.clearLogs());function f(a){l=a,n(2,l)}const c=a=>ge.update(u=>u.remove(a.detail));return t.$$.update=()=>{var a;t.$$.dirty&1&&n(1,r=((a=i==null?void 0:i.timerHistory)==null?void 0:a.list)||[])},[i,r,l,s,o,f,c]}class ns extends Te{constructor(e){super(),we(this,e,ts,es,ke,{})}}function is(t){let e,n,i,s,r="Let's Pomodoro!",l,o,f,c,a,u,h;function k(T){t[10](T)}let O={debugFlag:t[1]};return t[0]!==void 0&&(O.remainedSeconds=t[0]),o=new yi({props:O}),Be.push(()=>At(o,"remainedSeconds",k)),o.$on("timer",t[4]),o.$on("current",t[5]),o.$on("cancel",t[6]),u=new ns({}),{c(){e=w("main"),n=w("div"),i=w("div"),s=w("h1"),s.textContent=r,l=j(),ce(o.$$.fragment),c=j(),a=w("div"),ce(u.$$.fragment),this.h()},l(T){e=b(T,"MAIN",{class:!0});var M=C(e);n=b(M,"DIV",{class:!0});var S=C(n);i=b(S,"DIV",{class:!0});var y=C(i);s=b(y,"H1",{class:!0,"data-svelte-h":!0}),ee(s)!=="svelte-cxq7y3"&&(s.textContent=r),l=R(y),fe(o.$$.fragment,y),y.forEach(m),c=R(S),a=b(S,"DIV",{class:!0});var D=C(a);fe(u.$$.fragment,D),D.forEach(m),S.forEach(m),M.forEach(m),this.h()},h(){v(s,"class","logo svelte-1tn61l8"),v(i,"class","pomodoro svelte-1tn61l8"),v(a,"class","logs svelte-1tn61l8"),v(n,"class","container svelte-1tn61l8"),v(e,"class","svelte-1tn61l8"),$e(e,"dark",t[3])},m(T,M){V(T,e,M),d(e,n),d(n,i),d(i,s),d(i,l),ue(o,i,null),d(n,c),d(n,a),ue(u,a,null),h=!0},p(T,M){const S={};M&2&&(S.debugFlag=T[1]),!f&&M&1&&(f=!0,S.remainedSeconds=T[0],Nt(()=>f=!1)),o.$set(S),(!h||M&8)&&$e(e,"dark",T[3])},i(T){h||(B(o.$$.fragment,T),B(u.$$.fragment,T),h=!0)},o(T){z(o.$$.fragment,T),z(u.$$.fragment,T),h=!1},d(T){T&&m(e),he(o),he(u)}}}function ss(t){let e;return{c(){e=w("main"),this.h()},l(n){e=b(n,"MAIN",{style:!0,class:!0}),C(e).forEach(m),this.h()},h(){L(e,"background-color","gray"),L(e,"height","90 vh"),v(e,"class","svelte-1tn61l8")},m(n,i){V(n,e,i)},p:ne,i:ne,o:ne,d(n){n&&m(e)}}}function ls(t){let e,n,i,s,r,l,o,f,c,a="Toggle Dark Mode",u,h,k;const O=[ss,is],T=[];function M(S,y){return S[2]?0:1}return e=M(t),n=T[e]=O[e](t),{c(){n.c(),i=j(),s=w("div"),r=w("label"),l=X("Debug:"),o=w("input"),f=j(),c=w("button"),c.textContent=a,this.h()},l(S){n.l(S),i=R(S),s=b(S,"DIV",{class:!0});var y=C(s);r=b(y,"LABEL",{id:!0});var D=C(r);l=K(D,"Debug:"),o=b(D,"INPUT",{type:!0}),f=R(D),c=b(D,"BUTTON",{"data-svelte-h":!0}),ee(c)!=="svelte-7kmdhl"&&(c.textContent=a),D.forEach(m),y.forEach(m),this.h()},h(){v(o,"type","checkbox"),v(r,"id","debug"),v(s,"class","debug-div svelte-1tn61l8")},m(S,y){T[e].m(S,y),V(S,i,y),V(S,s,y),d(s,r),d(r,l),d(r,o),o.checked=t[1],d(r,f),d(r,c),u=!0,h||(k=[G(o,"change",t[11]),G(c,"click",t[7])],h=!0)},p(S,[y]){let D=e;e=M(S),e===D?T[e].p(S,y):(Ge(),z(T[D],1,1,()=>{T[D]=null}),ze(),n=T[e],n?n.p(S,y):(n=T[e]=O[e](S),n.c()),B(n,1),n.m(i.parentNode,i)),y&2&&(o.checked=S[1])},i(S){u||(B(n),u=!0)},o(S){z(n),u=!1},d(S){S&&(m(i),m(s)),T[e].d(S),h=!1,Ae(k)}}}function rs(t,e,n){let i,s;Me(t,tn,T=>n(3,i=T)),Me(t,ge,T=>n(9,s=T));let r=!1,l,o=!0,f;Un(()=>{f&&clearInterval(f)});function c(T){ge.update(M=>M.addTimer(T.detail))}function a(T){ge.update(M=>M.setActive(T.detail))}function u(){ge.update(T=>T.resetActive())}On(()=>{if(console.log("get darkmode:",i),s!=null&&s.active){const M=(new Date().getTime()-s.active.start.getTime())/1e3,S=s.active.value*60,y=Math.max(0,S-M);if(console.log("Auto-resuming timer:",{elapsed:M,planned:S,remaining:y,timerType:s.active.name}),y>0){const D=y/60;He.start(D,s.active.name,r),console.log("Started timer with",D,"minutes remaining")}else ge.update(D=>D.resetActive()),console.log("Timer expired, cleared active timer")}n(2,o=!1)});function h(){tn.update(T=>!T),console.log("toggle dark",i)}function k(T){l=T,n(0,l)}function O(){r=this.checked,n(1,r)}return t.$$.update=()=>{t.$$.dirty&513&&s&&l!==void 0&&ge.update(T=>(T.updateActiveTimer(),T)),t.$$.dirty&768&&(s!=null&&s.active?f||(console.log("Starting active timer interval"),n(8,f=setInterval(()=>{ge.update(T=>(T.active&&(T.active.finish=new Date),T))},1e3))):f&&(console.log("Clearing active timer interval"),clearInterval(f),n(8,f=void 0)))},[l,r,o,i,c,a,u,h,f,s,k,O]}class us extends Te{constructor(e){super(),we(this,e,rs,ls,ke,{})}}export{us as component};
