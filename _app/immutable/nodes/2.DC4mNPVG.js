var Kn=Object.defineProperty;var Jn=(t,e,n)=>e in t?Kn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ge=(t,e,n)=>Jn(t,typeof e!="symbol"?e+"":e,n);import{r as Ge,s as he,c as $n,e as T,b as P,v as Te,d as b,f as E,i as m,j as R,y as d,k as j,T as G,u as Nn,g as An,a as jn,t as q,h as X,z as L,l as v,m as ee,U as st,V as Yt,W as He,n as Q,X as re,Y as mt,A as Xe,Z as Zt,o as Oe,_ as It,$ as Yn,x as Vn,a0 as Lt,a1 as Qt,a2 as xt,a3 as Ue,a4 as en,a5 as Ee,a6 as De,a7 as vt,a8 as _t,a9 as Pn,F as Rn,aa as Zn}from"../chunks/scheduler.wXDW__MU.js";import{a as z,t as B,S as me,i as ve,b as te,d as ne,m as ie,e as se,g as Be,c as ze,f as Ht,h as Ln,j as Hn}from"../chunks/index.d4iYPt1k.js";import{b as et,w as kt,d as wt}from"../chunks/paths.Coihu9Dy.js";function Ie(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Qn(t,e){t.d(1),e.delete(t.key)}function xn(t,e){z(t,1,1,()=>{e.delete(t.key)})}function Fn(t,e,n,i,s,r,l,o,u,c,a,f){let h=t.length,_=r.length,g=h;const $={};for(;g--;)$[t[g].key]=g;const A=[],C=new Map,N=new Map,I=[];for(g=_;g--;){const D=f(s,r,g),p=n(D);let k=l.get(p);k?I.push(()=>k.p(D,e)):(k=c(p,D),k.c()),C.set(p,A[g]=k),p in $&&N.set(p,Math.abs(g-$[p]))}const y=new Set,O=new Set;function V(D){B(D,1),D.m(o,a),l.set(D.key,D),a=D.first,_--}for(;h&&_;){const D=A[_-1],p=t[h-1],k=D.key,w=p.key;D===p?(a=D.first,h--,_--):C.has(w)?!l.has(k)||y.has(k)?V(D):O.has(w)?h--:N.get(k)>N.get(w)?(O.add(k),V(D)):(y.add(w),h--):(u(p,l),h--)}for(;h--;){const D=t[h];C.has(D.key)||u(D,l)}for(;_;)V(A[_-1]);return Ge(I),A}function Tt(t,e){const n={},i={},s={$$scope:1};let r=t.length;for(;r--;){const l=t[r],o=e[r];if(o){for(const u in l)u in o||(i[u]=1);for(const u in o)s[u]||(n[u]=o[u],s[u]=1);t[r]=o}else for(const u in l)s[u]=1}for(const l in i)l in n||(n[l]=void 0);return n}function Un(t){return typeof t=="object"&&t!==null?t:{}}const ei=et+"/ring2.wav";let Bn=function(){},it,yt,zn=.5,ut;if(typeof window<"u"){let t=window.AudioContext||window.webkitAudioContext;it=new t,fetch(ei).then(e=>e.arrayBuffer()).then(e=>it.decodeAudioData(e)).then(e=>{yt=e}).catch(e=>console.error("Error loading sound file:",e)),Bn=function(){if(!yt)return;ut=it.createBufferSource(),ut.buffer=yt;let e=it.createGain();e.gain.value=zn,ut.connect(e),e.connect(it.destination),ut.start(0)}}function Ft(){Bn()}function ti(t,e){zn=t,Ft()}function tn(t){let e,n;return{c(){e=T("div"),n=q(t[0]),this.h()},l(i){e=b(i,"DIV",{style:!0,class:!0});var s=E(e);n=X(s,t[0]),s.forEach(m),this.h()},h(){L(e,"top",t[3]+"px"),L(e,"left",t[2]+"px"),d(e,"class","tooltip svelte-43gogz")},m(i,s){j(i,e,s),v(e,n)},p(i,s){s&1&&ee(n,i[0]),s&8&&L(e,"top",i[3]+"px"),s&4&&L(e,"left",i[2]+"px")},d(i){i&&m(e)}}}function ni(t){let e,n,i,s,r,l;const o=t[8].default,u=$n(o,t,t[7],null);let c=t[1]&&tn(t);return{c(){e=T("div"),u&&u.c(),n=P(),c&&c.c(),i=Te(),this.h()},l(a){e=b(a,"DIV",{"aria-hidden":!0});var f=E(e);u&&u.l(f),f.forEach(m),n=R(a),c&&c.l(a),i=Te(),this.h()},h(){d(e,"aria-hidden","true")},m(a,f){j(a,e,f),u&&u.m(e,null),j(a,n,f),c&&c.m(a,f),j(a,i,f),s=!0,r||(l=[G(e,"mouseover",t[4]),G(e,"mouseleave",t[6]),G(e,"mousemove",t[5]),G(e,"focus",ii)],r=!0)},p(a,[f]){u&&u.p&&(!s||f&128)&&Nn(u,o,a,a[7],s?jn(o,a[7],f,null):An(a[7]),null),a[1]?c?c.p(a,f):(c=tn(a),c.c(),c.m(i.parentNode,i)):c&&(c.d(1),c=null)},i(a){s||(B(u,a),s=!0)},o(a){z(u,a),s=!1},d(a){a&&(m(e),m(n),m(i)),u&&u.d(a),c&&c.d(a),r=!1,Ge(l)}}}const ii=function(){};function si(t,e,n){let{$$slots:i={},$$scope:s}=e,{title:r=""}=e,l=!1,o,u;function c(h){n(1,l=!0),n(2,o=h.pageX+10),n(3,u=h.pageY+10)}function a(h){n(2,o=h.pageX+10),n(3,u=h.pageY+10)}function f(){n(1,l=!1)}return t.$$set=h=>{"title"in h&&n(0,r=h.title),"$$scope"in h&&n(7,s=h.$$scope)},[r,l,o,u,c,a,f,s,i]}class Ut extends me{constructor(e){super(),ve(this,e,si,ni,he,{title:0})}}function nn(t){let e=Math.floor(t/60),n=Math.floor(t%60).toString().padStart(2,"0"),i=e.toString().padStart(2,"0");if(e>60){let s=Math.floor(e/60);return i=Math.floor(e%60).toString().padStart(2,"0"),`${s}:${i}:${n}`}return`${i}:${n}`}function sn(t){let e=Math.floor(t/60),n=Math.floor(t%60);if(e>60){let i=Math.floor(e/60);return e=Math.floor(e%60),`${i}h ${e} min`}else return e>0?`${e} min`:`${n} sec`}function ln(t){let e=Math.floor(t/3600);e>0&&(t=t-e*3600);let n=Math.floor(t/60),i=Math.floor(t%60);return e==1?`${e} hour ${n} min`:e>0?`${e} hours ${n} min`:n>=5?`${n} min`:n>1?`${n} min ${i} sec`:`${i} sec`}class li{constructor(e,n,i,s=300){ge(this,"intervalId",0);ge(this,"duration",0);ge(this,"start",0);ge(this,"remain",0);ge(this,"onSec",e=>{});ge(this,"onAlarm",()=>{});this.duration=e,this.remain=e-1,e>0&&(this.onSec=n,this.onAlarm=i,this.start=Date.now(),this.intervalId=setInterval(()=>{const r=Math.ceil((Date.now()-this.start)/1e3);let l=this.duration-r;l!=this.remain&&(n(this.remain),this.remain=l,this.remain<=0&&(this.onAlarm(),clearInterval(this.intervalId)))},s))}stop(){clearInterval(this.intervalId)}}function ri(t){let e,n=nn(t[0])+"",i,s,r;return{c(){e=T("button"),i=q(n),this.h()},l(l){e=b(l,"BUTTON",{id:!0,class:!0});var o=E(e);i=X(o,n),o.forEach(m),this.h()},h(){d(e,"id","watch"),d(e,"class","svelte-1kj7nhv")},m(l,o){j(l,e,o),v(e,i),s||(r=G(e,"click",t[1]),s=!0)},p(l,o){o&1&&n!==(n=nn(l[0])+"")&&ee(i,n)},d(l){l&&m(e),s=!1,r()}}}function oi(t){let e,n;return e=new Ut({props:{title:"stop timer",$$slots:{default:[ri]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment)},l(i){ne(e.$$.fragment,i)},m(i,s){ie(e,i,s),n=!0},p(i,[s]){const r={};s&257&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(B(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){se(e,i)}}}function ai(t,e,n){let{time:i=0}=e,{remainedSeconds:s=0}=e;var r;const l=st();function o(f){r!=null&&r.stop(),r=new li(f,u,c),n(0,s=f)}function u(f){n(0,s=f)}function c(){Ft(),l("alarming")}function a(){l("stop")}return t.$$set=f=>{"time"in f&&n(2,i=f.time),"remainedSeconds"in f&&n(0,s=f.remainedSeconds)},t.$$.update=()=>{t.$$.dirty&4&&o(i)},[s,a,i]}class ci extends me{constructor(e){super(),ve(this,e,ai,oi,he,{time:2,remainedSeconds:0})}}function ui(t){let e,n,i,s,r,l;return{c(){e=T("button"),n=q(t[1]),i=q(" min"),this.h()},l(o){e=b(o,"BUTTON",{class:!0});var u=E(e);n=X(u,t[1]),i=X(u," min"),u.forEach(m),this.h()},h(){d(e,"class",s=Yt(t[2])+" svelte-8w7xxt"),He(e,"pressed",t[0])},m(o,u){j(o,e,u),v(e,n),v(e,i),r||(l=G(e,"click",t[5]),r=!0)},p(o,[u]){u&2&&ee(n,o[1]),u&4&&s!==(s=Yt(o[2])+" svelte-8w7xxt")&&d(e,"class",s),u&5&&He(e,"pressed",o[0])},i:Q,o:Q,d(o){o&&m(e),r=!1,l()}}}function fi(t,e,n){const i=st();let{value:s}=e,{name:r}=e,{pressed:l=!1}=e;function o(a,f){i("start",{name:a,val:f}),n(0,l=!0)}function u(){n(0,l=!1)}const c=function(){o(r,s)};return t.$$set=a=>{"value"in a&&n(1,s=a.value),"name"in a&&n(2,r=a.name),"pressed"in a&&n(0,l=a.pressed)},[l,s,r,o,u,c]}class Gn extends me{constructor(e){super(),ve(this,e,fi,ui,he,{value:1,name:2,pressed:0,reset:4})}get reset(){return this.$$.ctx[4]}}const ye={WORK:"work",REST:"rest"},di={afterClockIntervalS:3,afterClockTimeoutS:10,timersMultiplier:1},hi={afterClockIntervalS:10,afterClockTimeoutS:60*15,timersMultiplier:1*60};function jt(t){return t?di:hi}function rn(t,e,n){const i=t.slice();return i[9]=e[n],i[10]=e,i[11]=n,i}const mi=t=>({}),on=t=>({class:"item svelte-1rvg6ah"});function an(t,e,n){const i=t.slice();return i[9]=e[n],i[12]=e,i[11]=n,i}function cn(t){let e,n=t[11],i,s,r;const l=()=>t[6](e,n),o=()=>t[6](null,n);let u={value:t[9],name:ye.WORK};return e=new Gn({props:u}),l(),e.$on("start",t[2]),{c(){te(e.$$.fragment),i=P(),s=T("br")},l(c){ne(e.$$.fragment,c),i=R(c),s=b(c,"BR",{})},m(c,a){ie(e,c,a),j(c,i,a),j(c,s,a),r=!0},p(c,a){n!==c[11]&&(o(),n=c[11],l());const f={};e.$set(f)},i(c){r||(B(e.$$.fragment,c),r=!0)},o(c){z(e.$$.fragment,c),r=!1},d(c){c&&(m(i),m(s)),o(),se(e,c)}}}function un(t){let e,n=t[11],i,s,r;const l=()=>t[7](e,n),o=()=>t[7](null,n);let u={value:t[9],name:ye.REST};return e=new Gn({props:u}),l(),e.$on("start",t[2]),{c(){te(e.$$.fragment),i=P(),s=T("br")},l(c){ne(e.$$.fragment,c),i=R(c),s=b(c,"BR",{})},m(c,a){ie(e,c,a),j(c,i,a),j(c,s,a),r=!0},p(c,a){n!==c[11]&&(o(),n=c[11],l());const f={};e.$set(f)},i(c){r||(B(e.$$.fragment,c),r=!0)},o(c){z(e.$$.fragment,c),r=!1},d(c){c&&(m(i),m(s)),o(),se(e,c)}}}function vi(t){let e,n,i,s,r="Active",l,o,u,c,a,f,h="Rest",_,g,$,A=Ie(t[1]),C=[];for(let p=0;p<A.length;p+=1)C[p]=cn(an(t,A,p));const N=p=>z(C[p],1,1,()=>{C[p]=null}),I=t[5].default,y=$n(I,t,t[4],on);let O=Ie(t[1]),V=[];for(let p=0;p<O.length;p+=1)V[p]=un(rn(t,O,p));const D=p=>z(V[p],1,1,()=>{V[p]=null});return{c(){e=T("div"),n=T("div"),i=T("div"),s=T("span"),s.textContent=r,l=T("br"),o=P();for(let p=0;p<C.length;p+=1)C[p].c();u=P(),y&&y.c(),c=P(),a=T("div"),f=T("span"),f.textContent=h,_=T("br"),g=P();for(let p=0;p<V.length;p+=1)V[p].c();this.h()},l(p){e=b(p,"DIV",{});var k=E(e);n=b(k,"DIV",{class:!0});var w=E(n);i=b(w,"DIV",{class:!0});var S=E(i);s=b(S,"SPAN",{class:!0,"data-svelte-h":!0}),re(s)!=="svelte-19szg5l"&&(s.textContent=r),l=b(S,"BR",{}),o=R(S);for(let M=0;M<C.length;M+=1)C[M].l(S);S.forEach(m),u=R(w),y&&y.l(w),c=R(w),a=b(w,"DIV",{class:!0});var F=E(a);f=b(F,"SPAN",{class:!0,"data-svelte-h":!0}),re(f)!=="svelte-1gtata5"&&(f.textContent=h),_=b(F,"BR",{}),g=R(F);for(let M=0;M<V.length;M+=1)V[M].l(F);F.forEach(m),w.forEach(m),k.forEach(m),this.h()},h(){d(s,"class","label svelte-1rvg6ah"),d(i,"class","item svelte-1rvg6ah"),d(f,"class","label svelte-1rvg6ah"),d(a,"class","item svelte-1rvg6ah"),d(n,"class","grid-container svelte-1rvg6ah")},m(p,k){j(p,e,k),v(e,n),v(n,i),v(i,s),v(i,l),v(i,o);for(let w=0;w<C.length;w+=1)C[w]&&C[w].m(i,null);v(n,u),y&&y.m(n,null),v(n,c),v(n,a),v(a,f),v(a,_),v(a,g);for(let w=0;w<V.length;w+=1)V[w]&&V[w].m(a,null);$=!0},p(p,[k]){if(k&7){A=Ie(p[1]);let w;for(w=0;w<A.length;w+=1){const S=an(p,A,w);C[w]?(C[w].p(S,k),B(C[w],1)):(C[w]=cn(S),C[w].c(),B(C[w],1),C[w].m(i,null))}for(Be(),w=A.length;w<C.length;w+=1)N(w);ze()}if(y&&y.p&&(!$||k&16)&&Nn(y,I,p,p[4],$?jn(I,p[4],k,mi):An(p[4]),on),k&7){O=Ie(p[1]);let w;for(w=0;w<O.length;w+=1){const S=rn(p,O,w);V[w]?(V[w].p(S,k),B(V[w],1)):(V[w]=un(S),V[w].c(),B(V[w],1),V[w].m(a,null))}for(Be(),w=O.length;w<V.length;w+=1)D(w);ze()}},i(p){if(!$){for(let k=0;k<A.length;k+=1)B(C[k]);B(y,p);for(let k=0;k<O.length;k+=1)B(V[k]);$=!0}},o(p){C=C.filter(Boolean);for(let k=0;k<C.length;k+=1)z(C[k]);z(y,p),V=V.filter(Boolean);for(let k=0;k<V.length;k+=1)z(V[k]);$=!1},d(p){p&&m(e),mt(C,p),y&&y.d(p),mt(V,p)}}}function _i(t,e,n){let{$$slots:i={},$$scope:s}=e;const r=st();let l=[],o=[5,10,15,20,25,120];function u(h){r("start",{timer:h.detail.val,name:h.detail.name}),console.log("handleTimerStart")}function c(){l.forEach(h=>{h&&h.reset()})}function a(h,_){Xe[h?"unshift":"push"](()=>{l[_]=h,n(0,l)})}function f(h,_){Xe[h?"unshift":"push"](()=>{l[_+l.length]=h,n(0,l)})}return t.$$set=h=>{"$$scope"in h&&n(4,s=h.$$scope)},[l,o,u,c,s,i,a,f]}class gi extends me{constructor(e){super(),ve(this,e,_i,vi,he,{clear:3})}get clear(){return this.$$.ctx[3]}}/*! js-cookie v3.0.5 | MIT */function ft(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}var pi={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function Vt(t,e){function n(s,r,l){if(!(typeof document>"u")){l=ft({},e,l),typeof l.expires=="number"&&(l.expires=new Date(Date.now()+l.expires*864e5)),l.expires&&(l.expires=l.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var u in l)l[u]&&(o+="; "+u,l[u]!==!0&&(o+="="+l[u].split(";")[0]));return document.cookie=s+"="+t.write(r,s)+o}}function i(s){if(!(typeof document>"u"||arguments.length&&!s)){for(var r=document.cookie?document.cookie.split("; "):[],l={},o=0;o<r.length;o++){var u=r[o].split("="),c=u.slice(1).join("=");try{var a=decodeURIComponent(u[0]);if(l[a]=t.read(c,a),s===a)break}catch{}}return s?l[s]:l}}return Object.create({set:n,get:i,remove:function(s,r){n(s,"",ft({},r,{expires:-1}))},withAttributes:function(s){return Vt(this.converter,ft({},this.attributes,s))},withConverter:function(s){return Vt(ft({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var Ae=Vt(pi,{path:"/"});class Me{constructor(e=0,n="",i=new Date,s=new Date){ge(this,"start");ge(this,"finish");ge(this,"name");ge(this,"value");this.start=i,this.finish=s,this.name=n,this.value=e}setDuration(e){this.finish=new Date(this.start.getTime()+e*1e3)}durationS(){return(this.finish.getTime()-this.start.getTime())/1e3}}const fe={RUNNING:"RUNNING",STOPPED:"STOPPED",WAITING_FOR_STOP:"WAITING_FOR_STOP"};var Le=(t=>(t[t.EMIT=1]="EMIT",t[t.DO_NOT_EMIT=2]="DO_NOT_EMIT",t))(Le||{});let Wn=60,ki=5*60;function Bt(t,e,n=Wn){return(e.start.getTime()-t.finish.getTime())/1e3>n}function wi(t,e=Wn){var n=[],i=0;if(t.length<=1)return t;n.push(t[0]),i=0;for(let s=1;s<t.length;s++){const r=t[s];if(n[i].name!=r.name){n.push(r),i++;continue}Bt(n[i],r,e)?(n.push(r),i++):n[i].finish=r.finish}return n}function Ot(t,e=ye.REST,n=ki){var i=[],s=0;if(t.length<=1)return t;i.push(t[0]),s=0;for(let l=1;l<t.length;l++){const o=t[l];if(Bt(i[s],o,n)){var r=new Me(0,e,i[s].finish,o.start);i.push(r),s++}i.push(o),s++}return i}function Ti(t){return t.forEach(e=>{if(!("name"in e&&"start"in e&&"finish"in e))return!1}),!0}function bi(t){let e=[];try{const n=JSON.parse(t);let i=[];Ti(n)&&n.forEach(s=>{i.push(new Me(0,s.name,new Date(s.start*1e3),new Date(s.finish*1e3)))}),console.log("deserialized logs:",i),e=i}catch{e=[]}return new Pt(e)}class Pt{constructor(e){ge(this,"additionalS",0);ge(this,"list",[]);this.list=Ot(e,ye.REST)}serialize(){let e=[];return this.list.forEach(n=>{e.push({name:n.name,start:Math.floor(n.start.getTime()/1e3),finish:Math.floor(n.finish.getTime()/1e3)})}),JSON.stringify(e)}_normalize(){this.list=Ot(this.list,ye.REST),this.list=wi(this.list,0)}addTimer(e){return this.list.push(e),this._normalize(),this}remove(e){for(var n=0;n<this.list.length;)this.list[n].start===e?this.list.splice(n,1):++n;this._normalize()}total(){let e=0;return this.list.forEach(n=>{n.name==ye.WORK&&(e+=n.durationS())}),e}fillGaps(e=new Me){if(this.list=Ot(this.list),this.list.length>0){let n=this.list[this.list.length-1];Bt(n,e)&&this.list.push(new Me(0,ye.REST,n.finish,e.start))}return this}}class Si{constructor(){ge(this,"timerHistory");ge(this,"active");this.timerHistory=new Pt([])}addTimer(e){return this.active=void 0,this.timerHistory.addTimer(e),this}remove(e){return this.timerHistory.remove(e),this}clearLogs(){return this.timerHistory=new Pt([]),this}resetActive(){return this.active=void 0,this}updateActiveTimer(){return this.active&&(this.active.finish=new Date),this}setActive(e){return this.active=e,this.timerHistory.fillGaps(),this}totalTime(){let e=this.timerHistory.total();return this.active&&this.active.name==ye.WORK&&(e+=this.active.durationS()),e}}function qn(t,e,n={storage:"cookies",cookieExpireDays:31}){const i=n.serialize||JSON.stringify,s=n.deserialize||JSON.parse;let r=e;try{const o=n.storage==="cookies"?Ae.get(t):localStorage.getItem(t);o&&(r=s(o))}catch(o){console.warn(`Failed to load ${t} from ${n.storage}:`,o)}const l=kt(r);return l.subscribe(o=>{try{const u=i(o);n.storage==="cookies"?Ae.set(t,u,{expires:n.cookieExpireDays||31}):localStorage.setItem(t,u)}catch(u){console.warn(`Failed to save ${t} to ${n.storage}:`,u)}}),l}function Ei(){let t=new Si;{const n=Ae.get("logs");console.log("Loading pomApp from cookies:",n),n&&(t.timerHistory=bi(n));const i=Ae.get("activeTimer");if(i)try{const s=JSON.parse(i),r=new Date(s.start),l=new Date;(l.getTime()-r.getTime())/(1e3*60*60)<1?(t.active=new Me(s.value,s.name,r,l),console.log("Loaded active timer from cookies:",t.active)):(console.log("Active timer too old, not restoring"),Ae.remove("activeTimer"))}catch(s){console.error("Failed to parse active timer:",s)}}const e=kt(t);return e.subscribe(n=>{const i=n.timerHistory.serialize();if(Ae.set("logs",i,{expires:31}),n.active){const s={name:n.active.name,start:n.active.start.getTime(),finish:n.active.finish.getTime(),value:n.active.value};Ae.set("activeTimer",JSON.stringify(s),{expires:31}),console.log("Saved active timer:",n.active.name,"start:",n.active.start,"finish:",n.active.finish)}else Ae.remove("activeTimer"),console.log("Removed active timer (app.active is undefined)");console.log("Saved pomApp to cookies")}),e}const we=Ei();function Di(){{const t=Ae.get("darkmode");return t!==void 0?t==="true":window.matchMedia("(prefers-color-scheme: dark)").matches}}const Rt=qn("darkmode",Di(),{storage:"cookies",serialize:t=>t.toString(),deserialize:t=>t==="true"}),Ii=wt(we,t=>t.totalTime()),dt=qn("volume",10,{storage:"cookies",serialize:t=>t.toString(),deserialize:t=>parseInt(t,10)});function yi(t){let e,n,i,s=`<img src="${et}/volume_mute.svg" alt="Mute icon"/>`,r,l,o,u,c=`<img src="${et}/volume_up.svg" alt="Volume max icon"/>`,a,f;return{c(){e=T("label"),n=T("div"),i=T("button"),i.innerHTML=s,r=P(),l=T("input"),o=P(),u=T("button"),u.innerHTML=c,this.h()},l(h){e=b(h,"LABEL",{});var _=E(e);n=b(_,"DIV",{class:!0});var g=E(n);i=b(g,"BUTTON",{class:!0,"data-svelte-h":!0}),re(i)!=="svelte-t9bnpg"&&(i.innerHTML=s),r=R(g),l=b(g,"INPUT",{class:!0,type:!0,min:!0,max:!0}),o=R(g),u=b(g,"BUTTON",{class:!0,"data-svelte-h":!0}),re(u)!=="svelte-yorq7f"&&(u.innerHTML=c),g.forEach(m),_.forEach(m),this.h()},h(){d(i,"class","leftbutton svelte-1vsc329"),d(l,"class","slider bar svelte-1vsc329"),d(l,"type","range"),d(l,"min","0"),d(l,"max","100"),d(u,"class","svelte-1vsc329"),d(n,"class","container svelte-1vsc329")},m(h,_){j(h,e,_),v(e,n),v(n,i),v(n,r),v(n,l),Zt(l,t[0]),v(n,o),v(n,u),a||(f=[G(i,"click",t[2]),G(l,"change",t[5]),G(l,"input",t[5]),G(l,"mouseup",t[1]),G(u,"click",t[3])],a=!0)},p(h,[_]){_&1&&Zt(l,h[0])},i:Q,o:Q,d(h){h&&m(e),a=!1,Ge(f)}}}function Oi(t,e,n){let i;Oe(t,dt,c=>n(4,i=c));let s=i;function r(c){It(dt,i=parseInt(c.target.value,10),i)}function l(){It(dt,i=0,i)}function o(){It(dt,i=100,i)}function u(){s=Yn(this.value),n(0,s),n(4,i)}return t.$$.update=()=>{t.$$.dirty&16&&(console.log("volume",i),ti(i/100),n(0,s=i))},[s,r,l,o,i,u]}class Mi extends me{constructor(e){super(),ve(this,e,Oi,yi,he,{})}}function Ci(t,e,n){const i=st();let{debugFlag:s}=e,{active:r=!0}=e,l=0,o=0;function u(a){console.log("run annoyer",a),clearInterval(l),clearTimeout(o),a&&(l=setInterval(()=>{Ft(),r||clearInterval(l)},jt(s).afterClockIntervalS*1e3),o=setTimeout(()=>{n(0,r=!1),clearInterval(l),c()},jt(s).afterClockTimeoutS*1e3))}function c(){i("off")}return t.$$set=a=>{"debugFlag"in a&&n(1,s=a.debugFlag),"active"in a&&n(0,r=a.active)},t.$$.update=()=>{t.$$.dirty&1&&u(r)},[r,s]}class $i extends me{constructor(e){super(),ve(this,e,Ci,null,he,{debugFlag:1,active:0})}}const fn=et+"/tea.png",Ni=et+"/clock_red.png",Ai=et+"/clock_yellow.png";function ji(t){if(console.log("changeFavicon",t),typeof document>"u"||document===null)return;const e=document.getElementById("favicon");if(e!==null)switch(t){case fe.STOPPED:e.href=fn;break;case fe.RUNNING:e.href=Ni;break;case fe.WAITING_FOR_STOP:e.href=Ai;break;default:e.href=fn}}function Vi(){const{subscribe:t,set:e,update:n}=kt({state:fe.STOPPED,currentTimer:new Me,clockDuration:0});return{subscribe:t,start:(i,s,r)=>{const l=jt(r).timersMultiplier;n(o=>({state:fe.RUNNING,currentTimer:new Me(i,s),clockDuration:i*l}))},alarm:i=>{n(s=>{if(i){const r=Object.assign(Object.create(Object.getPrototypeOf(s.currentTimer)),s.currentTimer,{finish:new Date});return{...s,state:fe.STOPPED,clockDuration:0,currentTimer:r}}else return{...s,state:fe.WAITING_FOR_STOP}})},stop:()=>{n(i=>{const s=Object.assign(Object.create(Object.getPrototypeOf(i.currentTimer)),i.currentTimer,{finish:new Date});return{...i,state:fe.STOPPED,clockDuration:0,currentTimer:s}})},reset:()=>{e({state:fe.STOPPED,currentTimer:new Me,clockDuration:0})}}}const Fe=Vi(),Pi=wt(Fe,t=>t.state),Ri=wt(Fe,t=>t.currentTimer),Li=wt(Fe,t=>t.clockDuration);function Hi(t){let e,n,i;return e=new Mi({}),{c(){te(e.$$.fragment),n=T("br")},l(s){ne(e.$$.fragment,s),n=b(s,"BR",{})},m(s,r){ie(e,s,r),j(s,n,r),i=!0},p:Q,i(s){i||(B(e.$$.fragment,s),i=!0)},o(s){z(e.$$.fragment,s),i=!1},d(s){s&&m(n),se(e,s)}}}function dn(t){let e,n;return e=new Ut({props:{title:"stop and don't save logs",$$slots:{default:[Fi]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment)},l(i){ne(e.$$.fragment,i)},m(i,s){ie(e,i,s),n=!0},p(i,s){const r={};s&65536&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(B(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){se(e,i)}}}function Fi(t){let e,n="cancel",i,s,r,l;return{c(){e=T("button"),e.textContent=n,i=P(),s=T("br"),this.h()},l(o){e=b(o,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),re(e)!=="svelte-1wi9d3u"&&(e.textContent=n),i=R(o),s=b(o,"BR",{}),this.h()},h(){d(e,"id","stopper"),d(e,"class","svelte-1viwsah")},m(o,u){j(o,e,u),j(o,i,u),j(o,s,u),r||(l=G(e,"click",t[8]),r=!0)},p:Q,d(o){o&&(m(e),m(i),m(s)),r=!1,l()}}}function Ui(t){let e,n,i,s,r,l,o;function u(f){t[10](f)}let c={time:t[4]};t[0]!==void 0&&(c.remainedSeconds=t[0]),n=new ci({props:c}),Xe.push(()=>Ht(n,"remainedSeconds",u)),n.$on("alarming",t[6]),n.$on("stop",t[9]),r=new Ut({props:{title:"Volume",$$slots:{default:[Hi]},$$scope:{ctx:t}}});let a=t[2]!==fe.STOPPED&&dn(t);return{c(){e=T("div"),te(n.$$.fragment),s=P(),te(r.$$.fragment),l=P(),a&&a.c(),this.h()},l(f){e=b(f,"DIV",{class:!0});var h=E(e);ne(n.$$.fragment,h),s=R(h),ne(r.$$.fragment,h),l=R(h),a&&a.l(h),h.forEach(m),this.h()},h(){d(e,"class","clock svelte-1viwsah")},m(f,h){j(f,e,h),ie(n,e,null),v(e,s),ie(r,e,null),v(e,l),a&&a.m(e,null),o=!0},p(f,h){const _={};h&16&&(_.time=f[4]),!i&&h&1&&(i=!0,_.remainedSeconds=f[0],Lt(()=>i=!1)),n.$set(_);const g={};h&65536&&(g.$$scope={dirty:h,ctx:f}),r.$set(g),f[2]!==fe.STOPPED?a?(a.p(f,h),h&4&&B(a,1)):(a=dn(f),a.c(),B(a,1),a.m(e,null)):a&&(Be(),z(a,1,1,()=>{a=null}),ze())},i(f){o||(B(n.$$.fragment,f),B(r.$$.fragment,f),B(a),o=!0)},o(f){z(n.$$.fragment,f),z(r.$$.fragment,f),z(a),o=!1},d(f){f&&m(e),se(n),se(r),a&&a.d()}}}function Bi(t){let e,n,i,s,r={$$slots:{default:[Ui]},$$scope:{ctx:t}};return e=new gi({props:r}),t[11](e),e.$on("start",t[5]),e.$on("stop",t[12]),i=new $i({props:{active:t[2]===fe.WAITING_FOR_STOP,debugFlag:t[1]}}),i.$on("off",t[13]),{c(){te(e.$$.fragment),n=P(),te(i.$$.fragment)},l(l){ne(e.$$.fragment,l),n=R(l),ne(i.$$.fragment,l)},m(l,o){ie(e,l,o),j(l,n,o),ie(i,l,o),s=!0},p(l,[o]){const u={};o&65557&&(u.$$scope={dirty:o,ctx:l}),e.$set(u);const c={};o&4&&(c.active=l[2]===fe.WAITING_FOR_STOP),o&2&&(c.debugFlag=l[1]),i.$set(c)},i(l){s||(B(e.$$.fragment,l),B(i.$$.fragment,l),s=!0)},o(l){z(e.$$.fragment,l),z(i.$$.fragment,l),s=!1},d(l){l&&m(n),t[11](null),se(e,l),se(i,l)}}}function zi(t,e,n){let i,s,r;Oe(t,Pi,I=>n(2,i=I)),Oe(t,Ri,I=>n(14,s=I)),Oe(t,Li,I=>n(4,r=I));const l=st();let{debugFlag:o}=e,{remainedSeconds:u}=e,c;function a(I){i===fe.RUNNING&&h(Le.EMIT),Fe.start(I.detail.timer,I.detail.name,o),l("current",s)}function f(){const I=typeof document<"u"&&document.visibilityState==="visible";Fe.alarm(I),I&&(c&&c.clear(),l("timer",s))}function h(I=Le.EMIT){Fe.stop(),c&&c.clear(),I===Le.EMIT&&l("timer",s)}function _(){Fe.reset(),c&&c.clear(),l("cancel")}function g(){i!==fe.STOPPED&&h(Le.EMIT)}Vn(()=>{document.addEventListener("visibilitychange",function(){i===fe.WAITING_FOR_STOP&&document.visibilityState==="visible"&&(console.log("visibility change to visible"),h(Le.EMIT))})});function $(I){u=I,n(0,u)}function A(I){Xe[I?"unshift":"push"](()=>{c=I,n(3,c)})}const C=()=>h(Le.DO_NOT_EMIT),N=()=>h(Le.DO_NOT_EMIT);return t.$$set=I=>{"debugFlag"in I&&n(1,o=I.debugFlag),"remainedSeconds"in I&&n(0,u=I.remainedSeconds)},t.$$.update=()=>{t.$$.dirty&4&&ji(i)},[u,o,i,c,r,a,f,h,_,g,$,A,C,N]}class Gi extends me{constructor(e){super(),ve(this,e,zi,Bi,he,{debugFlag:1,remainedSeconds:0})}}function Wi(t){let e;return{c(){e=q("Active for")},l(n){e=X(n,"Active for")},m(n,i){j(n,e,i)},d(n){n&&m(e)}}}function qi(t){let e;return{c(){e=q("Rest for")},l(n){e=X(n,"Rest for")},m(n,i){j(n,e,i)},d(n){n&&m(e)}}}function Xi(t){let e,n,i,s,r,l,o,u=sn(t[2])+"",c;function a(_,g){return _[1]?qi:Wi}let f=a(t),h=f(t);return{c(){e=T("snap"),n=T("snap"),i=q(t[3]),s=P(),r=T("snap"),h.c(),l=P(),o=T("snap"),c=q(u),this.h()},l(_){e=b(_,"SNAP",{class:!0});var g=E(e);n=b(g,"SNAP",{class:!0});var $=E(n);i=X($,t[3]),$.forEach(m),s=R(g),r=b(g,"SNAP",{});var A=E(r);h.l(A),A.forEach(m),l=R(g),o=b(g,"SNAP",{class:!0});var C=E(o);c=X(C,u),C.forEach(m),g.forEach(m),this.h()},h(){d(n,"class","time work svelte-1shwu0b"),d(o,"class","duration svelte-1shwu0b"),d(e,"class","logline svelte-1shwu0b"),He(e,"topLog",t[0]),He(e,"rest",t[1])},m(_,g){j(_,e,g),v(e,n),v(n,i),v(e,s),v(e,r),h.m(r,null),v(e,l),v(e,o),v(o,c)},p(_,[g]){f!==(f=a(_))&&(h.d(1),h=f(_),h&&(h.c(),h.m(r,null))),g&4&&u!==(u=sn(_[2])+"")&&ee(c,u),g&1&&He(e,"topLog",_[0]),g&2&&He(e,"rest",_[1])},i:Q,o:Q,d(_){_&&m(e),h.d()}}}function Ki(t){let e=t.getHours().toString().padStart(2,"0"),n=t.getMinutes().toString().padStart(2,"0");return`${e}:${n}`}function Ji(t,e,n){let i,s,{start:r}=e,{finish:l}=e,{name:o}=e,{topLog:u=!1}=e,c=Ki(r);return t.$$set=a=>{"start"in a&&n(4,r=a.start),"finish"in a&&n(5,l=a.finish),"name"in a&&n(6,o=a.name),"topLog"in a&&n(0,u=a.topLog)},t.$$.update=()=>{t.$$.dirty&48&&n(2,i=(l.getTime()-r.getTime())/1e3),t.$$.dirty&64&&n(1,s=o===ye.REST)},[u,s,i,c,r,l,o]}class Xn extends me{constructor(e){super(),ve(this,e,Ji,Xi,he,{start:4,finish:5,name:6,topLog:0})}}const zt=kt(null);function Mt(t){zt.set(t)}function ht(){zt.set(null)}function Yi(t){const e=t.slice(),n=e[23].getTime()-e[1].start.getTime();e[25]=n;const i=e[1].finish.getTime()-e[1].start.getTime();e[5]=i;const s=e[25]/e[5]*e[24];e[26]=s;const r=e[24]-e[26];e[27]=r;const l=parseFloat(e[20].left)+e[26];return e[28]=l,e}function Ct(t){const e=t.slice(),n=e[8](e[1]);e[20]=n;const i=e[9](e[1]);e[21]=i;const s=e[10](e[1],e[4]);e[22]=s;const r=e[22]?e[11](e[1],e[4]):null;e[23]=r;const l=parseFloat(e[20].width);return e[24]=l,e}function hn(t,e,n){const i=t.slice();i[29]=e[n];const s=i[8](i[29]);i[20]=s;const r=i[9](i[29]);i[21]=r;const l=i[10](i[29],i[0]);i[22]=l;const o=i[22]?i[11](i[29],i[0]):null;i[23]=o;const u=parseFloat(i[20].width);i[24]=u;const c=!i[21]&&i[24]<.5?"2px":i[20].width;return i[30]=c,i}function Zi(t){const e=t.slice(),n=e[23].getTime()-e[29].start.getTime();e[25]=n;const i=e[29].finish.getTime()-e[29].start.getTime();e[5]=i;const s=e[25]/e[5]*e[24];e[26]=s;const r=e[24]-e[26];e[27]=r;const l=parseFloat(e[20].left)+e[26];return e[28]=l,e}function mn(t,e,n){const i=t.slice();return i[33]=e[n],i}function vn(t){let e;return{c(){e=T("div"),this.h()},l(n){e=b(n,"DIV",{class:!0,style:!0,title:!0}),E(e).forEach(m),this.h()},h(){d(e,"class","future-overlay svelte-1k1xkrk"),L(e,"left",t[6].left),L(e,"width",t[6].width),d(e,"title","Future time")},m(n,i){j(n,e,i)},p(n,i){i[0]&64&&L(e,"left",n[6].left),i[0]&64&&L(e,"width",n[6].width)},d(n){n&&m(e)}}}function _n(t){let e,n,i=t[33].label+"",s,r;return{c(){e=T("div"),n=T("div"),s=q(i),r=P(),this.h()},l(l){e=b(l,"DIV",{class:!0,style:!0});var o=E(e);n=b(o,"DIV",{class:!0});var u=E(n);s=X(u,i),u.forEach(m),r=R(o),o.forEach(m),this.h()},h(){d(n,"class","grid-label svelte-1k1xkrk"),d(e,"class","grid-line svelte-1k1xkrk"),L(e,"left",t[33].position+"%")},m(l,o){j(l,e,o),v(e,n),v(n,s),v(e,r)},p(l,o){o[0]&128&&i!==(i=l[33].label+"")&&ee(s,i),o[0]&128&&L(e,"left",l[33].position+"%")},d(l){l&&m(e)}}}function Qi(t){let e,n,i,s,r;function l(){return t[16](t[29])}return{c(){e=T("div"),this.h()},l(o){e=b(o,"DIV",{class:!0,style:!0,title:!0}),E(e).forEach(m),this.h()},h(){d(e,"class",n="timer-block "+(t[21]?t[22]?"overtime":"work":"rest")+" svelte-1k1xkrk"),L(e,"left",t[20].left),L(e,"width",t[30]),L(e,"min-width",t[21]?"0":"2px"),L(e,"cursor","pointer"),d(e,"title",i=Y(t[29].start)+" - "+Y(t[29].finish)+" ("+gt(t[29])+")"+(t[22]?" âš ï¸ Overtime":""))},m(o,u){j(o,e,u),s||(r=G(e,"click",l),s=!0)},p(o,u){t=o,u[0]&1&&n!==(n="timer-block "+(t[21]?t[22]?"overtime":"work":"rest")+" svelte-1k1xkrk")&&d(e,"class",n),u[0]&1&&L(e,"left",t[20].left),u[0]&1&&L(e,"width",t[30]),u[0]&1&&L(e,"min-width",t[21]?"0":"2px"),u[0]&1&&i!==(i=Y(t[29].start)+" - "+Y(t[29].finish)+" ("+gt(t[29])+")"+(t[22]?" âš ï¸ Overtime":""))&&d(e,"title",i)},d(o){o&&m(e),s=!1,r()}}}function gn(t){let e,n,i,s,r,l,o;function u(){return t[14](t[29])}function c(){return t[15](t[29])}return{c(){e=T("div"),i=P(),s=T("div"),this.h()},l(a){e=b(a,"DIV",{class:!0,style:!0,title:!0}),E(e).forEach(m),i=R(a),s=b(a,"DIV",{class:!0,style:!0,title:!0}),E(s).forEach(m),this.h()},h(){d(e,"class","timer-block work svelte-1k1xkrk"),L(e,"left",t[20].left),L(e,"width",t[26]+"%"),L(e,"cursor","pointer"),d(e,"title",n=Y(t[29].start)+" - "+Y(t[23])+" (Normal)"),d(s,"class","timer-block overtime svelte-1k1xkrk"),L(s,"left",t[28]+"%"),L(s,"width",t[27]+"%"),L(s,"cursor","pointer"),d(s,"title",r=Y(t[23])+" - "+Y(t[29].finish)+" âš ï¸ Overtime")},m(a,f){j(a,e,f),j(a,i,f),j(a,s,f),l||(o=[G(e,"click",u),G(s,"click",c)],l=!0)},p(a,f){t=a,f[0]&1&&L(e,"left",t[20].left),f[0]&1&&L(e,"width",t[26]+"%"),f[0]&1&&n!==(n=Y(t[29].start)+" - "+Y(t[23])+" (Normal)")&&d(e,"title",n),f[0]&1&&L(s,"left",t[28]+"%"),f[0]&1&&L(s,"width",t[27]+"%"),f[0]&1&&r!==(r=Y(t[23])+" - "+Y(t[29].finish)+" âš ï¸ Overtime")&&d(s,"title",r)},d(a){a&&(m(e),m(i),m(s)),l=!1,Ge(o)}}}function pn(t,e){let n,i,s;function r(c,a){return a[0]&1&&(i=null),i==null&&(i=!!(c[21]&&c[23]&&c[23].getTime()>c[29].start.getTime()&&c[23].getTime()<c[29].finish.getTime())),i?gn:Qi}function l(c,a){return a===gn?Zi(c):c}let o=r(e,[-1,-1]),u=o(l(e,o));return{key:t,first:null,c(){n=Te(),u.c(),s=Te(),this.h()},l(c){n=Te(),u.l(c),s=Te(),this.h()},h(){this.first=n},m(c,a){j(c,n,a),u.m(c,a),j(c,s,a)},p(c,a){e=c,o===(o=r(e,a))&&u?u.p(l(e,o),a):(u.d(1),u=o(l(e,o)),u&&(u.c(),u.m(s.parentNode,s)))},d(c){c&&(m(n),m(s)),u.d(c)}}}function kn(t){let e,n;function i(o,u){return u[0]&18&&(e=null),e==null&&(e=!!(o[21]&&o[23]&&o[23].getTime()>o[1].start.getTime()&&o[23].getTime()<o[1].finish.getTime())),e?wn:xi}function s(o,u){return u===wn?Yi(o):o}let r=i(t,[-1,-1]),l=r(s(t,r));return{c(){l.c(),n=Te()},l(o){l.l(o),n=Te()},m(o,u){l.m(o,u),j(o,n,u)},p(o,u){r===(r=i(o,u))&&l?l.p(s(o,r),u):(l.d(1),l=r(s(o,r)),l&&(l.c(),l.m(n.parentNode,n)))},d(o){o&&m(n),l.d(o)}}}function xi(t){let e,n,i;return{c(){e=T("div"),this.h()},l(s){e=b(s,"DIV",{class:!0,style:!0,title:!0}),E(e).forEach(m),this.h()},h(){d(e,"class",n="timer-block active "+(t[21]?t[22]?"overtime":"work":"rest")+" svelte-1k1xkrk"),L(e,"left",t[20].left),L(e,"width",t[20].width),d(e,"title",i="Active: "+Y(t[1].start)+" - now ("+gt(t[1])+")"+(t[22]?" âš ï¸ Overtime":""))},m(s,r){j(s,e,r)},p(s,r){r[0]&18&&n!==(n="timer-block active "+(s[21]?s[22]?"overtime":"work":"rest")+" svelte-1k1xkrk")&&d(e,"class",n),r[0]&2&&L(e,"left",s[20].left),r[0]&2&&L(e,"width",s[20].width),r[0]&18&&i!==(i="Active: "+Y(s[1].start)+" - now ("+gt(s[1])+")"+(s[22]?" âš ï¸ Overtime":""))&&d(e,"title",i)},d(s){s&&m(e)}}}function wn(t){let e,n,i,s,r;return{c(){e=T("div"),i=P(),s=T("div"),this.h()},l(l){e=b(l,"DIV",{class:!0,style:!0,title:!0}),E(e).forEach(m),i=R(l),s=b(l,"DIV",{class:!0,style:!0,title:!0}),E(s).forEach(m),this.h()},h(){d(e,"class","timer-block active work svelte-1k1xkrk"),L(e,"left",t[20].left),L(e,"width",t[26]+"%"),d(e,"title",n="Active: "+Y(t[1].start)+" - "+Y(t[23])+" (Normal)"),d(s,"class","timer-block active overtime svelte-1k1xkrk"),L(s,"left",t[28]+"%"),L(s,"width",t[27]+"%"),d(s,"title",r="Active: "+Y(t[23])+" - now âš ï¸ Overtime")},m(l,o){j(l,e,o),j(l,i,o),j(l,s,o)},p(l,o){o[0]&2&&L(e,"left",l[20].left),o[0]&18&&L(e,"width",l[26]+"%"),o[0]&18&&n!==(n="Active: "+Y(l[1].start)+" - "+Y(l[23])+" (Normal)")&&d(e,"title",n),o[0]&18&&L(s,"left",l[28]+"%"),o[0]&18&&L(s,"width",l[27]+"%"),o[0]&18&&r!==(r="Active: "+Y(l[23])+" - now âš ï¸ Overtime")&&d(s,"title",r)},d(l){l&&(m(e),m(i),m(s))}}}function es(t){let e,n,i='<span class="timeline-title svelte-1k1xkrk">Timeline</span> <div class="legend svelte-1k1xkrk"><span class="legend-item svelte-1k1xkrk"><span class="legend-color work svelte-1k1xkrk"></span> <span>Work</span></span> <span class="legend-item svelte-1k1xkrk" title="Overtime: 2+ min after alarm, or 25+ min for consecutive work"><span class="legend-color overtime svelte-1k1xkrk"></span> <span>Overtime</span></span> <span class="legend-item svelte-1k1xkrk"><span class="legend-color rest svelte-1k1xkrk"></span> <span>Rest</span></span></div>',s,r,l,o=Y(new Date(t[2]))+"",u,c,a,f=Y(new Date(t[3]))+"",h,_,g,$,A=[],C=new Map,N,I=t[6].visible&&vn(t),y=Ie(t[7]),O=[];for(let k=0;k<y.length;k+=1)O[k]=_n(mn(t,y,k));let V=Ie(t[0]);const D=k=>k[29].start;for(let k=0;k<V.length;k+=1){let w=hn(t,V,k),S=D(w);C.set(S,A[k]=pn(S,w))}let p=t[1]&&kn(Ct(t));return{c(){e=T("div"),n=T("div"),n.innerHTML=i,s=P(),r=T("div"),l=T("div"),u=q(o),c=P(),a=T("div"),h=q(f),_=P(),I&&I.c(),g=P();for(let k=0;k<O.length;k+=1)O[k].c();$=P();for(let k=0;k<A.length;k+=1)A[k].c();N=P(),p&&p.c(),this.h()},l(k){e=b(k,"DIV",{class:!0});var w=E(e);n=b(w,"DIV",{class:!0,"data-svelte-h":!0}),re(n)!=="svelte-1sof6z9"&&(n.innerHTML=i),s=R(w),r=b(w,"DIV",{class:!0});var S=E(r);l=b(S,"DIV",{class:!0});var F=E(l);u=X(F,o),F.forEach(m),c=R(S),a=b(S,"DIV",{class:!0});var M=E(a);h=X(M,f),M.forEach(m),_=R(S),I&&I.l(S),g=R(S);for(let U=0;U<O.length;U+=1)O[U].l(S);$=R(S);for(let U=0;U<A.length;U+=1)A[U].l(S);N=R(S),p&&p.l(S),S.forEach(m),w.forEach(m),this.h()},h(){d(n,"class","timeline-header svelte-1k1xkrk"),d(l,"class","time-label start svelte-1k1xkrk"),d(a,"class","time-label end svelte-1k1xkrk"),d(r,"class","timeline-bar svelte-1k1xkrk"),d(e,"class","timeline-container svelte-1k1xkrk")},m(k,w){j(k,e,w),v(e,n),v(e,s),v(e,r),v(r,l),v(l,u),v(r,c),v(r,a),v(a,h),v(r,_),I&&I.m(r,null),v(r,g);for(let S=0;S<O.length;S+=1)O[S]&&O[S].m(r,null);v(r,$);for(let S=0;S<A.length;S+=1)A[S]&&A[S].m(r,null);v(r,N),p&&p.m(r,null)},p(k,w){if(w[0]&4&&o!==(o=Y(new Date(k[2]))+"")&&ee(u,o),w[0]&8&&f!==(f=Y(new Date(k[3]))+"")&&ee(h,f),k[6].visible?I?I.p(k,w):(I=vn(k),I.c(),I.m(r,g)):I&&(I.d(1),I=null),w[0]&128){y=Ie(k[7]);let S;for(S=0;S<y.length;S+=1){const F=mn(k,y,S);O[S]?O[S].p(F,w):(O[S]=_n(F),O[S].c(),O[S].m(r,$))}for(;S<O.length;S+=1)O[S].d(1);O.length=y.length}w[0]&3841&&(V=Ie(k[0]),A=Fn(A,w,D,1,k,V,C,r,Qn,pn,N,hn)),k[1]?p?p.p(Ct(k),w):(p=kn(Ct(k)),p.c(),p.m(r,null)):p&&(p.d(1),p=null)},i:Q,o:Q,d(k){k&&m(e),I&&I.d(),mt(O,k);for(let w=0;w<A.length;w+=1)A[w].d();p&&p.d()}}}function Y(t){return t.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!1})}function gt(t){return`${Math.round(t.durationS()/60)} min`}function ts(t,e,n){let i,s,r,l,o,u,{timers:c=[]}=e,{activeTimer:a=null}=e;const f=40*60*1e3;let h=0,_=0;function g(D){if(s===0)return{left:"0%",width:"0%"};const p=D.start.getTime()-r,k=D.finish.getTime()-D.start.getTime(),w=p/s*100,S=k/s*100;return{left:`${w}%`,width:`${S}%`}}function $(D){return D.name===ye.WORK}function A(D,p){const k=p.findIndex(M=>M.start.getTime()===D.start.getTime());if(k<=0)return!0;const w=p[k-1];return $(w)?(D.start.getTime()-w.finish.getTime())/(1e3*60)>=5:w.durationS()/60>=5}function C(D,p){if(!$(D))return[];const k=[D],w=p.findIndex(S=>S.start.getTime()===D.start.getTime());for(let S=w-1;S>=0;S--){const F=p[S],M=k[0],J=(M.start.getTime()-F.finish.getTime())/(1e3*60);if($(F)&&J<5)k.unshift(F);else{if(!$(F)&&F.durationS()/60<5)continue;if(!$(F)&&A(M,p))break}}return k}function N(D,p){if(!$(D)||!D.value||D.value===0)return!1;const k=2,w=25,S=C(D,p);if(S.length===1){const F=D.durationS()/60,M=D.value;return F>M+k}else{const F=S.reduce((U,J)=>U+(J.value||0),0);return S.reduce((U,J)=>U+J.durationS()/60,0)>F+w}}function I(D,p){if(!N(D,p)||!D.value)return null;const k=2,w=25,S=C(D,p);if(S.length===1){const F=D.start.getTime()+(D.value+k)*60*1e3;return new Date(F)}else{const M=S.reduce((J,x)=>J+(x.value||0),0)+w;let U=0;for(const J of S){const x=J.durationS()/60,Se=U+x;if(Se>M){const Ce=M-U,$e=J.start.getTime()+Ce*60*1e3;return new Date($e)}U=Se}}return null}const y=D=>Mt(D),O=D=>Mt(D),V=D=>Mt(D);return t.$$set=D=>{"timers"in D&&n(0,c=D.timers),"activeTimer"in D&&n(1,a=D.activeTimer)},t.$$.update=()=>{t.$$.dirty[0]&3&&n(4,i=a?[...c,a]:c),t.$$.dirty[0]&16&&n(2,r=i.length===0?Date.now():Math.min(...i.map(D=>D.start.getTime()))),t.$$.dirty[0]&12310&&n(3,l=(()=>{if(i.length===0)return Date.now()+f;const p=Math.max(...i.map(w=>w.finish.getTime()));let k=Math.max(p,r+f);if(k+=h*36e5,a&&k!==_){const w=a.finish.getTime(),S=k-w,F=10*60*1e3;S<F&&(n(12,h++,h),k+=36e5,n(13,_=k),console.log("Extended timeline, total extensions:",h,"new end:",new Date(k)))}return k})()),t.$$.dirty[0]&12&&n(5,s=l-r),t.$$.dirty[0]&44&&n(7,o=(()=>{if(s===0)return[];const D=[],p=new Date(r),k=new Date(l),w=new Date(p);for(w.setMinutes(0,0,0),w.setHours(w.getHours()+1);w.getTime()<=k.getTime();){const F=(w.getTime()-r)/s*100;if(F>=0&&F<=100){const M=F<5||F>95;D.push({position:F,label:M?"":w.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!1})})}w.setHours(w.getHours()+1)}return D})()),t.$$.dirty[0]&44&&n(6,u=(()=>{const D=Date.now();if(l>D){const p=Math.max(r,D),k=p-r,w=l-p,S=k/s*100,F=w/s*100;return{left:`${S}%`,width:`${F}%`,visible:F>0}}return{left:"0%",width:"0%",visible:!1}})())},[c,a,r,l,i,s,u,o,g,$,N,I,h,_,y,O,V]}class ns extends me{constructor(e){super(),ve(this,e,ts,es,he,{timers:0,activeTimer:1},null,[-1,-1])}}function $t(t){const e=t.slice(),n=e[10](e[0],e[7].finish);return e[37]=n,e}function Nt(t){const e=t.slice(),n=e[10](e[1],e[0]);return e[37]=n,e}function At(t){const e=t.slice(),n=e[10](e[8].start,e[1]);return e[37]=n,e}function Tn(t,e,n){const i=t.slice();return i[38]=e[n],i}function bn(t){let e,n,i,s,r="Edit Timer",l,o,u="Ã—",c,a,f,h,_,g="Type:",$,A,C=t[4].name+"",N,I,y,O,V="Duration:",D,p,k,w,S,F,M,U,J,x=de(t[2])+"",Se,Ce,$e,We=de(t[3])+"",Ke,tt,_e,H,K,pe,le,Je="ðŸ’¡ Drag the edges to adjust timer boundaries",qe,W,ke,je="Delete",nt,Ne,bt,Ve,Gt="Cancel",St,Pe,Wt="Save",Et,qt,oe=t[6].length>0&&Sn(t),ae=t[8]&&Dn(At(t)),ce=t[4]&&In(Nt(t)),ue=t[7]&&yn($t(t));return{c(){e=T("div"),n=T("div"),i=T("div"),s=T("h2"),s.textContent=r,l=P(),o=T("button"),o.textContent=u,c=P(),a=T("div"),f=T("div"),h=T("div"),_=T("span"),_.textContent=g,$=P(),A=T("span"),N=q(C),I=P(),y=T("div"),O=T("span"),O.textContent=V,D=P(),p=T("span"),k=q(t[9]),w=q(" min"),S=P(),oe&&oe.c(),F=P(),M=T("div"),U=T("div"),J=T("span"),Se=q(x),Ce=P(),$e=T("span"),Ke=q(We),tt=P(),_e=T("div"),ae&&ae.c(),H=P(),ce&&ce.c(),K=P(),ue&&ue.c(),pe=P(),le=T("div"),le.textContent=Je,qe=P(),W=T("div"),ke=T("button"),ke.textContent=je,nt=P(),Ne=T("div"),bt=P(),Ve=T("button"),Ve.textContent=Gt,St=P(),Pe=T("button"),Pe.textContent=Wt,this.h()},l(Z){e=b(Z,"DIV",{class:!0});var be=E(e);n=b(be,"DIV",{class:!0});var Ye=E(n);i=b(Ye,"DIV",{class:!0});var lt=E(i);s=b(lt,"H2",{class:!0,"data-svelte-h":!0}),re(s)!=="svelte-1ut3txv"&&(s.textContent=r),l=R(lt),o=b(lt,"BUTTON",{class:!0,"data-svelte-h":!0}),re(o)!=="svelte-y9ayml"&&(o.textContent=u),lt.forEach(m),c=R(Ye),a=b(Ye,"DIV",{class:!0});var Ze=E(a);f=b(Ze,"DIV",{class:!0});var rt=E(f);h=b(rt,"DIV",{class:!0});var ot=E(h);_=b(ot,"SPAN",{class:!0,"data-svelte-h":!0}),re(_)!=="svelte-owo3qx"&&(_.textContent=g),$=R(ot),A=b(ot,"SPAN",{class:!0});var Xt=E(A);N=X(Xt,C),Xt.forEach(m),ot.forEach(m),I=R(rt),y=b(rt,"DIV",{class:!0});var at=E(y);O=b(at,"SPAN",{class:!0,"data-svelte-h":!0}),re(O)!=="svelte-2ef875"&&(O.textContent=V),D=R(at),p=b(at,"SPAN",{class:!0});var Dt=E(p);k=X(Dt,t[9]),w=X(Dt," min"),Dt.forEach(m),at.forEach(m),rt.forEach(m),S=R(Ze),oe&&oe.l(Ze),F=R(Ze),M=b(Ze,"DIV",{class:!0});var Qe=E(M);U=b(Qe,"DIV",{class:!0});var ct=E(U);J=b(ct,"SPAN",{});var Kt=E(J);Se=X(Kt,x),Kt.forEach(m),Ce=R(ct),$e=b(ct,"SPAN",{});var Jt=E($e);Ke=X(Jt,We),Jt.forEach(m),ct.forEach(m),tt=R(Qe),_e=b(Qe,"DIV",{class:!0});var xe=E(_e);ae&&ae.l(xe),H=R(xe),ce&&ce.l(xe),K=R(xe),ue&&ue.l(xe),xe.forEach(m),pe=R(Qe),le=b(Qe,"DIV",{class:!0,"data-svelte-h":!0}),re(le)!=="svelte-173xjy6"&&(le.textContent=Je),Qe.forEach(m),Ze.forEach(m),qe=R(Ye),W=b(Ye,"DIV",{class:!0});var Re=E(W);ke=b(Re,"BUTTON",{class:!0,"data-svelte-h":!0}),re(ke)!=="svelte-6r50uh"&&(ke.textContent=je),nt=R(Re),Ne=b(Re,"DIV",{class:!0}),E(Ne).forEach(m),bt=R(Re),Ve=b(Re,"BUTTON",{class:!0,"data-svelte-h":!0}),re(Ve)!=="svelte-1ph2inm"&&(Ve.textContent=Gt),St=R(Re),Pe=b(Re,"BUTTON",{class:!0,"data-svelte-h":!0}),re(Pe)!=="svelte-9t0vpj"&&(Pe.textContent=Wt),Re.forEach(m),Ye.forEach(m),be.forEach(m),this.h()},h(){d(s,"class","svelte-khj96w"),d(o,"class","close-btn svelte-khj96w"),d(i,"class","modal-header svelte-khj96w"),d(_,"class","label svelte-khj96w"),d(A,"class","value svelte-khj96w"),d(h,"class","info svelte-khj96w"),d(O,"class","label svelte-khj96w"),d(p,"class","value svelte-khj96w"),d(y,"class","info svelte-khj96w"),d(f,"class","info-row svelte-khj96w"),d(U,"class","timeline-labels svelte-khj96w"),d(_e,"class","timeline-track svelte-khj96w"),d(le,"class","timeline-hint svelte-khj96w"),d(M,"class","timeline-editor svelte-khj96w"),d(a,"class","modal-body svelte-khj96w"),d(ke,"class","btn btn-delete svelte-khj96w"),d(Ne,"class","spacer svelte-khj96w"),d(Ve,"class","btn btn-cancel svelte-khj96w"),d(Pe,"class","btn btn-save svelte-khj96w"),d(W,"class","modal-footer svelte-khj96w"),d(n,"class","modal svelte-khj96w"),d(e,"class","modal-backdrop svelte-khj96w")},m(Z,be){j(Z,e,be),v(e,n),v(n,i),v(i,s),v(i,l),v(i,o),v(n,c),v(n,a),v(a,f),v(f,h),v(h,_),v(h,$),v(h,A),v(A,N),v(f,I),v(f,y),v(y,O),v(y,D),v(y,p),v(p,k),v(p,w),v(a,S),oe&&oe.m(a,null),v(a,F),v(a,M),v(M,U),v(U,J),v(J,Se),v(U,Ce),v(U,$e),v($e,Ke),v(M,tt),v(M,_e),ae&&ae.m(_e,null),v(_e,H),ce&&ce.m(_e,null),v(_e,K),ue&&ue.m(_e,null),v(M,pe),v(M,le),t[30](M),v(n,qe),v(n,W),v(W,ke),v(W,nt),v(W,Ne),v(W,bt),v(W,Ve),v(W,St),v(W,Pe),Et||(qt=[G(o,"click",t[16]),G(i,"click",Qt(t[27])),G(a,"click",Qt(t[26])),G(ke,"click",t[17]),G(Ve,"click",t[16]),G(Pe,"click",t[15]),G(e,"click",t[16])],Et=!0)},p(Z,be){be[0]&16&&C!==(C=Z[4].name+"")&&ee(N,C),be[0]&512&&ee(k,Z[9]),Z[6].length>0?oe?oe.p(Z,be):(oe=Sn(Z),oe.c(),oe.m(a,F)):oe&&(oe.d(1),oe=null),be[0]&4&&x!==(x=de(Z[2])+"")&&ee(Se,x),be[0]&8&&We!==(We=de(Z[3])+"")&&ee(Ke,We),Z[8]?ae?ae.p(At(Z),be):(ae=Dn(At(Z)),ae.c(),ae.m(_e,H)):ae&&(ae.d(1),ae=null),Z[4]?ce?ce.p(Nt(Z),be):(ce=In(Nt(Z)),ce.c(),ce.m(_e,K)):ce&&(ce.d(1),ce=null),Z[7]?ue?ue.p($t(Z),be):(ue=yn($t(Z)),ue.c(),ue.m(_e,null)):ue&&(ue.d(1),ue=null)},d(Z){Z&&m(e),oe&&oe.d(),ae&&ae.d(),ce&&ce.d(),ue&&ue.d(),t[30](null),Et=!1,Ge(qt)}}}function Sn(t){let e,n=Ie(t[6]),i=[];for(let s=0;s<n.length;s+=1)i[s]=En(Tn(t,n,s));return{c(){e=T("div");for(let s=0;s<i.length;s+=1)i[s].c();this.h()},l(s){e=b(s,"DIV",{class:!0});var r=E(e);for(let l=0;l<i.length;l+=1)i[l].l(r);r.forEach(m),this.h()},h(){d(e,"class","warnings svelte-khj96w")},m(s,r){j(s,e,r);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(e,null)},p(s,r){if(r[0]&64){n=Ie(s[6]);let l;for(l=0;l<n.length;l+=1){const o=Tn(s,n,l);i[l]?i[l].p(o,r):(i[l]=En(o),i[l].c(),i[l].m(e,null))}for(;l<i.length;l+=1)i[l].d(1);i.length=n.length}},d(s){s&&m(e),mt(i,s)}}}function En(t){let e,n,i=t[38]+"",s;return{c(){e=T("div"),n=q("âš ï¸ "),s=q(i),this.h()},l(r){e=b(r,"DIV",{class:!0});var l=E(e);n=X(l,"âš ï¸ "),s=X(l,i),l.forEach(m),this.h()},h(){d(e,"class","warning-item svelte-khj96w")},m(r,l){j(r,e,l),v(e,n),v(e,s)},p(r,l){l[0]&64&&i!==(i=r[38]+"")&&ee(s,i)},d(r){r&&m(e)}}}function Dn(t){let e,n,i=t[8].name+"",s,r,l;return{c(){e=T("div"),n=T("span"),s=q(i),this.h()},l(o){e=b(o,"DIV",{class:!0,style:!0,title:!0});var u=E(e);n=b(u,"SPAN",{class:!0});var c=E(n);s=X(c,i),c.forEach(m),u.forEach(m),this.h()},h(){d(n,"class","timer-label svelte-khj96w"),d(e,"class",r="timer-block prev "+(t[14](t[8])?"work":"rest")+" svelte-khj96w"),L(e,"left",t[37].left),L(e,"width",t[37].width),d(e,"title",l=t[8].name+": "+de(t[8].start)+" - "+de(t[1]))},m(o,u){j(o,e,u),v(e,n),v(n,s)},p(o,u){u[0]&256&&i!==(i=o[8].name+"")&&ee(s,i),u[0]&256&&r!==(r="timer-block prev "+(o[14](o[8])?"work":"rest")+" svelte-khj96w")&&d(e,"class",r),u[0]&258&&L(e,"left",o[37].left),u[0]&258&&L(e,"width",o[37].width),u[0]&258&&l!==(l=o[8].name+": "+de(o[8].start)+" - "+de(o[1]))&&d(e,"title",l)},d(o){o&&m(e)}}}function In(t){let e,n,i,s,r,l=t[4].name+"",o,u,c,a=de(t[1])+"",f,h,_=de(t[0])+"",g,$,A,C,N,I;return{c(){e=T("div"),n=T("div"),i=P(),s=T("div"),r=T("div"),o=q(l),u=P(),c=T("div"),f=q(a),h=q(" - "),g=q(_),$=P(),A=T("div"),this.h()},l(y){e=b(y,"DIV",{class:!0,style:!0});var O=E(e);n=b(O,"DIV",{class:!0,title:!0}),E(n).forEach(m),i=R(O),s=b(O,"DIV",{class:!0});var V=E(s);r=b(V,"DIV",{class:!0});var D=E(r);o=X(D,l),D.forEach(m),u=R(V),c=b(V,"DIV",{class:!0});var p=E(c);f=X(p,a),h=X(p," - "),g=X(p,_),p.forEach(m),V.forEach(m),$=R(O),A=b(O,"DIV",{class:!0,title:!0}),E(A).forEach(m),O.forEach(m),this.h()},h(){d(n,"class","drag-handle left svelte-khj96w"),d(n,"title","Drag to adjust start time"),d(r,"class","timer-label svelte-khj96w"),d(c,"class","timer-times svelte-khj96w"),d(s,"class","timer-content svelte-khj96w"),d(A,"class","drag-handle right svelte-khj96w"),d(A,"title","Drag to adjust end time"),d(e,"class",C="timer-block current "+(t[14](t[4])?"work":"rest")+" svelte-khj96w"),L(e,"left",t[37].left),L(e,"width",t[37].width)},m(y,O){j(y,e,O),v(e,n),v(e,i),v(e,s),v(s,r),v(r,o),v(s,u),v(s,c),v(c,f),v(c,h),v(c,g),v(e,$),v(e,A),N||(I=[G(n,"mousedown",t[28]),G(A,"mousedown",t[29])],N=!0)},p(y,O){O[0]&16&&l!==(l=y[4].name+"")&&ee(o,l),O[0]&2&&a!==(a=de(y[1])+"")&&ee(f,a),O[0]&1&&_!==(_=de(y[0])+"")&&ee(g,_),O[0]&16&&C!==(C="timer-block current "+(y[14](y[4])?"work":"rest")+" svelte-khj96w")&&d(e,"class",C),O[0]&3&&L(e,"left",y[37].left),O[0]&3&&L(e,"width",y[37].width)},d(y){y&&m(e),N=!1,Ge(I)}}}function yn(t){let e,n,i=t[7].name+"",s,r,l;return{c(){e=T("div"),n=T("span"),s=q(i),this.h()},l(o){e=b(o,"DIV",{class:!0,style:!0,title:!0});var u=E(e);n=b(u,"SPAN",{class:!0});var c=E(n);s=X(c,i),c.forEach(m),u.forEach(m),this.h()},h(){d(n,"class","timer-label svelte-khj96w"),d(e,"class",r="timer-block next "+(t[14](t[7])?"work":"rest")+" svelte-khj96w"),L(e,"left",t[37].left),L(e,"width",t[37].width),d(e,"title",l=t[7].name+": "+de(t[0])+" - "+de(t[7].finish))},m(o,u){j(o,e,u),v(e,n),v(n,s)},p(o,u){u[0]&128&&i!==(i=o[7].name+"")&&ee(s,i),u[0]&128&&r!==(r="timer-block next "+(o[14](o[7])?"work":"rest")+" svelte-khj96w")&&d(e,"class",r),u[0]&129&&L(e,"left",o[37].left),u[0]&129&&L(e,"width",o[37].width),u[0]&129&&l!==(l=o[7].name+": "+de(o[0])+" - "+de(o[7].finish))&&d(e,"title",l)},d(o){o&&m(e)}}}function is(t){let e,n,i,s=t[4]&&bn(t);return{c(){s&&s.c(),e=Te()},l(r){s&&s.l(r),e=Te()},m(r,l){s&&s.m(r,l),j(r,e,l),n||(i=[G(window,"keydown",t[18]),G(window,"mousemove",t[12]),G(window,"mouseup",t[13])],n=!0)},p(r,l){r[4]?s?s.p(r,l):(s=bn(r),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},i:Q,o:Q,d(r){r&&m(e),s&&s.d(r),n=!1,Ge(i)}}}function de(t){return t.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!1})}function ss(t,e,n){let i,s,r,l,o,u,c,a,f,h,_,g;Oe(t,zt,H=>n(4,_=H)),Oe(t,we,H=>n(25,g=H));let $=0,A=0,C,N,I=null,y=!1,O=null,V=0,D=400,p;function k(){const H=[];if(s&&(c.getTime()-s.start.getTime())/(1e3*60)<.5&&H.push(`Previous ${s.name} will be removed (< 30 sec)`),r){const K=a;(r.finish.getTime()-K.getTime())/(1e3*60)<.5&&H.push(`Next ${r.name} will be removed (< 30 sec)`)}return H}function w(H,K){const pe=H.getTime()-l.getTime(),le=K.getTime()-H.getTime(),Je=pe/u*100,qe=le/u*100;return{left:`${Je}%`,width:`${qe}%`}}function S(H,K){y=!0,O=H,V=K.clientX,p&&(D=p.offsetWidth),K.preventDefault()}function F(H){if(!y||!O)return;const pe=(H.clientX-V)/D*u,le=Math.round(pe/(60*1e3));O==="start"?n(19,$=le):n(20,A=le)}function M(){y=!1,O=null}function U(H){return H.name===ye.WORK}function J(){if(_){if(c>=a){alert("Start time must be before finish time");return}h.length>0&&!confirm(`Warning:
${h.join(`
`)}

Continue with save?`)||(we.update(H=>{const K=H.timerHistory.list.findIndex(W=>W.start.getTime()===_.start.getTime());if(K===-1)return H;const pe=H.timerHistory.list[K],le=[];if(K>0){const W=H.timerHistory.list[K-1],ke=pe.start.getTime();if(c.getTime()!==ke){const je=new Date(c);if((je.getTime()-W.start.getTime())/1e3<30)le.push(K-1);else{const Ne=new Me(W.value,W.name,W.start,je);H.timerHistory.list[K-1]=Ne}}}if(K<H.timerHistory.list.length-1){const W=H.timerHistory.list[K+1],ke=pe.finish.getTime();if(a.getTime()!==ke){const je=new Date(a);if((W.finish.getTime()-je.getTime())/1e3<30)le.push(K+1);else{const Ne=new Me(W.value,W.name,je,W.finish);H.timerHistory.list[K+1]=Ne}}}le.sort((W,ke)=>ke-W).forEach(W=>{H.timerHistory.list.splice(W,1)});const Je=K-le.filter(W=>W<K).length,qe=new Me(pe.value,pe.name,c,a);return H.timerHistory.list[Je]=qe,H}),ht())}}function x(){ht()}function Se(){_&&confirm("Delete this timer?")&&(we.update(H=>H.remove(_.start)),ht())}function Ce(H){H.key==="Escape"&&ht()}function $e(H){xt.call(this,t,H)}function We(H){xt.call(this,t,H)}const Ke=H=>S("start",H),tt=H=>S("end",H);function _e(H){Xe[H?"unshift":"push"](()=>{p=H,n(5,p)})}return t.$$.update=()=>{t.$$.dirty[0]&33554448&&n(24,i=_?g.timerHistory.list.findIndex(H=>H.start.getTime()===_.start.getTime()):-1),t.$$.dirty[0]&50331648&&n(8,s=i>0?g.timerHistory.list[i-1]:null),t.$$.dirty[0]&50331648&&n(7,r=i>=0&&i<g.timerHistory.list.length-1?g.timerHistory.list[i+1]:null),t.$$.dirty[0]&8388624&&_&&_.start.getTime()!==I&&(n(23,I=_.start.getTime()),n(21,C=_.start instanceof Date?_.start:new Date(_.start)),n(22,N=_.finish instanceof Date?_.finish:new Date(_.finish)),n(19,$=0),n(20,A=0)),t.$$.dirty[0]&2097152&&n(2,l=C?new Date(C.getTime()-30*60*1e3):new Date),t.$$.dirty[0]&4194304&&n(3,o=N?new Date(N.getTime()+30*60*1e3):new Date),t.$$.dirty[0]&12&&(u=o.getTime()-l.getTime()),t.$$.dirty[0]&16&&(_||n(23,I=null)),t.$$.dirty[0]&2621440&&n(1,c=C?new Date(C.getTime()+$*60*1e3):new Date),t.$$.dirty[0]&5242880&&n(0,a=N?new Date(N.getTime()+A*60*1e3):new Date),t.$$.dirty[0]&19&&n(9,f=_?Math.round((a.getTime()-c.getTime())/(1e3*60)):0)},n(6,h=k()),[a,c,l,o,_,p,h,r,s,f,w,S,F,M,U,J,x,Se,Ce,$,A,C,N,I,i,g,$e,We,Ke,tt,_e]}class ls extends me{constructor(e){super(),ve(this,e,ss,is,he,{},null,[-1,-1])}}function rs(t){let e,n,i,s,r,l,o,u,c,a;return{c(){e=T("div"),n=T("button"),i=q(t[1]),r=P(),l=T("button"),o=q(t[2]),this.h()},l(f){e=b(f,"DIV",{class:!0});var h=E(e);n=b(h,"BUTTON",{class:!0});var _=E(n);i=X(_,t[1]),_.forEach(m),r=R(h),l=b(h,"BUTTON",{class:!0});var g=E(l);o=X(g,t[2]),g.forEach(m),h.forEach(m),this.h()},h(){d(n,"class",s="tab "+(t[0]?"":"active")+" svelte-1hgfxul"),d(l,"class",u="tab "+(t[0]?"active":"")+" svelte-1hgfxul"),d(e,"class","tabs-container svelte-1hgfxul")},m(f,h){j(f,e,h),v(e,n),v(n,i),v(e,r),v(e,l),v(l,o),c||(a=[G(n,"click",t[3]),G(l,"click",t[4])],c=!0)},p(f,[h]){h&2&&ee(i,f[1]),h&1&&s!==(s="tab "+(f[0]?"":"active")+" svelte-1hgfxul")&&d(n,"class",s),h&4&&ee(o,f[2]),h&1&&u!==(u="tab "+(f[0]?"active":"")+" svelte-1hgfxul")&&d(l,"class",u)},i:Q,o:Q,d(f){f&&m(e),c=!1,Ge(a)}}}function os(t,e,n){let{checked:i=!1}=e,{leftLabel:s=""}=e,{rightLabel:r=""}=e;const l=()=>n(0,i=!1),o=()=>n(0,i=!0);return t.$$set=u=>{"checked"in u&&n(0,i=u.checked),"leftLabel"in u&&n(1,s=u.leftLabel),"rightLabel"in u&&n(2,r=u.rightLabel)},[i,s,r,l,o]}class as extends me{constructor(e){super(),ve(this,e,os,rs,he,{checked:0,leftLabel:1,rightLabel:2})}}function On(t,e,n){const i=t.slice();return i[7]=e[n],i}function cs(t){let e,n,i=[],s=new Map,r,l=t[0].active&&Mn(t),o=Ie([...t[1]].reverse());const u=c=>c[7].start;for(let c=0;c<o.length;c+=1){let a=On(t,o,c),f=u(a);s.set(f,i[c]=Cn(f,a))}return{c(){e=T("div"),l&&l.c(),n=P();for(let c=0;c<i.length;c+=1)i[c].c();this.h()},l(c){e=b(c,"DIV",{class:!0});var a=E(e);l&&l.l(a),n=R(a);for(let f=0;f<i.length;f+=1)i[f].l(a);a.forEach(m),this.h()},h(){d(e,"class","logs svelte-rjdqds")},m(c,a){j(c,e,a),l&&l.m(e,null),v(e,n);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(e,null);r=!0},p(c,a){c[0].active?l?(l.p(c,a),a&1&&B(l,1)):(l=Mn(c),l.c(),B(l,1),l.m(e,n)):l&&(Be(),z(l,1,1,()=>{l=null}),ze()),a&2&&(o=Ie([...c[1]].reverse()),Be(),i=Fn(i,a,u,1,c,o,s,e,xn,Cn,null,On),ze())},i(c){if(!r){B(l);for(let a=0;a<o.length;a+=1)B(i[a]);r=!0}},o(c){z(l);for(let a=0;a<i.length;a+=1)z(i[a]);r=!1},d(c){c&&m(e),l&&l.d();for(let a=0;a<i.length;a+=1)i[a].d()}}}function us(t){let e,n;return e=new ns({props:{timers:t[1],activeTimer:t[0].active}}),{c(){te(e.$$.fragment)},l(i){ne(e.$$.fragment,i)},m(i,s){ie(e,i,s),n=!0},p(i,s){const r={};s&2&&(r.timers=i[1]),s&1&&(r.activeTimer=i[0].active),e.$set(r)},i(i){n||(B(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){se(e,i)}}}function Mn(t){let e,n,i;const s=[t[0].active,{topLog:!0}];let r={};for(let l=0;l<s.length;l+=1)r=Ue(r,s[l]);return e=new Xn({props:r}),{c(){te(e.$$.fragment),n=T("br")},l(l){ne(e.$$.fragment,l),n=b(l,"BR",{})},m(l,o){ie(e,l,o),j(l,n,o),i=!0},p(l,o){const u=o&1?Tt(s,[Un(l[0].active),s[1]]):{};e.$set(u)},i(l){i||(B(e.$$.fragment,l),i=!0)},o(l){z(e.$$.fragment,l),i=!1},d(l){l&&m(n),se(e,l)}}}function Cn(t,e){let n,i,s,r,l;const o=[e[7],{topLog:!1}];let u={};for(let c=0;c<o.length;c+=1)u=Ue(u,o[c]);return i=new Xn({props:u}),i.$on("remove",e[6]),{key:t,first:null,c(){n=Te(),te(i.$$.fragment),s=P(),r=T("br"),this.h()},l(c){n=Te(),ne(i.$$.fragment,c),s=R(c),r=b(c,"BR",{}),this.h()},h(){this.first=n},m(c,a){j(c,n,a),ie(i,c,a),j(c,s,a),j(c,r,a),l=!0},p(c,a){e=c;const f=a&2?Tt(o,[Un(e[7]),o[1]]):{};i.$set(f)},i(c){l||(B(i.$$.fragment,c),l=!0)},o(c){z(i.$$.fragment,c),l=!1},d(c){c&&(m(n),m(s),m(r)),se(i,c)}}}function fs(t){let e,n,i,s,r="Clear logs",l,o,u="Active time: ",c,a=ln(t[3])+"",f,h,_,g,$,A,C,N,I,y,O,V,D;e=new ls({});function p(M){t[5](M)}let k={leftLabel:"Logs",rightLabel:"Graph"};t[2]!==void 0&&(k.checked=t[2]),$=new as({props:k}),Xe.push(()=>Ht($,"checked",p));const w=[us,cs],S=[];function F(M,U){return M[2]?0:1}return I=F(t),y=S[I]=w[I](t),{c(){te(e.$$.fragment),n=P(),i=T("div"),s=T("button"),s.textContent=r,l=P(),o=T("span"),o.textContent=u,c=T("span"),f=q(a),h=P(),_=T("div"),g=T("div"),te($.$$.fragment),C=P(),N=T("div"),y.c(),this.h()},l(M){ne(e.$$.fragment,M),n=R(M),i=b(M,"DIV",{class:!0});var U=E(i);s=b(U,"BUTTON",{class:!0,"data-svelte-h":!0}),re(s)!=="svelte-1renoko"&&(s.textContent=r),l=R(U),o=b(U,"SPAN",{class:!0,"data-svelte-h":!0}),re(o)!=="svelte-18pz33x"&&(o.textContent=u),c=b(U,"SPAN",{class:!0});var J=E(c);f=X(J,a),J.forEach(m),U.forEach(m),h=R(M),_=b(M,"DIV",{class:!0});var x=E(_);g=b(x,"DIV",{class:!0});var Se=E(g);ne($.$$.fragment,Se),Se.forEach(m),C=R(x),N=b(x,"DIV",{class:!0});var Ce=E(N);y.l(Ce),Ce.forEach(m),x.forEach(m),this.h()},h(){d(s,"class","clear svelte-rjdqds"),d(o,"class","svelte-rjdqds"),d(c,"class","svelte-rjdqds"),d(i,"class","header svelte-rjdqds"),d(g,"class","tabs-header svelte-rjdqds"),d(N,"class","content-wrapper svelte-rjdqds"),d(_,"class","content-section svelte-rjdqds")},m(M,U){ie(e,M,U),j(M,n,U),j(M,i,U),v(i,s),v(i,l),v(i,o),v(i,c),v(c,f),j(M,h,U),j(M,_,U),v(_,g),ie($,g,null),v(_,C),v(_,N),S[I].m(N,null),O=!0,V||(D=G(s,"click",t[4]),V=!0)},p(M,[U]){(!O||U&8)&&a!==(a=ln(M[3])+"")&&ee(f,a);const J={};!A&&U&4&&(A=!0,J.checked=M[2],Lt(()=>A=!1)),$.$set(J);let x=I;I=F(M),I===x?S[I].p(M,U):(Be(),z(S[x],1,1,()=>{S[x]=null}),ze(),y=S[I],y?y.p(M,U):(y=S[I]=w[I](M),y.c()),B(y,1),y.m(N,null))},i(M){O||(B(e.$$.fragment,M),B($.$$.fragment,M),B(y),O=!0)},o(M){z(e.$$.fragment,M),z($.$$.fragment,M),z(y),O=!1},d(M){M&&(m(n),m(i),m(h),m(_)),se(e,M),se($),S[I].d(),V=!1,D()}}}function ds(t,e,n){let i,s;Oe(t,we,a=>n(0,i=a)),Oe(t,Ii,a=>n(3,s=a));var r=[];let l=!0;const o=()=>we.update(a=>a.clearLogs());function u(a){l=a,n(2,l)}const c=a=>we.update(f=>f.remove(a.detail));return t.$$.update=()=>{var a;t.$$.dirty&1&&n(1,r=((a=i==null?void 0:i.timerHistory)==null?void 0:a.list)||[])},[i,r,l,s,o,u,c]}class hs extends me{constructor(e){super(),ve(this,e,ds,fs,he,{})}}function ms(t){const e=t-1;return e*e*e+1}function pt(t,{delay:e=0,duration:n=400,easing:i=ms,x:s=0,y:r=0,opacity:l=0}={}){const o=getComputedStyle(t),u=+o.opacity,c=o.transform==="none"?"":o.transform,a=u*(1-l),[f,h]=en(s),[_,g]=en(r);return{delay:e,duration:n,easing:i,css:($,A)=>`
			transform: ${c} translate(${(1-$)*f}${h}, ${(1-$)*_}${g});
			opacity: ${u-a*A}`}}function vs(t){let e,n,i,s,r,l,o,u,c,a,f=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 24 24"},{fill:"none"},{stroke:"currentColor"},{"stroke-width":"2"},{"stroke-linecap":"round"},{"stroke-linejoin":"round"},t[0]],h={};for(let _=0;_<f.length;_+=1)h=Ue(h,f[_]);return{c(){e=Ee("svg"),n=Ee("circle"),i=Ee("line"),s=Ee("line"),r=Ee("line"),l=Ee("line"),o=Ee("line"),u=Ee("line"),c=Ee("line"),a=Ee("line"),this.h()},l(_){e=De(_,"svg",{xmlns:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0});var g=E(e);n=De(g,"circle",{cx:!0,cy:!0,r:!0}),E(n).forEach(m),i=De(g,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),E(i).forEach(m),s=De(g,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),E(s).forEach(m),r=De(g,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),E(r).forEach(m),l=De(g,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),E(l).forEach(m),o=De(g,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),E(o).forEach(m),u=De(g,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),E(u).forEach(m),c=De(g,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),E(c).forEach(m),a=De(g,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),E(a).forEach(m),g.forEach(m),this.h()},h(){d(n,"cx","12"),d(n,"cy","12"),d(n,"r","5"),d(i,"x1","12"),d(i,"y1","1"),d(i,"x2","12"),d(i,"y2","3"),d(s,"x1","12"),d(s,"y1","21"),d(s,"x2","12"),d(s,"y2","23"),d(r,"x1","4.22"),d(r,"y1","4.22"),d(r,"x2","5.64"),d(r,"y2","5.64"),d(l,"x1","18.36"),d(l,"y1","18.36"),d(l,"x2","19.78"),d(l,"y2","19.78"),d(o,"x1","1"),d(o,"y1","12"),d(o,"x2","3"),d(o,"y2","12"),d(u,"x1","21"),d(u,"y1","12"),d(u,"x2","23"),d(u,"y2","12"),d(c,"x1","4.22"),d(c,"y1","19.78"),d(c,"x2","5.64"),d(c,"y2","18.36"),d(a,"x1","18.36"),d(a,"y1","5.64"),d(a,"x2","19.78"),d(a,"y2","4.22"),vt(e,h)},m(_,g){j(_,e,g),v(e,n),v(e,i),v(e,s),v(e,r),v(e,l),v(e,o),v(e,u),v(e,c),v(e,a)},p(_,[g]){vt(e,h=Tt(f,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 24 24"},{fill:"none"},{stroke:"currentColor"},{"stroke-width":"2"},{"stroke-linecap":"round"},{"stroke-linejoin":"round"},g&1&&_[0]]))},i:Q,o:Q,d(_){_&&m(e)}}}function _s(t,e,n){const i=[];let s=_t(e,i);return t.$$set=r=>{e=Ue(Ue({},e),Pn(r)),n(0,s=_t(e,i))},[s]}class gs extends me{constructor(e){super(),ve(this,e,_s,vs,he,{})}}function ps(t){let e,n,i=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 24 24"},{fill:"none"},{stroke:"currentColor"},{"stroke-width":"2"},{"stroke-linecap":"round"},{"stroke-linejoin":"round"},t[0]],s={};for(let r=0;r<i.length;r+=1)s=Ue(s,i[r]);return{c(){e=Ee("svg"),n=Ee("path"),this.h()},l(r){e=De(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0});var l=E(e);n=De(l,"path",{d:!0}),E(n).forEach(m),l.forEach(m),this.h()},h(){d(n,"d","M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"),vt(e,s)},m(r,l){j(r,e,l),v(e,n)},p(r,[l]){vt(e,s=Tt(i,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 24 24"},{fill:"none"},{stroke:"currentColor"},{"stroke-width":"2"},{"stroke-linecap":"round"},{"stroke-linejoin":"round"},l&1&&r[0]]))},i:Q,o:Q,d(r){r&&m(e)}}}function ks(t,e,n){const i=[];let s=_t(e,i);return t.$$set=r=>{e=Ue(Ue({},e),Pn(r)),n(0,s=_t(e,i))},[s]}class ws extends me{constructor(e){super(),ve(this,e,ks,ps,he,{})}}function Ts(t){let e,n,i,s,r;return n=new gs({}),{c(){e=T("div"),te(n.$$.fragment),this.h()},l(l){e=b(l,"DIV",{class:!0});var o=E(e);ne(n.$$.fragment,o),o.forEach(m),this.h()},h(){d(e,"class","icon sun svelte-1k63739")},m(l,o){j(l,e,o),ie(n,e,null),r=!0},i(l){r||(B(n.$$.fragment,l),l&&Rn(()=>{r&&(s&&s.end(1),i=Ln(e,pt,{y:20,duration:400}),i.start())}),r=!0)},o(l){z(n.$$.fragment,l),i&&i.invalidate(),l&&(s=Hn(e,pt,{y:-20,duration:400})),r=!1},d(l){l&&m(e),se(n),l&&s&&s.end()}}}function bs(t){let e,n,i,s,r;return n=new ws({}),{c(){e=T("div"),te(n.$$.fragment),this.h()},l(l){e=b(l,"DIV",{class:!0});var o=E(e);ne(n.$$.fragment,o),o.forEach(m),this.h()},h(){d(e,"class","icon moon svelte-1k63739")},m(l,o){j(l,e,o),ie(n,e,null),r=!0},i(l){r||(B(n.$$.fragment,l),l&&Rn(()=>{r&&(s&&s.end(1),i=Ln(e,pt,{y:20,duration:400}),i.start())}),r=!0)},o(l){z(n.$$.fragment,l),i&&i.invalidate(),l&&(s=Hn(e,pt,{y:-20,duration:400})),r=!1},d(l){l&&m(e),se(n),l&&s&&s.end()}}}function Ss(t){let e,n,i,s,r,l,o,u;const c=[bs,Ts],a=[];function f(h,_){return h[0]?0:1}return i=f(t),s=a[i]=c[i](t),{c(){e=T("button"),n=T("div"),s.c(),this.h()},l(h){e=b(h,"BUTTON",{class:!0,"aria-label":!0,title:!0});var _=E(e);n=b(_,"DIV",{class:!0});var g=E(n);s.l(g),g.forEach(m),_.forEach(m),this.h()},h(){d(n,"class","icon-container svelte-1k63739"),d(e,"class","theme-toggle svelte-1k63739"),d(e,"aria-label","Toggle dark mode"),d(e,"title",r=t[0]?"Switch to light mode":"Switch to dark mode")},m(h,_){j(h,e,_),v(e,n),a[i].m(n,null),l=!0,o||(u=G(e,"click",t[1]),o=!0)},p(h,[_]){let g=i;i=f(h),i!==g&&(Be(),z(a[g],1,1,()=>{a[g]=null}),ze(),s=a[i],s||(s=a[i]=c[i](h),s.c()),B(s,1),s.m(n,null)),(!l||_&1&&r!==(r=h[0]?"Switch to light mode":"Switch to dark mode"))&&d(e,"title",r)},i(h){l||(B(s),l=!0)},o(h){z(s),l=!1},d(h){h&&m(e),a[i].d(),o=!1,u()}}}function Es(t,e,n){let i;Oe(t,Rt,r=>n(0,i=r));function s(){Rt.update(r=>!r)}return[i,s]}class Ds extends me{constructor(e){super(),ve(this,e,Es,Ss,he,{})}}function Is(t){let e,n,i,s,r,l="Let's Pomodoro!",o,u,c,a,f,h,_,g,$;u=new Ds({});function A(N){t[9](N)}let C={debugFlag:t[1]};return t[0]!==void 0&&(C.remainedSeconds=t[0]),a=new Gi({props:C}),Xe.push(()=>Ht(a,"remainedSeconds",A)),a.$on("timer",t[4]),a.$on("current",t[5]),a.$on("cancel",t[6]),g=new hs({}),{c(){e=T("main"),n=T("div"),i=T("div"),s=T("div"),r=T("h1"),r.textContent=l,o=P(),te(u.$$.fragment),c=P(),te(a.$$.fragment),h=P(),_=T("div"),te(g.$$.fragment),this.h()},l(N){e=b(N,"MAIN",{class:!0});var I=E(e);n=b(I,"DIV",{class:!0});var y=E(n);i=b(y,"DIV",{class:!0});var O=E(i);s=b(O,"DIV",{class:!0});var V=E(s);r=b(V,"H1",{class:!0,"data-svelte-h":!0}),re(r)!=="svelte-cxq7y3"&&(r.textContent=l),o=R(V),ne(u.$$.fragment,V),V.forEach(m),c=R(O),ne(a.$$.fragment,O),O.forEach(m),h=R(y),_=b(y,"DIV",{class:!0});var D=E(_);ne(g.$$.fragment,D),D.forEach(m),y.forEach(m),I.forEach(m),this.h()},h(){d(r,"class","logo svelte-1qc7uu9"),d(s,"class","header-row svelte-1qc7uu9"),d(i,"class","pomodoro svelte-1qc7uu9"),d(_,"class","logs svelte-1qc7uu9"),d(n,"class","container svelte-1qc7uu9"),d(e,"class","svelte-1qc7uu9"),He(e,"dark",t[3])},m(N,I){j(N,e,I),v(e,n),v(n,i),v(i,s),v(s,r),v(s,o),ie(u,s,null),v(i,c),ie(a,i,null),v(n,h),v(n,_),ie(g,_,null),$=!0},p(N,I){const y={};I&2&&(y.debugFlag=N[1]),!f&&I&1&&(f=!0,y.remainedSeconds=N[0],Lt(()=>f=!1)),a.$set(y),(!$||I&8)&&He(e,"dark",N[3])},i(N){$||(B(u.$$.fragment,N),B(a.$$.fragment,N),B(g.$$.fragment,N),$=!0)},o(N){z(u.$$.fragment,N),z(a.$$.fragment,N),z(g.$$.fragment,N),$=!1},d(N){N&&m(e),se(u),se(a),se(g)}}}function ys(t){let e;return{c(){e=T("main"),this.h()},l(n){e=b(n,"MAIN",{style:!0,class:!0}),E(e).forEach(m),this.h()},h(){L(e,"background-color","gray"),L(e,"height","90 vh"),d(e,"class","svelte-1qc7uu9")},m(n,i){j(n,e,i)},p:Q,i:Q,o:Q,d(n){n&&m(e)}}}function Os(t){let e,n,i,s,r;const l=[ys,Is],o=[];function u(c,a){return c[2]?0:1}return e=u(t),n=o[e]=l[e](t),{c(){n.c(),i=P(),s=Te()},l(c){n.l(c),i=R(c),s=Te()},m(c,a){o[e].m(c,a),j(c,i,a),j(c,s,a),r=!0},p(c,[a]){let f=e;e=u(c),e===f?o[e].p(c,a):(Be(),z(o[f],1,1,()=>{o[f]=null}),ze(),n=o[e],n?n.p(c,a):(n=o[e]=l[e](c),n.c()),B(n,1),n.m(i.parentNode,i))},i(c){r||(B(n),r=!0)},o(c){z(n),r=!1},d(c){c&&(m(i),m(s)),o[e].d(c)}}}function Ms(t,e,n){let i,s;Oe(t,Rt,g=>n(3,i=g)),Oe(t,we,g=>n(8,s=g));let r=!1,l,o=!0,u;Zn(()=>{u&&clearInterval(u)});function c(g){we.update($=>$.addTimer(g.detail))}function a(g){we.update($=>$.setActive(g.detail))}function f(){we.update(g=>g.resetActive())}Vn(()=>{if(console.log("get darkmode:",i),s!=null&&s.active){const $=(new Date().getTime()-s.active.start.getTime())/1e3,A=s.active.value*60,C=Math.max(0,A-$);if(console.log("Auto-resuming timer:",{elapsed:$,planned:A,remaining:C,timerType:s.active.name}),C>0){const N=C/60;Fe.start(N,s.active.name,r),console.log("Started timer with",N,"minutes remaining")}else we.update(N=>N.resetActive()),console.log("Timer expired, cleared active timer")}n(2,o=!1)});function h(g){l=g,n(0,l)}function _(){r=this.checked,n(1,r)}return t.$$.update=()=>{t.$$.dirty&257&&s&&l!==void 0&&we.update(g=>(g.updateActiveTimer(),g)),t.$$.dirty&384&&(s!=null&&s.active?u||(console.log("Starting active timer interval"),n(7,u=setInterval(()=>{we.update(g=>(g.active&&(g.active.finish=new Date),g))},1e3))):u&&(console.log("Clearing active timer interval"),clearInterval(u),n(7,u=void 0)))},[l,r,o,i,c,a,f,u,s,h,_]}class js extends me{constructor(e){super(),ve(this,e,Ms,Os,he,{})}}export{js as component};
