var Zn=Object.defineProperty;var Qn=(n,e,t)=>e in n?Zn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Se=(n,e,t)=>Qn(n,typeof e!="symbol"?e+"":e,t);import{r as $e,s as be,c as jn,e as b,b as $,v as pe,d as w,f as D,i as m,j as R,y as d,k as P,T as K,u as Pn,g as $n,a as Rn,t as Z,h as Q,z as F,l as h,m as re,U as it,V as Qt,W as Pe,n as le,X as se,Y as _t,Z as gt,_ as Ht,A as We,o as Ae,$ as Ot,x as Ln,a0 as Ut,a1 as xt,a2 as en,a3 as qe,a4 as tn,a5 as Oe,a6 as Me,a7 as pt,a8 as kt,a9 as Hn,F as Un,aa as xn}from"../chunks/scheduler.yzaWflf5.js";import{a as X,t as G,S as we,i as Te,b as ae,d as ce,m as ue,e as fe,g as Ke,c as Xe,f as Bt,h as Bn,j as Fn}from"../chunks/index.DLd42UDf.js";import{b as nt,w as Tt,d as St}from"../chunks/paths.-oqN4Ny9.js";function Ne(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function ei(n,e){n.d(1),e.delete(n.key)}function ti(n,e){X(n,1,1,()=>{e.delete(n.key)})}function zn(n,e,t,i,s,r,l,o,c,a,u,f){let v=n.length,_=r.length,p=v;const E={};for(;p--;)E[n[p].key]=p;const I=[],A=new Map,N=new Map,k=[];for(p=_;p--;){const T=f(s,r,p),C=t(T);let S=l.get(C);S?k.push(()=>S.p(T,e)):(S=a(C,T),S.c()),A.set(C,I[p]=S),C in E&&N.set(C,Math.abs(p-E[C]))}const O=new Set,y=new Set;function W(T){G(T,1),T.m(o,u),l.set(T.key,T),u=T.first,_--}for(;v&&_;){const T=I[_-1],C=n[v-1],S=T.key,M=C.key;T===C?(u=T.first,v--,_--):A.has(M)?!l.has(S)||O.has(S)?W(T):y.has(M)?v--:N.get(S)>N.get(M)?(y.add(S),W(T)):(O.add(M),v--):(c(C,l),v--)}for(;v--;){const T=n[v];A.has(T.key)||c(T,l)}for(;_;)W(I[_-1]);return $e(k),I}function Dt(n,e){const t={},i={},s={$$scope:1};let r=n.length;for(;r--;){const l=n[r],o=e[r];if(o){for(const c in l)c in o||(i[c]=1);for(const c in o)s[c]||(t[c]=o[c],s[c]=1);n[r]=o}else for(const c in l)s[c]=1}for(const l in i)l in t||(t[l]=void 0);return t}function Gn(n){return typeof n=="object"&&n!==null?n:{}}const ni=nt+"/ring2.wav";let Wn=function(){},lt,Mt,qn=.5,ft;if(typeof window<"u"){let n=window.AudioContext||window.webkitAudioContext;lt=new n,fetch(ni).then(e=>e.arrayBuffer()).then(e=>lt.decodeAudioData(e)).then(e=>{Mt=e}).catch(e=>console.error("Error loading sound file:",e)),Wn=function(){if(!Mt)return;ft=lt.createBufferSource(),ft.buffer=Mt;let e=lt.createGain();e.gain.value=qn,ft.connect(e),e.connect(lt.destination),ft.start(0)}}function Ft(){Wn()}function ii(n,e){qn=n,Ft()}function nn(n){let e,t;return{c(){e=b("div"),t=Z(n[0]),this.h()},l(i){e=w(i,"DIV",{style:!0,class:!0});var s=D(e);t=Q(s,n[0]),s.forEach(m),this.h()},h(){F(e,"top",n[3]+"px"),F(e,"left",n[2]+"px"),d(e,"class","tooltip svelte-43gogz")},m(i,s){P(i,e,s),h(e,t)},p(i,s){s&1&&re(t,i[0]),s&8&&F(e,"top",i[3]+"px"),s&4&&F(e,"left",i[2]+"px")},d(i){i&&m(e)}}}function si(n){let e,t,i,s,r,l;const o=n[8].default,c=jn(o,n,n[7],null);let a=n[1]&&nn(n);return{c(){e=b("div"),c&&c.c(),t=$(),a&&a.c(),i=pe(),this.h()},l(u){e=w(u,"DIV",{"aria-hidden":!0});var f=D(e);c&&c.l(f),f.forEach(m),t=R(u),a&&a.l(u),i=pe(),this.h()},h(){d(e,"aria-hidden","true")},m(u,f){P(u,e,f),c&&c.m(e,null),P(u,t,f),a&&a.m(u,f),P(u,i,f),s=!0,r||(l=[K(e,"mouseover",n[4]),K(e,"mouseleave",n[6]),K(e,"mousemove",n[5]),K(e,"focus",li)],r=!0)},p(u,[f]){c&&c.p&&(!s||f&128)&&Pn(c,o,u,u[7],s?Rn(o,u[7],f,null):$n(u[7]),null),u[1]?a?a.p(u,f):(a=nn(u),a.c(),a.m(i.parentNode,i)):a&&(a.d(1),a=null)},i(u){s||(G(c,u),s=!0)},o(u){X(c,u),s=!1},d(u){u&&(m(e),m(t),m(i)),c&&c.d(u),a&&a.d(u),r=!1,$e(l)}}}const li=function(){};function ri(n,e,t){let{$$slots:i={},$$scope:s}=e,{title:r=""}=e,l=!1,o,c;function a(v){t(1,l=!0),t(2,o=v.pageX+10),t(3,c=v.pageY+10)}function u(v){t(2,o=v.pageX+10),t(3,c=v.pageY+10)}function f(){t(1,l=!1)}return n.$$set=v=>{"title"in v&&t(0,r=v.title),"$$scope"in v&&t(7,s=v.$$scope)},[r,l,o,c,a,u,f,s,i]}class zt extends we{constructor(e){super(),Te(this,e,ri,si,be,{title:0})}}function sn(n){let e=Math.floor(n/60),t=Math.floor(n%60).toString().padStart(2,"0"),i=e.toString().padStart(2,"0");if(e>60){let s=Math.floor(e/60);return i=Math.floor(e%60).toString().padStart(2,"0"),`${s}:${i}:${t}`}return`${i}:${t}`}function ln(n){let e=Math.floor(n/60),t=Math.floor(n%60);if(e>60){let i=Math.floor(e/60);return e=Math.floor(e%60),`${i}h ${e} min`}else return e>0?`${e} min`:`${t} sec`}function rn(n){let e=Math.floor(n/3600);e>0&&(n=n-e*3600);let t=Math.floor(n/60),i=Math.floor(n%60);return e==1?`${e} hour ${t} min`:e>0?`${e} hours ${t} min`:t>=5?`${t} min`:t>1?`${t} min ${i} sec`:`${i} sec`}class oi{constructor(e,t,i,s=300){Se(this,"intervalId",0);Se(this,"duration",0);Se(this,"start",0);Se(this,"remain",0);Se(this,"onSec",e=>{});Se(this,"onAlarm",()=>{});this.duration=e,this.remain=e-1,e>0&&(this.onSec=t,this.onAlarm=i,this.start=Date.now(),this.intervalId=setInterval(()=>{const r=Math.ceil((Date.now()-this.start)/1e3);let l=this.duration-r;l!=this.remain&&(t(this.remain),this.remain=l,this.remain<=0&&(this.onAlarm(),clearInterval(this.intervalId)))},s))}stop(){clearInterval(this.intervalId)}}function ai(n){let e,t=sn(n[0])+"",i,s,r;return{c(){e=b("button"),i=Z(t),this.h()},l(l){e=w(l,"BUTTON",{id:!0,class:!0});var o=D(e);i=Q(o,t),o.forEach(m),this.h()},h(){d(e,"id","watch"),d(e,"class","svelte-1kj7nhv")},m(l,o){P(l,e,o),h(e,i),s||(r=K(e,"click",n[1]),s=!0)},p(l,o){o&1&&t!==(t=sn(l[0])+"")&&re(i,t)},d(l){l&&m(e),s=!1,r()}}}function ci(n){let e,t;return e=new zt({props:{title:"stop timer",$$slots:{default:[ai]},$$scope:{ctx:n}}}),{c(){ae(e.$$.fragment)},l(i){ce(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,[s]){const r={};s&257&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(G(e.$$.fragment,i),t=!0)},o(i){X(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function ui(n,e,t){let{time:i=0}=e,{remainedSeconds:s=0}=e;var r;const l=it();function o(f){r!=null&&r.stop(),r=new oi(f,c,a),t(0,s=f)}function c(f){t(0,s=f)}function a(){Ft(),l("alarming")}function u(){l("stop")}return n.$$set=f=>{"time"in f&&t(2,i=f.time),"remainedSeconds"in f&&t(0,s=f.remainedSeconds)},n.$$.update=()=>{n.$$.dirty&4&&o(i)},[s,u,i]}class fi extends we{constructor(e){super(),Te(this,e,ui,ci,be,{time:2,remainedSeconds:0})}}function di(n){let e,t,i,s,r,l;return{c(){e=b("button"),t=Z(n[1]),i=Z(" min"),this.h()},l(o){e=w(o,"BUTTON",{class:!0});var c=D(e);t=Q(c,n[1]),i=Q(c," min"),c.forEach(m),this.h()},h(){d(e,"class",s=Qt(n[2])+" svelte-8w7xxt"),Pe(e,"pressed",n[0])},m(o,c){P(o,e,c),h(e,t),h(e,i),r||(l=K(e,"click",n[5]),r=!0)},p(o,[c]){c&2&&re(t,o[1]),c&4&&s!==(s=Qt(o[2])+" svelte-8w7xxt")&&d(e,"class",s),c&5&&Pe(e,"pressed",o[0])},i:le,o:le,d(o){o&&m(e),r=!1,l()}}}function hi(n,e,t){const i=it();let{value:s}=e,{name:r}=e,{pressed:l=!1}=e;function o(u,f){i("start",{name:u,val:f}),t(0,l=!0)}function c(){t(0,l=!1)}const a=function(){o(r,s)};return n.$$set=u=>{"value"in u&&t(1,s=u.value),"name"in u&&t(2,r=u.name),"pressed"in u&&t(0,l=u.pressed)},[l,s,r,o,c,a]}class Kn extends we{constructor(e){super(),Te(this,e,hi,di,be,{value:1,name:2,pressed:0,reset:4})}get reset(){return this.$$.ctx[4]}}const Ve={WORK:"work",REST:"rest"},mi={afterClockIntervalS:3,afterClockTimeoutS:10,timersMultiplier:1},vi={afterClockIntervalS:10,afterClockTimeoutS:60*15,timersMultiplier:1*60};function tt(n){return n?mi:vi}function on(n,e,t){const i=n.slice();return i[24]=e[t],i[25]=e,i[26]=t,i}const _i=n=>({}),an=n=>({class:"item svelte-4b4xh4"});function cn(n,e,t){const i=n.slice();return i[24]=e[t],i[27]=e,i[26]=t,i}function un(n){let e,t=n[26],i,s,r;const l=()=>n[16](e,t),o=()=>n[16](null,t);let c={value:n[24],name:Ve.WORK};return e=new Kn({props:c}),l(),e.$on("start",n[7]),{c(){ae(e.$$.fragment),i=$(),s=b("br")},l(a){ce(e.$$.fragment,a),i=R(a),s=w(a,"BR",{})},m(a,u){ue(e,a,u),P(a,i,u),P(a,s,u),r=!0},p(a,u){t!==a[26]&&(o(),t=a[26],l());const f={};u&4&&(f.value=a[24]),e.$set(f)},i(a){r||(G(e.$$.fragment,a),r=!0)},o(a){X(e.$$.fragment,a),r=!1},d(a){a&&(m(i),m(s)),o(),fe(e,a)}}}function fn(n){let e,t=n[26],i,s,r;const l=()=>n[18](e,t),o=()=>n[18](null,t);let c={value:n[24],name:Ve.REST};return e=new Kn({props:c}),l(),e.$on("start",n[7]),{c(){ae(e.$$.fragment),i=$(),s=b("br")},l(a){ce(e.$$.fragment,a),i=R(a),s=w(a,"BR",{})},m(a,u){ue(e,a,u),P(a,i,u),P(a,s,u),r=!0},p(a,u){t!==a[26]&&(o(),t=a[26],l());const f={};u&8&&(f.value=a[24]),e.$set(f)},i(a){r||(G(e.$$.fragment,a),r=!0)},o(a){X(e.$$.fragment,a),r=!1},d(a){a&&(m(i),m(s)),o(),fe(e,a)}}}function dn(n){let e,t,i,s="–°–≤–æ—ë –≤—Ä–µ–º—è (–º–∏–Ω)",r,l,o,c,a,u,f,v,_,p="–û—Ç–º–µ–Ω–∞",E,I;return{c(){e=b("div"),t=b("div"),i=b("p"),i.textContent=s,r=$(),l=b("input"),o=$(),c=b("div"),a=b("button"),u=Z("–î–æ–±–∞–≤–∏—Ç—å"),v=$(),_=b("button"),_.textContent=p,this.h()},l(A){e=w(A,"DIV",{class:!0});var N=D(e);t=w(N,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-label":!0});var k=D(t);i=w(k,"P",{class:!0,"data-svelte-h":!0}),se(i)!=="svelte-1hv4oku"&&(i.textContent=s),r=R(k),l=w(k,"INPUT",{class:!0,type:!0,min:!0,max:!0,placeholder:!0}),o=R(k),c=w(k,"DIV",{class:!0});var O=D(c);a=w(O,"BUTTON",{class:!0});var y=D(a);u=Q(y,"–î–æ–±–∞–≤–∏—Ç—å"),y.forEach(m),v=R(O),_=w(O,"BUTTON",{class:!0,"data-svelte-h":!0}),se(_)!=="svelte-1x2fwc6"&&(_.textContent=p),O.forEach(m),k.forEach(m),N.forEach(m),this.h()},h(){d(i,"class","dialog-title svelte-4b4xh4"),d(l,"class","dialog-input svelte-4b4xh4"),d(l,"type","number"),d(l,"min","1"),d(l,"max","999"),d(l,"placeholder","–Ω–∞–ø—Ä–∏–º–µ—Ä, 45"),d(a,"class","dialog-ok svelte-4b4xh4"),a.disabled=f=!n[5]||n[5]<=0,d(_,"class","dialog-cancel svelte-4b4xh4"),d(c,"class","dialog-actions svelte-4b4xh4"),d(t,"class","dialog svelte-4b4xh4"),d(t,"role","dialog"),d(t,"aria-modal","true"),d(t,"aria-label","–î–æ–±–∞–≤–∏—Ç—å —Ç–∞–π–º–µ—Ä"),d(e,"class","backdrop svelte-4b4xh4")},m(A,N){P(A,e,N),h(e,t),h(t,i),h(t,r),h(t,l),gt(l,n[5]),h(t,o),h(t,c),h(c,a),h(a,u),h(c,v),h(c,_),n[21](t),E||(I=[K(l,"input",n[20]),K(a,"click",n[10]),K(_,"click",n[9]),K(t,"keydown",n[11]),K(e,"click",n[12])],E=!0)},p(A,N){N&32&&Ht(l.value)!==A[5]&&gt(l,A[5]),N&32&&f!==(f=!A[5]||A[5]<=0)&&(a.disabled=f)},d(A){A&&m(e),n[21](null),E=!1,$e(I)}}}function gi(n){let e,t,i,s,r="Active",l,o,c,a,u="+",f,v,_,p,E="Rest",I,A,N,k,O="+",y,W,T,C,S,M=Ne(n[2]),g=[];for(let j=0;j<M.length;j+=1)g[j]=un(cn(n,M,j));const B=j=>X(g[j],1,1,()=>{g[j]=null}),V=n[15].default,L=jn(V,n,n[14],an);let J=Ne(n[3]),z=[];for(let j=0;j<J.length;j+=1)z[j]=fn(on(n,J,j));const De=j=>X(z[j],1,1,()=>{z[j]=null});let x=n[4]&&dn(n);return{c(){e=b("div"),t=b("div"),i=b("div"),s=b("span"),s.textContent=r,l=b("br"),o=$();for(let j=0;j<g.length;j+=1)g[j].c();c=$(),a=b("button"),a.textContent=u,f=$(),L&&L.c(),v=$(),_=b("div"),p=b("span"),p.textContent=E,I=b("br"),A=$();for(let j=0;j<z.length;j+=1)z[j].c();N=$(),k=b("button"),k.textContent=O,y=$(),x&&x.c(),W=pe(),this.h()},l(j){e=w(j,"DIV",{});var q=D(e);t=w(q,"DIV",{class:!0});var U=D(t);i=w(U,"DIV",{class:!0});var oe=D(i);s=w(oe,"SPAN",{class:!0,"data-svelte-h":!0}),se(s)!=="svelte-19szg5l"&&(s.textContent=r),l=w(oe,"BR",{}),o=R(oe);for(let H=0;H<g.length;H+=1)g[H].l(oe);c=R(oe),a=w(oe,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),se(a)!=="svelte-18vwo8u"&&(a.textContent=u),oe.forEach(m),f=R(U),L&&L.l(U),v=R(U),_=w(U,"DIV",{class:!0});var ne=D(_);p=w(ne,"SPAN",{class:!0,"data-svelte-h":!0}),se(p)!=="svelte-1gtata5"&&(p.textContent=E),I=w(ne,"BR",{}),A=R(ne);for(let H=0;H<z.length;H+=1)z[H].l(ne);N=R(ne),k=w(ne,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),se(k)!=="svelte-cad37x"&&(k.textContent=O),ne.forEach(m),U.forEach(m),q.forEach(m),y=R(j),x&&x.l(j),W=pe(),this.h()},h(){d(s,"class","label svelte-4b4xh4"),d(a,"class","add-btn svelte-4b4xh4"),d(a,"title","–î–æ–±–∞–≤–∏—Ç—å —Ç–∞–π–º–µ—Ä"),d(i,"class","item svelte-4b4xh4"),d(p,"class","label svelte-4b4xh4"),d(k,"class","add-btn svelte-4b4xh4"),d(k,"title","–î–æ–±–∞–≤–∏—Ç—å —Ç–∞–π–º–µ—Ä"),d(_,"class","item svelte-4b4xh4"),d(t,"class","grid-container svelte-4b4xh4")},m(j,q){P(j,e,q),h(e,t),h(t,i),h(i,s),h(i,l),h(i,o);for(let U=0;U<g.length;U+=1)g[U]&&g[U].m(i,null);h(i,c),h(i,a),h(t,f),L&&L.m(t,null),h(t,v),h(t,_),h(_,p),h(_,I),h(_,A);for(let U=0;U<z.length;U+=1)z[U]&&z[U].m(_,null);h(_,N),h(_,k),P(j,y,q),x&&x.m(j,q),P(j,W,q),T=!0,C||(S=[K(a,"click",n[17]),K(k,"click",n[19])],C=!0)},p(j,[q]){if(q&133){M=Ne(j[2]);let U;for(U=0;U<M.length;U+=1){const oe=cn(j,M,U);g[U]?(g[U].p(oe,q),G(g[U],1)):(g[U]=un(oe),g[U].c(),G(g[U],1),g[U].m(i,c))}for(Ke(),U=M.length;U<g.length;U+=1)B(U);Xe()}if(L&&L.p&&(!T||q&16384)&&Pn(L,V,j,j[14],T?Rn(V,j[14],q,_i):$n(j[14]),an),q&138){J=Ne(j[3]);let U;for(U=0;U<J.length;U+=1){const oe=on(j,J,U);z[U]?(z[U].p(oe,q),G(z[U],1)):(z[U]=fn(oe),z[U].c(),G(z[U],1),z[U].m(_,N))}for(Ke(),U=J.length;U<z.length;U+=1)De(U);Xe()}j[4]?x?x.p(j,q):(x=dn(j),x.c(),x.m(W.parentNode,W)):x&&(x.d(1),x=null)},i(j){if(!T){for(let q=0;q<M.length;q+=1)G(g[q]);G(L,j);for(let q=0;q<J.length;q+=1)G(z[q]);T=!0}},o(j){g=g.filter(Boolean);for(let q=0;q<g.length;q+=1)X(g[q]);X(L,j),z=z.filter(Boolean);for(let q=0;q<z.length;q+=1)X(z[q]);T=!1},d(j){j&&(m(e),m(y),m(W)),_t(g,j),L&&L.d(j),_t(z,j),x&&x.d(j),C=!1,$e(S)}}}function pi(n,e,t){let{$$slots:i={},$$scope:s}=e;const r=it();let l=[],o=[],c=[5,10,15,20,25],a=[5,10,15,20,25],u=!1,f=null,v=null,_=null;function p(g){r("start",{timer:g.detail.val,name:g.detail.name})}function E(g){f=g,t(5,v=null),t(4,u=!0),setTimeout(()=>{var B;(B=_==null?void 0:_.querySelector(".dialog-input"))==null||B.focus()},0)}function I(){t(4,u=!1),f=null}function A(){if(v!==null&&v>0){const g=Math.round(v);f==="work"&&!c.includes(g)?t(2,c=[...c,g].sort((B,V)=>B-V)):f==="rest"&&!a.includes(g)&&t(3,a=[...a,g].sort((B,V)=>B-V))}I()}function N(g){g.key==="Enter"&&A(),g.key==="Escape"&&I()}function k(g){g.target===g.currentTarget&&I()}function O(){l.forEach(g=>g==null?void 0:g.reset()),o.forEach(g=>g==null?void 0:g.reset())}function y(g,B){We[g?"unshift":"push"](()=>{l[B]=g,t(0,l)})}const W=()=>E("work");function T(g,B){We[g?"unshift":"push"](()=>{o[B]=g,t(1,o)})}const C=()=>E("rest");function S(){v=Ht(this.value),t(5,v)}function M(g){We[g?"unshift":"push"](()=>{_=g,t(6,_)})}return n.$$set=g=>{"$$scope"in g&&t(14,s=g.$$scope)},[l,o,c,a,u,v,_,p,E,I,A,N,k,O,s,i,y,W,T,C,S,M]}class ki extends we{constructor(e){super(),Te(this,e,pi,gi,be,{clear:13})}get clear(){return this.$$.ctx[13]}}/*! js-cookie v3.0.5 | MIT */function dt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)n[i]=t[i]}return n}var bi={read:function(n){return n[0]==='"'&&(n=n.slice(1,-1)),n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(n){return encodeURIComponent(n).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function $t(n,e){function t(s,r,l){if(!(typeof document>"u")){l=dt({},e,l),typeof l.expires=="number"&&(l.expires=new Date(Date.now()+l.expires*864e5)),l.expires&&(l.expires=l.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var c in l)l[c]&&(o+="; "+c,l[c]!==!0&&(o+="="+l[c].split(";")[0]));return document.cookie=s+"="+n.write(r,s)+o}}function i(s){if(!(typeof document>"u"||arguments.length&&!s)){for(var r=document.cookie?document.cookie.split("; "):[],l={},o=0;o<r.length;o++){var c=r[o].split("="),a=c.slice(1).join("=");try{var u=decodeURIComponent(c[0]);if(l[u]=n.read(a,u),s===u)break}catch{}}return s?l[s]:l}}return Object.create({set:t,get:i,remove:function(s,r){t(s,"",dt({},r,{expires:-1}))},withAttributes:function(s){return $t(this.converter,dt({},this.attributes,s))},withConverter:function(s){return $t(dt({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(n)}})}var Le=$t(bi,{path:"/"});class je{constructor(e=0,t="",i=new Date,s=new Date){Se(this,"start");Se(this,"finish");Se(this,"name");Se(this,"value");this.start=i,this.finish=s,this.name=t,this.value=e}setDuration(e){this.finish=new Date(this.start.getTime()+e*1e3)}durationS(){return(this.finish.getTime()-this.start.getTime())/1e3}}const ge={RUNNING:"RUNNING",STOPPED:"STOPPED",WAITING_FOR_STOP:"WAITING_FOR_STOP"};var Ge=(n=>(n[n.EMIT=1]="EMIT",n[n.DO_NOT_EMIT=2]="DO_NOT_EMIT",n))(Ge||{});let Xn=60,wi=5*60;function Gt(n,e,t=Xn){return(e.start.getTime()-n.finish.getTime())/1e3>t}function Ti(n,e=Xn){var t=[],i=0;if(n.length<=1)return n;t.push(n[0]),i=0;for(let s=1;s<n.length;s++){const r=n[s];if(t[i].name!=r.name){t.push(r),i++;continue}Gt(t[i],r,e)?(t.push(r),i++):t[i].finish=r.finish}return t}function Nt(n,e=Ve.REST,t=wi){var i=[],s=0;if(n.length<=1)return n;i.push(n[0]),s=0;for(let l=1;l<n.length;l++){const o=n[l];if(Gt(i[s],o,t)){var r=new je(0,e,i[s].finish,o.start);i.push(r),s++}i.push(o),s++}return i}function Si(n){return n.forEach(e=>{if(!("name"in e&&"start"in e&&"finish"in e))return!1}),!0}function Di(n){let e=[];try{const t=JSON.parse(n);let i=[];Si(t)&&t.forEach(s=>{i.push(new je(0,s.name,new Date(s.start*1e3),new Date(s.finish*1e3)))}),console.log("deserialized logs:",i),e=i}catch{e=[]}return new Rt(e)}class Rt{constructor(e){Se(this,"additionalS",0);Se(this,"list",[]);this.list=Nt(e,Ve.REST)}serialize(){let e=[];return this.list.forEach(t=>{e.push({name:t.name,start:Math.floor(t.start.getTime()/1e3),finish:Math.floor(t.finish.getTime()/1e3)})}),JSON.stringify(e)}_normalize(){this.list=Nt(this.list,Ve.REST),this.list=Ti(this.list,0)}addTimer(e){return this.list.push(e),this._normalize(),this}remove(e){for(var t=0;t<this.list.length;)this.list[t].start===e?this.list.splice(t,1):++t;this._normalize()}total(){let e=0;return this.list.forEach(t=>{t.name==Ve.WORK&&(e+=t.durationS())}),e}fillGaps(e=new je){if(this.list=Nt(this.list),this.list.length>0){let t=this.list[this.list.length-1];Gt(t,e)&&this.list.push(new je(0,Ve.REST,t.finish,e.start))}return this}}class Ei{constructor(){Se(this,"timerHistory");Se(this,"active");this.timerHistory=new Rt([])}addTimer(e){return this.active=void 0,this.timerHistory.addTimer(e),this}remove(e){return this.timerHistory.remove(e),this}clearLogs(){return this.timerHistory=new Rt([]),this}resetActive(){return this.active=void 0,this}tick(e,t){if(!this.active)return!1;const i=this.active.value*t,s=(e.getTime()-this.active.start.getTime())/1e3,r=15*t;return s>i+r?(this.active.finish=new Date(this.active.start.getTime()+(i+r)*1e3),this.addTimer(this.active),!0):(this.active.finish=e,!1)}getRecoveryStatus(e,t){if(!this.active)return{shouldResume:!1,shouldArchive:!1,remainingMinutes:0};const i=(e.getTime()-this.active.start.getTime())/1e3,s=this.active.value*t,r=15*t;if(i>=s+r)return{shouldResume:!1,shouldArchive:!0,remainingMinutes:0};const l=s-i;return{shouldResume:l>0,shouldArchive:!1,remainingMinutes:Math.max(0,l/t)}}setActive(e){return this.active=e,this.timerHistory.fillGaps(),this}totalTime(){let e=this.timerHistory.total();return this.active&&this.active.name==Ve.WORK&&(e+=this.active.durationS()),e}}function Jn(n,e,t={storage:"cookies",cookieExpireDays:31}){const i=t.serialize||JSON.stringify,s=t.deserialize||JSON.parse;let r=e;try{const o=t.storage==="cookies"?Le.get(n):localStorage.getItem(n);o&&(r=s(o))}catch(o){console.warn(`Failed to load ${n} from ${t.storage}:`,o)}const l=Tt(r);return l.subscribe(o=>{try{const c=i(o);t.storage==="cookies"?Le.set(n,c,{expires:t.cookieExpireDays||31}):localStorage.setItem(n,c)}catch(c){console.warn(`Failed to save ${n} to ${t.storage}:`,c)}}),l}function Ii(){let n=new Ei;{const t=Le.get("logs");console.log("Loading pomApp from cookies:",t),t&&(n.timerHistory=Di(t));const i=Le.get("activeTimer");if(i)try{const s=JSON.parse(i),r=new Date(s.start),l=new Date;(l.getTime()-r.getTime())/(1e3*60*60)<1?(n.active=new je(s.value,s.name,r,l),console.log("Loaded active timer from cookies:",n.active)):(console.log("Active timer too old, not restoring"),Le.remove("activeTimer"))}catch(s){console.error("Failed to parse active timer:",s)}}const e=Tt(n);return e.subscribe(t=>{const i=t.timerHistory.serialize();if(Le.set("logs",i,{expires:31}),t.active){const s={name:t.active.name,start:t.active.start.getTime(),finish:t.active.finish.getTime(),value:t.active.value};Le.set("activeTimer",JSON.stringify(s),{expires:31})}else Le.remove("activeTimer")}),e}const ye=Ii();function yi(){{const n=Le.get("darkmode");return n!==void 0?n==="true":window.matchMedia("(prefers-color-scheme: dark)").matches}}const Lt=Jn("darkmode",yi(),{storage:"cookies",serialize:n=>n.toString(),deserialize:n=>n==="true"}),Ci=St(ye,n=>n.totalTime()),ht=Jn("volume",10,{storage:"cookies",serialize:n=>n.toString(),deserialize:n=>parseInt(n,10)});function Oi(n){let e,t,i,s=`<img src="${nt}/volume_mute.svg" alt="Mute icon"/>`,r,l,o,c,a=`<img src="${nt}/volume_up.svg" alt="Volume max icon"/>`,u,f;return{c(){e=b("label"),t=b("div"),i=b("button"),i.innerHTML=s,r=$(),l=b("input"),o=$(),c=b("button"),c.innerHTML=a,this.h()},l(v){e=w(v,"LABEL",{});var _=D(e);t=w(_,"DIV",{class:!0});var p=D(t);i=w(p,"BUTTON",{class:!0,"data-svelte-h":!0}),se(i)!=="svelte-t9bnpg"&&(i.innerHTML=s),r=R(p),l=w(p,"INPUT",{class:!0,type:!0,min:!0,max:!0}),o=R(p),c=w(p,"BUTTON",{class:!0,"data-svelte-h":!0}),se(c)!=="svelte-yorq7f"&&(c.innerHTML=a),p.forEach(m),_.forEach(m),this.h()},h(){d(i,"class","leftbutton svelte-1vsc329"),d(l,"class","slider bar svelte-1vsc329"),d(l,"type","range"),d(l,"min","0"),d(l,"max","100"),d(c,"class","svelte-1vsc329"),d(t,"class","container svelte-1vsc329")},m(v,_){P(v,e,_),h(e,t),h(t,i),h(t,r),h(t,l),gt(l,n[0]),h(t,o),h(t,c),u||(f=[K(i,"click",n[2]),K(l,"change",n[5]),K(l,"input",n[5]),K(l,"mouseup",n[1]),K(c,"click",n[3])],u=!0)},p(v,[_]){_&1&&gt(l,v[0])},i:le,o:le,d(v){v&&m(e),u=!1,$e(f)}}}function Mi(n,e,t){let i;Ae(n,ht,a=>t(4,i=a));let s=i;function r(a){Ot(ht,i=parseInt(a.target.value,10),i)}function l(){Ot(ht,i=0,i)}function o(){Ot(ht,i=100,i)}function c(){s=Ht(this.value),t(0,s),t(4,i)}return n.$$.update=()=>{n.$$.dirty&16&&(console.log("volume",i),ii(i/100),t(0,s=i))},[s,r,l,o,i,c]}class Ni extends we{constructor(e){super(),Te(this,e,Mi,Oi,be,{})}}function Vi(n,e,t){const i=it();let{debugFlag:s}=e,{active:r=!0}=e,l=0,o=0;function c(u){console.log("run annoyer",u),clearInterval(l),clearTimeout(o),u&&(l=setInterval(()=>{Ft(),r||clearInterval(l)},tt(s).afterClockIntervalS*1e3),o=setTimeout(()=>{t(0,r=!1),clearInterval(l),a()},tt(s).afterClockTimeoutS*1e3))}function a(){i("off")}return n.$$set=u=>{"debugFlag"in u&&t(1,s=u.debugFlag),"active"in u&&t(0,r=u.active)},n.$$.update=()=>{n.$$.dirty&1&&c(r)},[r,s]}class Ai extends we{constructor(e){super(),Te(this,e,Vi,null,be,{debugFlag:1,active:0})}}const hn=nt+"/tea.png",ji=nt+"/clock_red.png",Pi=nt+"/clock_yellow.png";function $i(n){if(console.log("changeFavicon",n),typeof document>"u"||document===null)return;const e=document.getElementById("favicon");if(e!==null)switch(n){case ge.STOPPED:e.href=hn;break;case ge.RUNNING:e.href=ji;break;case ge.WAITING_FOR_STOP:e.href=Pi;break;default:e.href=hn}}function Ri(){const{subscribe:n,set:e,update:t}=Tt({state:ge.STOPPED,currentTimer:new je,clockDuration:0});return{subscribe:n,start:(i,s,r)=>{const l=tt(r).timersMultiplier;t(o=>({state:ge.RUNNING,currentTimer:new je(i,s),clockDuration:i*l}))},alarm:i=>{t(s=>{if(i){const r=Object.assign(Object.create(Object.getPrototypeOf(s.currentTimer)),s.currentTimer,{finish:new Date});return{...s,state:ge.STOPPED,clockDuration:0,currentTimer:r}}else return{...s,state:ge.WAITING_FOR_STOP}})},stop:()=>{t(i=>{const s=Object.assign(Object.create(Object.getPrototypeOf(i.currentTimer)),i.currentTimer,{finish:new Date});return{...i,state:ge.STOPPED,clockDuration:0,currentTimer:s}})},reset:()=>{e({state:ge.STOPPED,currentTimer:new je,clockDuration:0})}}}const He=Ri(),Li=St(He,n=>n.state),Hi=St(He,n=>n.currentTimer),Ui=St(He,n=>n.clockDuration);function Bi(n){let e,t,i;return e=new Ni({}),{c(){ae(e.$$.fragment),t=b("br")},l(s){ce(e.$$.fragment,s),t=w(s,"BR",{})},m(s,r){ue(e,s,r),P(s,t,r),i=!0},p:le,i(s){i||(G(e.$$.fragment,s),i=!0)},o(s){X(e.$$.fragment,s),i=!1},d(s){s&&m(t),fe(e,s)}}}function mn(n){let e,t;return e=new zt({props:{title:"stop and don't save logs",$$slots:{default:[Fi]},$$scope:{ctx:n}}}),{c(){ae(e.$$.fragment)},l(i){ce(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s&65536&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(G(e.$$.fragment,i),t=!0)},o(i){X(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function Fi(n){let e,t="cancel",i,s,r,l;return{c(){e=b("button"),e.textContent=t,i=$(),s=b("br"),this.h()},l(o){e=w(o,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),se(e)!=="svelte-1wi9d3u"&&(e.textContent=t),i=R(o),s=w(o,"BR",{}),this.h()},h(){d(e,"id","stopper"),d(e,"class","svelte-1viwsah")},m(o,c){P(o,e,c),P(o,i,c),P(o,s,c),r||(l=K(e,"click",n[8]),r=!0)},p:le,d(o){o&&(m(e),m(i),m(s)),r=!1,l()}}}function zi(n){let e,t,i,s,r,l,o;function c(f){n[10](f)}let a={time:n[4]};n[0]!==void 0&&(a.remainedSeconds=n[0]),t=new fi({props:a}),We.push(()=>Bt(t,"remainedSeconds",c)),t.$on("alarming",n[6]),t.$on("stop",n[9]),r=new zt({props:{title:"Volume",$$slots:{default:[Bi]},$$scope:{ctx:n}}});let u=n[2]!==ge.STOPPED&&mn(n);return{c(){e=b("div"),ae(t.$$.fragment),s=$(),ae(r.$$.fragment),l=$(),u&&u.c(),this.h()},l(f){e=w(f,"DIV",{class:!0});var v=D(e);ce(t.$$.fragment,v),s=R(v),ce(r.$$.fragment,v),l=R(v),u&&u.l(v),v.forEach(m),this.h()},h(){d(e,"class","clock svelte-1viwsah")},m(f,v){P(f,e,v),ue(t,e,null),h(e,s),ue(r,e,null),h(e,l),u&&u.m(e,null),o=!0},p(f,v){const _={};v&16&&(_.time=f[4]),!i&&v&1&&(i=!0,_.remainedSeconds=f[0],Ut(()=>i=!1)),t.$set(_);const p={};v&65536&&(p.$$scope={dirty:v,ctx:f}),r.$set(p),f[2]!==ge.STOPPED?u?(u.p(f,v),v&4&&G(u,1)):(u=mn(f),u.c(),G(u,1),u.m(e,null)):u&&(Ke(),X(u,1,1,()=>{u=null}),Xe())},i(f){o||(G(t.$$.fragment,f),G(r.$$.fragment,f),G(u),o=!0)},o(f){X(t.$$.fragment,f),X(r.$$.fragment,f),X(u),o=!1},d(f){f&&m(e),fe(t),fe(r),u&&u.d()}}}function Gi(n){let e,t,i,s,r={$$slots:{default:[zi]},$$scope:{ctx:n}};return e=new ki({props:r}),n[11](e),e.$on("start",n[5]),e.$on("stop",n[12]),i=new Ai({props:{active:n[2]===ge.WAITING_FOR_STOP,debugFlag:n[1]}}),i.$on("off",n[13]),{c(){ae(e.$$.fragment),t=$(),ae(i.$$.fragment)},l(l){ce(e.$$.fragment,l),t=R(l),ce(i.$$.fragment,l)},m(l,o){ue(e,l,o),P(l,t,o),ue(i,l,o),s=!0},p(l,[o]){const c={};o&65557&&(c.$$scope={dirty:o,ctx:l}),e.$set(c);const a={};o&4&&(a.active=l[2]===ge.WAITING_FOR_STOP),o&2&&(a.debugFlag=l[1]),i.$set(a)},i(l){s||(G(e.$$.fragment,l),G(i.$$.fragment,l),s=!0)},o(l){X(e.$$.fragment,l),X(i.$$.fragment,l),s=!1},d(l){l&&m(t),n[11](null),fe(e,l),fe(i,l)}}}function Wi(n,e,t){let i,s,r;Ae(n,Li,k=>t(2,i=k)),Ae(n,Hi,k=>t(14,s=k)),Ae(n,Ui,k=>t(4,r=k));const l=it();let{debugFlag:o}=e,{remainedSeconds:c}=e,a;function u(k){i===ge.RUNNING&&v(Ge.EMIT),He.start(k.detail.timer,k.detail.name,o),l("current",s)}function f(){const k=typeof document<"u"&&document.visibilityState==="visible";He.alarm(k),k&&(a&&a.clear(),l("timer",s))}function v(k=Ge.EMIT){He.stop(),a&&a.clear(),k===Ge.EMIT&&l("timer",s)}function _(){He.reset(),a&&a.clear(),l("cancel")}function p(){i!==ge.STOPPED&&v(Ge.EMIT)}Ln(()=>{document.addEventListener("visibilitychange",function(){i===ge.WAITING_FOR_STOP&&document.visibilityState==="visible"&&(console.log("visibility change to visible"),v(Ge.EMIT))})});function E(k){c=k,t(0,c)}function I(k){We[k?"unshift":"push"](()=>{a=k,t(3,a)})}const A=()=>v(Ge.DO_NOT_EMIT),N=()=>v(Ge.DO_NOT_EMIT);return n.$$set=k=>{"debugFlag"in k&&t(1,o=k.debugFlag),"remainedSeconds"in k&&t(0,c=k.remainedSeconds)},n.$$.update=()=>{n.$$.dirty&4&&$i(i)},[c,o,i,a,r,u,f,v,_,p,E,I,A,N]}class qi extends we{constructor(e){super(),Te(this,e,Wi,Gi,be,{debugFlag:1,remainedSeconds:0})}}function Ki(n){let e;return{c(){e=Z("Active for")},l(t){e=Q(t,"Active for")},m(t,i){P(t,e,i)},d(t){t&&m(e)}}}function Xi(n){let e;return{c(){e=Z("Rest for")},l(t){e=Q(t,"Rest for")},m(t,i){P(t,e,i)},d(t){t&&m(e)}}}function vn(n){let e,t="running";return{c(){e=b("span"),e.textContent=t,this.h()},l(i){e=w(i,"SPAN",{class:!0,"data-svelte-h":!0}),se(e)!=="svelte-1383egi"&&(e.textContent=t),this.h()},h(){d(e,"class","active-badge svelte-2774qv")},m(i,s){P(i,e,s)},d(i){i&&m(e)}}}function Ji(n){let e,t,i,s,r,l,o,c=ln(n[2])+"",a,u,f,v;function _(A,N){return A[1]?Xi:Ki}let p=_(n),E=p(n),I=n[0]&&vn();return{c(){e=b("div"),t=b("snap"),i=Z(n[3]),s=$(),r=b("snap"),E.c(),l=$(),o=b("snap"),a=Z(c),u=$(),I&&I.c(),this.h()},l(A){e=w(A,"DIV",{class:!0});var N=D(e);t=w(N,"SNAP",{class:!0});var k=D(t);i=Q(k,n[3]),k.forEach(m),s=R(N),r=w(N,"SNAP",{});var O=D(r);E.l(O),O.forEach(m),l=R(N),o=w(N,"SNAP",{class:!0});var y=D(o);a=Q(y,c),y.forEach(m),u=R(N),I&&I.l(N),N.forEach(m),this.h()},h(){d(t,"class","time work svelte-2774qv"),d(o,"class","duration svelte-2774qv"),d(e,"class","logline svelte-2774qv"),Pe(e,"topLog",n[0]),Pe(e,"rest",n[1]),Pe(e,"clickable",!n[0])},m(A,N){P(A,e,N),h(e,t),h(t,i),h(e,s),h(e,r),E.m(r,null),h(e,l),h(e,o),h(o,a),h(e,u),I&&I.m(e,null),f||(v=K(e,"click",n[4]),f=!0)},p(A,[N]){p!==(p=_(A))&&(E.d(1),E=p(A),E&&(E.c(),E.m(r,null))),N&4&&c!==(c=ln(A[2])+"")&&re(a,c),A[0]?I||(I=vn(),I.c(),I.m(e,null)):I&&(I.d(1),I=null),N&1&&Pe(e,"topLog",A[0]),N&2&&Pe(e,"rest",A[1]),N&1&&Pe(e,"clickable",!A[0])},i:le,o:le,d(A){A&&m(e),E.d(),I&&I.d(),f=!1,v()}}}function Yi(n){let e=n.getHours().toString().padStart(2,"0"),t=n.getMinutes().toString().padStart(2,"0");return`${e}:${t}`}function Zi(n,e,t){let i,s,{start:r}=e,{finish:l}=e,{name:o}=e,{value:c=0}=e,{topLog:a=!1}=e;const u=it();let f=Yi(r);function v(){a||u("click")}return n.$$set=_=>{"start"in _&&t(5,r=_.start),"finish"in _&&t(6,l=_.finish),"name"in _&&t(7,o=_.name),"value"in _&&t(8,c=_.value),"topLog"in _&&t(0,a=_.topLog)},n.$$.update=()=>{n.$$.dirty&96&&t(2,i=(l.getTime()-r.getTime())/1e3),n.$$.dirty&128&&t(1,s=o===Ve.REST)},[a,s,i,f,v,r,l,o,c]}class Yn extends we{constructor(e){super(),Te(this,e,Zi,Ji,be,{start:5,finish:6,name:7,value:8,topLog:0})}}const Wt=Tt(null);function vt(n){Wt.set(n)}function mt(){Wt.set(null)}function Qi(n){const e=n.slice(),t=e[23].getTime()-e[1].start.getTime();e[25]=t;const i=e[1].finish.getTime()-e[1].start.getTime();e[5]=i;const s=e[25]/e[5]*e[24];e[26]=s;const r=e[24]-e[26];e[27]=r;const l=parseFloat(e[20].left)+e[26];return e[28]=l,e}function Vt(n){const e=n.slice(),t=e[8](e[1]);e[20]=t;const i=e[9](e[1]);e[21]=i;const s=e[10](e[1],e[4]);e[22]=s;const r=e[22]?e[11](e[1],e[4]):null;e[23]=r;const l=parseFloat(e[20].width);return e[24]=l,e}function _n(n,e,t){const i=n.slice();i[29]=e[t];const s=i[8](i[29]);i[20]=s;const r=i[9](i[29]);i[21]=r;const l=i[10](i[29],i[0]);i[22]=l;const o=i[22]?i[11](i[29],i[0]):null;i[23]=o;const c=parseFloat(i[20].width);i[24]=c;const a=!i[21]&&i[24]<.5?"2px":i[20].width;return i[30]=a,i}function xi(n){const e=n.slice(),t=e[23].getTime()-e[29].start.getTime();e[25]=t;const i=e[29].finish.getTime()-e[29].start.getTime();e[5]=i;const s=e[25]/e[5]*e[24];e[26]=s;const r=e[24]-e[26];e[27]=r;const l=parseFloat(e[20].left)+e[26];return e[28]=l,e}function gn(n,e,t){const i=n.slice();return i[33]=e[t],i}function pn(n){let e;return{c(){e=b("div"),this.h()},l(t){e=w(t,"DIV",{class:!0,style:!0,title:!0}),D(e).forEach(m),this.h()},h(){d(e,"class","future-overlay svelte-1k1xkrk"),F(e,"left",n[6].left),F(e,"width",n[6].width),d(e,"title","Future time")},m(t,i){P(t,e,i)},p(t,i){i[0]&64&&F(e,"left",t[6].left),i[0]&64&&F(e,"width",t[6].width)},d(t){t&&m(e)}}}function kn(n){let e,t,i=n[33].label+"",s,r;return{c(){e=b("div"),t=b("div"),s=Z(i),r=$(),this.h()},l(l){e=w(l,"DIV",{class:!0,style:!0});var o=D(e);t=w(o,"DIV",{class:!0});var c=D(t);s=Q(c,i),c.forEach(m),r=R(o),o.forEach(m),this.h()},h(){d(t,"class","grid-label svelte-1k1xkrk"),d(e,"class","grid-line svelte-1k1xkrk"),F(e,"left",n[33].position+"%")},m(l,o){P(l,e,o),h(e,t),h(t,s),h(e,r)},p(l,o){o[0]&128&&i!==(i=l[33].label+"")&&re(s,i),o[0]&128&&F(e,"left",l[33].position+"%")},d(l){l&&m(e)}}}function es(n){let e,t,i,s,r;function l(){return n[16](n[29])}return{c(){e=b("div"),this.h()},l(o){e=w(o,"DIV",{class:!0,style:!0,title:!0}),D(e).forEach(m),this.h()},h(){d(e,"class",t="timer-block "+(n[21]?n[22]?"overtime":"work":"rest")+" svelte-1k1xkrk"),F(e,"left",n[20].left),F(e,"width",n[30]),F(e,"min-width",n[21]?"0":"2px"),F(e,"cursor","pointer"),d(e,"title",i=te(n[29].start)+" - "+te(n[29].finish)+" ("+bt(n[29])+")"+(n[22]?" ‚ö†Ô∏è Overtime":""))},m(o,c){P(o,e,c),s||(r=K(e,"click",l),s=!0)},p(o,c){n=o,c[0]&1&&t!==(t="timer-block "+(n[21]?n[22]?"overtime":"work":"rest")+" svelte-1k1xkrk")&&d(e,"class",t),c[0]&1&&F(e,"left",n[20].left),c[0]&1&&F(e,"width",n[30]),c[0]&1&&F(e,"min-width",n[21]?"0":"2px"),c[0]&1&&i!==(i=te(n[29].start)+" - "+te(n[29].finish)+" ("+bt(n[29])+")"+(n[22]?" ‚ö†Ô∏è Overtime":""))&&d(e,"title",i)},d(o){o&&m(e),s=!1,r()}}}function bn(n){let e,t,i,s,r,l,o;function c(){return n[14](n[29])}function a(){return n[15](n[29])}return{c(){e=b("div"),i=$(),s=b("div"),this.h()},l(u){e=w(u,"DIV",{class:!0,style:!0,title:!0}),D(e).forEach(m),i=R(u),s=w(u,"DIV",{class:!0,style:!0,title:!0}),D(s).forEach(m),this.h()},h(){d(e,"class","timer-block work svelte-1k1xkrk"),F(e,"left",n[20].left),F(e,"width",n[26]+"%"),F(e,"cursor","pointer"),d(e,"title",t=te(n[29].start)+" - "+te(n[23])+" (Normal)"),d(s,"class","timer-block overtime svelte-1k1xkrk"),F(s,"left",n[28]+"%"),F(s,"width",n[27]+"%"),F(s,"cursor","pointer"),d(s,"title",r=te(n[23])+" - "+te(n[29].finish)+" ‚ö†Ô∏è Overtime")},m(u,f){P(u,e,f),P(u,i,f),P(u,s,f),l||(o=[K(e,"click",c),K(s,"click",a)],l=!0)},p(u,f){n=u,f[0]&1&&F(e,"left",n[20].left),f[0]&1&&F(e,"width",n[26]+"%"),f[0]&1&&t!==(t=te(n[29].start)+" - "+te(n[23])+" (Normal)")&&d(e,"title",t),f[0]&1&&F(s,"left",n[28]+"%"),f[0]&1&&F(s,"width",n[27]+"%"),f[0]&1&&r!==(r=te(n[23])+" - "+te(n[29].finish)+" ‚ö†Ô∏è Overtime")&&d(s,"title",r)},d(u){u&&(m(e),m(i),m(s)),l=!1,$e(o)}}}function wn(n,e){let t,i,s;function r(a,u){return u[0]&1&&(i=null),i==null&&(i=!!(a[21]&&a[23]&&a[23].getTime()>a[29].start.getTime()&&a[23].getTime()<a[29].finish.getTime())),i?bn:es}function l(a,u){return u===bn?xi(a):a}let o=r(e,[-1,-1]),c=o(l(e,o));return{key:n,first:null,c(){t=pe(),c.c(),s=pe(),this.h()},l(a){t=pe(),c.l(a),s=pe(),this.h()},h(){this.first=t},m(a,u){P(a,t,u),c.m(a,u),P(a,s,u)},p(a,u){e=a,o===(o=r(e,u))&&c?c.p(l(e,o),u):(c.d(1),c=o(l(e,o)),c&&(c.c(),c.m(s.parentNode,s)))},d(a){a&&(m(t),m(s)),c.d(a)}}}function Tn(n){let e,t;function i(o,c){return c[0]&18&&(e=null),e==null&&(e=!!(o[21]&&o[23]&&o[23].getTime()>o[1].start.getTime()&&o[23].getTime()<o[1].finish.getTime())),e?Sn:ts}function s(o,c){return c===Sn?Qi(o):o}let r=i(n,[-1,-1]),l=r(s(n,r));return{c(){l.c(),t=pe()},l(o){l.l(o),t=pe()},m(o,c){l.m(o,c),P(o,t,c)},p(o,c){r===(r=i(o,c))&&l?l.p(s(o,r),c):(l.d(1),l=r(s(o,r)),l&&(l.c(),l.m(t.parentNode,t)))},d(o){o&&m(t),l.d(o)}}}function ts(n){let e,t,i;return{c(){e=b("div"),this.h()},l(s){e=w(s,"DIV",{class:!0,style:!0,title:!0}),D(e).forEach(m),this.h()},h(){d(e,"class",t="timer-block active "+(n[21]?n[22]?"overtime":"work":"rest")+" svelte-1k1xkrk"),F(e,"left",n[20].left),F(e,"width",n[20].width),d(e,"title",i="Active: "+te(n[1].start)+" - now ("+bt(n[1])+")"+(n[22]?" ‚ö†Ô∏è Overtime":""))},m(s,r){P(s,e,r)},p(s,r){r[0]&18&&t!==(t="timer-block active "+(s[21]?s[22]?"overtime":"work":"rest")+" svelte-1k1xkrk")&&d(e,"class",t),r[0]&2&&F(e,"left",s[20].left),r[0]&2&&F(e,"width",s[20].width),r[0]&18&&i!==(i="Active: "+te(s[1].start)+" - now ("+bt(s[1])+")"+(s[22]?" ‚ö†Ô∏è Overtime":""))&&d(e,"title",i)},d(s){s&&m(e)}}}function Sn(n){let e,t,i,s,r;return{c(){e=b("div"),i=$(),s=b("div"),this.h()},l(l){e=w(l,"DIV",{class:!0,style:!0,title:!0}),D(e).forEach(m),i=R(l),s=w(l,"DIV",{class:!0,style:!0,title:!0}),D(s).forEach(m),this.h()},h(){d(e,"class","timer-block active work svelte-1k1xkrk"),F(e,"left",n[20].left),F(e,"width",n[26]+"%"),d(e,"title",t="Active: "+te(n[1].start)+" - "+te(n[23])+" (Normal)"),d(s,"class","timer-block active overtime svelte-1k1xkrk"),F(s,"left",n[28]+"%"),F(s,"width",n[27]+"%"),d(s,"title",r="Active: "+te(n[23])+" - now ‚ö†Ô∏è Overtime")},m(l,o){P(l,e,o),P(l,i,o),P(l,s,o)},p(l,o){o[0]&2&&F(e,"left",l[20].left),o[0]&18&&F(e,"width",l[26]+"%"),o[0]&18&&t!==(t="Active: "+te(l[1].start)+" - "+te(l[23])+" (Normal)")&&d(e,"title",t),o[0]&18&&F(s,"left",l[28]+"%"),o[0]&18&&F(s,"width",l[27]+"%"),o[0]&18&&r!==(r="Active: "+te(l[23])+" - now ‚ö†Ô∏è Overtime")&&d(s,"title",r)},d(l){l&&(m(e),m(i),m(s))}}}function ns(n){let e,t,i='<span class="timeline-title svelte-1k1xkrk">Timeline</span> <div class="legend svelte-1k1xkrk"><span class="legend-item svelte-1k1xkrk"><span class="legend-color work svelte-1k1xkrk"></span> <span>Work</span></span> <span class="legend-item svelte-1k1xkrk" title="Overtime: 2+ min after alarm, or 25+ min for consecutive work"><span class="legend-color overtime svelte-1k1xkrk"></span> <span>Overtime</span></span> <span class="legend-item svelte-1k1xkrk"><span class="legend-color rest svelte-1k1xkrk"></span> <span>Rest</span></span></div>',s,r,l,o=te(new Date(n[2]))+"",c,a,u,f=te(new Date(n[3]))+"",v,_,p,E,I=[],A=new Map,N,k=n[6].visible&&pn(n),O=Ne(n[7]),y=[];for(let S=0;S<O.length;S+=1)y[S]=kn(gn(n,O,S));let W=Ne(n[0]);const T=S=>S[29].start;for(let S=0;S<W.length;S+=1){let M=_n(n,W,S),g=T(M);A.set(g,I[S]=wn(g,M))}let C=n[1]&&Tn(Vt(n));return{c(){e=b("div"),t=b("div"),t.innerHTML=i,s=$(),r=b("div"),l=b("div"),c=Z(o),a=$(),u=b("div"),v=Z(f),_=$(),k&&k.c(),p=$();for(let S=0;S<y.length;S+=1)y[S].c();E=$();for(let S=0;S<I.length;S+=1)I[S].c();N=$(),C&&C.c(),this.h()},l(S){e=w(S,"DIV",{class:!0});var M=D(e);t=w(M,"DIV",{class:!0,"data-svelte-h":!0}),se(t)!=="svelte-1sof6z9"&&(t.innerHTML=i),s=R(M),r=w(M,"DIV",{class:!0});var g=D(r);l=w(g,"DIV",{class:!0});var B=D(l);c=Q(B,o),B.forEach(m),a=R(g),u=w(g,"DIV",{class:!0});var V=D(u);v=Q(V,f),V.forEach(m),_=R(g),k&&k.l(g),p=R(g);for(let L=0;L<y.length;L+=1)y[L].l(g);E=R(g);for(let L=0;L<I.length;L+=1)I[L].l(g);N=R(g),C&&C.l(g),g.forEach(m),M.forEach(m),this.h()},h(){d(t,"class","timeline-header svelte-1k1xkrk"),d(l,"class","time-label start svelte-1k1xkrk"),d(u,"class","time-label end svelte-1k1xkrk"),d(r,"class","timeline-bar svelte-1k1xkrk"),d(e,"class","timeline-container svelte-1k1xkrk")},m(S,M){P(S,e,M),h(e,t),h(e,s),h(e,r),h(r,l),h(l,c),h(r,a),h(r,u),h(u,v),h(r,_),k&&k.m(r,null),h(r,p);for(let g=0;g<y.length;g+=1)y[g]&&y[g].m(r,null);h(r,E);for(let g=0;g<I.length;g+=1)I[g]&&I[g].m(r,null);h(r,N),C&&C.m(r,null)},p(S,M){if(M[0]&4&&o!==(o=te(new Date(S[2]))+"")&&re(c,o),M[0]&8&&f!==(f=te(new Date(S[3]))+"")&&re(v,f),S[6].visible?k?k.p(S,M):(k=pn(S),k.c(),k.m(r,p)):k&&(k.d(1),k=null),M[0]&128){O=Ne(S[7]);let g;for(g=0;g<O.length;g+=1){const B=gn(S,O,g);y[g]?y[g].p(B,M):(y[g]=kn(B),y[g].c(),y[g].m(r,E))}for(;g<y.length;g+=1)y[g].d(1);y.length=O.length}M[0]&3841&&(W=Ne(S[0]),I=zn(I,M,T,1,S,W,A,r,ei,wn,N,_n)),S[1]?C?C.p(Vt(S),M):(C=Tn(Vt(S)),C.c(),C.m(r,null)):C&&(C.d(1),C=null)},i:le,o:le,d(S){S&&m(e),k&&k.d(),_t(y,S);for(let M=0;M<I.length;M+=1)I[M].d();C&&C.d()}}}function te(n){return n.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!1})}function bt(n){return`${Math.round(n.durationS()/60)} min`}function is(n,e,t){let i,s,r,l,o,c,{timers:a=[]}=e,{activeTimer:u=null}=e;const f=40*60*1e3;let v=0,_=0;function p(T){if(s===0)return{left:"0%",width:"0%"};const C=T.start.getTime()-r,S=T.finish.getTime()-T.start.getTime(),M=C/s*100,g=S/s*100;return{left:`${M}%`,width:`${g}%`}}function E(T){return T.name===Ve.WORK}function I(T,C){const S=C.findIndex(V=>V.start.getTime()===T.start.getTime());if(S<=0)return!0;const M=C[S-1];return E(M)?(T.start.getTime()-M.finish.getTime())/(1e3*60)>=5:M.durationS()/60>=5}function A(T,C){if(!E(T))return[];const S=[T],M=C.findIndex(g=>g.start.getTime()===T.start.getTime());for(let g=M-1;g>=0;g--){const B=C[g],V=S[0],J=(V.start.getTime()-B.finish.getTime())/(1e3*60);if(E(B)&&J<5)S.unshift(B);else{if(!E(B)&&B.durationS()/60<5)continue;if(!E(B)&&I(V,C))break}}return S}function N(T,C){if(!E(T)||!T.value||T.value===0)return!1;const S=2,M=25,g=A(T,C);if(g.length===1){const B=T.durationS()/60,V=T.value;return B>V+S}else{const B=g.reduce((L,J)=>L+(J.value||0),0);return g.reduce((L,J)=>L+J.durationS()/60,0)>B+M}}function k(T,C){if(!N(T,C)||!T.value)return null;const S=2,M=25,g=A(T,C);if(g.length===1){const B=T.start.getTime()+(T.value+S)*60*1e3;return new Date(B)}else{const V=g.reduce((J,z)=>J+(z.value||0),0)+M;let L=0;for(const J of g){const z=J.durationS()/60,De=L+z;if(De>V){const x=V-L,j=J.start.getTime()+x*60*1e3;return new Date(j)}L=De}}return null}const O=T=>vt(T),y=T=>vt(T),W=T=>vt(T);return n.$$set=T=>{"timers"in T&&t(0,a=T.timers),"activeTimer"in T&&t(1,u=T.activeTimer)},n.$$.update=()=>{n.$$.dirty[0]&3&&t(4,i=u?[...a,u]:a),n.$$.dirty[0]&16&&t(2,r=i.length===0?Date.now():Math.min(...i.map(T=>T.start.getTime()))),n.$$.dirty[0]&12310&&t(3,l=(()=>{if(i.length===0)return Date.now()+f;const C=Math.max(...i.map(M=>M.finish.getTime()));let S=Math.max(C,r+f);if(S+=v*36e5,u&&S!==_){const M=u.finish.getTime(),g=S-M,B=10*60*1e3;g<B&&(t(12,v++,v),S+=36e5,t(13,_=S),console.log("Extended timeline, total extensions:",v,"new end:",new Date(S)))}return S})()),n.$$.dirty[0]&12&&t(5,s=l-r),n.$$.dirty[0]&44&&t(7,o=(()=>{if(s===0)return[];const T=[],C=new Date(r),S=new Date(l),M=new Date(C);for(M.setMinutes(0,0,0),M.setHours(M.getHours()+1);M.getTime()<=S.getTime();){const B=(M.getTime()-r)/s*100;if(B>=0&&B<=100){const V=B<5||B>95;T.push({position:B,label:V?"":M.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!1})})}M.setHours(M.getHours()+1)}return T})()),n.$$.dirty[0]&44&&t(6,c=(()=>{const T=Date.now();if(l>T){const C=Math.max(r,T),S=C-r,M=l-C,g=S/s*100,B=M/s*100;return{left:`${g}%`,width:`${B}%`,visible:B>0}}return{left:"0%",width:"0%",visible:!1}})())},[a,u,r,l,i,s,c,o,p,E,N,k,v,_,O,y,W]}class ss extends we{constructor(e){super(),Te(this,e,is,ns,be,{timers:0,activeTimer:1},null,[-1,-1])}}function At(n){const e=n.slice(),t=e[10](e[0],e[7].finish);return e[37]=t,e}function jt(n){const e=n.slice(),t=e[10](e[1],e[0]);return e[37]=t,e}function Pt(n){const e=n.slice(),t=e[10](e[8].start,e[1]);return e[37]=t,e}function Dn(n,e,t){const i=n.slice();return i[38]=e[t],i}function En(n){let e,t,i,s,r="Edit Timer",l,o,c="√ó",a,u,f,v,_,p="Type:",E,I,A=n[4].name+"",N,k,O,y,W="Duration:",T,C,S,M,g,B,V,L,J,z=ke(n[2])+"",De,x,j,q=ke(n[3])+"",U,oe,ne,H,ee,Ee,de,Ye="üí° Drag the edges to adjust timer boundaries",Je,Y,Ie,Ue="Delete",st,Re,Et,Be,qt="Cancel",It,Fe,Kt="Save",yt,Xt,he=n[6].length>0&&In(n),me=n[8]&&Cn(Pt(n)),ve=n[4]&&On(jt(n)),_e=n[7]&&Mn(At(n));return{c(){e=b("div"),t=b("div"),i=b("div"),s=b("h2"),s.textContent=r,l=$(),o=b("button"),o.textContent=c,a=$(),u=b("div"),f=b("div"),v=b("div"),_=b("span"),_.textContent=p,E=$(),I=b("span"),N=Z(A),k=$(),O=b("div"),y=b("span"),y.textContent=W,T=$(),C=b("span"),S=Z(n[9]),M=Z(" min"),g=$(),he&&he.c(),B=$(),V=b("div"),L=b("div"),J=b("span"),De=Z(z),x=$(),j=b("span"),U=Z(q),oe=$(),ne=b("div"),me&&me.c(),H=$(),ve&&ve.c(),ee=$(),_e&&_e.c(),Ee=$(),de=b("div"),de.textContent=Ye,Je=$(),Y=b("div"),Ie=b("button"),Ie.textContent=Ue,st=$(),Re=b("div"),Et=$(),Be=b("button"),Be.textContent=qt,It=$(),Fe=b("button"),Fe.textContent=Kt,this.h()},l(ie){e=w(ie,"DIV",{class:!0});var Ce=D(e);t=w(Ce,"DIV",{class:!0});var Ze=D(t);i=w(Ze,"DIV",{class:!0});var rt=D(i);s=w(rt,"H2",{class:!0,"data-svelte-h":!0}),se(s)!=="svelte-1ut3txv"&&(s.textContent=r),l=R(rt),o=w(rt,"BUTTON",{class:!0,"data-svelte-h":!0}),se(o)!=="svelte-y9ayml"&&(o.textContent=c),rt.forEach(m),a=R(Ze),u=w(Ze,"DIV",{class:!0});var Qe=D(u);f=w(Qe,"DIV",{class:!0});var ot=D(f);v=w(ot,"DIV",{class:!0});var at=D(v);_=w(at,"SPAN",{class:!0,"data-svelte-h":!0}),se(_)!=="svelte-owo3qx"&&(_.textContent=p),E=R(at),I=w(at,"SPAN",{class:!0});var Jt=D(I);N=Q(Jt,A),Jt.forEach(m),at.forEach(m),k=R(ot),O=w(ot,"DIV",{class:!0});var ct=D(O);y=w(ct,"SPAN",{class:!0,"data-svelte-h":!0}),se(y)!=="svelte-2ef875"&&(y.textContent=W),T=R(ct),C=w(ct,"SPAN",{class:!0});var Ct=D(C);S=Q(Ct,n[9]),M=Q(Ct," min"),Ct.forEach(m),ct.forEach(m),ot.forEach(m),g=R(Qe),he&&he.l(Qe),B=R(Qe),V=w(Qe,"DIV",{class:!0});var xe=D(V);L=w(xe,"DIV",{class:!0});var ut=D(L);J=w(ut,"SPAN",{});var Yt=D(J);De=Q(Yt,z),Yt.forEach(m),x=R(ut),j=w(ut,"SPAN",{});var Zt=D(j);U=Q(Zt,q),Zt.forEach(m),ut.forEach(m),oe=R(xe),ne=w(xe,"DIV",{class:!0});var et=D(ne);me&&me.l(et),H=R(et),ve&&ve.l(et),ee=R(et),_e&&_e.l(et),et.forEach(m),Ee=R(xe),de=w(xe,"DIV",{class:!0,"data-svelte-h":!0}),se(de)!=="svelte-173xjy6"&&(de.textContent=Ye),xe.forEach(m),Qe.forEach(m),Je=R(Ze),Y=w(Ze,"DIV",{class:!0});var ze=D(Y);Ie=w(ze,"BUTTON",{class:!0,"data-svelte-h":!0}),se(Ie)!=="svelte-6r50uh"&&(Ie.textContent=Ue),st=R(ze),Re=w(ze,"DIV",{class:!0}),D(Re).forEach(m),Et=R(ze),Be=w(ze,"BUTTON",{class:!0,"data-svelte-h":!0}),se(Be)!=="svelte-1ph2inm"&&(Be.textContent=qt),It=R(ze),Fe=w(ze,"BUTTON",{class:!0,"data-svelte-h":!0}),se(Fe)!=="svelte-9t0vpj"&&(Fe.textContent=Kt),ze.forEach(m),Ze.forEach(m),Ce.forEach(m),this.h()},h(){d(s,"class","svelte-khj96w"),d(o,"class","close-btn svelte-khj96w"),d(i,"class","modal-header svelte-khj96w"),d(_,"class","label svelte-khj96w"),d(I,"class","value svelte-khj96w"),d(v,"class","info svelte-khj96w"),d(y,"class","label svelte-khj96w"),d(C,"class","value svelte-khj96w"),d(O,"class","info svelte-khj96w"),d(f,"class","info-row svelte-khj96w"),d(L,"class","timeline-labels svelte-khj96w"),d(ne,"class","timeline-track svelte-khj96w"),d(de,"class","timeline-hint svelte-khj96w"),d(V,"class","timeline-editor svelte-khj96w"),d(u,"class","modal-body svelte-khj96w"),d(Ie,"class","btn btn-delete svelte-khj96w"),d(Re,"class","spacer svelte-khj96w"),d(Be,"class","btn btn-cancel svelte-khj96w"),d(Fe,"class","btn btn-save svelte-khj96w"),d(Y,"class","modal-footer svelte-khj96w"),d(t,"class","modal svelte-khj96w"),d(e,"class","modal-backdrop svelte-khj96w")},m(ie,Ce){P(ie,e,Ce),h(e,t),h(t,i),h(i,s),h(i,l),h(i,o),h(t,a),h(t,u),h(u,f),h(f,v),h(v,_),h(v,E),h(v,I),h(I,N),h(f,k),h(f,O),h(O,y),h(O,T),h(O,C),h(C,S),h(C,M),h(u,g),he&&he.m(u,null),h(u,B),h(u,V),h(V,L),h(L,J),h(J,De),h(L,x),h(L,j),h(j,U),h(V,oe),h(V,ne),me&&me.m(ne,null),h(ne,H),ve&&ve.m(ne,null),h(ne,ee),_e&&_e.m(ne,null),h(V,Ee),h(V,de),n[30](V),h(t,Je),h(t,Y),h(Y,Ie),h(Y,st),h(Y,Re),h(Y,Et),h(Y,Be),h(Y,It),h(Y,Fe),yt||(Xt=[K(o,"click",n[16]),K(i,"click",xt(n[27])),K(u,"click",xt(n[26])),K(Ie,"click",n[17]),K(Be,"click",n[16]),K(Fe,"click",n[15]),K(e,"click",n[16])],yt=!0)},p(ie,Ce){Ce[0]&16&&A!==(A=ie[4].name+"")&&re(N,A),Ce[0]&512&&re(S,ie[9]),ie[6].length>0?he?he.p(ie,Ce):(he=In(ie),he.c(),he.m(u,B)):he&&(he.d(1),he=null),Ce[0]&4&&z!==(z=ke(ie[2])+"")&&re(De,z),Ce[0]&8&&q!==(q=ke(ie[3])+"")&&re(U,q),ie[8]?me?me.p(Pt(ie),Ce):(me=Cn(Pt(ie)),me.c(),me.m(ne,H)):me&&(me.d(1),me=null),ie[4]?ve?ve.p(jt(ie),Ce):(ve=On(jt(ie)),ve.c(),ve.m(ne,ee)):ve&&(ve.d(1),ve=null),ie[7]?_e?_e.p(At(ie),Ce):(_e=Mn(At(ie)),_e.c(),_e.m(ne,null)):_e&&(_e.d(1),_e=null)},d(ie){ie&&m(e),he&&he.d(),me&&me.d(),ve&&ve.d(),_e&&_e.d(),n[30](null),yt=!1,$e(Xt)}}}function In(n){let e,t=Ne(n[6]),i=[];for(let s=0;s<t.length;s+=1)i[s]=yn(Dn(n,t,s));return{c(){e=b("div");for(let s=0;s<i.length;s+=1)i[s].c();this.h()},l(s){e=w(s,"DIV",{class:!0});var r=D(e);for(let l=0;l<i.length;l+=1)i[l].l(r);r.forEach(m),this.h()},h(){d(e,"class","warnings svelte-khj96w")},m(s,r){P(s,e,r);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(e,null)},p(s,r){if(r[0]&64){t=Ne(s[6]);let l;for(l=0;l<t.length;l+=1){const o=Dn(s,t,l);i[l]?i[l].p(o,r):(i[l]=yn(o),i[l].c(),i[l].m(e,null))}for(;l<i.length;l+=1)i[l].d(1);i.length=t.length}},d(s){s&&m(e),_t(i,s)}}}function yn(n){let e,t,i=n[38]+"",s;return{c(){e=b("div"),t=Z("‚ö†Ô∏è "),s=Z(i),this.h()},l(r){e=w(r,"DIV",{class:!0});var l=D(e);t=Q(l,"‚ö†Ô∏è "),s=Q(l,i),l.forEach(m),this.h()},h(){d(e,"class","warning-item svelte-khj96w")},m(r,l){P(r,e,l),h(e,t),h(e,s)},p(r,l){l[0]&64&&i!==(i=r[38]+"")&&re(s,i)},d(r){r&&m(e)}}}function Cn(n){let e,t,i=n[8].name+"",s,r,l;return{c(){e=b("div"),t=b("span"),s=Z(i),this.h()},l(o){e=w(o,"DIV",{class:!0,style:!0,title:!0});var c=D(e);t=w(c,"SPAN",{class:!0});var a=D(t);s=Q(a,i),a.forEach(m),c.forEach(m),this.h()},h(){d(t,"class","timer-label svelte-khj96w"),d(e,"class",r="timer-block prev "+(n[14](n[8])?"work":"rest")+" svelte-khj96w"),F(e,"left",n[37].left),F(e,"width",n[37].width),d(e,"title",l=n[8].name+": "+ke(n[8].start)+" - "+ke(n[1]))},m(o,c){P(o,e,c),h(e,t),h(t,s)},p(o,c){c[0]&256&&i!==(i=o[8].name+"")&&re(s,i),c[0]&256&&r!==(r="timer-block prev "+(o[14](o[8])?"work":"rest")+" svelte-khj96w")&&d(e,"class",r),c[0]&258&&F(e,"left",o[37].left),c[0]&258&&F(e,"width",o[37].width),c[0]&258&&l!==(l=o[8].name+": "+ke(o[8].start)+" - "+ke(o[1]))&&d(e,"title",l)},d(o){o&&m(e)}}}function On(n){let e,t,i,s,r,l=n[4].name+"",o,c,a,u=ke(n[1])+"",f,v,_=ke(n[0])+"",p,E,I,A,N,k;return{c(){e=b("div"),t=b("div"),i=$(),s=b("div"),r=b("div"),o=Z(l),c=$(),a=b("div"),f=Z(u),v=Z(" - "),p=Z(_),E=$(),I=b("div"),this.h()},l(O){e=w(O,"DIV",{class:!0,style:!0});var y=D(e);t=w(y,"DIV",{class:!0,title:!0}),D(t).forEach(m),i=R(y),s=w(y,"DIV",{class:!0});var W=D(s);r=w(W,"DIV",{class:!0});var T=D(r);o=Q(T,l),T.forEach(m),c=R(W),a=w(W,"DIV",{class:!0});var C=D(a);f=Q(C,u),v=Q(C," - "),p=Q(C,_),C.forEach(m),W.forEach(m),E=R(y),I=w(y,"DIV",{class:!0,title:!0}),D(I).forEach(m),y.forEach(m),this.h()},h(){d(t,"class","drag-handle left svelte-khj96w"),d(t,"title","Drag to adjust start time"),d(r,"class","timer-label svelte-khj96w"),d(a,"class","timer-times svelte-khj96w"),d(s,"class","timer-content svelte-khj96w"),d(I,"class","drag-handle right svelte-khj96w"),d(I,"title","Drag to adjust end time"),d(e,"class",A="timer-block current "+(n[14](n[4])?"work":"rest")+" svelte-khj96w"),F(e,"left",n[37].left),F(e,"width",n[37].width)},m(O,y){P(O,e,y),h(e,t),h(e,i),h(e,s),h(s,r),h(r,o),h(s,c),h(s,a),h(a,f),h(a,v),h(a,p),h(e,E),h(e,I),N||(k=[K(t,"mousedown",n[28]),K(I,"mousedown",n[29])],N=!0)},p(O,y){y[0]&16&&l!==(l=O[4].name+"")&&re(o,l),y[0]&2&&u!==(u=ke(O[1])+"")&&re(f,u),y[0]&1&&_!==(_=ke(O[0])+"")&&re(p,_),y[0]&16&&A!==(A="timer-block current "+(O[14](O[4])?"work":"rest")+" svelte-khj96w")&&d(e,"class",A),y[0]&3&&F(e,"left",O[37].left),y[0]&3&&F(e,"width",O[37].width)},d(O){O&&m(e),N=!1,$e(k)}}}function Mn(n){let e,t,i=n[7].name+"",s,r,l;return{c(){e=b("div"),t=b("span"),s=Z(i),this.h()},l(o){e=w(o,"DIV",{class:!0,style:!0,title:!0});var c=D(e);t=w(c,"SPAN",{class:!0});var a=D(t);s=Q(a,i),a.forEach(m),c.forEach(m),this.h()},h(){d(t,"class","timer-label svelte-khj96w"),d(e,"class",r="timer-block next "+(n[14](n[7])?"work":"rest")+" svelte-khj96w"),F(e,"left",n[37].left),F(e,"width",n[37].width),d(e,"title",l=n[7].name+": "+ke(n[0])+" - "+ke(n[7].finish))},m(o,c){P(o,e,c),h(e,t),h(t,s)},p(o,c){c[0]&128&&i!==(i=o[7].name+"")&&re(s,i),c[0]&128&&r!==(r="timer-block next "+(o[14](o[7])?"work":"rest")+" svelte-khj96w")&&d(e,"class",r),c[0]&129&&F(e,"left",o[37].left),c[0]&129&&F(e,"width",o[37].width),c[0]&129&&l!==(l=o[7].name+": "+ke(o[0])+" - "+ke(o[7].finish))&&d(e,"title",l)},d(o){o&&m(e)}}}function ls(n){let e,t,i,s=n[4]&&En(n);return{c(){s&&s.c(),e=pe()},l(r){s&&s.l(r),e=pe()},m(r,l){s&&s.m(r,l),P(r,e,l),t||(i=[K(window,"keydown",n[18]),K(window,"mousemove",n[12]),K(window,"mouseup",n[13])],t=!0)},p(r,l){r[4]?s?s.p(r,l):(s=En(r),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},i:le,o:le,d(r){r&&m(e),s&&s.d(r),t=!1,$e(i)}}}function ke(n){return n.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!1})}function rs(n,e,t){let i,s,r,l,o,c,a,u,f,v,_,p;Ae(n,Wt,H=>t(4,_=H)),Ae(n,ye,H=>t(25,p=H));let E=0,I=0,A,N,k=null,O=!1,y=null,W=0,T=400,C;function S(){const H=[];if(s&&(a.getTime()-s.start.getTime())/(1e3*60)<.5&&H.push(`Previous ${s.name} will be removed (< 30 sec)`),r){const ee=u;(r.finish.getTime()-ee.getTime())/(1e3*60)<.5&&H.push(`Next ${r.name} will be removed (< 30 sec)`)}return H}function M(H,ee){const Ee=H.getTime()-l.getTime(),de=ee.getTime()-H.getTime(),Ye=Ee/c*100,Je=de/c*100;return{left:`${Ye}%`,width:`${Je}%`}}function g(H,ee){O=!0,y=H,W=ee.clientX,C&&(T=C.offsetWidth),ee.preventDefault()}function B(H){if(!O||!y)return;const Ee=(H.clientX-W)/T*c,de=Math.round(Ee/(60*1e3));y==="start"?t(19,E=de):t(20,I=de)}function V(){O=!1,y=null}function L(H){return H.name===Ve.WORK}function J(){if(_){if(a>=u){alert("Start time must be before finish time");return}v.length>0&&!confirm(`Warning:
${v.join(`
`)}

Continue with save?`)||(ye.update(H=>{const ee=H.timerHistory.list.findIndex(Y=>Y.start.getTime()===_.start.getTime());if(ee===-1)return H;const Ee=H.timerHistory.list[ee],de=[];if(ee>0){const Y=H.timerHistory.list[ee-1],Ie=Ee.start.getTime();if(a.getTime()!==Ie){const Ue=new Date(a);if((Ue.getTime()-Y.start.getTime())/1e3<30)de.push(ee-1);else{const Re=new je(Y.value,Y.name,Y.start,Ue);H.timerHistory.list[ee-1]=Re}}}if(ee<H.timerHistory.list.length-1){const Y=H.timerHistory.list[ee+1],Ie=Ee.finish.getTime();if(u.getTime()!==Ie){const Ue=new Date(u);if((Y.finish.getTime()-Ue.getTime())/1e3<30)de.push(ee+1);else{const Re=new je(Y.value,Y.name,Ue,Y.finish);H.timerHistory.list[ee+1]=Re}}}de.sort((Y,Ie)=>Ie-Y).forEach(Y=>{H.timerHistory.list.splice(Y,1)});const Ye=ee-de.filter(Y=>Y<ee).length,Je=new je(Ee.value,Ee.name,a,u);return H.timerHistory.list[Ye]=Je,H}),mt())}}function z(){mt()}function De(){_&&confirm("Delete this timer?")&&(ye.update(H=>H.remove(_.start)),mt())}function x(H){H.key==="Escape"&&mt()}function j(H){en.call(this,n,H)}function q(H){en.call(this,n,H)}const U=H=>g("start",H),oe=H=>g("end",H);function ne(H){We[H?"unshift":"push"](()=>{C=H,t(5,C)})}return n.$$.update=()=>{n.$$.dirty[0]&33554448&&t(24,i=_?p.timerHistory.list.findIndex(H=>H.start.getTime()===_.start.getTime()):-1),n.$$.dirty[0]&50331648&&t(8,s=i>0?p.timerHistory.list[i-1]:null),n.$$.dirty[0]&50331648&&t(7,r=i>=0&&i<p.timerHistory.list.length-1?p.timerHistory.list[i+1]:null),n.$$.dirty[0]&8388624&&_&&_.start.getTime()!==k&&(t(23,k=_.start.getTime()),t(21,A=_.start instanceof Date?_.start:new Date(_.start)),t(22,N=_.finish instanceof Date?_.finish:new Date(_.finish)),t(19,E=0),t(20,I=0)),n.$$.dirty[0]&2097152&&t(2,l=A?new Date(A.getTime()-30*60*1e3):new Date),n.$$.dirty[0]&4194304&&t(3,o=N?new Date(N.getTime()+30*60*1e3):new Date),n.$$.dirty[0]&12&&(c=o.getTime()-l.getTime()),n.$$.dirty[0]&16&&(_||t(23,k=null)),n.$$.dirty[0]&2621440&&t(1,a=A?new Date(A.getTime()+E*60*1e3):new Date),n.$$.dirty[0]&5242880&&t(0,u=N?new Date(N.getTime()+I*60*1e3):new Date),n.$$.dirty[0]&19&&t(9,f=_?Math.round((u.getTime()-a.getTime())/(1e3*60)):0)},t(6,v=S()),[u,a,l,o,_,C,v,r,s,f,M,g,B,V,L,J,z,De,x,E,I,A,N,k,i,p,j,q,U,oe,ne]}class os extends we{constructor(e){super(),Te(this,e,rs,ls,be,{},null,[-1,-1])}}function as(n){let e,t,i,s,r,l,o,c,a,u;return{c(){e=b("div"),t=b("button"),i=Z(n[1]),r=$(),l=b("button"),o=Z(n[2]),this.h()},l(f){e=w(f,"DIV",{class:!0});var v=D(e);t=w(v,"BUTTON",{class:!0});var _=D(t);i=Q(_,n[1]),_.forEach(m),r=R(v),l=w(v,"BUTTON",{class:!0});var p=D(l);o=Q(p,n[2]),p.forEach(m),v.forEach(m),this.h()},h(){d(t,"class",s="tab "+(n[0]?"":"active")+" svelte-1hgfxul"),d(l,"class",c="tab "+(n[0]?"active":"")+" svelte-1hgfxul"),d(e,"class","tabs-container svelte-1hgfxul")},m(f,v){P(f,e,v),h(e,t),h(t,i),h(e,r),h(e,l),h(l,o),a||(u=[K(t,"click",n[3]),K(l,"click",n[4])],a=!0)},p(f,[v]){v&2&&re(i,f[1]),v&1&&s!==(s="tab "+(f[0]?"":"active")+" svelte-1hgfxul")&&d(t,"class",s),v&4&&re(o,f[2]),v&1&&c!==(c="tab "+(f[0]?"active":"")+" svelte-1hgfxul")&&d(l,"class",c)},i:le,o:le,d(f){f&&m(e),a=!1,$e(u)}}}function cs(n,e,t){let{checked:i=!1}=e,{leftLabel:s=""}=e,{rightLabel:r=""}=e;const l=()=>t(0,i=!1),o=()=>t(0,i=!0);return n.$$set=c=>{"checked"in c&&t(0,i=c.checked),"leftLabel"in c&&t(1,s=c.leftLabel),"rightLabel"in c&&t(2,r=c.rightLabel)},[i,s,r,l,o]}class us extends we{constructor(e){super(),Te(this,e,cs,as,be,{checked:0,leftLabel:1,rightLabel:2})}}function Nn(n,e,t){const i=n.slice();return i[8]=e[t],i}function fs(n){let e,t,i=[],s=new Map,r,l=n[0].active&&Vn(n),o=Ne([...n[1]].reverse());const c=a=>a[8].start;for(let a=0;a<o.length;a+=1){let u=Nn(n,o,a),f=c(u);s.set(f,i[a]=An(f,u))}return{c(){e=b("div"),l&&l.c(),t=$();for(let a=0;a<i.length;a+=1)i[a].c();this.h()},l(a){e=w(a,"DIV",{class:!0});var u=D(e);l&&l.l(u),t=R(u);for(let f=0;f<i.length;f+=1)i[f].l(u);u.forEach(m),this.h()},h(){d(e,"class","logs svelte-rjdqds")},m(a,u){P(a,e,u),l&&l.m(e,null),h(e,t);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(e,null);r=!0},p(a,u){a[0].active?l?(l.p(a,u),u&1&&G(l,1)):(l=Vn(a),l.c(),G(l,1),l.m(e,t)):l&&(Ke(),X(l,1,1,()=>{l=null}),Xe()),u&2&&(o=Ne([...a[1]].reverse()),Ke(),i=zn(i,u,c,1,a,o,s,e,ti,An,null,Nn),Xe())},i(a){if(!r){G(l);for(let u=0;u<o.length;u+=1)G(i[u]);r=!0}},o(a){X(l);for(let u=0;u<i.length;u+=1)X(i[u]);r=!1},d(a){a&&m(e),l&&l.d();for(let u=0;u<i.length;u+=1)i[u].d()}}}function ds(n){let e,t;return e=new ss({props:{timers:n[1],activeTimer:n[0].active}}),{c(){ae(e.$$.fragment)},l(i){ce(e.$$.fragment,i)},m(i,s){ue(e,i,s),t=!0},p(i,s){const r={};s&2&&(r.timers=i[1]),s&1&&(r.activeTimer=i[0].active),e.$set(r)},i(i){t||(G(e.$$.fragment,i),t=!0)},o(i){X(e.$$.fragment,i),t=!1},d(i){fe(e,i)}}}function Vn(n){let e,t;const i=[n[0].active,{topLog:!0}];let s={};for(let r=0;r<i.length;r+=1)s=qe(s,i[r]);return e=new Yn({props:s}),{c(){ae(e.$$.fragment)},l(r){ce(e.$$.fragment,r)},m(r,l){ue(e,r,l),t=!0},p(r,l){const o=l&1?Dt(i,[Gn(r[0].active),i[1]]):{};e.$set(o)},i(r){t||(G(e.$$.fragment,r),t=!0)},o(r){X(e.$$.fragment,r),t=!1},d(r){fe(e,r)}}}function An(n,e){let t,i,s;const r=[e[8],{topLog:!1}];function l(){return e[6](e[8])}let o={};for(let c=0;c<r.length;c+=1)o=qe(o,r[c]);return i=new Yn({props:o}),i.$on("click",l),i.$on("remove",e[7]),{key:n,first:null,c(){t=pe(),ae(i.$$.fragment),this.h()},l(c){t=pe(),ce(i.$$.fragment,c),this.h()},h(){this.first=t},m(c,a){P(c,t,a),ue(i,c,a),s=!0},p(c,a){e=c;const u=a&2?Dt(r,[Gn(e[8]),r[1]]):{};i.$set(u)},i(c){s||(G(i.$$.fragment,c),s=!0)},o(c){X(i.$$.fragment,c),s=!1},d(c){c&&m(t),fe(i,c)}}}function hs(n){let e,t,i,s,r="Clear logs",l,o,c="Active time: ",a,u=rn(n[3])+"",f,v,_,p,E,I,A,N,k,O,y,W,T;e=new os({});function C(V){n[5](V)}let S={leftLabel:"Logs",rightLabel:"Graph"};n[2]!==void 0&&(S.checked=n[2]),E=new us({props:S}),We.push(()=>Bt(E,"checked",C));const M=[ds,fs],g=[];function B(V,L){return V[2]?0:1}return k=B(n),O=g[k]=M[k](n),{c(){ae(e.$$.fragment),t=$(),i=b("div"),s=b("button"),s.textContent=r,l=$(),o=b("span"),o.textContent=c,a=b("span"),f=Z(u),v=$(),_=b("div"),p=b("div"),ae(E.$$.fragment),A=$(),N=b("div"),O.c(),this.h()},l(V){ce(e.$$.fragment,V),t=R(V),i=w(V,"DIV",{class:!0});var L=D(i);s=w(L,"BUTTON",{class:!0,"data-svelte-h":!0}),se(s)!=="svelte-1renoko"&&(s.textContent=r),l=R(L),o=w(L,"SPAN",{class:!0,"data-svelte-h":!0}),se(o)!=="svelte-18pz33x"&&(o.textContent=c),a=w(L,"SPAN",{class:!0});var J=D(a);f=Q(J,u),J.forEach(m),L.forEach(m),v=R(V),_=w(V,"DIV",{class:!0});var z=D(_);p=w(z,"DIV",{class:!0});var De=D(p);ce(E.$$.fragment,De),De.forEach(m),A=R(z),N=w(z,"DIV",{class:!0});var x=D(N);O.l(x),x.forEach(m),z.forEach(m),this.h()},h(){d(s,"class","clear svelte-rjdqds"),d(o,"class","svelte-rjdqds"),d(a,"class","svelte-rjdqds"),d(i,"class","header svelte-rjdqds"),d(p,"class","tabs-header svelte-rjdqds"),d(N,"class","content-wrapper svelte-rjdqds"),d(_,"class","content-section svelte-rjdqds")},m(V,L){ue(e,V,L),P(V,t,L),P(V,i,L),h(i,s),h(i,l),h(i,o),h(i,a),h(a,f),P(V,v,L),P(V,_,L),h(_,p),ue(E,p,null),h(_,A),h(_,N),g[k].m(N,null),y=!0,W||(T=K(s,"click",n[4]),W=!0)},p(V,[L]){(!y||L&8)&&u!==(u=rn(V[3])+"")&&re(f,u);const J={};!I&&L&4&&(I=!0,J.checked=V[2],Ut(()=>I=!1)),E.$set(J);let z=k;k=B(V),k===z?g[k].p(V,L):(Ke(),X(g[z],1,1,()=>{g[z]=null}),Xe(),O=g[k],O?O.p(V,L):(O=g[k]=M[k](V),O.c()),G(O,1),O.m(N,null))},i(V){y||(G(e.$$.fragment,V),G(E.$$.fragment,V),G(O),y=!0)},o(V){X(e.$$.fragment,V),X(E.$$.fragment,V),X(O),y=!1},d(V){V&&(m(t),m(i),m(v),m(_)),fe(e,V),fe(E),g[k].d(),W=!1,T()}}}function ms(n,e,t){let i,s;Ae(n,ye,f=>t(0,i=f)),Ae(n,Ci,f=>t(3,s=f));var r=[];let l=!0;const o=()=>ye.update(f=>f.clearLogs());function c(f){l=f,t(2,l)}const a=f=>vt(f),u=f=>ye.update(v=>v.remove(f.detail));return n.$$.update=()=>{var f;n.$$.dirty&1&&t(1,r=((f=i==null?void 0:i.timerHistory)==null?void 0:f.list)||[])},[i,r,l,s,o,c,a,u]}class vs extends we{constructor(e){super(),Te(this,e,ms,hs,be,{})}}function _s(n){const e=n-1;return e*e*e+1}function wt(n,{delay:e=0,duration:t=400,easing:i=_s,x:s=0,y:r=0,opacity:l=0}={}){const o=getComputedStyle(n),c=+o.opacity,a=o.transform==="none"?"":o.transform,u=c*(1-l),[f,v]=tn(s),[_,p]=tn(r);return{delay:e,duration:t,easing:i,css:(E,I)=>`
			transform: ${a} translate(${(1-E)*f}${v}, ${(1-E)*_}${p});
			opacity: ${c-u*I}`}}function gs(n){let e,t,i,s,r,l,o,c,a,u,f=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 24 24"},{fill:"none"},{stroke:"currentColor"},{"stroke-width":"2"},{"stroke-linecap":"round"},{"stroke-linejoin":"round"},n[0]],v={};for(let _=0;_<f.length;_+=1)v=qe(v,f[_]);return{c(){e=Oe("svg"),t=Oe("circle"),i=Oe("line"),s=Oe("line"),r=Oe("line"),l=Oe("line"),o=Oe("line"),c=Oe("line"),a=Oe("line"),u=Oe("line"),this.h()},l(_){e=Me(_,"svg",{xmlns:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0});var p=D(e);t=Me(p,"circle",{cx:!0,cy:!0,r:!0}),D(t).forEach(m),i=Me(p,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),D(i).forEach(m),s=Me(p,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),D(s).forEach(m),r=Me(p,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),D(r).forEach(m),l=Me(p,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),D(l).forEach(m),o=Me(p,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),D(o).forEach(m),c=Me(p,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),D(c).forEach(m),a=Me(p,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),D(a).forEach(m),u=Me(p,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),D(u).forEach(m),p.forEach(m),this.h()},h(){d(t,"cx","12"),d(t,"cy","12"),d(t,"r","5"),d(i,"x1","12"),d(i,"y1","1"),d(i,"x2","12"),d(i,"y2","3"),d(s,"x1","12"),d(s,"y1","21"),d(s,"x2","12"),d(s,"y2","23"),d(r,"x1","4.22"),d(r,"y1","4.22"),d(r,"x2","5.64"),d(r,"y2","5.64"),d(l,"x1","18.36"),d(l,"y1","18.36"),d(l,"x2","19.78"),d(l,"y2","19.78"),d(o,"x1","1"),d(o,"y1","12"),d(o,"x2","3"),d(o,"y2","12"),d(c,"x1","21"),d(c,"y1","12"),d(c,"x2","23"),d(c,"y2","12"),d(a,"x1","4.22"),d(a,"y1","19.78"),d(a,"x2","5.64"),d(a,"y2","18.36"),d(u,"x1","18.36"),d(u,"y1","5.64"),d(u,"x2","19.78"),d(u,"y2","4.22"),pt(e,v)},m(_,p){P(_,e,p),h(e,t),h(e,i),h(e,s),h(e,r),h(e,l),h(e,o),h(e,c),h(e,a),h(e,u)},p(_,[p]){pt(e,v=Dt(f,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 24 24"},{fill:"none"},{stroke:"currentColor"},{"stroke-width":"2"},{"stroke-linecap":"round"},{"stroke-linejoin":"round"},p&1&&_[0]]))},i:le,o:le,d(_){_&&m(e)}}}function ps(n,e,t){const i=[];let s=kt(e,i);return n.$$set=r=>{e=qe(qe({},e),Hn(r)),t(0,s=kt(e,i))},[s]}class ks extends we{constructor(e){super(),Te(this,e,ps,gs,be,{})}}function bs(n){let e,t,i=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 24 24"},{fill:"none"},{stroke:"currentColor"},{"stroke-width":"2"},{"stroke-linecap":"round"},{"stroke-linejoin":"round"},n[0]],s={};for(let r=0;r<i.length;r+=1)s=qe(s,i[r]);return{c(){e=Oe("svg"),t=Oe("path"),this.h()},l(r){e=Me(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0});var l=D(e);t=Me(l,"path",{d:!0}),D(t).forEach(m),l.forEach(m),this.h()},h(){d(t,"d","M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"),pt(e,s)},m(r,l){P(r,e,l),h(e,t)},p(r,[l]){pt(e,s=Dt(i,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 24 24"},{fill:"none"},{stroke:"currentColor"},{"stroke-width":"2"},{"stroke-linecap":"round"},{"stroke-linejoin":"round"},l&1&&r[0]]))},i:le,o:le,d(r){r&&m(e)}}}function ws(n,e,t){const i=[];let s=kt(e,i);return n.$$set=r=>{e=qe(qe({},e),Hn(r)),t(0,s=kt(e,i))},[s]}class Ts extends we{constructor(e){super(),Te(this,e,ws,bs,be,{})}}function Ss(n){let e,t,i,s,r;return t=new ks({}),{c(){e=b("div"),ae(t.$$.fragment),this.h()},l(l){e=w(l,"DIV",{class:!0});var o=D(e);ce(t.$$.fragment,o),o.forEach(m),this.h()},h(){d(e,"class","icon sun svelte-1u641rb")},m(l,o){P(l,e,o),ue(t,e,null),r=!0},i(l){r||(G(t.$$.fragment,l),l&&Un(()=>{r&&(s&&s.end(1),i=Bn(e,wt,{y:20,duration:400}),i.start())}),r=!0)},o(l){X(t.$$.fragment,l),i&&i.invalidate(),l&&(s=Fn(e,wt,{y:-20,duration:400})),r=!1},d(l){l&&m(e),fe(t),l&&s&&s.end()}}}function Ds(n){let e,t,i,s,r;return t=new Ts({}),{c(){e=b("div"),ae(t.$$.fragment),this.h()},l(l){e=w(l,"DIV",{class:!0});var o=D(e);ce(t.$$.fragment,o),o.forEach(m),this.h()},h(){d(e,"class","icon moon svelte-1u641rb")},m(l,o){P(l,e,o),ue(t,e,null),r=!0},i(l){r||(G(t.$$.fragment,l),l&&Un(()=>{r&&(s&&s.end(1),i=Bn(e,wt,{y:20,duration:400}),i.start())}),r=!0)},o(l){X(t.$$.fragment,l),i&&i.invalidate(),l&&(s=Fn(e,wt,{y:-20,duration:400})),r=!1},d(l){l&&m(e),fe(t),l&&s&&s.end()}}}function Es(n){let e,t,i,s,r,l,o,c;const a=[Ds,Ss],u=[];function f(v,_){return v[0]?0:1}return i=f(n),s=u[i]=a[i](n),{c(){e=b("button"),t=b("div"),s.c(),this.h()},l(v){e=w(v,"BUTTON",{class:!0,"aria-label":!0,title:!0});var _=D(e);t=w(_,"DIV",{class:!0});var p=D(t);s.l(p),p.forEach(m),_.forEach(m),this.h()},h(){d(t,"class","icon-container svelte-1u641rb"),d(e,"class","theme-toggle svelte-1u641rb"),d(e,"aria-label","Toggle dark mode"),d(e,"title",r=n[0]?"Switch to light mode":"Switch to dark mode")},m(v,_){P(v,e,_),h(e,t),u[i].m(t,null),l=!0,o||(c=K(e,"click",n[1]),o=!0)},p(v,[_]){let p=i;i=f(v),i!==p&&(Ke(),X(u[p],1,1,()=>{u[p]=null}),Xe(),s=u[i],s||(s=u[i]=a[i](v),s.c()),G(s,1),s.m(t,null)),(!l||_&1&&r!==(r=v[0]?"Switch to light mode":"Switch to dark mode"))&&d(e,"title",r)},i(v){l||(G(s),l=!0)},o(v){X(s),l=!1},d(v){v&&m(e),u[i].d(),o=!1,c()}}}function Is(n,e,t){let i;Ae(n,Lt,r=>t(0,i=r));function s(){Lt.update(r=>!r)}return[i,s]}class ys extends we{constructor(e){super(),Te(this,e,Is,Es,be,{})}}function Cs(n){let e,t,i,s,r,l="Let's Pomodoro!",o,c,a,u,f,v,_,p,E,I;a=new ys({});function A(k){n[9](k)}let N={debugFlag:n[0]};return n[1]!==void 0&&(N.remainedSeconds=n[1]),f=new qi({props:N}),We.push(()=>Bt(f,"remainedSeconds",A)),f.$on("timer",n[4]),f.$on("current",n[5]),f.$on("cancel",n[6]),E=new vs({}),{c(){e=b("main"),t=b("div"),i=b("div"),s=b("div"),r=b("h1"),r.textContent=l,o=$(),c=b("div"),ae(a.$$.fragment),u=$(),ae(f.$$.fragment),_=$(),p=b("div"),ae(E.$$.fragment),this.h()},l(k){e=w(k,"MAIN",{class:!0});var O=D(e);t=w(O,"DIV",{class:!0});var y=D(t);i=w(y,"DIV",{class:!0});var W=D(i);s=w(W,"DIV",{class:!0});var T=D(s);r=w(T,"H1",{class:!0,"data-svelte-h":!0}),se(r)!=="svelte-cxq7y3"&&(r.textContent=l),o=R(T),c=w(T,"DIV",{class:!0});var C=D(c);ce(a.$$.fragment,C),C.forEach(m),T.forEach(m),u=R(W),ce(f.$$.fragment,W),W.forEach(m),_=R(y),p=w(y,"DIV",{class:!0});var S=D(p);ce(E.$$.fragment,S),S.forEach(m),y.forEach(m),O.forEach(m),this.h()},h(){d(r,"class","logo svelte-k3ou4y"),d(c,"class","toggle-wrapper svelte-k3ou4y"),d(s,"class","header-row svelte-k3ou4y"),d(i,"class","pomodoro svelte-k3ou4y"),d(p,"class","logs svelte-k3ou4y"),d(t,"class","container svelte-k3ou4y"),d(e,"class","svelte-k3ou4y"),Pe(e,"dark",n[3])},m(k,O){P(k,e,O),h(e,t),h(t,i),h(i,s),h(s,r),h(s,o),h(s,c),ue(a,c,null),h(i,u),ue(f,i,null),h(t,_),h(t,p),ue(E,p,null),I=!0},p(k,O){const y={};O&1&&(y.debugFlag=k[0]),!v&&O&2&&(v=!0,y.remainedSeconds=k[1],Ut(()=>v=!1)),f.$set(y),(!I||O&8)&&Pe(e,"dark",k[3])},i(k){I||(G(a.$$.fragment,k),G(f.$$.fragment,k),G(E.$$.fragment,k),I=!0)},o(k){X(a.$$.fragment,k),X(f.$$.fragment,k),X(E.$$.fragment,k),I=!1},d(k){k&&m(e),fe(a),fe(f),fe(E)}}}function Os(n){let e;return{c(){e=b("main"),this.h()},l(t){e=w(t,"MAIN",{style:!0,class:!0}),D(e).forEach(m),this.h()},h(){F(e,"background-color","gray"),F(e,"height","90 vh"),d(e,"class","svelte-k3ou4y")},m(t,i){P(t,e,i)},p:le,i:le,o:le,d(t){t&&m(e)}}}function Ms(n){let e,t,i,s,r;const l=[Os,Cs],o=[];function c(a,u){return a[2]?0:1}return e=c(n),t=o[e]=l[e](n),{c(){t.c(),i=$(),s=pe()},l(a){t.l(a),i=R(a),s=pe()},m(a,u){o[e].m(a,u),P(a,i,u),P(a,s,u),r=!0},p(a,[u]){let f=e;e=c(a),e===f?o[e].p(a,u):(Ke(),X(o[f],1,1,()=>{o[f]=null}),Xe(),t=o[e],t?t.p(a,u):(t=o[e]=l[e](a),t.c()),G(t,1),t.m(i.parentNode,i))},i(a){r||(G(t),r=!0)},o(a){X(t),r=!1},d(a){a&&(m(i),m(s)),o[e].d(a)}}}function Ns(n,e,t){let i,s;Ae(n,Lt,p=>t(3,i=p)),Ae(n,ye,p=>t(8,s=p));let r=!1,l,o=!0,c;xn(()=>{c&&clearInterval(c)});function a(p){ye.update(E=>E.addTimer(p.detail))}function u(p){ye.update(E=>E.setActive(p.detail))}function f(){ye.update(p=>p.resetActive())}Ln(()=>{if(console.log("get darkmode:",i),s!=null&&s.active){const p=s.getRecoveryStatus(new Date,tt(r).timersMultiplier);p.shouldArchive?(ye.update(E=>(E.active&&E.addTimer(E.active),E)),console.log("Timer expired beyond cap while closed, archived to history")):p.shouldResume?(He.start(p.remainingMinutes,s.active.name,r),console.log("Resumed timer with",p.remainingMinutes,"minutes remaining")):console.log("Timer in overtime, resumed background monitoring")}t(2,o=!1)});function v(p){l=p,t(1,l)}function _(){r=this.checked,t(0,r)}return n.$$.update=()=>{n.$$.dirty&259&&s&&l!==void 0&&ye.update(p=>(p.tick(new Date,tt(r).timersMultiplier),p)),n.$$.dirty&385&&(s!=null&&s.active?c||t(7,c=setInterval(()=>{ye.update(p=>{const E=tt(r).timersMultiplier;return p.tick(new Date,E)&&He.stop(),p})},1e3)):c&&(clearInterval(c),t(7,c=void 0)))},[r,l,o,i,a,u,f,c,s,v,_]}class $s extends we{constructor(e){super(),Te(this,e,Ns,Ms,be,{})}}export{$s as component};
