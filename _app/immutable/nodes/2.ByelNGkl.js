var Bn=Object.defineProperty;var Fn=(n,e,t)=>e in n?Bn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var me=(n,e,t)=>Fn(n,typeof e!="symbol"?e+"":e,t);import{r as Ae,s as ke,c as yn,e as k,b as P,v as Ue,d as S,f as M,i as m,j as V,y as g,k as $,T as F,u as Cn,g as On,a as Mn,t as W,h as G,z as U,l as h,m as x,U as Qe,V as Wt,W as He,n as ve,X as ee,Y as ht,A as Ge,Z as Gt,o as Ie,_ as Tt,$ as zn,x as Nn,a0 as Nt,H as Wn,F as qt,a1 as Kt,a2 as Xt,a3 as An}from"../chunks/scheduler.Dcm1gJQ0.js";import{a as B,t as H,S as Se,i as De,b as ce,d as ue,m as fe,e as he,g as Be,c as Fe,f as At,h as rt}from"../chunks/index.DvOo2HUA.js";import{b as Ze,w as vt,d as gt}from"../chunks/paths.BecNp0-I.js";function Ee(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Gn(n,e){n.d(1),e.delete(n.key)}function qn(n,e){B(n,1,1,()=>{e.delete(n.key)})}function jn(n,e,t,i,s,r,l,o,u,a,c,f){let d=n.length,v=r.length,w=d;const y={};for(;w--;)y[n[w].key]=w;const _=[],T=new Map,I=new Map,b=[];for(w=v;w--;){const A=f(s,r,w),p=t(A);let D=l.get(p);D?b.push(()=>D.p(A,e)):(D=a(p,A),D.c()),T.set(p,_[w]=D),p in y&&I.set(p,Math.abs(w-y[p]))}const O=new Set,C=new Set;function N(A){H(A,1),A.m(o,c),l.set(A.key,A),c=A.first,v--}for(;d&&v;){const A=_[v-1],p=n[d-1],D=A.key,E=p.key;A===p?(c=A.first,d--,v--):T.has(E)?!l.has(D)||O.has(D)?N(A):C.has(E)?d--:I.get(D)>I.get(E)?(C.add(D),N(A)):(O.add(E),d--):(u(p,l),d--)}for(;d--;){const A=n[d];T.has(A.key)||u(A,l)}for(;v;)N(_[v-1]);return Ae(b),_}function Pn(n,e){const t={},i={},s={$$scope:1};let r=n.length;for(;r--;){const l=n[r],o=e[r];if(o){for(const u in l)u in o||(i[u]=1);for(const u in o)s[u]||(t[u]=o[u],s[u]=1);n[r]=o}else for(const u in l)s[u]=1}for(const l in i)l in t||(t[l]=void 0);return t}function Vn(n){return typeof n=="object"&&n!==null?n:{}}const Kn=Ze+"/ring2.wav";let Ln=function(){},et,kt,$n=.5,ot;if(typeof window<"u"){let n=window.AudioContext||window.webkitAudioContext;et=new n,fetch(Kn).then(e=>e.arrayBuffer()).then(e=>et.decodeAudioData(e)).then(e=>{kt=e}).catch(e=>console.error("Error loading sound file:",e)),Ln=function(){if(!kt)return;ot=et.createBufferSource(),ot.buffer=kt;let e=et.createGain();e.gain.value=$n,ot.connect(e),e.connect(et.destination),ot.start(0)}}function jt(){Ln()}function Xn(n,e){$n=n,jt()}function Jt(n){let e,t;return{c(){e=k("div"),t=W(n[0]),this.h()},l(i){e=S(i,"DIV",{style:!0,class:!0});var s=M(e);t=G(s,n[0]),s.forEach(m),this.h()},h(){U(e,"top",n[3]+"px"),U(e,"left",n[2]+"px"),g(e,"class","tooltip svelte-43gogz")},m(i,s){$(i,e,s),h(e,t)},p(i,s){s&1&&x(t,i[0]),s&8&&U(e,"top",i[3]+"px"),s&4&&U(e,"left",i[2]+"px")},d(i){i&&m(e)}}}function Jn(n){let e,t,i,s,r,l;const o=n[8].default,u=yn(o,n,n[7],null);let a=n[1]&&Jt(n);return{c(){e=k("div"),u&&u.c(),t=P(),a&&a.c(),i=Ue(),this.h()},l(c){e=S(c,"DIV",{"aria-hidden":!0});var f=M(e);u&&u.l(f),f.forEach(m),t=V(c),a&&a.l(c),i=Ue(),this.h()},h(){g(e,"aria-hidden","true")},m(c,f){$(c,e,f),u&&u.m(e,null),$(c,t,f),a&&a.m(c,f),$(c,i,f),s=!0,r||(l=[F(e,"mouseover",n[4]),F(e,"mouseleave",n[6]),F(e,"mousemove",n[5]),F(e,"focus",Yn)],r=!0)},p(c,[f]){u&&u.p&&(!s||f&128)&&Cn(u,o,c,c[7],s?Mn(o,c[7],f,null):On(c[7]),null),c[1]?a?a.p(c,f):(a=Jt(c),a.c(),a.m(i.parentNode,i)):a&&(a.d(1),a=null)},i(c){s||(H(u,c),s=!0)},o(c){B(u,c),s=!1},d(c){c&&(m(e),m(t),m(i)),u&&u.d(c),a&&a.d(c),r=!1,Ae(l)}}}const Yn=function(){};function Zn(n,e,t){let{$$slots:i={},$$scope:s}=e,{title:r=""}=e,l=!1,o,u;function a(d){t(1,l=!0),t(2,o=d.pageX+10),t(3,u=d.pageY+10)}function c(d){t(2,o=d.pageX+10),t(3,u=d.pageY+10)}function f(){t(1,l=!1)}return n.$$set=d=>{"title"in d&&t(0,r=d.title),"$$scope"in d&&t(7,s=d.$$scope)},[r,l,o,u,a,c,f,s,i]}class Pt extends Se{constructor(e){super(),De(this,e,Zn,Jn,ke,{title:0})}}function Yt(n){let e=Math.floor(n/60),t=Math.floor(n%60).toString().padStart(2,"0"),i=e.toString().padStart(2,"0");if(e>60){let s=Math.floor(e/60);return i=Math.floor(e%60).toString().padStart(2,"0"),`${s}:${i}:${t}`}return`${i}:${t}`}function Zt(n){let e=Math.floor(n/60),t=Math.floor(n%60);if(e>60){let i=Math.floor(e/60);return e=Math.floor(e%60),`${i}h ${e} min`}else return e>0?`${e} min`:`${t} sec`}function Qt(n){let e=Math.floor(n/3600);e>0&&(n=n-e*3600);let t=Math.floor(n/60),i=Math.floor(n%60);return e==1?`${e} hour ${t} min`:e>0?`${e} hours ${t} min`:t>=5?`${t} min`:t>1?`${t} min ${i} sec`:`${i} sec`}class Qn{constructor(e,t,i,s=300){me(this,"intervalId",0);me(this,"duration",0);me(this,"start",0);me(this,"remain",0);me(this,"onSec",e=>{});me(this,"onAlarm",()=>{});this.duration=e,this.remain=e,e>0&&(this.onSec=t,this.onAlarm=i,this.start=Date.now(),this.intervalId=setInterval(()=>{const r=Math.ceil((Date.now()-this.start)/1e3);let l=this.duration-r;l!=this.remain&&(t(this.remain),this.remain=l,this.remain<=0&&(this.onAlarm(),clearInterval(this.intervalId)))},s))}stop(){clearInterval(this.intervalId)}}function xn(n){let e,t=Yt(n[0])+"",i,s,r;return{c(){e=k("button"),i=W(t),this.h()},l(l){e=S(l,"BUTTON",{id:!0,class:!0});var o=M(e);i=G(o,t),o.forEach(m),this.h()},h(){g(e,"id","watch"),g(e,"class","svelte-1kj7nhv")},m(l,o){$(l,e,o),h(e,i),s||(r=F(e,"click",n[1]),s=!0)},p(l,o){o&1&&t!==(t=Yt(l[0])+"")&&x(i,t)},d(l){l&&m(e),s=!1,r()}}}function ei(n){let e,t;return e=new Pt({props:{title:"stop timer",$$slots:{default:[xn]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(i){ue(e.$$.fragment,i)},m(i,s){fe(e,i,s),t=!0},p(i,[s]){const r={};s&257&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(H(e.$$.fragment,i),t=!0)},o(i){B(e.$$.fragment,i),t=!1},d(i){he(e,i)}}}function ti(n,e,t){let{time:i=0}=e,{remainedSeconds:s=0}=e;var r;const l=Qe();function o(f){r!=null&&r.stop(),r=new Qn(f,u,a),t(0,s=f)}function u(f){t(0,s=f)}function a(){jt(),l("alarming")}function c(){l("stop")}return n.$$set=f=>{"time"in f&&t(2,i=f.time),"remainedSeconds"in f&&t(0,s=f.remainedSeconds)},n.$$.update=()=>{n.$$.dirty&4&&o(i)},[s,c,i]}class ni extends Se{constructor(e){super(),De(this,e,ti,ei,ke,{time:2,remainedSeconds:0})}}function ii(n){let e,t,i,s,r,l;return{c(){e=k("button"),t=W(n[1]),i=W(" min"),this.h()},l(o){e=S(o,"BUTTON",{class:!0});var u=M(e);t=G(u,n[1]),i=G(u," min"),u.forEach(m),this.h()},h(){g(e,"class",s=Wt(n[2])+" svelte-8w7xxt"),He(e,"pressed",n[0])},m(o,u){$(o,e,u),h(e,t),h(e,i),r||(l=F(e,"click",n[5]),r=!0)},p(o,[u]){u&2&&x(t,o[1]),u&4&&s!==(s=Wt(o[2])+" svelte-8w7xxt")&&g(e,"class",s),u&5&&He(e,"pressed",o[0])},i:ve,o:ve,d(o){o&&m(e),r=!1,l()}}}function si(n,e,t){const i=Qe();let{value:s}=e,{name:r}=e,{pressed:l=!1}=e;function o(c,f){i("start",{name:c,val:f}),t(0,l=!0)}function u(){t(0,l=!1)}const a=function(){o(r,s)};return n.$$set=c=>{"value"in c&&t(1,s=c.value),"name"in c&&t(2,r=c.name),"pressed"in c&&t(0,l=c.pressed)},[l,s,r,o,u,a]}class Rn extends Se{constructor(e){super(),De(this,e,si,ii,ke,{value:1,name:2,pressed:0,reset:4})}get reset(){return this.$$.ctx[4]}}const pe={WORK:"work",REST:"rest"},li={afterClockIntervalS:3,afterClockTimeoutS:10,timersMultiplier:1},ri={afterClockIntervalS:10,afterClockTimeoutS:60*15,timersMultiplier:1*60};function Ct(n){return n?li:ri}function xt(n,e,t){const i=n.slice();return i[9]=e[t],i[10]=e,i[11]=t,i}const oi=n=>({}),en=n=>({class:"item svelte-1rvg6ah"});function tn(n,e,t){const i=n.slice();return i[9]=e[t],i[12]=e,i[11]=t,i}function nn(n){let e,t=n[11],i,s,r;const l=()=>n[6](e,t),o=()=>n[6](null,t);let u={value:n[9],name:pe.WORK};return e=new Rn({props:u}),l(),e.$on("start",n[2]),{c(){ce(e.$$.fragment),i=P(),s=k("br")},l(a){ue(e.$$.fragment,a),i=V(a),s=S(a,"BR",{})},m(a,c){fe(e,a,c),$(a,i,c),$(a,s,c),r=!0},p(a,c){t!==a[11]&&(o(),t=a[11],l());const f={};e.$set(f)},i(a){r||(H(e.$$.fragment,a),r=!0)},o(a){B(e.$$.fragment,a),r=!1},d(a){a&&(m(i),m(s)),o(),he(e,a)}}}function sn(n){let e,t=n[11],i,s,r;const l=()=>n[7](e,t),o=()=>n[7](null,t);let u={value:n[9],name:pe.REST};return e=new Rn({props:u}),l(),e.$on("start",n[2]),{c(){ce(e.$$.fragment),i=P(),s=k("br")},l(a){ue(e.$$.fragment,a),i=V(a),s=S(a,"BR",{})},m(a,c){fe(e,a,c),$(a,i,c),$(a,s,c),r=!0},p(a,c){t!==a[11]&&(o(),t=a[11],l());const f={};e.$set(f)},i(a){r||(H(e.$$.fragment,a),r=!0)},o(a){B(e.$$.fragment,a),r=!1},d(a){a&&(m(i),m(s)),o(),he(e,a)}}}function ai(n){let e,t,i,s,r="Active",l,o,u,a,c,f,d="Rest",v,w,y,_=Ee(n[1]),T=[];for(let p=0;p<_.length;p+=1)T[p]=nn(tn(n,_,p));const I=p=>B(T[p],1,1,()=>{T[p]=null}),b=n[5].default,O=yn(b,n,n[4],en);let C=Ee(n[1]),N=[];for(let p=0;p<C.length;p+=1)N[p]=sn(xt(n,C,p));const A=p=>B(N[p],1,1,()=>{N[p]=null});return{c(){e=k("div"),t=k("div"),i=k("div"),s=k("span"),s.textContent=r,l=k("br"),o=P();for(let p=0;p<T.length;p+=1)T[p].c();u=P(),O&&O.c(),a=P(),c=k("div"),f=k("span"),f.textContent=d,v=k("br"),w=P();for(let p=0;p<N.length;p+=1)N[p].c();this.h()},l(p){e=S(p,"DIV",{});var D=M(e);t=S(D,"DIV",{class:!0});var E=M(t);i=S(E,"DIV",{class:!0});var j=M(i);s=S(j,"SPAN",{class:!0,"data-svelte-h":!0}),ee(s)!=="svelte-19szg5l"&&(s.textContent=r),l=S(j,"BR",{}),o=V(j);for(let q=0;q<T.length;q+=1)T[q].l(j);j.forEach(m),u=V(E),O&&O.l(E),a=V(E),c=S(E,"DIV",{class:!0});var Y=M(c);f=S(Y,"SPAN",{class:!0,"data-svelte-h":!0}),ee(f)!=="svelte-1gtata5"&&(f.textContent=d),v=S(Y,"BR",{}),w=V(Y);for(let q=0;q<N.length;q+=1)N[q].l(Y);Y.forEach(m),E.forEach(m),D.forEach(m),this.h()},h(){g(s,"class","label svelte-1rvg6ah"),g(i,"class","item svelte-1rvg6ah"),g(f,"class","label svelte-1rvg6ah"),g(c,"class","item svelte-1rvg6ah"),g(t,"class","grid-container svelte-1rvg6ah")},m(p,D){$(p,e,D),h(e,t),h(t,i),h(i,s),h(i,l),h(i,o);for(let E=0;E<T.length;E+=1)T[E]&&T[E].m(i,null);h(t,u),O&&O.m(t,null),h(t,a),h(t,c),h(c,f),h(c,v),h(c,w);for(let E=0;E<N.length;E+=1)N[E]&&N[E].m(c,null);y=!0},p(p,[D]){if(D&7){_=Ee(p[1]);let E;for(E=0;E<_.length;E+=1){const j=tn(p,_,E);T[E]?(T[E].p(j,D),H(T[E],1)):(T[E]=nn(j),T[E].c(),H(T[E],1),T[E].m(i,null))}for(Be(),E=_.length;E<T.length;E+=1)I(E);Fe()}if(O&&O.p&&(!y||D&16)&&Cn(O,b,p,p[4],y?Mn(b,p[4],D,oi):On(p[4]),en),D&7){C=Ee(p[1]);let E;for(E=0;E<C.length;E+=1){const j=xt(p,C,E);N[E]?(N[E].p(j,D),H(N[E],1)):(N[E]=sn(j),N[E].c(),H(N[E],1),N[E].m(c,null))}for(Be(),E=C.length;E<N.length;E+=1)A(E);Fe()}},i(p){if(!y){for(let D=0;D<_.length;D+=1)H(T[D]);H(O,p);for(let D=0;D<C.length;D+=1)H(N[D]);y=!0}},o(p){T=T.filter(Boolean);for(let D=0;D<T.length;D+=1)B(T[D]);B(O,p),N=N.filter(Boolean);for(let D=0;D<N.length;D+=1)B(N[D]);y=!1},d(p){p&&m(e),ht(T,p),O&&O.d(p),ht(N,p)}}}function ci(n,e,t){let{$$slots:i={},$$scope:s}=e;const r=Qe();let l=[],o=[5,10,15,20,25,120];function u(d){r("start",{timer:d.detail.val,name:d.detail.name}),console.log("handleTimerStart")}function a(){l.forEach(d=>{d&&d.reset()})}function c(d,v){Ge[d?"unshift":"push"](()=>{l[v]=d,t(0,l)})}function f(d,v){Ge[d?"unshift":"push"](()=>{l[v+l.length]=d,t(0,l)})}return n.$$set=d=>{"$$scope"in d&&t(4,s=d.$$scope)},[l,o,u,a,s,i,c,f]}class ui extends Se{constructor(e){super(),De(this,e,ci,ai,ke,{clear:3})}get clear(){return this.$$.ctx[3]}}/*! js-cookie v3.0.5 | MIT */function at(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)n[i]=t[i]}return n}var fi={read:function(n){return n[0]==='"'&&(n=n.slice(1,-1)),n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(n){return encodeURIComponent(n).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function Ot(n,e){function t(s,r,l){if(!(typeof document>"u")){l=at({},e,l),typeof l.expires=="number"&&(l.expires=new Date(Date.now()+l.expires*864e5)),l.expires&&(l.expires=l.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var u in l)l[u]&&(o+="; "+u,l[u]!==!0&&(o+="="+l[u].split(";")[0]));return document.cookie=s+"="+n.write(r,s)+o}}function i(s){if(!(typeof document>"u"||arguments.length&&!s)){for(var r=document.cookie?document.cookie.split("; "):[],l={},o=0;o<r.length;o++){var u=r[o].split("="),a=u.slice(1).join("=");try{var c=decodeURIComponent(u[0]);if(l[c]=n.read(a,c),s===c)break}catch{}}return s?l[s]:l}}return Object.create({set:t,get:i,remove:function(s,r){t(s,"",at({},r,{expires:-1}))},withAttributes:function(s){return Ot(this.converter,at({},this.attributes,s))},withConverter:function(s){return Ot(at({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(n)}})}var dt=Ot(fi,{path:"/"});class Oe{constructor(e=0,t="",i=new Date,s=new Date){me(this,"start");me(this,"finish");me(this,"name");me(this,"value");this.start=i,this.finish=s,this.name=t,this.value=e}setDuration(e){this.finish=new Date(this.start.getTime()+e*1e3)}durationS(){return(this.finish.getTime()-this.start.getTime())/1e3}}const oe={RUNNING:"RUNNING",STOPPED:"STOPPED",WAITING_FOR_STOP:"WAITING_FOR_STOP"};var Re=(n=>(n[n.EMIT=1]="EMIT",n[n.DO_NOT_EMIT=2]="DO_NOT_EMIT",n))(Re||{});let Hn=60,hi=5*60;function Vt(n,e,t=Hn){return(e.start.getTime()-n.finish.getTime())/1e3>t}function ln(n,e=Hn){var t=[],i=0;if(n.length<=1)return n;t.push(n[0]),i=0;for(let s=1;s<n.length;s++){const r=n[s];if(t[i].name!=r.name){t.push(r),i++;continue}Vt(t[i],r,e)?(t.push(r),i++):t[i].finish=r.finish}return t}function St(n,e=pe.REST,t=hi){var i=[],s=0;if(n.length<=1)return n;i.push(n[0]),s=0;for(let l=1;l<n.length;l++){const o=n[l];if(Vt(i[s],o,t)){var r=new Oe(0,e,i[s].finish,o.start);i.push(r),s++}i.push(o),s++}return i}function di(n){return n.forEach(e=>{if(!("name"in e&&"start"in e&&"finish"in e))return!1}),!0}function mi(n){let e=[];try{const t=JSON.parse(n);let i=[];di(t)&&t.forEach(s=>{i.push(new Oe(0,s.name,new Date(s.start*1e3),new Date(s.finish*1e3)))}),console.log("deserialized logs:",i),e=i}catch{e=[]}return new Mt(e)}class Mt{constructor(e){me(this,"additionalS",0);me(this,"list",[]);this.list=St(e,pe.REST)}normalize(e){var t=St(this.list,pe.REST);return e&&(t=ln(t)),t}serialize(){let e=[];return this.list.forEach(t=>{e.push({name:t.name,start:Math.floor(t.start.getTime()/1e3),finish:Math.floor(t.finish.getTime()/1e3)})}),console.log("Serializing logs:",JSON.stringify(e)),JSON.stringify(e)}addTimer(e){return this.list.length>0&&this.list[this.list.length-1].start==e.start?(this.list[this.list.length-1].finish=e.finish,this.list=this.list,this):(this.list.push(e),this.list=ln(this.list,0),this)}changeLineType(e){return this.list.forEach(t=>{t.start===e&&(t.name=t.name===pe.REST?pe.WORK:pe.REST)}),this}remove(e){for(var t=0;t<this.list.length;)this.list[t].start===e?this.list.splice(t,1):++t}total(){let e=0;return this.list.forEach(t=>{t.name==pe.WORK&&(e+=t.durationS())}),e}fillGaps(e=new Oe){if(this.list=St(this.list),this.list.length>0){let t=this.list[this.list.length-1];Vt(t,e)&&this.list.push(new Oe(0,pe.REST,t.finish,e.start))}return this}addDurSec(e){return this.additionalS+=e,this}getAdditional(){return this.additionalS}}class vi{constructor(){me(this,"timerHistory");me(this,"active");this.timerHistory=new Mt([])}addTimer(e){return this.active=void 0,this.timerHistory.addTimer(e),this}remove(e){return this.timerHistory.remove(e),this}changeLineType(e){return this.timerHistory.changeLineType(e),this}clearLogs(){return this.timerHistory=new Mt([]),this}resetActive(){return this.active=void 0,this}setActiveDur(e){return this.active?(this.active.finish=new Date,this):this}setActive(e){return this.active=e,this.timerHistory.fillGaps(),this}totalTime(){let e=this.timerHistory.total();return this.active&&this.active.name==pe.WORK&&(e+=this.active.durationS()),e}}function Lt(n,e,t={storage:"cookies",cookieExpireDays:31}){const i=t.serialize||JSON.stringify,s=t.deserialize||JSON.parse;let r=e;try{const o=t.storage==="cookies"?dt.get(n):localStorage.getItem(n);o&&(r=s(o))}catch(o){console.warn(`Failed to load ${n} from ${t.storage}:`,o)}const l=vt(r);return l.subscribe(o=>{try{const u=i(o);t.storage==="cookies"?dt.set(n,u,{expires:t.cookieExpireDays||31}):localStorage.setItem(n,u)}catch(u){console.warn(`Failed to save ${n} to ${t.storage}:`,u)}}),l}function gi(){let n=new vi;{const t=dt.get("logs");console.log("Loading pomApp from cookies:",t),t&&(n.timerHistory=mi(t))}const e=vt(n);return e.subscribe(t=>{const i=t.timerHistory.serialize();dt.set("logs",i,{expires:31}),console.log("Saved pomApp to cookies")}),e}const Te=gi(),rn=Lt("darkmode",!1,{storage:"cookies",serialize:n=>n.toString(),deserialize:n=>n==="true"}),on=Lt("raw_view",!1,{storage:"cookies",serialize:n=>n.toString(),deserialize:n=>n==="true"}),_i=gt(Te,n=>n.totalTime()),ct=Lt("volume",10,{storage:"cookies",serialize:n=>n.toString(),deserialize:n=>parseInt(n,10)});function pi(n){let e,t,i,s=`<img src="${Ze}/volume_mute.svg" alt="Mute icon"/>`,r,l,o,u,a=`<img src="${Ze}/volume_up.svg" alt="Volume max icon"/>`,c,f;return{c(){e=k("label"),t=k("div"),i=k("button"),i.innerHTML=s,r=P(),l=k("input"),o=P(),u=k("button"),u.innerHTML=a,this.h()},l(d){e=S(d,"LABEL",{});var v=M(e);t=S(v,"DIV",{class:!0});var w=M(t);i=S(w,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(i)!=="svelte-t9bnpg"&&(i.innerHTML=s),r=V(w),l=S(w,"INPUT",{class:!0,type:!0,min:!0,max:!0}),o=V(w),u=S(w,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(u)!=="svelte-yorq7f"&&(u.innerHTML=a),w.forEach(m),v.forEach(m),this.h()},h(){g(i,"class","leftbutton svelte-1vsc329"),g(l,"class","slider bar svelte-1vsc329"),g(l,"type","range"),g(l,"min","0"),g(l,"max","100"),g(u,"class","svelte-1vsc329"),g(t,"class","container svelte-1vsc329")},m(d,v){$(d,e,v),h(e,t),h(t,i),h(t,r),h(t,l),Gt(l,n[0]),h(t,o),h(t,u),c||(f=[F(i,"click",n[2]),F(l,"change",n[5]),F(l,"input",n[5]),F(l,"mouseup",n[1]),F(u,"click",n[3])],c=!0)},p(d,[v]){v&1&&Gt(l,d[0])},i:ve,o:ve,d(d){d&&m(e),c=!1,Ae(f)}}}function wi(n,e,t){let i;Ie(n,ct,a=>t(4,i=a));let s=i;function r(a){Tt(ct,i=parseInt(a.target.value,10),i)}function l(){Tt(ct,i=0,i)}function o(){Tt(ct,i=100,i)}function u(){s=zn(this.value),t(0,s),t(4,i)}return n.$$.update=()=>{n.$$.dirty&16&&(console.log("volume",i),Xn(i/100),t(0,s=i))},[s,r,l,o,i,u]}class bi extends Se{constructor(e){super(),De(this,e,wi,pi,ke,{})}}function Ti(n,e,t){const i=Qe();let{debugFlag:s}=e,{active:r=!0}=e,l=0,o=0;function u(c){console.log("run annoyer",c),clearInterval(l),clearTimeout(o),c&&(l=setInterval(()=>{jt(),r||clearInterval(l)},Ct(s).afterClockIntervalS*1e3),o=setTimeout(()=>{t(0,r=!1),clearInterval(l),a()},Ct(s).afterClockTimeoutS*1e3))}function a(){i("off")}return n.$$set=c=>{"debugFlag"in c&&t(1,s=c.debugFlag),"active"in c&&t(0,r=c.active)},n.$$.update=()=>{n.$$.dirty&1&&u(r)},[r,s]}class ki extends Se{constructor(e){super(),De(this,e,Ti,null,ke,{debugFlag:1,active:0})}}const an=Ze+"/tea.png",Si=Ze+"/clock_red.png",Di=Ze+"/clock_yellow.png";function Ei(n){if(console.log("changeFavicon",n),typeof document>"u"||document===null)return;const e=document.getElementById("favicon");if(e!==null)switch(n){case oe.STOPPED:e.href=an;break;case oe.RUNNING:e.href=Si;break;case oe.WAITING_FOR_STOP:e.href=Di;break;default:e.href=an}}function Ii(){const{subscribe:n,set:e,update:t}=vt({state:oe.STOPPED,currentTimer:new Oe,clockDuration:0});return{subscribe:n,start:(i,s,r)=>{const l=Ct(r).timersMultiplier;t(o=>({state:oe.RUNNING,currentTimer:new Oe(i,s),clockDuration:i*l}))},alarm:i=>{t(s=>{if(i){const r=Object.assign(Object.create(Object.getPrototypeOf(s.currentTimer)),s.currentTimer,{finish:new Date});return{...s,state:oe.STOPPED,clockDuration:0,currentTimer:r}}else return{...s,state:oe.WAITING_FOR_STOP}})},stop:()=>{t(i=>{const s=Object.assign(Object.create(Object.getPrototypeOf(i.currentTimer)),i.currentTimer,{finish:new Date});return{...i,state:oe.STOPPED,clockDuration:0,currentTimer:s}})},reset:()=>{e({state:oe.STOPPED,currentTimer:new Oe,clockDuration:0})}}}const We=Ii(),yi=gt(We,n=>n.state),Ci=gt(We,n=>n.currentTimer),Oi=gt(We,n=>n.clockDuration);function Mi(n){let e,t,i;return e=new bi({}),{c(){ce(e.$$.fragment),t=k("br")},l(s){ue(e.$$.fragment,s),t=S(s,"BR",{})},m(s,r){fe(e,s,r),$(s,t,r),i=!0},p:ve,i(s){i||(H(e.$$.fragment,s),i=!0)},o(s){B(e.$$.fragment,s),i=!1},d(s){s&&m(t),he(e,s)}}}function cn(n){let e,t;return e=new Pt({props:{title:"stop and don't save logs",$$slots:{default:[Ni]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(i){ue(e.$$.fragment,i)},m(i,s){fe(e,i,s),t=!0},p(i,s){const r={};s&65536&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(H(e.$$.fragment,i),t=!0)},o(i){B(e.$$.fragment,i),t=!1},d(i){he(e,i)}}}function Ni(n){let e,t="cancel",i,s,r,l;return{c(){e=k("button"),e.textContent=t,i=P(),s=k("br"),this.h()},l(o){e=S(o,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-1wi9d3u"&&(e.textContent=t),i=V(o),s=S(o,"BR",{}),this.h()},h(){g(e,"id","stopper"),g(e,"class","svelte-1viwsah")},m(o,u){$(o,e,u),$(o,i,u),$(o,s,u),r||(l=F(e,"click",n[8]),r=!0)},p:ve,d(o){o&&(m(e),m(i),m(s)),r=!1,l()}}}function Ai(n){let e,t,i,s,r,l,o;function u(f){n[10](f)}let a={time:n[4]};n[0]!==void 0&&(a.remainedSeconds=n[0]),t=new ni({props:a}),Ge.push(()=>At(t,"remainedSeconds",u)),t.$on("alarming",n[6]),t.$on("stop",n[9]),r=new Pt({props:{title:"Volume",$$slots:{default:[Mi]},$$scope:{ctx:n}}});let c=n[2]!==oe.STOPPED&&cn(n);return{c(){e=k("div"),ce(t.$$.fragment),s=P(),ce(r.$$.fragment),l=P(),c&&c.c(),this.h()},l(f){e=S(f,"DIV",{class:!0});var d=M(e);ue(t.$$.fragment,d),s=V(d),ue(r.$$.fragment,d),l=V(d),c&&c.l(d),d.forEach(m),this.h()},h(){g(e,"class","clock svelte-1viwsah")},m(f,d){$(f,e,d),fe(t,e,null),h(e,s),fe(r,e,null),h(e,l),c&&c.m(e,null),o=!0},p(f,d){const v={};d&16&&(v.time=f[4]),!i&&d&1&&(i=!0,v.remainedSeconds=f[0],Nt(()=>i=!1)),t.$set(v);const w={};d&65536&&(w.$$scope={dirty:d,ctx:f}),r.$set(w),f[2]!==oe.STOPPED?c?(c.p(f,d),d&4&&H(c,1)):(c=cn(f),c.c(),H(c,1),c.m(e,null)):c&&(Be(),B(c,1,1,()=>{c=null}),Fe())},i(f){o||(H(t.$$.fragment,f),H(r.$$.fragment,f),H(c),o=!0)},o(f){B(t.$$.fragment,f),B(r.$$.fragment,f),B(c),o=!1},d(f){f&&m(e),he(t),he(r),c&&c.d()}}}function ji(n){let e,t,i,s,r={$$slots:{default:[Ai]},$$scope:{ctx:n}};return e=new ui({props:r}),n[11](e),e.$on("start",n[5]),e.$on("stop",n[12]),i=new ki({props:{active:n[2]===oe.WAITING_FOR_STOP,debugFlag:n[1]}}),i.$on("off",n[13]),{c(){ce(e.$$.fragment),t=P(),ce(i.$$.fragment)},l(l){ue(e.$$.fragment,l),t=V(l),ue(i.$$.fragment,l)},m(l,o){fe(e,l,o),$(l,t,o),fe(i,l,o),s=!0},p(l,[o]){const u={};o&65557&&(u.$$scope={dirty:o,ctx:l}),e.$set(u);const a={};o&4&&(a.active=l[2]===oe.WAITING_FOR_STOP),o&2&&(a.debugFlag=l[1]),i.$set(a)},i(l){s||(H(e.$$.fragment,l),H(i.$$.fragment,l),s=!0)},o(l){B(e.$$.fragment,l),B(i.$$.fragment,l),s=!1},d(l){l&&m(t),n[11](null),he(e,l),he(i,l)}}}function Pi(n,e,t){let i,s,r;Ie(n,yi,b=>t(2,i=b)),Ie(n,Ci,b=>t(14,s=b)),Ie(n,Oi,b=>t(4,r=b));const l=Qe();let{debugFlag:o}=e,{remainedSeconds:u}=e,a;function c(b){i===oe.RUNNING&&d(Re.EMIT),We.start(b.detail.timer,b.detail.name,o),l("current",s)}function f(){const b=typeof document<"u"&&document.visibilityState==="visible";We.alarm(b),b&&(a&&a.clear(),l("timer",s))}function d(b=Re.EMIT){We.stop(),a&&a.clear(),b===Re.EMIT&&l("timer",s)}function v(){We.reset(),a&&a.clear(),l("cancel")}function w(){i!==oe.STOPPED&&d(Re.EMIT)}Nn(()=>{document.addEventListener("visibilitychange",function(){i===oe.WAITING_FOR_STOP&&document.visibilityState==="visible"&&(console.log("visibility change to visible"),d(Re.EMIT))})});function y(b){u=b,t(0,u)}function _(b){Ge[b?"unshift":"push"](()=>{a=b,t(3,a)})}const T=()=>d(Re.DO_NOT_EMIT),I=()=>d(Re.DO_NOT_EMIT);return n.$$set=b=>{"debugFlag"in b&&t(1,o=b.debugFlag),"remainedSeconds"in b&&t(0,u=b.remainedSeconds)},n.$$.update=()=>{n.$$.dirty&4&&Ei(i)},[u,o,i,a,r,c,f,d,v,w,y,_,T,I]}class Vi extends Se{constructor(e){super(),De(this,e,Pi,ji,ke,{debugFlag:1,remainedSeconds:0})}}function ut(n,{delay:e=0,duration:t=400,easing:i=Wn}={}){const s=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:i,css:r=>`opacity: ${r*s}`}}function Li(n){let e;return{c(){e=W("Active for")},l(t){e=G(t,"Active for")},m(t,i){$(t,e,i)},d(t){t&&m(e)}}}function $i(n){let e;return{c(){e=W("Rest for")},l(t){e=G(t,"Rest for")},m(t,i){$(t,e,i)},d(t){t&&m(e)}}}function un(n){let e,t,i,s,r,l,o,u,a,c;return{c(){e=k("button"),t=W("ch"),s=P(),r=k("button"),l=W("x"),this.h()},l(f){e=S(f,"BUTTON",{class:!0});var d=M(e);t=G(d,"ch"),d.forEach(m),s=V(f),r=S(f,"BUTTON",{class:!0});var v=M(r);l=G(v,"x"),v.forEach(m),this.h()},h(){g(e,"class","mini svelte-i9m2em"),e.hidden=n[1],g(r,"class","mini cross svelte-i9m2em"),r.hidden=n[1]},m(f,d){$(f,e,d),h(e,t),$(f,s,d),$(f,r,d),h(r,l),u=!0,a||(c=[F(e,"click",n[10]),F(r,"click",n[11])],a=!0)},p(f,d){(!u||d&2)&&(e.hidden=f[1]),(!u||d&2)&&(r.hidden=f[1])},i(f){u||(f&&qt(()=>{u&&(i||(i=rt(e,ut,{duration:100},!0)),i.run(1))}),f&&qt(()=>{u&&(o||(o=rt(r,ut,{duration:100},!0)),o.run(1))}),u=!0)},o(f){f&&(i||(i=rt(e,ut,{duration:100},!1)),i.run(0)),f&&(o||(o=rt(r,ut,{duration:100},!1)),o.run(0)),u=!1},d(f){f&&(m(e),m(s),m(r)),f&&i&&i.end(),f&&o&&o.end(),a=!1,Ae(c)}}}function Ri(n){let e,t,i,s,r,l,o,u=Zt(n[4])+"",a,c;function f(y,_){return y[3]?$i:Li}let d=f(n),v=d(n),w=n[1]&&!n[2]&&un(n);return{c(){e=k("snap"),t=k("snap"),i=W(n[5]),s=P(),r=k("snap"),v.c(),l=P(),o=k("snap"),a=W(u),c=P(),w&&w.c(),this.h()},l(y){e=S(y,"SNAP",{class:!0});var _=M(e);t=S(_,"SNAP",{class:!0});var T=M(t);i=G(T,n[5]),T.forEach(m),s=V(_),r=S(_,"SNAP",{});var I=M(r);v.l(I),I.forEach(m),l=V(_),o=S(_,"SNAP",{class:!0});var b=M(o);a=G(b,u),b.forEach(m),c=V(_),w&&w.l(_),_.forEach(m),this.h()},h(){g(t,"class","time work svelte-i9m2em"),g(o,"class","duration svelte-i9m2em"),g(e,"class","logline svelte-i9m2em"),He(e,"topLog",n[2]),He(e,"rest",n[3])},m(y,_){$(y,e,_),h(e,t),h(t,i),h(e,s),h(e,r),v.m(r,null),h(e,l),h(e,o),h(o,a),h(e,c),w&&w.m(e,null)},p(y,[_]){d!==(d=f(y))&&(v.d(1),v=d(y),v&&(v.c(),v.m(r,null))),_&16&&u!==(u=Zt(y[4])+"")&&x(a,u),y[1]&&!y[2]?w?(w.p(y,_),_&6&&H(w,1)):(w=un(y),w.c(),H(w,1),w.m(e,null)):w&&(Be(),B(w,1,1,()=>{w=null}),Fe()),_&4&&He(e,"topLog",y[2]),_&8&&He(e,"rest",y[3])},i(y){H(w)},o(y){B(w)},d(y){y&&m(e),v.d(),w&&w.d()}}}function Hi(n){let e=n.getHours().toString().padStart(2,"0"),t=n.getMinutes().toString().padStart(2,"0");return`${e}:${t}`}function Ui(n,e,t){let i,s;const r=Qe();let{start:l}=e,{finish:o}=e,{name:u}=e,{rawView:a}=e,{topLog:c=!1}=e,f=Hi(l);function d(_){r("change",_)}function v(_){r("remove",_)}const w=()=>d(l),y=()=>v(l);return n.$$set=_=>{"start"in _&&t(0,l=_.start),"finish"in _&&t(8,o=_.finish),"name"in _&&t(9,u=_.name),"rawView"in _&&t(1,a=_.rawView),"topLog"in _&&t(2,c=_.topLog)},n.$$.update=()=>{n.$$.dirty&257&&t(4,i=(o.getTime()-l.getTime())/1e3),n.$$.dirty&512&&t(3,s=u===pe.REST)},[l,a,c,s,i,f,d,v,o,u,w,y]}class Un extends Se{constructor(e){super(),De(this,e,Ui,Ri,ke,{start:0,finish:8,name:9,rawView:1,topLog:2})}}const $t=vt(null);function Bi(n){$t.set(n)}function ft(){$t.set(null)}function Dt(n){const e=n.slice(),t=e[7](e[1]);e[16]=t;const i=e[8](e[1]);e[17]=i;const s=e[9](e[1],e[4]);return e[18]=s,e}function fn(n,e,t){const i=n.slice();i[19]=e[t];const s=i[7](i[19]);i[16]=s;const r=i[8](i[19]);i[17]=r;const l=i[9](i[19],i[0]);i[18]=l;const o=parseFloat(i[16].width);i[20]=o;const u=!i[17]&&i[20]<.5?"2px":i[16].width;return i[21]=u,i}function hn(n,e,t){const i=n.slice();return i[24]=e[t],i}function dn(n){let e;return{c(){e=k("div"),this.h()},l(t){e=S(t,"DIV",{class:!0,style:!0,title:!0}),M(e).forEach(m),this.h()},h(){g(e,"class","future-overlay svelte-tywv71"),U(e,"left",n[5].left),U(e,"width",n[5].width),g(e,"title","Future time")},m(t,i){$(t,e,i)},p(t,i){i&32&&U(e,"left",t[5].left),i&32&&U(e,"width",t[5].width)},d(t){t&&m(e)}}}function mn(n){let e,t,i=n[24].label+"",s,r;return{c(){e=k("div"),t=k("div"),s=W(i),r=P(),this.h()},l(l){e=S(l,"DIV",{class:!0,style:!0});var o=M(e);t=S(o,"DIV",{class:!0});var u=M(t);s=G(u,i),u.forEach(m),r=V(o),o.forEach(m),this.h()},h(){g(t,"class","grid-label svelte-tywv71"),g(e,"class","grid-line svelte-tywv71"),U(e,"left",n[24].position+"%")},m(l,o){$(l,e,o),h(e,t),h(t,s),h(e,r)},p(l,o){o&64&&i!==(i=l[24].label+"")&&x(s,i),o&64&&U(e,"left",l[24].position+"%")},d(l){l&&m(e)}}}function vn(n,e){let t,i,s,r,l;function o(){return e[11](e[19])}return{key:n,first:null,c(){t=k("div"),this.h()},l(u){t=S(u,"DIV",{class:!0,style:!0,title:!0}),M(t).forEach(m),this.h()},h(){g(t,"class",i="timer-block "+(e[17]?e[18]?"overtime":"work":"rest")+" svelte-tywv71"),U(t,"left",e[16].left),U(t,"width",e[21]),U(t,"min-width",e[17]?"0":"2px"),U(t,"cursor","pointer"),g(t,"title",s=Ce(e[19].start)+" - "+Ce(e[19].finish)+" ("+mt(e[19])+")"+(e[18]?" âš ï¸ Overtime":"")),this.first=t},m(u,a){$(u,t,a),r||(l=F(t,"click",o),r=!0)},p(u,a){e=u,a&1&&i!==(i="timer-block "+(e[17]?e[18]?"overtime":"work":"rest")+" svelte-tywv71")&&g(t,"class",i),a&1&&U(t,"left",e[16].left),a&1&&U(t,"width",e[21]),a&1&&U(t,"min-width",e[17]?"0":"2px"),a&1&&s!==(s=Ce(e[19].start)+" - "+Ce(e[19].finish)+" ("+mt(e[19])+")"+(e[18]?" âš ï¸ Overtime":""))&&g(t,"title",s)},d(u){u&&m(t),r=!1,l()}}}function gn(n){let e,t,i;return{c(){e=k("div"),this.h()},l(s){e=S(s,"DIV",{class:!0,style:!0,title:!0}),M(e).forEach(m),this.h()},h(){g(e,"class",t="timer-block active "+(n[17]?n[18]?"overtime":"work":"rest")+" svelte-tywv71"),U(e,"left",n[16].left),U(e,"width",n[16].width),g(e,"title",i="Active: "+Ce(n[1].start)+" - now ("+mt(n[1])+")"+(n[18]?" âš ï¸ Overtime":""))},m(s,r){$(s,e,r)},p(s,r){r&18&&t!==(t="timer-block active "+(s[17]?s[18]?"overtime":"work":"rest")+" svelte-tywv71")&&g(e,"class",t),r&2&&U(e,"left",s[16].left),r&2&&U(e,"width",s[16].width),r&18&&i!==(i="Active: "+Ce(s[1].start)+" - now ("+mt(s[1])+")"+(s[18]?" âš ï¸ Overtime":""))&&g(e,"title",i)},d(s){s&&m(e)}}}function Fi(n){let e,t,i='<span class="timeline-title svelte-tywv71">Timeline</span> <div class="legend svelte-tywv71"><span class="legend-item svelte-tywv71"><span class="legend-color work svelte-tywv71"></span> <span>Work</span></span> <span class="legend-item svelte-tywv71" title="Overtime: 2+ min after alarm, or 25+ min for consecutive work"><span class="legend-color overtime svelte-tywv71"></span> <span>Overtime</span></span> <span class="legend-item svelte-tywv71"><span class="legend-color rest svelte-tywv71"></span> <span>Rest</span></span></div>',s,r,l,o=Ce(new Date(n[2]))+"",u,a,c,f=Ce(new Date(n[3]))+"",d,v,w,y,_=[],T=new Map,I,b=n[5].visible&&dn(n),O=Ee(n[6]),C=[];for(let D=0;D<O.length;D+=1)C[D]=mn(hn(n,O,D));let N=Ee(n[0]);const A=D=>D[19].start;for(let D=0;D<N.length;D+=1){let E=fn(n,N,D),j=A(E);T.set(j,_[D]=vn(j,E))}let p=n[1]&&gn(Dt(n));return{c(){e=k("div"),t=k("div"),t.innerHTML=i,s=P(),r=k("div"),l=k("div"),u=W(o),a=P(),c=k("div"),d=W(f),v=P(),b&&b.c(),w=P();for(let D=0;D<C.length;D+=1)C[D].c();y=P();for(let D=0;D<_.length;D+=1)_[D].c();I=P(),p&&p.c(),this.h()},l(D){e=S(D,"DIV",{class:!0});var E=M(e);t=S(E,"DIV",{class:!0,"data-svelte-h":!0}),ee(t)!=="svelte-1sof6z9"&&(t.innerHTML=i),s=V(E),r=S(E,"DIV",{class:!0});var j=M(r);l=S(j,"DIV",{class:!0});var Y=M(l);u=G(Y,o),Y.forEach(m),a=V(j),c=S(j,"DIV",{class:!0});var q=M(c);d=G(q,f),q.forEach(m),v=V(j),b&&b.l(j),w=V(j);for(let Z=0;Z<C.length;Z+=1)C[Z].l(j);y=V(j);for(let Z=0;Z<_.length;Z+=1)_[Z].l(j);I=V(j),p&&p.l(j),j.forEach(m),E.forEach(m),this.h()},h(){g(t,"class","timeline-header svelte-tywv71"),g(l,"class","time-label start svelte-tywv71"),g(c,"class","time-label end svelte-tywv71"),g(r,"class","timeline-bar svelte-tywv71"),g(e,"class","timeline-container svelte-tywv71")},m(D,E){$(D,e,E),h(e,t),h(e,s),h(e,r),h(r,l),h(l,u),h(r,a),h(r,c),h(c,d),h(r,v),b&&b.m(r,null),h(r,w);for(let j=0;j<C.length;j+=1)C[j]&&C[j].m(r,null);h(r,y);for(let j=0;j<_.length;j+=1)_[j]&&_[j].m(r,null);h(r,I),p&&p.m(r,null)},p(D,[E]){if(E&4&&o!==(o=Ce(new Date(D[2]))+"")&&x(u,o),E&8&&f!==(f=Ce(new Date(D[3]))+"")&&x(d,f),D[5].visible?b?b.p(D,E):(b=dn(D),b.c(),b.m(r,w)):b&&(b.d(1),b=null),E&64){O=Ee(D[6]);let j;for(j=0;j<O.length;j+=1){const Y=hn(D,O,j);C[j]?C[j].p(Y,E):(C[j]=mn(Y),C[j].c(),C[j].m(r,y))}for(;j<C.length;j+=1)C[j].d(1);C.length=O.length}E&897&&(N=Ee(D[0]),_=jn(_,E,A,1,D,N,T,r,Gn,vn,I,fn)),D[1]?p?p.p(Dt(D),E):(p=gn(Dt(D)),p.c(),p.m(r,null)):p&&(p.d(1),p=null)},i:ve,o:ve,d(D){D&&m(e),b&&b.d(),ht(C,D);for(let E=0;E<_.length;E+=1)_[E].d();p&&p.d()}}}function Ce(n){return n.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!1})}function mt(n){return`${Math.round(n.durationS()/60)} min`}function zi(n,e,t){let i,s,r,l,o,u,{timers:a=[]}=e,{activeTimer:c=null}=e;const f=40*60*1e3;function d(I){if(s===0)return{left:"0%",width:"0%"};const b=I.start.getTime()-r,O=I.finish.getTime()-I.start.getTime(),C=b/s*100,N=O/s*100;return{left:`${C}%`,width:`${N}%`}}function v(I){return I.name===pe.WORK}function w(I,b){const O=b.findIndex(p=>p.start.getTime()===I.start.getTime());if(O<=0)return!0;const C=b[O-1];return v(C)?(I.start.getTime()-C.finish.getTime())/(1e3*60)>=5:C.durationS()/60>=5}function y(I,b){if(!v(I))return[];const O=[I],C=b.findIndex(N=>N.start.getTime()===I.start.getTime());for(let N=C-1;N>=0;N--){const A=b[N],p=O[0],E=(p.start.getTime()-A.finish.getTime())/(1e3*60);if(v(A)&&E<5)O.unshift(A);else{if(!v(A)&&A.durationS()/60<5)continue;if(!v(A)&&w(p,b))break}}return O}function _(I,b){if(!v(I)||!I.value||I.value===0)return!1;const O=2,C=25,N=y(I,b);if(N.length===1){const A=I.durationS()/60,p=I.value;return A>p+O}else{const A=N.reduce((D,E)=>D+(E.value||0),0);return N.reduce((D,E)=>D+E.durationS()/60,0)>A+C}}const T=I=>Bi(I);return n.$$set=I=>{"timers"in I&&t(0,a=I.timers),"activeTimer"in I&&t(1,c=I.activeTimer)},n.$$.update=()=>{n.$$.dirty&3&&t(4,i=c?[...a,c]:a),n.$$.dirty&16&&t(10,s=(()=>{if(i.length===0)return f;const I=Math.max(...i.map(b=>b.finish.getTime()))-Math.min(...i.map(b=>b.start.getTime()));return Math.max(I,f)})()),n.$$.dirty&16&&t(2,r=i.length===0?Date.now():Math.min(...i.map(I=>I.start.getTime()))),n.$$.dirty&22&&t(3,l=(()=>{if(i.length===0)return Date.now()+f;const b=Math.max(...i.map(C=>C.finish.getTime()));let O=Math.max(b,r+f);if(c){const C=Date.now(),N=O-C,A=10*60*1e3;N<A&&N>0&&(O=O+36e5)}return O})()),n.$$.dirty&1036&&t(6,o=(()=>{if(s===0)return[];const I=[],b=new Date(r),O=new Date(l),C=new Date(b);for(C.setMinutes(0,0,0),C.setHours(C.getHours()+1);C.getTime()<=O.getTime();){const A=(C.getTime()-r)/s*100;A>=0&&A<=100&&I.push({position:A,label:C.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!1})}),C.setHours(C.getHours()+1)}return I})()),n.$$.dirty&1036&&t(5,u=(()=>{const I=Date.now();if(l>I){const b=Math.max(r,I),O=b-r,C=l-b,N=O/s*100,A=C/s*100;return{left:`${N}%`,width:`${A}%`,visible:A>0}}return{left:"0%",width:"0%",visible:!1}})())},[a,c,r,l,i,u,o,d,v,_,s,T]}class Wi extends Se{constructor(e){super(),De(this,e,zi,Fi,ke,{timers:0,activeTimer:1})}}function Et(n){const e=n.slice(),t=e[10](e[0],e[7].finish);return e[37]=t,e}function It(n){const e=n.slice(),t=e[10](e[1],e[0]);return e[37]=t,e}function yt(n){const e=n.slice(),t=e[10](e[8].start,e[1]);return e[37]=t,e}function _n(n,e,t){const i=n.slice();return i[38]=e[t],i}function pn(n){let e,t,i,s,r="Edit Timer",l,o,u="Ã—",a,c,f,d,v,w="Type:",y,_,T=n[4].name+"",I,b,O,C,N="Duration:",A,p,D,E,j,Y,q,Z,ye,ne=ae(n[2])+"",Me,R,K,Q=ae(n[3])+"",we,je,de,L,X,ge,te,qe="ðŸ’¡ Drag the edges to adjust timer boundaries",ze,z,_e,Pe="Delete",xe,Ne,_t,Ve,Rt="Cancel",pt,Le,Ht="Save",wt,Ut,ie=n[6].length>0&&wn(n),se=n[8]&&Tn(yt(n)),le=n[4]&&kn(It(n)),re=n[7]&&Sn(Et(n));return{c(){e=k("div"),t=k("div"),i=k("div"),s=k("h2"),s.textContent=r,l=P(),o=k("button"),o.textContent=u,a=P(),c=k("div"),f=k("div"),d=k("div"),v=k("span"),v.textContent=w,y=P(),_=k("span"),I=W(T),b=P(),O=k("div"),C=k("span"),C.textContent=N,A=P(),p=k("span"),D=W(n[9]),E=W(" min"),j=P(),ie&&ie.c(),Y=P(),q=k("div"),Z=k("div"),ye=k("span"),Me=W(ne),R=P(),K=k("span"),we=W(Q),je=P(),de=k("div"),se&&se.c(),L=P(),le&&le.c(),X=P(),re&&re.c(),ge=P(),te=k("div"),te.textContent=qe,ze=P(),z=k("div"),_e=k("button"),_e.textContent=Pe,xe=P(),Ne=k("div"),_t=P(),Ve=k("button"),Ve.textContent=Rt,pt=P(),Le=k("button"),Le.textContent=Ht,this.h()},l(J){e=S(J,"DIV",{class:!0});var be=M(e);t=S(be,"DIV",{class:!0});var Ke=M(t);i=S(Ke,"DIV",{class:!0});var tt=M(i);s=S(tt,"H2",{class:!0,"data-svelte-h":!0}),ee(s)!=="svelte-1ut3txv"&&(s.textContent=r),l=V(tt),o=S(tt,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(o)!=="svelte-y9ayml"&&(o.textContent=u),tt.forEach(m),a=V(Ke),c=S(Ke,"DIV",{class:!0});var Xe=M(c);f=S(Xe,"DIV",{class:!0});var nt=M(f);d=S(nt,"DIV",{class:!0});var it=M(d);v=S(it,"SPAN",{class:!0,"data-svelte-h":!0}),ee(v)!=="svelte-owo3qx"&&(v.textContent=w),y=V(it),_=S(it,"SPAN",{class:!0});var Bt=M(_);I=G(Bt,T),Bt.forEach(m),it.forEach(m),b=V(nt),O=S(nt,"DIV",{class:!0});var st=M(O);C=S(st,"SPAN",{class:!0,"data-svelte-h":!0}),ee(C)!=="svelte-2ef875"&&(C.textContent=N),A=V(st),p=S(st,"SPAN",{class:!0});var bt=M(p);D=G(bt,n[9]),E=G(bt," min"),bt.forEach(m),st.forEach(m),nt.forEach(m),j=V(Xe),ie&&ie.l(Xe),Y=V(Xe),q=S(Xe,"DIV",{class:!0});var Je=M(q);Z=S(Je,"DIV",{class:!0});var lt=M(Z);ye=S(lt,"SPAN",{});var Ft=M(ye);Me=G(Ft,ne),Ft.forEach(m),R=V(lt),K=S(lt,"SPAN",{});var zt=M(K);we=G(zt,Q),zt.forEach(m),lt.forEach(m),je=V(Je),de=S(Je,"DIV",{class:!0});var Ye=M(de);se&&se.l(Ye),L=V(Ye),le&&le.l(Ye),X=V(Ye),re&&re.l(Ye),Ye.forEach(m),ge=V(Je),te=S(Je,"DIV",{class:!0,"data-svelte-h":!0}),ee(te)!=="svelte-173xjy6"&&(te.textContent=qe),Je.forEach(m),Xe.forEach(m),ze=V(Ke),z=S(Ke,"DIV",{class:!0});var $e=M(z);_e=S($e,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(_e)!=="svelte-6r50uh"&&(_e.textContent=Pe),xe=V($e),Ne=S($e,"DIV",{class:!0}),M(Ne).forEach(m),_t=V($e),Ve=S($e,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(Ve)!=="svelte-1ph2inm"&&(Ve.textContent=Rt),pt=V($e),Le=S($e,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(Le)!=="svelte-9t0vpj"&&(Le.textContent=Ht),$e.forEach(m),Ke.forEach(m),be.forEach(m),this.h()},h(){g(s,"class","svelte-khj96w"),g(o,"class","close-btn svelte-khj96w"),g(i,"class","modal-header svelte-khj96w"),g(v,"class","label svelte-khj96w"),g(_,"class","value svelte-khj96w"),g(d,"class","info svelte-khj96w"),g(C,"class","label svelte-khj96w"),g(p,"class","value svelte-khj96w"),g(O,"class","info svelte-khj96w"),g(f,"class","info-row svelte-khj96w"),g(Z,"class","timeline-labels svelte-khj96w"),g(de,"class","timeline-track svelte-khj96w"),g(te,"class","timeline-hint svelte-khj96w"),g(q,"class","timeline-editor svelte-khj96w"),g(c,"class","modal-body svelte-khj96w"),g(_e,"class","btn btn-delete svelte-khj96w"),g(Ne,"class","spacer svelte-khj96w"),g(Ve,"class","btn btn-cancel svelte-khj96w"),g(Le,"class","btn btn-save svelte-khj96w"),g(z,"class","modal-footer svelte-khj96w"),g(t,"class","modal svelte-khj96w"),g(e,"class","modal-backdrop svelte-khj96w")},m(J,be){$(J,e,be),h(e,t),h(t,i),h(i,s),h(i,l),h(i,o),h(t,a),h(t,c),h(c,f),h(f,d),h(d,v),h(d,y),h(d,_),h(_,I),h(f,b),h(f,O),h(O,C),h(O,A),h(O,p),h(p,D),h(p,E),h(c,j),ie&&ie.m(c,null),h(c,Y),h(c,q),h(q,Z),h(Z,ye),h(ye,Me),h(Z,R),h(Z,K),h(K,we),h(q,je),h(q,de),se&&se.m(de,null),h(de,L),le&&le.m(de,null),h(de,X),re&&re.m(de,null),h(q,ge),h(q,te),n[30](q),h(t,ze),h(t,z),h(z,_e),h(z,xe),h(z,Ne),h(z,_t),h(z,Ve),h(z,pt),h(z,Le),wt||(Ut=[F(o,"click",n[16]),F(i,"click",Kt(n[27])),F(c,"click",Kt(n[26])),F(_e,"click",n[17]),F(Ve,"click",n[16]),F(Le,"click",n[15]),F(e,"click",n[16])],wt=!0)},p(J,be){be[0]&16&&T!==(T=J[4].name+"")&&x(I,T),be[0]&512&&x(D,J[9]),J[6].length>0?ie?ie.p(J,be):(ie=wn(J),ie.c(),ie.m(c,Y)):ie&&(ie.d(1),ie=null),be[0]&4&&ne!==(ne=ae(J[2])+"")&&x(Me,ne),be[0]&8&&Q!==(Q=ae(J[3])+"")&&x(we,Q),J[8]?se?se.p(yt(J),be):(se=Tn(yt(J)),se.c(),se.m(de,L)):se&&(se.d(1),se=null),J[4]?le?le.p(It(J),be):(le=kn(It(J)),le.c(),le.m(de,X)):le&&(le.d(1),le=null),J[7]?re?re.p(Et(J),be):(re=Sn(Et(J)),re.c(),re.m(de,null)):re&&(re.d(1),re=null)},d(J){J&&m(e),ie&&ie.d(),se&&se.d(),le&&le.d(),re&&re.d(),n[30](null),wt=!1,Ae(Ut)}}}function wn(n){let e,t=Ee(n[6]),i=[];for(let s=0;s<t.length;s+=1)i[s]=bn(_n(n,t,s));return{c(){e=k("div");for(let s=0;s<i.length;s+=1)i[s].c();this.h()},l(s){e=S(s,"DIV",{class:!0});var r=M(e);for(let l=0;l<i.length;l+=1)i[l].l(r);r.forEach(m),this.h()},h(){g(e,"class","warnings svelte-khj96w")},m(s,r){$(s,e,r);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(e,null)},p(s,r){if(r[0]&64){t=Ee(s[6]);let l;for(l=0;l<t.length;l+=1){const o=_n(s,t,l);i[l]?i[l].p(o,r):(i[l]=bn(o),i[l].c(),i[l].m(e,null))}for(;l<i.length;l+=1)i[l].d(1);i.length=t.length}},d(s){s&&m(e),ht(i,s)}}}function bn(n){let e,t,i=n[38]+"",s;return{c(){e=k("div"),t=W("âš ï¸ "),s=W(i),this.h()},l(r){e=S(r,"DIV",{class:!0});var l=M(e);t=G(l,"âš ï¸ "),s=G(l,i),l.forEach(m),this.h()},h(){g(e,"class","warning-item svelte-khj96w")},m(r,l){$(r,e,l),h(e,t),h(e,s)},p(r,l){l[0]&64&&i!==(i=r[38]+"")&&x(s,i)},d(r){r&&m(e)}}}function Tn(n){let e,t,i=n[8].name+"",s,r,l;return{c(){e=k("div"),t=k("span"),s=W(i),this.h()},l(o){e=S(o,"DIV",{class:!0,style:!0,title:!0});var u=M(e);t=S(u,"SPAN",{class:!0});var a=M(t);s=G(a,i),a.forEach(m),u.forEach(m),this.h()},h(){g(t,"class","timer-label svelte-khj96w"),g(e,"class",r="timer-block prev "+(n[14](n[8])?"work":"rest")+" svelte-khj96w"),U(e,"left",n[37].left),U(e,"width",n[37].width),g(e,"title",l=n[8].name+": "+ae(n[8].start)+" - "+ae(n[1]))},m(o,u){$(o,e,u),h(e,t),h(t,s)},p(o,u){u[0]&256&&i!==(i=o[8].name+"")&&x(s,i),u[0]&256&&r!==(r="timer-block prev "+(o[14](o[8])?"work":"rest")+" svelte-khj96w")&&g(e,"class",r),u[0]&258&&U(e,"left",o[37].left),u[0]&258&&U(e,"width",o[37].width),u[0]&258&&l!==(l=o[8].name+": "+ae(o[8].start)+" - "+ae(o[1]))&&g(e,"title",l)},d(o){o&&m(e)}}}function kn(n){let e,t,i,s,r,l=n[4].name+"",o,u,a,c=ae(n[1])+"",f,d,v=ae(n[0])+"",w,y,_,T,I,b;return{c(){e=k("div"),t=k("div"),i=P(),s=k("div"),r=k("div"),o=W(l),u=P(),a=k("div"),f=W(c),d=W(" - "),w=W(v),y=P(),_=k("div"),this.h()},l(O){e=S(O,"DIV",{class:!0,style:!0});var C=M(e);t=S(C,"DIV",{class:!0,title:!0}),M(t).forEach(m),i=V(C),s=S(C,"DIV",{class:!0});var N=M(s);r=S(N,"DIV",{class:!0});var A=M(r);o=G(A,l),A.forEach(m),u=V(N),a=S(N,"DIV",{class:!0});var p=M(a);f=G(p,c),d=G(p," - "),w=G(p,v),p.forEach(m),N.forEach(m),y=V(C),_=S(C,"DIV",{class:!0,title:!0}),M(_).forEach(m),C.forEach(m),this.h()},h(){g(t,"class","drag-handle left svelte-khj96w"),g(t,"title","Drag to adjust start time"),g(r,"class","timer-label svelte-khj96w"),g(a,"class","timer-times svelte-khj96w"),g(s,"class","timer-content svelte-khj96w"),g(_,"class","drag-handle right svelte-khj96w"),g(_,"title","Drag to adjust end time"),g(e,"class",T="timer-block current "+(n[14](n[4])?"work":"rest")+" svelte-khj96w"),U(e,"left",n[37].left),U(e,"width",n[37].width)},m(O,C){$(O,e,C),h(e,t),h(e,i),h(e,s),h(s,r),h(r,o),h(s,u),h(s,a),h(a,f),h(a,d),h(a,w),h(e,y),h(e,_),I||(b=[F(t,"mousedown",n[28]),F(_,"mousedown",n[29])],I=!0)},p(O,C){C[0]&16&&l!==(l=O[4].name+"")&&x(o,l),C[0]&2&&c!==(c=ae(O[1])+"")&&x(f,c),C[0]&1&&v!==(v=ae(O[0])+"")&&x(w,v),C[0]&16&&T!==(T="timer-block current "+(O[14](O[4])?"work":"rest")+" svelte-khj96w")&&g(e,"class",T),C[0]&3&&U(e,"left",O[37].left),C[0]&3&&U(e,"width",O[37].width)},d(O){O&&m(e),I=!1,Ae(b)}}}function Sn(n){let e,t,i=n[7].name+"",s,r,l;return{c(){e=k("div"),t=k("span"),s=W(i),this.h()},l(o){e=S(o,"DIV",{class:!0,style:!0,title:!0});var u=M(e);t=S(u,"SPAN",{class:!0});var a=M(t);s=G(a,i),a.forEach(m),u.forEach(m),this.h()},h(){g(t,"class","timer-label svelte-khj96w"),g(e,"class",r="timer-block next "+(n[14](n[7])?"work":"rest")+" svelte-khj96w"),U(e,"left",n[37].left),U(e,"width",n[37].width),g(e,"title",l=n[7].name+": "+ae(n[0])+" - "+ae(n[7].finish))},m(o,u){$(o,e,u),h(e,t),h(t,s)},p(o,u){u[0]&128&&i!==(i=o[7].name+"")&&x(s,i),u[0]&128&&r!==(r="timer-block next "+(o[14](o[7])?"work":"rest")+" svelte-khj96w")&&g(e,"class",r),u[0]&129&&U(e,"left",o[37].left),u[0]&129&&U(e,"width",o[37].width),u[0]&129&&l!==(l=o[7].name+": "+ae(o[0])+" - "+ae(o[7].finish))&&g(e,"title",l)},d(o){o&&m(e)}}}function Gi(n){let e,t,i,s=n[4]&&pn(n);return{c(){s&&s.c(),e=Ue()},l(r){s&&s.l(r),e=Ue()},m(r,l){s&&s.m(r,l),$(r,e,l),t||(i=[F(window,"keydown",n[18]),F(window,"mousemove",n[12]),F(window,"mouseup",n[13])],t=!0)},p(r,l){r[4]?s?s.p(r,l):(s=pn(r),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},i:ve,o:ve,d(r){r&&m(e),s&&s.d(r),t=!1,Ae(i)}}}function ae(n){return n.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!1})}function qi(n,e,t){let i,s,r,l,o,u,a,c,f,d,v,w;Ie(n,$t,L=>t(4,v=L)),Ie(n,Te,L=>t(25,w=L));let y=0,_=0,T,I,b=null,O=!1,C=null,N=0,A=400,p;function D(){const L=[];if(s&&(a.getTime()-s.start.getTime())/(1e3*60)<.5&&L.push(`Previous ${s.name} will be removed (< 30 sec)`),r){const X=c;(r.finish.getTime()-X.getTime())/(1e3*60)<.5&&L.push(`Next ${r.name} will be removed (< 30 sec)`)}return L}function E(L,X){const ge=L.getTime()-l.getTime(),te=X.getTime()-L.getTime(),qe=ge/u*100,ze=te/u*100;return{left:`${qe}%`,width:`${ze}%`}}function j(L,X){O=!0,C=L,N=X.clientX,p&&(A=p.offsetWidth),X.preventDefault()}function Y(L){if(!O||!C)return;const ge=(L.clientX-N)/A*u,te=Math.round(ge/(60*1e3));C==="start"?t(19,y=te):t(20,_=te)}function q(){O=!1,C=null}function Z(L){return L.name===pe.WORK}function ye(){if(v){if(a>=c){alert("Start time must be before finish time");return}d.length>0&&!confirm(`Warning:
${d.join(`
`)}

Continue with save?`)||(Te.update(L=>{const X=L.timerHistory.list.findIndex(z=>z.start.getTime()===v.start.getTime());if(X===-1)return L;const ge=L.timerHistory.list[X],te=[];if(X>0){const z=L.timerHistory.list[X-1],_e=ge.start.getTime();if(a.getTime()!==_e){const Pe=new Date(a);if((Pe.getTime()-z.start.getTime())/1e3<30)te.push(X-1);else{const Ne=new Oe(z.value,z.name,z.start,Pe);L.timerHistory.list[X-1]=Ne}}}if(X<L.timerHistory.list.length-1){const z=L.timerHistory.list[X+1],_e=ge.finish.getTime();if(c.getTime()!==_e){const Pe=new Date(c);if((z.finish.getTime()-Pe.getTime())/1e3<30)te.push(X+1);else{const Ne=new Oe(z.value,z.name,Pe,z.finish);L.timerHistory.list[X+1]=Ne}}}te.sort((z,_e)=>_e-z).forEach(z=>{L.timerHistory.list.splice(z,1)});const qe=X-te.filter(z=>z<X).length,ze=new Oe(ge.value,ge.name,a,c);return L.timerHistory.list[qe]=ze,L}),ft())}}function ne(){ft()}function Me(){v&&confirm("Delete this timer?")&&(Te.update(L=>L.remove(v.start)),ft())}function R(L){L.key==="Escape"&&ft()}function K(L){Xt.call(this,n,L)}function Q(L){Xt.call(this,n,L)}const we=L=>j("start",L),je=L=>j("end",L);function de(L){Ge[L?"unshift":"push"](()=>{p=L,t(5,p)})}return n.$$.update=()=>{n.$$.dirty[0]&33554448&&t(24,i=v?w.timerHistory.list.findIndex(L=>L.start.getTime()===v.start.getTime()):-1),n.$$.dirty[0]&50331648&&t(8,s=i>0?w.timerHistory.list[i-1]:null),n.$$.dirty[0]&50331648&&t(7,r=i>=0&&i<w.timerHistory.list.length-1?w.timerHistory.list[i+1]:null),n.$$.dirty[0]&8388624&&v&&v.start.getTime()!==b&&(t(23,b=v.start.getTime()),t(21,T=v.start instanceof Date?v.start:new Date(v.start)),t(22,I=v.finish instanceof Date?v.finish:new Date(v.finish)),t(19,y=0),t(20,_=0)),n.$$.dirty[0]&2097152&&t(2,l=T?new Date(T.getTime()-30*60*1e3):new Date),n.$$.dirty[0]&4194304&&t(3,o=I?new Date(I.getTime()+30*60*1e3):new Date),n.$$.dirty[0]&12&&(u=o.getTime()-l.getTime()),n.$$.dirty[0]&16&&(v||t(23,b=null)),n.$$.dirty[0]&2621440&&t(1,a=T?new Date(T.getTime()+y*60*1e3):new Date),n.$$.dirty[0]&5242880&&t(0,c=I?new Date(I.getTime()+_*60*1e3):new Date),n.$$.dirty[0]&19&&t(9,f=v?Math.round((c.getTime()-a.getTime())/(1e3*60)):0)},t(6,d=D()),[c,a,l,o,v,p,d,r,s,f,E,j,Y,q,Z,ye,ne,Me,R,y,_,T,I,b,i,w,K,Q,we,je,de]}class Ki extends Se{constructor(e){super(),De(this,e,qi,Gi,ke,{},null,[-1,-1])}}function Xi(n){let e,t,i,s,r,l,o,u,a,c,f,d,v,w,y;return{c(){e=k("div"),t=k("span"),i=W(n[1]),r=P(),l=k("label"),o=k("input"),u=P(),a=k("span"),c=P(),f=k("span"),d=W(n[2]),this.h()},l(_){e=S(_,"DIV",{class:!0});var T=M(e);t=S(T,"SPAN",{class:!0});var I=M(t);i=G(I,n[1]),I.forEach(m),r=V(T),l=S(T,"LABEL",{class:!0});var b=M(l);o=S(b,"INPUT",{type:!0,class:!0}),u=V(b),a=S(b,"SPAN",{class:!0}),M(a).forEach(m),b.forEach(m),c=V(T),f=S(T,"SPAN",{class:!0});var O=M(f);d=G(O,n[2]),O.forEach(m),T.forEach(m),this.h()},h(){g(t,"class",s="toggle-label "+(n[0]?"":"active")+" svelte-hq2js7"),g(o,"type","checkbox"),g(o,"class","svelte-hq2js7"),g(a,"class","slider svelte-hq2js7"),g(l,"class","toggle-switch svelte-hq2js7"),g(f,"class",v="toggle-label "+(n[0]?"active":"")+" svelte-hq2js7"),g(e,"class","toggle-container svelte-hq2js7")},m(_,T){$(_,e,T),h(e,t),h(t,i),h(e,r),h(e,l),h(l,o),o.checked=n[0],h(l,u),h(l,a),h(e,c),h(e,f),h(f,d),w||(y=F(o,"change",n[3]),w=!0)},p(_,[T]){T&2&&x(i,_[1]),T&1&&s!==(s="toggle-label "+(_[0]?"":"active")+" svelte-hq2js7")&&g(t,"class",s),T&1&&(o.checked=_[0]),T&4&&x(d,_[2]),T&1&&v!==(v="toggle-label "+(_[0]?"active":"")+" svelte-hq2js7")&&g(f,"class",v)},i:ve,o:ve,d(_){_&&m(e),w=!1,y()}}}function Ji(n,e,t){let{checked:i=!1}=e,{leftLabel:s=""}=e,{rightLabel:r=""}=e;function l(){i=this.checked,t(0,i)}return n.$$set=o=>{"checked"in o&&t(0,i=o.checked),"leftLabel"in o&&t(1,s=o.leftLabel),"rightLabel"in o&&t(2,r=o.rightLabel)},[i,s,r,l]}class Yi extends Se{constructor(e){super(),De(this,e,Ji,Xi,ke,{checked:0,leftLabel:1,rightLabel:2})}}function Dn(n,e,t){const i=n.slice();return i[10]=e[t],i}function Zi(n){let e,t,i=[],s=new Map,r,l=n[1].active&&En(n),o=Ee([...n[2]].reverse());const u=a=>a[10].start;for(let a=0;a<o.length;a+=1){let c=Dn(n,o,a),f=u(c);s.set(f,i[a]=In(f,c))}return{c(){e=k("div"),l&&l.c(),t=P();for(let a=0;a<i.length;a+=1)i[a].c();this.h()},l(a){e=S(a,"DIV",{class:!0});var c=M(e);l&&l.l(c),t=V(c);for(let f=0;f<i.length;f+=1)i[f].l(c);c.forEach(m),this.h()},h(){g(e,"class","logs svelte-1jzxnm3")},m(a,c){$(a,e,c),l&&l.m(e,null),h(e,t);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(e,null);r=!0},p(a,c){a[1].active?l?(l.p(a,c),c&2&&H(l,1)):(l=En(a),l.c(),H(l,1),l.m(e,t)):l&&(Be(),B(l,1,1,()=>{l=null}),Fe()),c&5&&(o=Ee([...a[2]].reverse()),Be(),i=jn(i,c,u,1,a,o,s,e,qn,In,null,Dn),Fe())},i(a){if(!r){H(l);for(let c=0;c<o.length;c+=1)H(i[c]);r=!0}},o(a){B(l);for(let c=0;c<i.length;c+=1)B(i[c]);r=!1},d(a){a&&m(e),l&&l.d();for(let c=0;c<i.length;c+=1)i[c].d()}}}function Qi(n){let e,t;return e=new Wi({props:{timers:n[2],activeTimer:n[1].active}}),{c(){ce(e.$$.fragment)},l(i){ue(e.$$.fragment,i)},m(i,s){fe(e,i,s),t=!0},p(i,s){const r={};s&4&&(r.timers=i[2]),s&2&&(r.activeTimer=i[1].active),e.$set(r)},i(i){t||(H(e.$$.fragment,i),t=!0)},o(i){B(e.$$.fragment,i),t=!1},d(i){he(e,i)}}}function En(n){let e,t,i;const s=[n[1].active,{rawView:n[0]},{topLog:!0}];let r={};for(let l=0;l<s.length;l+=1)r=An(r,s[l]);return e=new Un({props:r}),{c(){ce(e.$$.fragment),t=k("br")},l(l){ue(e.$$.fragment,l),t=S(l,"BR",{})},m(l,o){fe(e,l,o),$(l,t,o),i=!0},p(l,o){const u=o&3?Pn(s,[o&2&&Vn(l[1].active),o&1&&{rawView:l[0]},s[2]]):{};e.$set(u)},i(l){i||(H(e.$$.fragment,l),i=!0)},o(l){B(e.$$.fragment,l),i=!1},d(l){l&&m(t),he(e,l)}}}function In(n,e){let t,i,s,r,l;const o=[e[10],{rawView:e[0]},{topLog:!1}];let u={};for(let a=0;a<o.length;a+=1)u=An(u,o[a]);return i=new Un({props:u}),i.$on("change",e[8]),i.$on("remove",e[9]),{key:n,first:null,c(){t=Ue(),ce(i.$$.fragment),s=P(),r=k("br"),this.h()},l(a){t=Ue(),ue(i.$$.fragment,a),s=V(a),r=S(a,"BR",{}),this.h()},h(){this.first=t},m(a,c){$(a,t,c),fe(i,a,c),$(a,s,c),$(a,r,c),l=!0},p(a,c){e=a;const f=c&5?Pn(o,[c&4&&Vn(e[10]),c&1&&{rawView:e[0]},o[2]]):{};i.$set(f)},i(a){l||(H(i.$$.fragment,a),l=!0)},o(a){B(i.$$.fragment,a),l=!1},d(a){a&&(m(t),m(s),m(r)),he(i,a)}}}function xi(n){let e,t,i,s,r,l="Clear logs",o,u,a="Active time: ",c,f=Qt(n[4])+"",d,v,w,y,_,T="Edit",I,b,O,C,N,A,p,D,E,j,Y;e=new Ki({});function q(R){n[7](R)}let Z={leftLabel:"Logs",rightLabel:"Graph"};n[3]!==void 0&&(Z.checked=n[3]),O=new Yi({props:Z}),Ge.push(()=>At(O,"checked",q));const ye=[Qi,Zi],ne=[];function Me(R,K){return R[3]?0:1}return A=Me(n),p=ne[A]=ye[A](n),{c(){ce(e.$$.fragment),t=P(),i=k("div"),s=k("div"),r=k("button"),r.textContent=l,o=P(),u=k("span"),u.textContent=a,c=k("span"),d=W(f),v=P(),w=k("input"),y=P(),_=k("label"),_.textContent=T,I=P(),b=k("div"),ce(O.$$.fragment),N=P(),p.c(),D=Ue(),this.h()},l(R){ue(e.$$.fragment,R),t=V(R),i=S(R,"DIV",{class:!0});var K=M(i);s=S(K,"DIV",{class:!0});var Q=M(s);r=S(Q,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(r)!=="svelte-1renoko"&&(r.textContent=l),o=V(Q),u=S(Q,"SPAN",{class:!0,"data-svelte-h":!0}),ee(u)!=="svelte-18pz33x"&&(u.textContent=a),c=S(Q,"SPAN",{class:!0});var we=M(c);d=G(we,f),we.forEach(m),v=V(Q),w=S(Q,"INPUT",{type:!0,id:!0,name:!0}),y=V(Q),_=S(Q,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ee(_)!=="svelte-mquioa"&&(_.textContent=T),Q.forEach(m),I=V(K),b=S(K,"DIV",{class:!0});var je=M(b);ue(O.$$.fragment,je),je.forEach(m),K.forEach(m),N=V(R),p.l(R),D=Ue(),this.h()},h(){g(r,"class","clear svelte-1jzxnm3"),g(u,"class","svelte-1jzxnm3"),g(c,"class","svelte-1jzxnm3"),g(w,"type","checkbox"),g(w,"id","edit"),g(w,"name","edit"),g(_,"for","edit"),g(_,"class","svelte-1jzxnm3"),g(s,"class","header-left svelte-1jzxnm3"),g(b,"class","header-right svelte-1jzxnm3"),g(i,"class","header svelte-1jzxnm3")},m(R,K){fe(e,R,K),$(R,t,K),$(R,i,K),h(i,s),h(s,r),h(s,o),h(s,u),h(s,c),h(c,d),h(s,v),h(s,w),w.checked=n[0],h(s,y),h(s,_),h(i,I),h(i,b),fe(O,b,null),$(R,N,K),ne[A].m(R,K),$(R,D,K),E=!0,j||(Y=[F(r,"click",n[5]),F(w,"change",n[6])],j=!0)},p(R,[K]){(!E||K&16)&&f!==(f=Qt(R[4])+"")&&x(d,f),K&1&&(w.checked=R[0]);const Q={};!C&&K&8&&(C=!0,Q.checked=R[3],Nt(()=>C=!1)),O.$set(Q);let we=A;A=Me(R),A===we?ne[A].p(R,K):(Be(),B(ne[we],1,1,()=>{ne[we]=null}),Fe(),p=ne[A],p?p.p(R,K):(p=ne[A]=ye[A](R),p.c()),H(p,1),p.m(D.parentNode,D))},i(R){E||(H(e.$$.fragment,R),H(O.$$.fragment,R),H(p),E=!0)},o(R){B(e.$$.fragment,R),B(O.$$.fragment,R),B(p),E=!1},d(R){R&&(m(t),m(i),m(N),m(D)),he(e,R),he(O),ne[A].d(R),j=!1,Ae(Y)}}}function es(n,e){return n!=null&&n.timerHistory?n.timerHistory.normalize(!e):[]}function ts(n,e,t){let i,s,r;Ie(n,on,v=>t(0,i=v)),Ie(n,Te,v=>t(1,s=v)),Ie(n,_i,v=>t(4,r=v));var l=[];let o=!0;const u=()=>Te.update(v=>v.clearLogs());function a(){i=this.checked,on.set(i)}function c(v){o=v,t(3,o)}const f=v=>Te.update(w=>w.changeLineType(v.detail)),d=v=>Te.update(w=>w.remove(v.detail));return n.$$.update=()=>{n.$$.dirty&3&&t(2,l=es(s,i))},[i,s,l,o,r,u,a,c,f,d]}class ns extends Se{constructor(e){super(),De(this,e,ts,xi,ke,{})}}function is(n){let e,t,i,s,r="Let's Pomodoro!",l,o,u,a,c,f,d;function v(y){n[9](y)}let w={debugFlag:n[1]};return n[0]!==void 0&&(w.remainedSeconds=n[0]),o=new Vi({props:w}),Ge.push(()=>At(o,"remainedSeconds",v)),o.$on("timer",n[4]),o.$on("current",n[5]),o.$on("cancel",n[6]),f=new ns({}),{c(){e=k("main"),t=k("div"),i=k("div"),s=k("h1"),s.textContent=r,l=P(),ce(o.$$.fragment),a=P(),c=k("div"),ce(f.$$.fragment),this.h()},l(y){e=S(y,"MAIN",{class:!0});var _=M(e);t=S(_,"DIV",{class:!0});var T=M(t);i=S(T,"DIV",{class:!0});var I=M(i);s=S(I,"H1",{class:!0,"data-svelte-h":!0}),ee(s)!=="svelte-cxq7y3"&&(s.textContent=r),l=V(I),ue(o.$$.fragment,I),I.forEach(m),a=V(T),c=S(T,"DIV",{class:!0});var b=M(c);ue(f.$$.fragment,b),b.forEach(m),T.forEach(m),_.forEach(m),this.h()},h(){g(s,"class","logo svelte-1tn61l8"),g(i,"class","pomodoro svelte-1tn61l8"),g(c,"class","logs svelte-1tn61l8"),g(t,"class","container svelte-1tn61l8"),g(e,"class","svelte-1tn61l8"),He(e,"dark",n[3])},m(y,_){$(y,e,_),h(e,t),h(t,i),h(i,s),h(i,l),fe(o,i,null),h(t,a),h(t,c),fe(f,c,null),d=!0},p(y,_){const T={};_&2&&(T.debugFlag=y[1]),!u&&_&1&&(u=!0,T.remainedSeconds=y[0],Nt(()=>u=!1)),o.$set(T),(!d||_&8)&&He(e,"dark",y[3])},i(y){d||(H(o.$$.fragment,y),H(f.$$.fragment,y),d=!0)},o(y){B(o.$$.fragment,y),B(f.$$.fragment,y),d=!1},d(y){y&&m(e),he(o),he(f)}}}function ss(n){let e;return{c(){e=k("main"),this.h()},l(t){e=S(t,"MAIN",{style:!0,class:!0}),M(e).forEach(m),this.h()},h(){U(e,"background-color","gray"),U(e,"height","90 vh"),g(e,"class","svelte-1tn61l8")},m(t,i){$(t,e,i)},p:ve,i:ve,o:ve,d(t){t&&m(e)}}}function ls(n){let e,t,i,s,r,l,o,u,a,c="Toggle Dark Mode",f,d,v;const w=[ss,is],y=[];function _(T,I){return T[2]?0:1}return e=_(n),t=y[e]=w[e](n),{c(){t.c(),i=P(),s=k("div"),r=k("label"),l=W("Debug:"),o=k("input"),u=P(),a=k("button"),a.textContent=c,this.h()},l(T){t.l(T),i=V(T),s=S(T,"DIV",{class:!0});var I=M(s);r=S(I,"LABEL",{id:!0});var b=M(r);l=G(b,"Debug:"),o=S(b,"INPUT",{type:!0}),u=V(b),a=S(b,"BUTTON",{"data-svelte-h":!0}),ee(a)!=="svelte-7kmdhl"&&(a.textContent=c),b.forEach(m),I.forEach(m),this.h()},h(){g(o,"type","checkbox"),g(r,"id","debug"),g(s,"class","debug-div svelte-1tn61l8")},m(T,I){y[e].m(T,I),$(T,i,I),$(T,s,I),h(s,r),h(r,l),h(r,o),o.checked=n[1],h(r,u),h(r,a),f=!0,d||(v=[F(o,"change",n[10]),F(a,"click",n[7])],d=!0)},p(T,[I]){let b=e;e=_(T),e===b?y[e].p(T,I):(Be(),B(y[b],1,1,()=>{y[b]=null}),Fe(),t=y[e],t?t.p(T,I):(t=y[e]=w[e](T),t.c()),H(t,1),t.m(i.parentNode,i)),I&2&&(o.checked=T[1])},i(T){f||(H(t),f=!0)},o(T){B(t),f=!1},d(T){T&&(m(i),m(s)),y[e].d(T),d=!1,Ae(v)}}}function rs(n,e,t){let i,s;Ie(n,rn,w=>t(3,i=w)),Ie(n,Te,w=>t(8,s=w));let r=!1,l,o=!0;function u(w){Te.update(y=>y.addTimer(w.detail))}function a(w){Te.update(y=>y.setActive(w.detail))}function c(){Te.update(w=>w.resetActive())}Nn(()=>{console.log("get darkmode:",i),t(2,o=!1)});function f(){rn.update(w=>!w),console.log("toggle dark",i)}function d(w){l=w,t(0,l)}function v(){r=this.checked,t(1,r)}return n.$$.update=()=>{n.$$.dirty&257&&s&&l!==void 0&&Te.update(w=>(w.setActiveDur(l),w))},[l,r,o,i,u,a,c,f,s,d,v]}class fs extends Se{constructor(e){super(),De(this,e,rs,ls,ke,{})}}export{fs as component};
