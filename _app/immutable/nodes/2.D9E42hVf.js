var Vn=Object.defineProperty;var $n=(n,e,t)=>e in n?Vn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var de=(n,e,t)=>$n(n,typeof e!="symbol"?e+"":e,t);import{r as Ve,s as ge,c as kn,e as k,b as V,v as Je,d as b,f as N,i as m,j as $,y as g,k as R,P as G,u as bn,g as Tn,a as Sn,t as W,h as X,z as F,l as h,m as Y,Q as et,R as Ft,S as je,n as x,T as Q,U as ut,A as Ue,V as Bt,o as De,W as wt,X as Ln,x as Dn,Y as yt,Z as zt,_ as Gt,$ as En}from"../chunks/scheduler.DKswyAsD.js";import{a as B,t as U,S as pe,i as we,b as oe,d as ae,m as ce,e as ue,g as Fe,c as Be,f as Mt}from"../chunks/index.CGzl_g6S.js";import{b as Ye,w as ht,d as mt}from"../chunks/paths.VLYLjoZI.js";function be(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Rn(n,e){n.d(1),e.delete(n.key)}function Hn(n,e){B(n,1,1,()=>{e.delete(n.key)})}function In(n,e,t,i,s,r,l,o,u,c,a,f){let d=n.length,p=r.length,S=d;const I={};for(;S--;)I[n[S].key]=S;const M=[],D=new Map,j=new Map,E=[];for(S=p;S--;){const A=f(s,r,S),v=t(A);let _=l.get(v);_?E.push(()=>_.p(A,e)):(_=c(v,A),_.c()),D.set(v,M[S]=_),v in I&&j.set(v,Math.abs(S-I[v]))}const w=new Set,O=new Set;function y(A){U(A,1),A.m(o,a),l.set(A.key,A),a=A.first,p--}for(;d&&p;){const A=M[p-1],v=n[d-1],_=A.key,T=v.key;A===v?(a=A.first,d--,p--):D.has(T)?!l.has(_)||w.has(_)?y(A):O.has(T)?d--:j.get(_)>j.get(T)?(O.add(_),y(A)):(w.add(T),d--):(u(v,l),d--)}for(;d--;){const A=n[d];D.has(A.key)||u(A,l)}for(;p;)y(M[p-1]);return Ve(E),M}function On(n,e){const t={},i={},s={$$scope:1};let r=n.length;for(;r--;){const l=n[r],o=e[r];if(o){for(const u in l)u in o||(i[u]=1);for(const u in o)s[u]||(t[u]=o[u],s[u]=1);n[r]=o}else for(const u in l)s[u]=1}for(const l in i)l in t||(t[l]=void 0);return t}function Cn(n){return typeof n=="object"&&n!==null?n:{}}const Un=Ye+"/ring2.wav";let yn=function(){},xe,kt,Mn=.5,rt;if(typeof window<"u"){let n=window.AudioContext||window.webkitAudioContext;xe=new n,fetch(Un).then(e=>e.arrayBuffer()).then(e=>xe.decodeAudioData(e)).then(e=>{kt=e}).catch(e=>console.error("Error loading sound file:",e)),yn=function(){if(!kt)return;rt=xe.createBufferSource(),rt.buffer=kt;let e=xe.createGain();e.gain.value=Mn,rt.connect(e),e.connect(xe.destination),rt.start(0)}}function Nt(){yn()}function Fn(n,e){Mn=n,Nt()}function Wt(n){let e,t;return{c(){e=k("div"),t=W(n[0]),this.h()},l(i){e=b(i,"DIV",{style:!0,class:!0});var s=N(e);t=X(s,n[0]),s.forEach(m),this.h()},h(){F(e,"top",n[3]+"px"),F(e,"left",n[2]+"px"),g(e,"class","tooltip svelte-43gogz")},m(i,s){R(i,e,s),h(e,t)},p(i,s){s&1&&Y(t,i[0]),s&8&&F(e,"top",i[3]+"px"),s&4&&F(e,"left",i[2]+"px")},d(i){i&&m(e)}}}function Bn(n){let e,t,i,s,r,l;const o=n[8].default,u=kn(o,n,n[7],null);let c=n[1]&&Wt(n);return{c(){e=k("div"),u&&u.c(),t=V(),c&&c.c(),i=Je(),this.h()},l(a){e=b(a,"DIV",{"aria-hidden":!0});var f=N(e);u&&u.l(f),f.forEach(m),t=$(a),c&&c.l(a),i=Je(),this.h()},h(){g(e,"aria-hidden","true")},m(a,f){R(a,e,f),u&&u.m(e,null),R(a,t,f),c&&c.m(a,f),R(a,i,f),s=!0,r||(l=[G(e,"mouseover",n[4]),G(e,"mouseleave",n[6]),G(e,"mousemove",n[5]),G(e,"focus",zn)],r=!0)},p(a,[f]){u&&u.p&&(!s||f&128)&&bn(u,o,a,a[7],s?Sn(o,a[7],f,null):Tn(a[7]),null),a[1]?c?c.p(a,f):(c=Wt(a),c.c(),c.m(i.parentNode,i)):c&&(c.d(1),c=null)},i(a){s||(U(u,a),s=!0)},o(a){B(u,a),s=!1},d(a){a&&(m(e),m(t),m(i)),u&&u.d(a),c&&c.d(a),r=!1,Ve(l)}}}const zn=function(){};function Gn(n,e,t){let{$$slots:i={},$$scope:s}=e,{title:r=""}=e,l=!1,o,u;function c(d){t(1,l=!0),t(2,o=d.pageX+10),t(3,u=d.pageY+10)}function a(d){t(2,o=d.pageX+10),t(3,u=d.pageY+10)}function f(){t(1,l=!1)}return n.$$set=d=>{"title"in d&&t(0,r=d.title),"$$scope"in d&&t(7,s=d.$$scope)},[r,l,o,u,c,a,f,s,i]}class At extends pe{constructor(e){super(),we(this,e,Gn,Bn,ge,{title:0})}}function Xt(n){let e=Math.floor(n/60),t=Math.floor(n%60).toString().padStart(2,"0"),i=e.toString().padStart(2,"0");if(e>60){let s=Math.floor(e/60);return i=Math.floor(e%60).toString().padStart(2,"0"),`${s}:${i}:${t}`}return`${i}:${t}`}function Kt(n){let e=Math.floor(n/60),t=Math.floor(n%60);if(e>60){let i=Math.floor(e/60);return e=Math.floor(e%60),`${i}h ${e} min`}else return e>0?`${e} min`:`${t} sec`}function qt(n){let e=Math.floor(n/3600);e>0&&(n=n-e*3600);let t=Math.floor(n/60),i=Math.floor(n%60);return e==1?`${e} hour ${t} min`:e>0?`${e} hours ${t} min`:t>=5?`${t} min`:t>1?`${t} min ${i} sec`:`${i} sec`}class Wn{constructor(e,t,i,s=300){de(this,"intervalId",0);de(this,"duration",0);de(this,"start",0);de(this,"remain",0);de(this,"onSec",e=>{});de(this,"onAlarm",()=>{});this.duration=e,this.remain=e-1,e>0&&(this.onSec=t,this.onAlarm=i,this.start=Date.now(),this.intervalId=setInterval(()=>{const r=Math.ceil((Date.now()-this.start)/1e3);let l=this.duration-r;l!=this.remain&&(t(this.remain),this.remain=l,this.remain<=0&&(this.onAlarm(),clearInterval(this.intervalId)))},s))}stop(){clearInterval(this.intervalId)}}function Xn(n){let e,t=Xt(n[0])+"",i,s,r;return{c(){e=k("button"),i=W(t),this.h()},l(l){e=b(l,"BUTTON",{id:!0,class:!0});var o=N(e);i=X(o,t),o.forEach(m),this.h()},h(){g(e,"id","watch"),g(e,"class","svelte-1kj7nhv")},m(l,o){R(l,e,o),h(e,i),s||(r=G(e,"click",n[1]),s=!0)},p(l,o){o&1&&t!==(t=Xt(l[0])+"")&&Y(i,t)},d(l){l&&m(e),s=!1,r()}}}function Kn(n){let e,t;return e=new At({props:{title:"stop timer",$$slots:{default:[Xn]},$$scope:{ctx:n}}}),{c(){oe(e.$$.fragment)},l(i){ae(e.$$.fragment,i)},m(i,s){ce(e,i,s),t=!0},p(i,[s]){const r={};s&257&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(U(e.$$.fragment,i),t=!0)},o(i){B(e.$$.fragment,i),t=!1},d(i){ue(e,i)}}}function qn(n,e,t){let{time:i=0}=e,{remainedSeconds:s=0}=e;var r;const l=et();function o(f){r!=null&&r.stop(),r=new Wn(f,u,c),t(0,s=f)}function u(f){t(0,s=f)}function c(){Nt(),l("alarming")}function a(){l("stop")}return n.$$set=f=>{"time"in f&&t(2,i=f.time),"remainedSeconds"in f&&t(0,s=f.remainedSeconds)},n.$$.update=()=>{n.$$.dirty&4&&o(i)},[s,a,i]}class Jn extends pe{constructor(e){super(),we(this,e,qn,Kn,ge,{time:2,remainedSeconds:0})}}function Yn(n){let e,t,i,s,r,l;return{c(){e=k("button"),t=W(n[1]),i=W(" min"),this.h()},l(o){e=b(o,"BUTTON",{class:!0});var u=N(e);t=X(u,n[1]),i=X(u," min"),u.forEach(m),this.h()},h(){g(e,"class",s=Ft(n[2])+" svelte-8w7xxt"),je(e,"pressed",n[0])},m(o,u){R(o,e,u),h(e,t),h(e,i),r||(l=G(e,"click",n[5]),r=!0)},p(o,[u]){u&2&&Y(t,o[1]),u&4&&s!==(s=Ft(o[2])+" svelte-8w7xxt")&&g(e,"class",s),u&5&&je(e,"pressed",o[0])},i:x,o:x,d(o){o&&m(e),r=!1,l()}}}function Qn(n,e,t){const i=et();let{value:s}=e,{name:r}=e,{pressed:l=!1}=e;function o(a,f){i("start",{name:a,val:f}),t(0,l=!0)}function u(){t(0,l=!1)}const c=function(){o(r,s)};return n.$$set=a=>{"value"in a&&t(1,s=a.value),"name"in a&&t(2,r=a.name),"pressed"in a&&t(0,l=a.pressed)},[l,s,r,o,u,c]}class Nn extends pe{constructor(e){super(),we(this,e,Qn,Yn,ge,{value:1,name:2,pressed:0,reset:4})}get reset(){return this.$$.ctx[4]}}const Te={WORK:"work",REST:"rest"},Zn={afterClockIntervalS:3,afterClockTimeoutS:10,timersMultiplier:1},xn={afterClockIntervalS:10,afterClockTimeoutS:60*15,timersMultiplier:1*60};function It(n){return n?Zn:xn}function Jt(n,e,t){const i=n.slice();return i[9]=e[t],i[10]=e,i[11]=t,i}const ei=n=>({}),Yt=n=>({class:"item svelte-1rvg6ah"});function Qt(n,e,t){const i=n.slice();return i[9]=e[t],i[12]=e,i[11]=t,i}function Zt(n){let e,t=n[11],i,s,r;const l=()=>n[6](e,t),o=()=>n[6](null,t);let u={value:n[9],name:Te.WORK};return e=new Nn({props:u}),l(),e.$on("start",n[2]),{c(){oe(e.$$.fragment),i=V(),s=k("br")},l(c){ae(e.$$.fragment,c),i=$(c),s=b(c,"BR",{})},m(c,a){ce(e,c,a),R(c,i,a),R(c,s,a),r=!0},p(c,a){t!==c[11]&&(o(),t=c[11],l());const f={};e.$set(f)},i(c){r||(U(e.$$.fragment,c),r=!0)},o(c){B(e.$$.fragment,c),r=!1},d(c){c&&(m(i),m(s)),o(),ue(e,c)}}}function xt(n){let e,t=n[11],i,s,r;const l=()=>n[7](e,t),o=()=>n[7](null,t);let u={value:n[9],name:Te.REST};return e=new Nn({props:u}),l(),e.$on("start",n[2]),{c(){oe(e.$$.fragment),i=V(),s=k("br")},l(c){ae(e.$$.fragment,c),i=$(c),s=b(c,"BR",{})},m(c,a){ce(e,c,a),R(c,i,a),R(c,s,a),r=!0},p(c,a){t!==c[11]&&(o(),t=c[11],l());const f={};e.$set(f)},i(c){r||(U(e.$$.fragment,c),r=!0)},o(c){B(e.$$.fragment,c),r=!1},d(c){c&&(m(i),m(s)),o(),ue(e,c)}}}function ti(n){let e,t,i,s,r="Active",l,o,u,c,a,f,d="Rest",p,S,I,M=be(n[1]),D=[];for(let v=0;v<M.length;v+=1)D[v]=Zt(Qt(n,M,v));const j=v=>B(D[v],1,1,()=>{D[v]=null}),E=n[5].default,w=kn(E,n,n[4],Yt);let O=be(n[1]),y=[];for(let v=0;v<O.length;v+=1)y[v]=xt(Jt(n,O,v));const A=v=>B(y[v],1,1,()=>{y[v]=null});return{c(){e=k("div"),t=k("div"),i=k("div"),s=k("span"),s.textContent=r,l=k("br"),o=V();for(let v=0;v<D.length;v+=1)D[v].c();u=V(),w&&w.c(),c=V(),a=k("div"),f=k("span"),f.textContent=d,p=k("br"),S=V();for(let v=0;v<y.length;v+=1)y[v].c();this.h()},l(v){e=b(v,"DIV",{});var _=N(e);t=b(_,"DIV",{class:!0});var T=N(t);i=b(T,"DIV",{class:!0});var C=N(i);s=b(C,"SPAN",{class:!0,"data-svelte-h":!0}),Q(s)!=="svelte-19szg5l"&&(s.textContent=r),l=b(C,"BR",{}),o=$(C);for(let P=0;P<D.length;P+=1)D[P].l(C);C.forEach(m),u=$(T),w&&w.l(T),c=$(T),a=b(T,"DIV",{class:!0});var K=N(a);f=b(K,"SPAN",{class:!0,"data-svelte-h":!0}),Q(f)!=="svelte-1gtata5"&&(f.textContent=d),p=b(K,"BR",{}),S=$(K);for(let P=0;P<y.length;P+=1)y[P].l(K);K.forEach(m),T.forEach(m),_.forEach(m),this.h()},h(){g(s,"class","label svelte-1rvg6ah"),g(i,"class","item svelte-1rvg6ah"),g(f,"class","label svelte-1rvg6ah"),g(a,"class","item svelte-1rvg6ah"),g(t,"class","grid-container svelte-1rvg6ah")},m(v,_){R(v,e,_),h(e,t),h(t,i),h(i,s),h(i,l),h(i,o);for(let T=0;T<D.length;T+=1)D[T]&&D[T].m(i,null);h(t,u),w&&w.m(t,null),h(t,c),h(t,a),h(a,f),h(a,p),h(a,S);for(let T=0;T<y.length;T+=1)y[T]&&y[T].m(a,null);I=!0},p(v,[_]){if(_&7){M=be(v[1]);let T;for(T=0;T<M.length;T+=1){const C=Qt(v,M,T);D[T]?(D[T].p(C,_),U(D[T],1)):(D[T]=Zt(C),D[T].c(),U(D[T],1),D[T].m(i,null))}for(Fe(),T=M.length;T<D.length;T+=1)j(T);Be()}if(w&&w.p&&(!I||_&16)&&bn(w,E,v,v[4],I?Sn(E,v[4],_,ei):Tn(v[4]),Yt),_&7){O=be(v[1]);let T;for(T=0;T<O.length;T+=1){const C=Jt(v,O,T);y[T]?(y[T].p(C,_),U(y[T],1)):(y[T]=xt(C),y[T].c(),U(y[T],1),y[T].m(a,null))}for(Fe(),T=O.length;T<y.length;T+=1)A(T);Be()}},i(v){if(!I){for(let _=0;_<M.length;_+=1)U(D[_]);U(w,v);for(let _=0;_<O.length;_+=1)U(y[_]);I=!0}},o(v){D=D.filter(Boolean);for(let _=0;_<D.length;_+=1)B(D[_]);B(w,v),y=y.filter(Boolean);for(let _=0;_<y.length;_+=1)B(y[_]);I=!1},d(v){v&&m(e),ut(D,v),w&&w.d(v),ut(y,v)}}}function ni(n,e,t){let{$$slots:i={},$$scope:s}=e;const r=et();let l=[],o=[5,10,15,20,25,120];function u(d){r("start",{timer:d.detail.val,name:d.detail.name}),console.log("handleTimerStart")}function c(){l.forEach(d=>{d&&d.reset()})}function a(d,p){Ue[d?"unshift":"push"](()=>{l[p]=d,t(0,l)})}function f(d,p){Ue[d?"unshift":"push"](()=>{l[p+l.length]=d,t(0,l)})}return n.$$set=d=>{"$$scope"in d&&t(4,s=d.$$scope)},[l,o,u,c,s,i,a,f]}class ii extends pe{constructor(e){super(),we(this,e,ni,ti,ge,{clear:3})}get clear(){return this.$$.ctx[3]}}/*! js-cookie v3.0.5 | MIT */function ot(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)n[i]=t[i]}return n}var si={read:function(n){return n[0]==='"'&&(n=n.slice(1,-1)),n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(n){return encodeURIComponent(n).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function Ot(n,e){function t(s,r,l){if(!(typeof document>"u")){l=ot({},e,l),typeof l.expires=="number"&&(l.expires=new Date(Date.now()+l.expires*864e5)),l.expires&&(l.expires=l.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var u in l)l[u]&&(o+="; "+u,l[u]!==!0&&(o+="="+l[u].split(";")[0]));return document.cookie=s+"="+n.write(r,s)+o}}function i(s){if(!(typeof document>"u"||arguments.length&&!s)){for(var r=document.cookie?document.cookie.split("; "):[],l={},o=0;o<r.length;o++){var u=r[o].split("="),c=u.slice(1).join("=");try{var a=decodeURIComponent(u[0]);if(l[a]=n.read(c,a),s===a)break}catch{}}return s?l[s]:l}}return Object.create({set:t,get:i,remove:function(s,r){t(s,"",ot({},r,{expires:-1}))},withAttributes:function(s){return Ot(this.converter,ot({},this.attributes,s))},withConverter:function(s){return Ot(ot({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(n)}})}var ft=Ot(si,{path:"/"});class Ee{constructor(e=0,t="",i=new Date,s=new Date){de(this,"start");de(this,"finish");de(this,"name");de(this,"value");this.start=i,this.finish=s,this.name=t,this.value=e}setDuration(e){this.finish=new Date(this.start.getTime()+e*1e3)}durationS(){return(this.finish.getTime()-this.start.getTime())/1e3}}const le={RUNNING:"RUNNING",STOPPED:"STOPPED",WAITING_FOR_STOP:"WAITING_FOR_STOP"};var Pe=(n=>(n[n.EMIT=1]="EMIT",n[n.DO_NOT_EMIT=2]="DO_NOT_EMIT",n))(Pe||{});let An=60,li=5*60;function Pt(n,e,t=An){return(e.start.getTime()-n.finish.getTime())/1e3>t}function ri(n,e=An){var t=[],i=0;if(n.length<=1)return n;t.push(n[0]),i=0;for(let s=1;s<n.length;s++){const r=n[s];if(t[i].name!=r.name){t.push(r),i++;continue}Pt(t[i],r,e)?(t.push(r),i++):t[i].finish=r.finish}return t}function bt(n,e=Te.REST,t=li){var i=[],s=0;if(n.length<=1)return n;i.push(n[0]),s=0;for(let l=1;l<n.length;l++){const o=n[l];if(Pt(i[s],o,t)){var r=new Ee(0,e,i[s].finish,o.start);i.push(r),s++}i.push(o),s++}return i}function oi(n){return n.forEach(e=>{if(!("name"in e&&"start"in e&&"finish"in e))return!1}),!0}function ai(n){let e=[];try{const t=JSON.parse(n);let i=[];oi(t)&&t.forEach(s=>{i.push(new Ee(0,s.name,new Date(s.start*1e3),new Date(s.finish*1e3)))}),console.log("deserialized logs:",i),e=i}catch{e=[]}return new Ct(e)}class Ct{constructor(e){de(this,"additionalS",0);de(this,"list",[]);this.list=bt(e,Te.REST)}serialize(){let e=[];return this.list.forEach(t=>{e.push({name:t.name,start:Math.floor(t.start.getTime()/1e3),finish:Math.floor(t.finish.getTime()/1e3)})}),JSON.stringify(e)}_normalize(){this.list=bt(this.list,Te.REST),this.list=ri(this.list,0)}addTimer(e){return this.list.push(e),this._normalize(),this}remove(e){for(var t=0;t<this.list.length;)this.list[t].start===e?this.list.splice(t,1):++t;this._normalize()}total(){let e=0;return this.list.forEach(t=>{t.name==Te.WORK&&(e+=t.durationS())}),e}fillGaps(e=new Ee){if(this.list=bt(this.list),this.list.length>0){let t=this.list[this.list.length-1];Pt(t,e)&&this.list.push(new Ee(0,Te.REST,t.finish,e.start))}return this}}class ci{constructor(){de(this,"timerHistory");de(this,"active");this.timerHistory=new Ct([])}addTimer(e){return this.active=void 0,this.timerHistory.addTimer(e),this}remove(e){return this.timerHistory.remove(e),this}clearLogs(){return this.timerHistory=new Ct([]),this}resetActive(){return this.active=void 0,this}updateActiveTimer(){return this.active&&(this.active.finish=new Date),this}setActive(e){return this.active=e,this.timerHistory.fillGaps(),this}totalTime(){let e=this.timerHistory.total();return this.active&&this.active.name==Te.WORK&&(e+=this.active.durationS()),e}}function Pn(n,e,t={storage:"cookies",cookieExpireDays:31}){const i=t.serialize||JSON.stringify,s=t.deserialize||JSON.parse;let r=e;try{const o=t.storage==="cookies"?ft.get(n):localStorage.getItem(n);o&&(r=s(o))}catch(o){console.warn(`Failed to load ${n} from ${t.storage}:`,o)}const l=ht(r);return l.subscribe(o=>{try{const u=i(o);t.storage==="cookies"?ft.set(n,u,{expires:t.cookieExpireDays||31}):localStorage.setItem(n,u)}catch(u){console.warn(`Failed to save ${n} to ${t.storage}:`,u)}}),l}function ui(){let n=new ci;{const t=ft.get("logs");console.log("Loading pomApp from cookies:",t),t&&(n.timerHistory=ai(t))}const e=ht(n);return e.subscribe(t=>{const i=t.timerHistory.serialize();ft.set("logs",i,{expires:31}),console.log("Saved pomApp to cookies")}),e}const ke=ui(),en=Pn("darkmode",!1,{storage:"cookies",serialize:n=>n.toString(),deserialize:n=>n==="true"}),fi=mt(ke,n=>n.totalTime()),at=Pn("volume",10,{storage:"cookies",serialize:n=>n.toString(),deserialize:n=>parseInt(n,10)});function di(n){let e,t,i,s=`<img src="${Ye}/volume_mute.svg" alt="Mute icon"/>`,r,l,o,u,c=`<img src="${Ye}/volume_up.svg" alt="Volume max icon"/>`,a,f;return{c(){e=k("label"),t=k("div"),i=k("button"),i.innerHTML=s,r=V(),l=k("input"),o=V(),u=k("button"),u.innerHTML=c,this.h()},l(d){e=b(d,"LABEL",{});var p=N(e);t=b(p,"DIV",{class:!0});var S=N(t);i=b(S,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(i)!=="svelte-t9bnpg"&&(i.innerHTML=s),r=$(S),l=b(S,"INPUT",{class:!0,type:!0,min:!0,max:!0}),o=$(S),u=b(S,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(u)!=="svelte-yorq7f"&&(u.innerHTML=c),S.forEach(m),p.forEach(m),this.h()},h(){g(i,"class","leftbutton svelte-1vsc329"),g(l,"class","slider bar svelte-1vsc329"),g(l,"type","range"),g(l,"min","0"),g(l,"max","100"),g(u,"class","svelte-1vsc329"),g(t,"class","container svelte-1vsc329")},m(d,p){R(d,e,p),h(e,t),h(t,i),h(t,r),h(t,l),Bt(l,n[0]),h(t,o),h(t,u),a||(f=[G(i,"click",n[2]),G(l,"change",n[5]),G(l,"input",n[5]),G(l,"mouseup",n[1]),G(u,"click",n[3])],a=!0)},p(d,[p]){p&1&&Bt(l,d[0])},i:x,o:x,d(d){d&&m(e),a=!1,Ve(f)}}}function hi(n,e,t){let i;De(n,at,c=>t(4,i=c));let s=i;function r(c){wt(at,i=parseInt(c.target.value,10),i)}function l(){wt(at,i=0,i)}function o(){wt(at,i=100,i)}function u(){s=Ln(this.value),t(0,s),t(4,i)}return n.$$.update=()=>{n.$$.dirty&16&&(console.log("volume",i),Fn(i/100),t(0,s=i))},[s,r,l,o,i,u]}class mi extends pe{constructor(e){super(),we(this,e,hi,di,ge,{})}}function vi(n,e,t){const i=et();let{debugFlag:s}=e,{active:r=!0}=e,l=0,o=0;function u(a){console.log("run annoyer",a),clearInterval(l),clearTimeout(o),a&&(l=setInterval(()=>{Nt(),r||clearInterval(l)},It(s).afterClockIntervalS*1e3),o=setTimeout(()=>{t(0,r=!1),clearInterval(l),c()},It(s).afterClockTimeoutS*1e3))}function c(){i("off")}return n.$$set=a=>{"debugFlag"in a&&t(1,s=a.debugFlag),"active"in a&&t(0,r=a.active)},n.$$.update=()=>{n.$$.dirty&1&&u(r)},[r,s]}class _i extends pe{constructor(e){super(),we(this,e,vi,null,ge,{debugFlag:1,active:0})}}const tn=Ye+"/tea.png",gi=Ye+"/clock_red.png",pi=Ye+"/clock_yellow.png";function wi(n){if(console.log("changeFavicon",n),typeof document>"u"||document===null)return;const e=document.getElementById("favicon");if(e!==null)switch(n){case le.STOPPED:e.href=tn;break;case le.RUNNING:e.href=gi;break;case le.WAITING_FOR_STOP:e.href=pi;break;default:e.href=tn}}function ki(){const{subscribe:n,set:e,update:t}=ht({state:le.STOPPED,currentTimer:new Ee,clockDuration:0});return{subscribe:n,start:(i,s,r)=>{const l=It(r).timersMultiplier;t(o=>({state:le.RUNNING,currentTimer:new Ee(i,s),clockDuration:i*l}))},alarm:i=>{t(s=>{if(i){const r=Object.assign(Object.create(Object.getPrototypeOf(s.currentTimer)),s.currentTimer,{finish:new Date});return{...s,state:le.STOPPED,clockDuration:0,currentTimer:r}}else return{...s,state:le.WAITING_FOR_STOP}})},stop:()=>{t(i=>{const s=Object.assign(Object.create(Object.getPrototypeOf(i.currentTimer)),i.currentTimer,{finish:new Date});return{...i,state:le.STOPPED,clockDuration:0,currentTimer:s}})},reset:()=>{e({state:le.STOPPED,currentTimer:new Ee,clockDuration:0})}}}const He=ki(),bi=mt(He,n=>n.state),Ti=mt(He,n=>n.currentTimer),Si=mt(He,n=>n.clockDuration);function Di(n){let e,t,i;return e=new mi({}),{c(){oe(e.$$.fragment),t=k("br")},l(s){ae(e.$$.fragment,s),t=b(s,"BR",{})},m(s,r){ce(e,s,r),R(s,t,r),i=!0},p:x,i(s){i||(U(e.$$.fragment,s),i=!0)},o(s){B(e.$$.fragment,s),i=!1},d(s){s&&m(t),ue(e,s)}}}function nn(n){let e,t;return e=new At({props:{title:"stop and don't save logs",$$slots:{default:[Ei]},$$scope:{ctx:n}}}),{c(){oe(e.$$.fragment)},l(i){ae(e.$$.fragment,i)},m(i,s){ce(e,i,s),t=!0},p(i,s){const r={};s&65536&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){t||(U(e.$$.fragment,i),t=!0)},o(i){B(e.$$.fragment,i),t=!1},d(i){ue(e,i)}}}function Ei(n){let e,t="cancel",i,s,r,l;return{c(){e=k("button"),e.textContent=t,i=V(),s=k("br"),this.h()},l(o){e=b(o,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1wi9d3u"&&(e.textContent=t),i=$(o),s=b(o,"BR",{}),this.h()},h(){g(e,"id","stopper"),g(e,"class","svelte-1viwsah")},m(o,u){R(o,e,u),R(o,i,u),R(o,s,u),r||(l=G(e,"click",n[8]),r=!0)},p:x,d(o){o&&(m(e),m(i),m(s)),r=!1,l()}}}function Ii(n){let e,t,i,s,r,l,o;function u(f){n[10](f)}let c={time:n[4]};n[0]!==void 0&&(c.remainedSeconds=n[0]),t=new Jn({props:c}),Ue.push(()=>Mt(t,"remainedSeconds",u)),t.$on("alarming",n[6]),t.$on("stop",n[9]),r=new At({props:{title:"Volume",$$slots:{default:[Di]},$$scope:{ctx:n}}});let a=n[2]!==le.STOPPED&&nn(n);return{c(){e=k("div"),oe(t.$$.fragment),s=V(),oe(r.$$.fragment),l=V(),a&&a.c(),this.h()},l(f){e=b(f,"DIV",{class:!0});var d=N(e);ae(t.$$.fragment,d),s=$(d),ae(r.$$.fragment,d),l=$(d),a&&a.l(d),d.forEach(m),this.h()},h(){g(e,"class","clock svelte-1viwsah")},m(f,d){R(f,e,d),ce(t,e,null),h(e,s),ce(r,e,null),h(e,l),a&&a.m(e,null),o=!0},p(f,d){const p={};d&16&&(p.time=f[4]),!i&&d&1&&(i=!0,p.remainedSeconds=f[0],yt(()=>i=!1)),t.$set(p);const S={};d&65536&&(S.$$scope={dirty:d,ctx:f}),r.$set(S),f[2]!==le.STOPPED?a?(a.p(f,d),d&4&&U(a,1)):(a=nn(f),a.c(),U(a,1),a.m(e,null)):a&&(Fe(),B(a,1,1,()=>{a=null}),Be())},i(f){o||(U(t.$$.fragment,f),U(r.$$.fragment,f),U(a),o=!0)},o(f){B(t.$$.fragment,f),B(r.$$.fragment,f),B(a),o=!1},d(f){f&&m(e),ue(t),ue(r),a&&a.d()}}}function Oi(n){let e,t,i,s,r={$$slots:{default:[Ii]},$$scope:{ctx:n}};return e=new ii({props:r}),n[11](e),e.$on("start",n[5]),e.$on("stop",n[12]),i=new _i({props:{active:n[2]===le.WAITING_FOR_STOP,debugFlag:n[1]}}),i.$on("off",n[13]),{c(){oe(e.$$.fragment),t=V(),oe(i.$$.fragment)},l(l){ae(e.$$.fragment,l),t=$(l),ae(i.$$.fragment,l)},m(l,o){ce(e,l,o),R(l,t,o),ce(i,l,o),s=!0},p(l,[o]){const u={};o&65557&&(u.$$scope={dirty:o,ctx:l}),e.$set(u);const c={};o&4&&(c.active=l[2]===le.WAITING_FOR_STOP),o&2&&(c.debugFlag=l[1]),i.$set(c)},i(l){s||(U(e.$$.fragment,l),U(i.$$.fragment,l),s=!0)},o(l){B(e.$$.fragment,l),B(i.$$.fragment,l),s=!1},d(l){l&&m(t),n[11](null),ue(e,l),ue(i,l)}}}function Ci(n,e,t){let i,s,r;De(n,bi,E=>t(2,i=E)),De(n,Ti,E=>t(14,s=E)),De(n,Si,E=>t(4,r=E));const l=et();let{debugFlag:o}=e,{remainedSeconds:u}=e,c;function a(E){i===le.RUNNING&&d(Pe.EMIT),He.start(E.detail.timer,E.detail.name,o),l("current",s)}function f(){const E=typeof document<"u"&&document.visibilityState==="visible";He.alarm(E),E&&(c&&c.clear(),l("timer",s))}function d(E=Pe.EMIT){He.stop(),c&&c.clear(),E===Pe.EMIT&&l("timer",s)}function p(){He.reset(),c&&c.clear(),l("cancel")}function S(){i!==le.STOPPED&&d(Pe.EMIT)}Dn(()=>{document.addEventListener("visibilitychange",function(){i===le.WAITING_FOR_STOP&&document.visibilityState==="visible"&&(console.log("visibility change to visible"),d(Pe.EMIT))})});function I(E){u=E,t(0,u)}function M(E){Ue[E?"unshift":"push"](()=>{c=E,t(3,c)})}const D=()=>d(Pe.DO_NOT_EMIT),j=()=>d(Pe.DO_NOT_EMIT);return n.$$set=E=>{"debugFlag"in E&&t(1,o=E.debugFlag),"remainedSeconds"in E&&t(0,u=E.remainedSeconds)},n.$$.update=()=>{n.$$.dirty&4&&wi(i)},[u,o,i,c,r,a,f,d,p,S,I,M,D,j]}class yi extends pe{constructor(e){super(),we(this,e,Ci,Oi,ge,{debugFlag:1,remainedSeconds:0})}}function Mi(n){let e;return{c(){e=W("Active for")},l(t){e=X(t,"Active for")},m(t,i){R(t,e,i)},d(t){t&&m(e)}}}function Ni(n){let e;return{c(){e=W("Rest for")},l(t){e=X(t,"Rest for")},m(t,i){R(t,e,i)},d(t){t&&m(e)}}}function Ai(n){let e,t,i,s,r,l,o,u=Kt(n[2])+"",c;function a(p,S){return p[1]?Ni:Mi}let f=a(n),d=f(n);return{c(){e=k("snap"),t=k("snap"),i=W(n[3]),s=V(),r=k("snap"),d.c(),l=V(),o=k("snap"),c=W(u),this.h()},l(p){e=b(p,"SNAP",{class:!0});var S=N(e);t=b(S,"SNAP",{class:!0});var I=N(t);i=X(I,n[3]),I.forEach(m),s=$(S),r=b(S,"SNAP",{});var M=N(r);d.l(M),M.forEach(m),l=$(S),o=b(S,"SNAP",{class:!0});var D=N(o);c=X(D,u),D.forEach(m),S.forEach(m),this.h()},h(){g(t,"class","time work svelte-i9m2em"),g(o,"class","duration svelte-i9m2em"),g(e,"class","logline svelte-i9m2em"),je(e,"topLog",n[0]),je(e,"rest",n[1])},m(p,S){R(p,e,S),h(e,t),h(t,i),h(e,s),h(e,r),d.m(r,null),h(e,l),h(e,o),h(o,c)},p(p,[S]){f!==(f=a(p))&&(d.d(1),d=f(p),d&&(d.c(),d.m(r,null))),S&4&&u!==(u=Kt(p[2])+"")&&Y(c,u),S&1&&je(e,"topLog",p[0]),S&2&&je(e,"rest",p[1])},i:x,o:x,d(p){p&&m(e),d.d()}}}function Pi(n){let e=n.getHours().toString().padStart(2,"0"),t=n.getMinutes().toString().padStart(2,"0");return`${e}:${t}`}function ji(n,e,t){let i,s,{start:r}=e,{finish:l}=e,{name:o}=e,{topLog:u=!1}=e,c=Pi(r);return n.$$set=a=>{"start"in a&&t(4,r=a.start),"finish"in a&&t(5,l=a.finish),"name"in a&&t(6,o=a.name),"topLog"in a&&t(0,u=a.topLog)},n.$$.update=()=>{n.$$.dirty&48&&t(2,i=(l.getTime()-r.getTime())/1e3),n.$$.dirty&64&&t(1,s=o===Te.REST)},[u,s,i,c,r,l,o]}class jn extends pe{constructor(e){super(),we(this,e,ji,Ai,ge,{start:4,finish:5,name:6,topLog:0})}}const jt=ht(null);function Vi(n){jt.set(n)}function ct(){jt.set(null)}function Tt(n){const e=n.slice(),t=e[7](e[1]);e[18]=t;const i=e[8](e[1]);e[19]=i;const s=e[9](e[1],e[4]);return e[20]=s,e}function sn(n,e,t){const i=n.slice();i[21]=e[t];const s=i[7](i[21]);i[18]=s;const r=i[8](i[21]);i[19]=r;const l=i[9](i[21],i[0]);i[20]=l;const o=parseFloat(i[18].width);i[22]=o;const u=!i[19]&&i[22]<.5?"2px":i[18].width;return i[23]=u,i}function ln(n,e,t){const i=n.slice();return i[26]=e[t],i}function rn(n){let e;return{c(){e=k("div"),this.h()},l(t){e=b(t,"DIV",{class:!0,style:!0,title:!0}),N(e).forEach(m),this.h()},h(){g(e,"class","future-overlay svelte-tywv71"),F(e,"left",n[5].left),F(e,"width",n[5].width),g(e,"title","Future time")},m(t,i){R(t,e,i)},p(t,i){i&32&&F(e,"left",t[5].left),i&32&&F(e,"width",t[5].width)},d(t){t&&m(e)}}}function on(n){let e,t,i=n[26].label+"",s,r;return{c(){e=k("div"),t=k("div"),s=W(i),r=V(),this.h()},l(l){e=b(l,"DIV",{class:!0,style:!0});var o=N(e);t=b(o,"DIV",{class:!0});var u=N(t);s=X(u,i),u.forEach(m),r=$(o),o.forEach(m),this.h()},h(){g(t,"class","grid-label svelte-tywv71"),g(e,"class","grid-line svelte-tywv71"),F(e,"left",n[26].position+"%")},m(l,o){R(l,e,o),h(e,t),h(t,s),h(e,r)},p(l,o){o&64&&i!==(i=l[26].label+"")&&Y(s,i),o&64&&F(e,"left",l[26].position+"%")},d(l){l&&m(e)}}}function an(n,e){let t,i,s,r,l;function o(){return e[13](e[21])}return{key:n,first:null,c(){t=k("div"),this.h()},l(u){t=b(u,"DIV",{class:!0,style:!0,title:!0}),N(t).forEach(m),this.h()},h(){g(t,"class",i="timer-block "+(e[19]?e[20]?"overtime":"work":"rest")+" svelte-tywv71"),F(t,"left",e[18].left),F(t,"width",e[23]),F(t,"min-width",e[19]?"0":"2px"),F(t,"cursor","pointer"),g(t,"title",s=Se(e[21].start)+" - "+Se(e[21].finish)+" ("+dt(e[21])+")"+(e[20]?" âš ï¸ Overtime":"")),this.first=t},m(u,c){R(u,t,c),r||(l=G(t,"click",o),r=!0)},p(u,c){e=u,c&1&&i!==(i="timer-block "+(e[19]?e[20]?"overtime":"work":"rest")+" svelte-tywv71")&&g(t,"class",i),c&1&&F(t,"left",e[18].left),c&1&&F(t,"width",e[23]),c&1&&F(t,"min-width",e[19]?"0":"2px"),c&1&&s!==(s=Se(e[21].start)+" - "+Se(e[21].finish)+" ("+dt(e[21])+")"+(e[20]?" âš ï¸ Overtime":""))&&g(t,"title",s)},d(u){u&&m(t),r=!1,l()}}}function cn(n){let e,t,i;return{c(){e=k("div"),this.h()},l(s){e=b(s,"DIV",{class:!0,style:!0,title:!0}),N(e).forEach(m),this.h()},h(){g(e,"class",t="timer-block active "+(n[19]?n[20]?"overtime":"work":"rest")+" svelte-tywv71"),F(e,"left",n[18].left),F(e,"width",n[18].width),g(e,"title",i="Active: "+Se(n[1].start)+" - now ("+dt(n[1])+")"+(n[20]?" âš ï¸ Overtime":""))},m(s,r){R(s,e,r)},p(s,r){r&18&&t!==(t="timer-block active "+(s[19]?s[20]?"overtime":"work":"rest")+" svelte-tywv71")&&g(e,"class",t),r&2&&F(e,"left",s[18].left),r&2&&F(e,"width",s[18].width),r&18&&i!==(i="Active: "+Se(s[1].start)+" - now ("+dt(s[1])+")"+(s[20]?" âš ï¸ Overtime":""))&&g(e,"title",i)},d(s){s&&m(e)}}}function $i(n){let e,t,i='<span class="timeline-title svelte-tywv71">Timeline</span> <div class="legend svelte-tywv71"><span class="legend-item svelte-tywv71"><span class="legend-color work svelte-tywv71"></span> <span>Work</span></span> <span class="legend-item svelte-tywv71" title="Overtime: 2+ min after alarm, or 25+ min for consecutive work"><span class="legend-color overtime svelte-tywv71"></span> <span>Overtime</span></span> <span class="legend-item svelte-tywv71"><span class="legend-color rest svelte-tywv71"></span> <span>Rest</span></span></div>',s,r,l,o=Se(new Date(n[2]))+"",u,c,a,f=Se(new Date(n[3]))+"",d,p,S,I,M=[],D=new Map,j,E=n[5].visible&&rn(n),w=be(n[6]),O=[];for(let _=0;_<w.length;_+=1)O[_]=on(ln(n,w,_));let y=be(n[0]);const A=_=>_[21].start;for(let _=0;_<y.length;_+=1){let T=sn(n,y,_),C=A(T);D.set(C,M[_]=an(C,T))}let v=n[1]&&cn(Tt(n));return{c(){e=k("div"),t=k("div"),t.innerHTML=i,s=V(),r=k("div"),l=k("div"),u=W(o),c=V(),a=k("div"),d=W(f),p=V(),E&&E.c(),S=V();for(let _=0;_<O.length;_+=1)O[_].c();I=V();for(let _=0;_<M.length;_+=1)M[_].c();j=V(),v&&v.c(),this.h()},l(_){e=b(_,"DIV",{class:!0});var T=N(e);t=b(T,"DIV",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-1sof6z9"&&(t.innerHTML=i),s=$(T),r=b(T,"DIV",{class:!0});var C=N(r);l=b(C,"DIV",{class:!0});var K=N(l);u=X(K,o),K.forEach(m),c=$(C),a=b(C,"DIV",{class:!0});var P=N(a);d=X(P,f),P.forEach(m),p=$(C),E&&E.l(C),S=$(C);for(let H=0;H<O.length;H+=1)O[H].l(C);I=$(C);for(let H=0;H<M.length;H+=1)M[H].l(C);j=$(C),v&&v.l(C),C.forEach(m),T.forEach(m),this.h()},h(){g(t,"class","timeline-header svelte-tywv71"),g(l,"class","time-label start svelte-tywv71"),g(a,"class","time-label end svelte-tywv71"),g(r,"class","timeline-bar svelte-tywv71"),g(e,"class","timeline-container svelte-tywv71")},m(_,T){R(_,e,T),h(e,t),h(e,s),h(e,r),h(r,l),h(l,u),h(r,c),h(r,a),h(a,d),h(r,p),E&&E.m(r,null),h(r,S);for(let C=0;C<O.length;C+=1)O[C]&&O[C].m(r,null);h(r,I);for(let C=0;C<M.length;C+=1)M[C]&&M[C].m(r,null);h(r,j),v&&v.m(r,null)},p(_,[T]){if(T&4&&o!==(o=Se(new Date(_[2]))+"")&&Y(u,o),T&8&&f!==(f=Se(new Date(_[3]))+"")&&Y(d,f),_[5].visible?E?E.p(_,T):(E=rn(_),E.c(),E.m(r,S)):E&&(E.d(1),E=null),T&64){w=be(_[6]);let C;for(C=0;C<w.length;C+=1){const K=ln(_,w,C);O[C]?O[C].p(K,T):(O[C]=on(K),O[C].c(),O[C].m(r,I))}for(;C<O.length;C+=1)O[C].d(1);O.length=w.length}T&897&&(y=be(_[0]),M=In(M,T,A,1,_,y,D,r,Rn,an,j,sn)),_[1]?v?v.p(Tt(_),T):(v=cn(Tt(_)),v.c(),v.m(r,null)):v&&(v.d(1),v=null)},i:x,o:x,d(_){_&&m(e),E&&E.d(),ut(O,_);for(let T=0;T<M.length;T+=1)M[T].d();v&&v.d()}}}function Se(n){return n.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!1})}function dt(n){return`${Math.round(n.durationS()/60)} min`}function Li(n,e,t){let i,s,r,l,o,u,{timers:c=[]}=e,{activeTimer:a=null}=e;const f=40*60*1e3;let d=0,p=0;function S(w){if(s===0)return{left:"0%",width:"0%"};const O=w.start.getTime()-r,y=w.finish.getTime()-w.start.getTime(),A=O/s*100,v=y/s*100;return{left:`${A}%`,width:`${v}%`}}function I(w){return w.name===Te.WORK}function M(w,O){const y=O.findIndex(T=>T.start.getTime()===w.start.getTime());if(y<=0)return!0;const A=O[y-1];return I(A)?(w.start.getTime()-A.finish.getTime())/(1e3*60)>=5:A.durationS()/60>=5}function D(w,O){if(!I(w))return[];const y=[w],A=O.findIndex(v=>v.start.getTime()===w.start.getTime());for(let v=A-1;v>=0;v--){const _=O[v],T=y[0],K=(T.start.getTime()-_.finish.getTime())/(1e3*60);if(I(_)&&K<5)y.unshift(_);else{if(!I(_)&&_.durationS()/60<5)continue;if(!I(_)&&M(T,O))break}}return y}function j(w,O){if(!I(w)||!w.value||w.value===0)return!1;const y=2,A=25,v=D(w,O);if(v.length===1){const _=w.durationS()/60,T=w.value;return _>T+y}else{const _=v.reduce((C,K)=>C+(K.value||0),0);return v.reduce((C,K)=>C+K.durationS()/60,0)>_+A}}const E=w=>Vi(w);return n.$$set=w=>{"timers"in w&&t(0,c=w.timers),"activeTimer"in w&&t(1,a=w.activeTimer)},n.$$.update=()=>{n.$$.dirty&3&&t(4,i=a?[...c,a]:c),n.$$.dirty&16&&t(2,r=i.length===0?Date.now():Math.min(...i.map(w=>w.start.getTime()))),n.$$.dirty&3094&&t(3,l=(()=>{if(i.length===0)return Date.now()+f;const O=Math.max(...i.map(A=>A.finish.getTime()));let y=Math.max(O,r+f);if(y+=d*36e5,a&&y!==p){const A=a.finish.getTime(),v=y-A,_=10*60*1e3;v<_&&(t(10,d++,d),y+=36e5,t(11,p=y),console.log("Extended timeline, total extensions:",d,"new end:",new Date(y)))}return y})()),n.$$.dirty&12&&t(12,s=l-r),n.$$.dirty&4108&&t(6,o=(()=>{if(s===0)return[];const w=[],O=new Date(r),y=new Date(l),A=new Date(O);for(A.setMinutes(0,0,0),A.setHours(A.getHours()+1);A.getTime()<=y.getTime();){const _=(A.getTime()-r)/s*100;_>=0&&_<=100&&w.push({position:_,label:A.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!1})}),A.setHours(A.getHours()+1)}return w})()),n.$$.dirty&4108&&t(5,u=(()=>{const w=Date.now();if(l>w){const O=Math.max(r,w),y=O-r,A=l-O,v=y/s*100,_=A/s*100;return{left:`${v}%`,width:`${_}%`,visible:_>0}}return{left:"0%",width:"0%",visible:!1}})())},[c,a,r,l,i,u,o,S,I,j,d,p,s,E]}class Ri extends pe{constructor(e){super(),we(this,e,Li,$i,ge,{timers:0,activeTimer:1})}}function St(n){const e=n.slice(),t=e[10](e[0],e[7].finish);return e[37]=t,e}function Dt(n){const e=n.slice(),t=e[10](e[1],e[0]);return e[37]=t,e}function Et(n){const e=n.slice(),t=e[10](e[8].start,e[1]);return e[37]=t,e}function un(n,e,t){const i=n.slice();return i[38]=e[t],i}function fn(n){let e,t,i,s,r="Edit Timer",l,o,u="Ã—",c,a,f,d,p,S="Type:",I,M,D=n[4].name+"",j,E,w,O,y="Duration:",A,v,_,T,C,K,P,H,ve,ee=re(n[2])+"",Ie,Ce,$e,Le=re(n[3])+"",ze,Qe,fe,L,q,he,Z,Ge="ðŸ’¡ Drag the edges to adjust timer boundaries",Re,z,me,ye="Delete",Ze,Oe,vt,Me,Vt="Cancel",_t,Ne,$t="Save",gt,Lt,te=n[6].length>0&&dn(n),ne=n[8]&&mn(Et(n)),ie=n[4]&&vn(Dt(n)),se=n[7]&&_n(St(n));return{c(){e=k("div"),t=k("div"),i=k("div"),s=k("h2"),s.textContent=r,l=V(),o=k("button"),o.textContent=u,c=V(),a=k("div"),f=k("div"),d=k("div"),p=k("span"),p.textContent=S,I=V(),M=k("span"),j=W(D),E=V(),w=k("div"),O=k("span"),O.textContent=y,A=V(),v=k("span"),_=W(n[9]),T=W(" min"),C=V(),te&&te.c(),K=V(),P=k("div"),H=k("div"),ve=k("span"),Ie=W(ee),Ce=V(),$e=k("span"),ze=W(Le),Qe=V(),fe=k("div"),ne&&ne.c(),L=V(),ie&&ie.c(),q=V(),se&&se.c(),he=V(),Z=k("div"),Z.textContent=Ge,Re=V(),z=k("div"),me=k("button"),me.textContent=ye,Ze=V(),Oe=k("div"),vt=V(),Me=k("button"),Me.textContent=Vt,_t=V(),Ne=k("button"),Ne.textContent=$t,this.h()},l(J){e=b(J,"DIV",{class:!0});var _e=N(e);t=b(_e,"DIV",{class:!0});var We=N(t);i=b(We,"DIV",{class:!0});var tt=N(i);s=b(tt,"H2",{class:!0,"data-svelte-h":!0}),Q(s)!=="svelte-1ut3txv"&&(s.textContent=r),l=$(tt),o=b(tt,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(o)!=="svelte-y9ayml"&&(o.textContent=u),tt.forEach(m),c=$(We),a=b(We,"DIV",{class:!0});var Xe=N(a);f=b(Xe,"DIV",{class:!0});var nt=N(f);d=b(nt,"DIV",{class:!0});var it=N(d);p=b(it,"SPAN",{class:!0,"data-svelte-h":!0}),Q(p)!=="svelte-owo3qx"&&(p.textContent=S),I=$(it),M=b(it,"SPAN",{class:!0});var Rt=N(M);j=X(Rt,D),Rt.forEach(m),it.forEach(m),E=$(nt),w=b(nt,"DIV",{class:!0});var st=N(w);O=b(st,"SPAN",{class:!0,"data-svelte-h":!0}),Q(O)!=="svelte-2ef875"&&(O.textContent=y),A=$(st),v=b(st,"SPAN",{class:!0});var pt=N(v);_=X(pt,n[9]),T=X(pt," min"),pt.forEach(m),st.forEach(m),nt.forEach(m),C=$(Xe),te&&te.l(Xe),K=$(Xe),P=b(Xe,"DIV",{class:!0});var Ke=N(P);H=b(Ke,"DIV",{class:!0});var lt=N(H);ve=b(lt,"SPAN",{});var Ht=N(ve);Ie=X(Ht,ee),Ht.forEach(m),Ce=$(lt),$e=b(lt,"SPAN",{});var Ut=N($e);ze=X(Ut,Le),Ut.forEach(m),lt.forEach(m),Qe=$(Ke),fe=b(Ke,"DIV",{class:!0});var qe=N(fe);ne&&ne.l(qe),L=$(qe),ie&&ie.l(qe),q=$(qe),se&&se.l(qe),qe.forEach(m),he=$(Ke),Z=b(Ke,"DIV",{class:!0,"data-svelte-h":!0}),Q(Z)!=="svelte-173xjy6"&&(Z.textContent=Ge),Ke.forEach(m),Xe.forEach(m),Re=$(We),z=b(We,"DIV",{class:!0});var Ae=N(z);me=b(Ae,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(me)!=="svelte-6r50uh"&&(me.textContent=ye),Ze=$(Ae),Oe=b(Ae,"DIV",{class:!0}),N(Oe).forEach(m),vt=$(Ae),Me=b(Ae,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(Me)!=="svelte-1ph2inm"&&(Me.textContent=Vt),_t=$(Ae),Ne=b(Ae,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(Ne)!=="svelte-9t0vpj"&&(Ne.textContent=$t),Ae.forEach(m),We.forEach(m),_e.forEach(m),this.h()},h(){g(s,"class","svelte-khj96w"),g(o,"class","close-btn svelte-khj96w"),g(i,"class","modal-header svelte-khj96w"),g(p,"class","label svelte-khj96w"),g(M,"class","value svelte-khj96w"),g(d,"class","info svelte-khj96w"),g(O,"class","label svelte-khj96w"),g(v,"class","value svelte-khj96w"),g(w,"class","info svelte-khj96w"),g(f,"class","info-row svelte-khj96w"),g(H,"class","timeline-labels svelte-khj96w"),g(fe,"class","timeline-track svelte-khj96w"),g(Z,"class","timeline-hint svelte-khj96w"),g(P,"class","timeline-editor svelte-khj96w"),g(a,"class","modal-body svelte-khj96w"),g(me,"class","btn btn-delete svelte-khj96w"),g(Oe,"class","spacer svelte-khj96w"),g(Me,"class","btn btn-cancel svelte-khj96w"),g(Ne,"class","btn btn-save svelte-khj96w"),g(z,"class","modal-footer svelte-khj96w"),g(t,"class","modal svelte-khj96w"),g(e,"class","modal-backdrop svelte-khj96w")},m(J,_e){R(J,e,_e),h(e,t),h(t,i),h(i,s),h(i,l),h(i,o),h(t,c),h(t,a),h(a,f),h(f,d),h(d,p),h(d,I),h(d,M),h(M,j),h(f,E),h(f,w),h(w,O),h(w,A),h(w,v),h(v,_),h(v,T),h(a,C),te&&te.m(a,null),h(a,K),h(a,P),h(P,H),h(H,ve),h(ve,Ie),h(H,Ce),h(H,$e),h($e,ze),h(P,Qe),h(P,fe),ne&&ne.m(fe,null),h(fe,L),ie&&ie.m(fe,null),h(fe,q),se&&se.m(fe,null),h(P,he),h(P,Z),n[30](P),h(t,Re),h(t,z),h(z,me),h(z,Ze),h(z,Oe),h(z,vt),h(z,Me),h(z,_t),h(z,Ne),gt||(Lt=[G(o,"click",n[16]),G(i,"click",zt(n[27])),G(a,"click",zt(n[26])),G(me,"click",n[17]),G(Me,"click",n[16]),G(Ne,"click",n[15]),G(e,"click",n[16])],gt=!0)},p(J,_e){_e[0]&16&&D!==(D=J[4].name+"")&&Y(j,D),_e[0]&512&&Y(_,J[9]),J[6].length>0?te?te.p(J,_e):(te=dn(J),te.c(),te.m(a,K)):te&&(te.d(1),te=null),_e[0]&4&&ee!==(ee=re(J[2])+"")&&Y(Ie,ee),_e[0]&8&&Le!==(Le=re(J[3])+"")&&Y(ze,Le),J[8]?ne?ne.p(Et(J),_e):(ne=mn(Et(J)),ne.c(),ne.m(fe,L)):ne&&(ne.d(1),ne=null),J[4]?ie?ie.p(Dt(J),_e):(ie=vn(Dt(J)),ie.c(),ie.m(fe,q)):ie&&(ie.d(1),ie=null),J[7]?se?se.p(St(J),_e):(se=_n(St(J)),se.c(),se.m(fe,null)):se&&(se.d(1),se=null)},d(J){J&&m(e),te&&te.d(),ne&&ne.d(),ie&&ie.d(),se&&se.d(),n[30](null),gt=!1,Ve(Lt)}}}function dn(n){let e,t=be(n[6]),i=[];for(let s=0;s<t.length;s+=1)i[s]=hn(un(n,t,s));return{c(){e=k("div");for(let s=0;s<i.length;s+=1)i[s].c();this.h()},l(s){e=b(s,"DIV",{class:!0});var r=N(e);for(let l=0;l<i.length;l+=1)i[l].l(r);r.forEach(m),this.h()},h(){g(e,"class","warnings svelte-khj96w")},m(s,r){R(s,e,r);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(e,null)},p(s,r){if(r[0]&64){t=be(s[6]);let l;for(l=0;l<t.length;l+=1){const o=un(s,t,l);i[l]?i[l].p(o,r):(i[l]=hn(o),i[l].c(),i[l].m(e,null))}for(;l<i.length;l+=1)i[l].d(1);i.length=t.length}},d(s){s&&m(e),ut(i,s)}}}function hn(n){let e,t,i=n[38]+"",s;return{c(){e=k("div"),t=W("âš ï¸ "),s=W(i),this.h()},l(r){e=b(r,"DIV",{class:!0});var l=N(e);t=X(l,"âš ï¸ "),s=X(l,i),l.forEach(m),this.h()},h(){g(e,"class","warning-item svelte-khj96w")},m(r,l){R(r,e,l),h(e,t),h(e,s)},p(r,l){l[0]&64&&i!==(i=r[38]+"")&&Y(s,i)},d(r){r&&m(e)}}}function mn(n){let e,t,i=n[8].name+"",s,r,l;return{c(){e=k("div"),t=k("span"),s=W(i),this.h()},l(o){e=b(o,"DIV",{class:!0,style:!0,title:!0});var u=N(e);t=b(u,"SPAN",{class:!0});var c=N(t);s=X(c,i),c.forEach(m),u.forEach(m),this.h()},h(){g(t,"class","timer-label svelte-khj96w"),g(e,"class",r="timer-block prev "+(n[14](n[8])?"work":"rest")+" svelte-khj96w"),F(e,"left",n[37].left),F(e,"width",n[37].width),g(e,"title",l=n[8].name+": "+re(n[8].start)+" - "+re(n[1]))},m(o,u){R(o,e,u),h(e,t),h(t,s)},p(o,u){u[0]&256&&i!==(i=o[8].name+"")&&Y(s,i),u[0]&256&&r!==(r="timer-block prev "+(o[14](o[8])?"work":"rest")+" svelte-khj96w")&&g(e,"class",r),u[0]&258&&F(e,"left",o[37].left),u[0]&258&&F(e,"width",o[37].width),u[0]&258&&l!==(l=o[8].name+": "+re(o[8].start)+" - "+re(o[1]))&&g(e,"title",l)},d(o){o&&m(e)}}}function vn(n){let e,t,i,s,r,l=n[4].name+"",o,u,c,a=re(n[1])+"",f,d,p=re(n[0])+"",S,I,M,D,j,E;return{c(){e=k("div"),t=k("div"),i=V(),s=k("div"),r=k("div"),o=W(l),u=V(),c=k("div"),f=W(a),d=W(" - "),S=W(p),I=V(),M=k("div"),this.h()},l(w){e=b(w,"DIV",{class:!0,style:!0});var O=N(e);t=b(O,"DIV",{class:!0,title:!0}),N(t).forEach(m),i=$(O),s=b(O,"DIV",{class:!0});var y=N(s);r=b(y,"DIV",{class:!0});var A=N(r);o=X(A,l),A.forEach(m),u=$(y),c=b(y,"DIV",{class:!0});var v=N(c);f=X(v,a),d=X(v," - "),S=X(v,p),v.forEach(m),y.forEach(m),I=$(O),M=b(O,"DIV",{class:!0,title:!0}),N(M).forEach(m),O.forEach(m),this.h()},h(){g(t,"class","drag-handle left svelte-khj96w"),g(t,"title","Drag to adjust start time"),g(r,"class","timer-label svelte-khj96w"),g(c,"class","timer-times svelte-khj96w"),g(s,"class","timer-content svelte-khj96w"),g(M,"class","drag-handle right svelte-khj96w"),g(M,"title","Drag to adjust end time"),g(e,"class",D="timer-block current "+(n[14](n[4])?"work":"rest")+" svelte-khj96w"),F(e,"left",n[37].left),F(e,"width",n[37].width)},m(w,O){R(w,e,O),h(e,t),h(e,i),h(e,s),h(s,r),h(r,o),h(s,u),h(s,c),h(c,f),h(c,d),h(c,S),h(e,I),h(e,M),j||(E=[G(t,"mousedown",n[28]),G(M,"mousedown",n[29])],j=!0)},p(w,O){O[0]&16&&l!==(l=w[4].name+"")&&Y(o,l),O[0]&2&&a!==(a=re(w[1])+"")&&Y(f,a),O[0]&1&&p!==(p=re(w[0])+"")&&Y(S,p),O[0]&16&&D!==(D="timer-block current "+(w[14](w[4])?"work":"rest")+" svelte-khj96w")&&g(e,"class",D),O[0]&3&&F(e,"left",w[37].left),O[0]&3&&F(e,"width",w[37].width)},d(w){w&&m(e),j=!1,Ve(E)}}}function _n(n){let e,t,i=n[7].name+"",s,r,l;return{c(){e=k("div"),t=k("span"),s=W(i),this.h()},l(o){e=b(o,"DIV",{class:!0,style:!0,title:!0});var u=N(e);t=b(u,"SPAN",{class:!0});var c=N(t);s=X(c,i),c.forEach(m),u.forEach(m),this.h()},h(){g(t,"class","timer-label svelte-khj96w"),g(e,"class",r="timer-block next "+(n[14](n[7])?"work":"rest")+" svelte-khj96w"),F(e,"left",n[37].left),F(e,"width",n[37].width),g(e,"title",l=n[7].name+": "+re(n[0])+" - "+re(n[7].finish))},m(o,u){R(o,e,u),h(e,t),h(t,s)},p(o,u){u[0]&128&&i!==(i=o[7].name+"")&&Y(s,i),u[0]&128&&r!==(r="timer-block next "+(o[14](o[7])?"work":"rest")+" svelte-khj96w")&&g(e,"class",r),u[0]&129&&F(e,"left",o[37].left),u[0]&129&&F(e,"width",o[37].width),u[0]&129&&l!==(l=o[7].name+": "+re(o[0])+" - "+re(o[7].finish))&&g(e,"title",l)},d(o){o&&m(e)}}}function Hi(n){let e,t,i,s=n[4]&&fn(n);return{c(){s&&s.c(),e=Je()},l(r){s&&s.l(r),e=Je()},m(r,l){s&&s.m(r,l),R(r,e,l),t||(i=[G(window,"keydown",n[18]),G(window,"mousemove",n[12]),G(window,"mouseup",n[13])],t=!0)},p(r,l){r[4]?s?s.p(r,l):(s=fn(r),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},i:x,o:x,d(r){r&&m(e),s&&s.d(r),t=!1,Ve(i)}}}function re(n){return n.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!1})}function Ui(n,e,t){let i,s,r,l,o,u,c,a,f,d,p,S;De(n,jt,L=>t(4,p=L)),De(n,ke,L=>t(25,S=L));let I=0,M=0,D,j,E=null,w=!1,O=null,y=0,A=400,v;function _(){const L=[];if(s&&(c.getTime()-s.start.getTime())/(1e3*60)<.5&&L.push(`Previous ${s.name} will be removed (< 30 sec)`),r){const q=a;(r.finish.getTime()-q.getTime())/(1e3*60)<.5&&L.push(`Next ${r.name} will be removed (< 30 sec)`)}return L}function T(L,q){const he=L.getTime()-l.getTime(),Z=q.getTime()-L.getTime(),Ge=he/u*100,Re=Z/u*100;return{left:`${Ge}%`,width:`${Re}%`}}function C(L,q){w=!0,O=L,y=q.clientX,v&&(A=v.offsetWidth),q.preventDefault()}function K(L){if(!w||!O)return;const he=(L.clientX-y)/A*u,Z=Math.round(he/(60*1e3));O==="start"?t(19,I=Z):t(20,M=Z)}function P(){w=!1,O=null}function H(L){return L.name===Te.WORK}function ve(){if(p){if(c>=a){alert("Start time must be before finish time");return}d.length>0&&!confirm(`Warning:
${d.join(`
`)}

Continue with save?`)||(ke.update(L=>{const q=L.timerHistory.list.findIndex(z=>z.start.getTime()===p.start.getTime());if(q===-1)return L;const he=L.timerHistory.list[q],Z=[];if(q>0){const z=L.timerHistory.list[q-1],me=he.start.getTime();if(c.getTime()!==me){const ye=new Date(c);if((ye.getTime()-z.start.getTime())/1e3<30)Z.push(q-1);else{const Oe=new Ee(z.value,z.name,z.start,ye);L.timerHistory.list[q-1]=Oe}}}if(q<L.timerHistory.list.length-1){const z=L.timerHistory.list[q+1],me=he.finish.getTime();if(a.getTime()!==me){const ye=new Date(a);if((z.finish.getTime()-ye.getTime())/1e3<30)Z.push(q+1);else{const Oe=new Ee(z.value,z.name,ye,z.finish);L.timerHistory.list[q+1]=Oe}}}Z.sort((z,me)=>me-z).forEach(z=>{L.timerHistory.list.splice(z,1)});const Ge=q-Z.filter(z=>z<q).length,Re=new Ee(he.value,he.name,c,a);return L.timerHistory.list[Ge]=Re,L}),ct())}}function ee(){ct()}function Ie(){p&&confirm("Delete this timer?")&&(ke.update(L=>L.remove(p.start)),ct())}function Ce(L){L.key==="Escape"&&ct()}function $e(L){Gt.call(this,n,L)}function Le(L){Gt.call(this,n,L)}const ze=L=>C("start",L),Qe=L=>C("end",L);function fe(L){Ue[L?"unshift":"push"](()=>{v=L,t(5,v)})}return n.$$.update=()=>{n.$$.dirty[0]&33554448&&t(24,i=p?S.timerHistory.list.findIndex(L=>L.start.getTime()===p.start.getTime()):-1),n.$$.dirty[0]&50331648&&t(8,s=i>0?S.timerHistory.list[i-1]:null),n.$$.dirty[0]&50331648&&t(7,r=i>=0&&i<S.timerHistory.list.length-1?S.timerHistory.list[i+1]:null),n.$$.dirty[0]&8388624&&p&&p.start.getTime()!==E&&(t(23,E=p.start.getTime()),t(21,D=p.start instanceof Date?p.start:new Date(p.start)),t(22,j=p.finish instanceof Date?p.finish:new Date(p.finish)),t(19,I=0),t(20,M=0)),n.$$.dirty[0]&2097152&&t(2,l=D?new Date(D.getTime()-30*60*1e3):new Date),n.$$.dirty[0]&4194304&&t(3,o=j?new Date(j.getTime()+30*60*1e3):new Date),n.$$.dirty[0]&12&&(u=o.getTime()-l.getTime()),n.$$.dirty[0]&16&&(p||t(23,E=null)),n.$$.dirty[0]&2621440&&t(1,c=D?new Date(D.getTime()+I*60*1e3):new Date),n.$$.dirty[0]&5242880&&t(0,a=j?new Date(j.getTime()+M*60*1e3):new Date),n.$$.dirty[0]&19&&t(9,f=p?Math.round((a.getTime()-c.getTime())/(1e3*60)):0)},t(6,d=_()),[a,c,l,o,p,v,d,r,s,f,T,C,K,P,H,ve,ee,Ie,Ce,I,M,D,j,E,i,S,$e,Le,ze,Qe,fe]}class Fi extends pe{constructor(e){super(),we(this,e,Ui,Hi,ge,{},null,[-1,-1])}}function Bi(n){let e,t,i,s,r,l,o,u,c,a;return{c(){e=k("div"),t=k("button"),i=W(n[1]),r=V(),l=k("button"),o=W(n[2]),this.h()},l(f){e=b(f,"DIV",{class:!0});var d=N(e);t=b(d,"BUTTON",{class:!0});var p=N(t);i=X(p,n[1]),p.forEach(m),r=$(d),l=b(d,"BUTTON",{class:!0});var S=N(l);o=X(S,n[2]),S.forEach(m),d.forEach(m),this.h()},h(){g(t,"class",s="tab "+(n[0]?"":"active")+" svelte-1hgfxul"),g(l,"class",u="tab "+(n[0]?"active":"")+" svelte-1hgfxul"),g(e,"class","tabs-container svelte-1hgfxul")},m(f,d){R(f,e,d),h(e,t),h(t,i),h(e,r),h(e,l),h(l,o),c||(a=[G(t,"click",n[3]),G(l,"click",n[4])],c=!0)},p(f,[d]){d&2&&Y(i,f[1]),d&1&&s!==(s="tab "+(f[0]?"":"active")+" svelte-1hgfxul")&&g(t,"class",s),d&4&&Y(o,f[2]),d&1&&u!==(u="tab "+(f[0]?"active":"")+" svelte-1hgfxul")&&g(l,"class",u)},i:x,o:x,d(f){f&&m(e),c=!1,Ve(a)}}}function zi(n,e,t){let{checked:i=!1}=e,{leftLabel:s=""}=e,{rightLabel:r=""}=e;const l=()=>t(0,i=!1),o=()=>t(0,i=!0);return n.$$set=u=>{"checked"in u&&t(0,i=u.checked),"leftLabel"in u&&t(1,s=u.leftLabel),"rightLabel"in u&&t(2,r=u.rightLabel)},[i,s,r,l,o]}class Gi extends pe{constructor(e){super(),we(this,e,zi,Bi,ge,{checked:0,leftLabel:1,rightLabel:2})}}function gn(n,e,t){const i=n.slice();return i[7]=e[t],i}function Wi(n){let e,t,i=[],s=new Map,r,l=n[0].active&&pn(n),o=be([...n[1]].reverse());const u=c=>c[7].start;for(let c=0;c<o.length;c+=1){let a=gn(n,o,c),f=u(a);s.set(f,i[c]=wn(f,a))}return{c(){e=k("div"),l&&l.c(),t=V();for(let c=0;c<i.length;c+=1)i[c].c();this.h()},l(c){e=b(c,"DIV",{class:!0});var a=N(e);l&&l.l(a),t=$(a);for(let f=0;f<i.length;f+=1)i[f].l(a);a.forEach(m),this.h()},h(){g(e,"class","logs svelte-jk1hst")},m(c,a){R(c,e,a),l&&l.m(e,null),h(e,t);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(e,null);r=!0},p(c,a){c[0].active?l?(l.p(c,a),a&1&&U(l,1)):(l=pn(c),l.c(),U(l,1),l.m(e,t)):l&&(Fe(),B(l,1,1,()=>{l=null}),Be()),a&2&&(o=be([...c[1]].reverse()),Fe(),i=In(i,a,u,1,c,o,s,e,Hn,wn,null,gn),Be())},i(c){if(!r){U(l);for(let a=0;a<o.length;a+=1)U(i[a]);r=!0}},o(c){B(l);for(let a=0;a<i.length;a+=1)B(i[a]);r=!1},d(c){c&&m(e),l&&l.d();for(let a=0;a<i.length;a+=1)i[a].d()}}}function Xi(n){let e,t;return e=new Ri({props:{timers:n[1],activeTimer:n[0].active}}),{c(){oe(e.$$.fragment)},l(i){ae(e.$$.fragment,i)},m(i,s){ce(e,i,s),t=!0},p(i,s){const r={};s&2&&(r.timers=i[1]),s&1&&(r.activeTimer=i[0].active),e.$set(r)},i(i){t||(U(e.$$.fragment,i),t=!0)},o(i){B(e.$$.fragment,i),t=!1},d(i){ue(e,i)}}}function pn(n){let e,t,i;const s=[n[0].active,{topLog:!0}];let r={};for(let l=0;l<s.length;l+=1)r=En(r,s[l]);return e=new jn({props:r}),{c(){oe(e.$$.fragment),t=k("br")},l(l){ae(e.$$.fragment,l),t=b(l,"BR",{})},m(l,o){ce(e,l,o),R(l,t,o),i=!0},p(l,o){const u=o&1?On(s,[Cn(l[0].active),s[1]]):{};e.$set(u)},i(l){i||(U(e.$$.fragment,l),i=!0)},o(l){B(e.$$.fragment,l),i=!1},d(l){l&&m(t),ue(e,l)}}}function wn(n,e){let t,i,s,r,l;const o=[e[7],{topLog:!1}];let u={};for(let c=0;c<o.length;c+=1)u=En(u,o[c]);return i=new jn({props:u}),i.$on("remove",e[6]),{key:n,first:null,c(){t=Je(),oe(i.$$.fragment),s=V(),r=k("br"),this.h()},l(c){t=Je(),ae(i.$$.fragment,c),s=$(c),r=b(c,"BR",{}),this.h()},h(){this.first=t},m(c,a){R(c,t,a),ce(i,c,a),R(c,s,a),R(c,r,a),l=!0},p(c,a){e=c;const f=a&2?On(o,[Cn(e[7]),o[1]]):{};i.$set(f)},i(c){l||(U(i.$$.fragment,c),l=!0)},o(c){B(i.$$.fragment,c),l=!1},d(c){c&&(m(t),m(s),m(r)),ue(i,c)}}}function Ki(n){let e,t,i,s,r="Clear logs",l,o,u="Active time: ",c,a=qt(n[3])+"",f,d,p,S,I,M,D,j,E,w,O,y,A;e=new Fi({});function v(P){n[5](P)}let _={leftLabel:"Logs",rightLabel:"Graph"};n[2]!==void 0&&(_.checked=n[2]),I=new Gi({props:_}),Ue.push(()=>Mt(I,"checked",v));const T=[Xi,Wi],C=[];function K(P,H){return P[2]?0:1}return E=K(n),w=C[E]=T[E](n),{c(){oe(e.$$.fragment),t=V(),i=k("div"),s=k("button"),s.textContent=r,l=V(),o=k("span"),o.textContent=u,c=k("span"),f=W(a),d=V(),p=k("div"),S=k("div"),oe(I.$$.fragment),D=V(),j=k("div"),w.c(),this.h()},l(P){ae(e.$$.fragment,P),t=$(P),i=b(P,"DIV",{class:!0});var H=N(i);s=b(H,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(s)!=="svelte-1renoko"&&(s.textContent=r),l=$(H),o=b(H,"SPAN",{class:!0,"data-svelte-h":!0}),Q(o)!=="svelte-18pz33x"&&(o.textContent=u),c=b(H,"SPAN",{class:!0});var ve=N(c);f=X(ve,a),ve.forEach(m),H.forEach(m),d=$(P),p=b(P,"DIV",{class:!0});var ee=N(p);S=b(ee,"DIV",{class:!0});var Ie=N(S);ae(I.$$.fragment,Ie),Ie.forEach(m),D=$(ee),j=b(ee,"DIV",{class:!0});var Ce=N(j);w.l(Ce),Ce.forEach(m),ee.forEach(m),this.h()},h(){g(s,"class","clear svelte-jk1hst"),g(o,"class","svelte-jk1hst"),g(c,"class","svelte-jk1hst"),g(i,"class","header svelte-jk1hst"),g(S,"class","tabs-header svelte-jk1hst"),g(j,"class","content-wrapper svelte-jk1hst"),g(p,"class","content-section svelte-jk1hst")},m(P,H){ce(e,P,H),R(P,t,H),R(P,i,H),h(i,s),h(i,l),h(i,o),h(i,c),h(c,f),R(P,d,H),R(P,p,H),h(p,S),ce(I,S,null),h(p,D),h(p,j),C[E].m(j,null),O=!0,y||(A=G(s,"click",n[4]),y=!0)},p(P,[H]){(!O||H&8)&&a!==(a=qt(P[3])+"")&&Y(f,a);const ve={};!M&&H&4&&(M=!0,ve.checked=P[2],yt(()=>M=!1)),I.$set(ve);let ee=E;E=K(P),E===ee?C[E].p(P,H):(Fe(),B(C[ee],1,1,()=>{C[ee]=null}),Be(),w=C[E],w?w.p(P,H):(w=C[E]=T[E](P),w.c()),U(w,1),w.m(j,null))},i(P){O||(U(e.$$.fragment,P),U(I.$$.fragment,P),U(w),O=!0)},o(P){B(e.$$.fragment,P),B(I.$$.fragment,P),B(w),O=!1},d(P){P&&(m(t),m(i),m(d),m(p)),ue(e,P),ue(I),C[E].d(),y=!1,A()}}}function qi(n,e,t){let i,s;De(n,ke,a=>t(0,i=a)),De(n,fi,a=>t(3,s=a));var r=[];let l=!0;const o=()=>ke.update(a=>a.clearLogs());function u(a){l=a,t(2,l)}const c=a=>ke.update(f=>f.remove(a.detail));return n.$$.update=()=>{var a;n.$$.dirty&1&&t(1,r=((a=i==null?void 0:i.timerHistory)==null?void 0:a.list)||[])},[i,r,l,s,o,u,c]}class Ji extends pe{constructor(e){super(),we(this,e,qi,Ki,ge,{})}}function Yi(n){let e,t,i,s,r="Let's Pomodoro!",l,o,u,c,a,f,d;function p(I){n[9](I)}let S={debugFlag:n[1]};return n[0]!==void 0&&(S.remainedSeconds=n[0]),o=new yi({props:S}),Ue.push(()=>Mt(o,"remainedSeconds",p)),o.$on("timer",n[4]),o.$on("current",n[5]),o.$on("cancel",n[6]),f=new Ji({}),{c(){e=k("main"),t=k("div"),i=k("div"),s=k("h1"),s.textContent=r,l=V(),oe(o.$$.fragment),c=V(),a=k("div"),oe(f.$$.fragment),this.h()},l(I){e=b(I,"MAIN",{class:!0});var M=N(e);t=b(M,"DIV",{class:!0});var D=N(t);i=b(D,"DIV",{class:!0});var j=N(i);s=b(j,"H1",{class:!0,"data-svelte-h":!0}),Q(s)!=="svelte-cxq7y3"&&(s.textContent=r),l=$(j),ae(o.$$.fragment,j),j.forEach(m),c=$(D),a=b(D,"DIV",{class:!0});var E=N(a);ae(f.$$.fragment,E),E.forEach(m),D.forEach(m),M.forEach(m),this.h()},h(){g(s,"class","logo svelte-1tn61l8"),g(i,"class","pomodoro svelte-1tn61l8"),g(a,"class","logs svelte-1tn61l8"),g(t,"class","container svelte-1tn61l8"),g(e,"class","svelte-1tn61l8"),je(e,"dark",n[3])},m(I,M){R(I,e,M),h(e,t),h(t,i),h(i,s),h(i,l),ce(o,i,null),h(t,c),h(t,a),ce(f,a,null),d=!0},p(I,M){const D={};M&2&&(D.debugFlag=I[1]),!u&&M&1&&(u=!0,D.remainedSeconds=I[0],yt(()=>u=!1)),o.$set(D),(!d||M&8)&&je(e,"dark",I[3])},i(I){d||(U(o.$$.fragment,I),U(f.$$.fragment,I),d=!0)},o(I){B(o.$$.fragment,I),B(f.$$.fragment,I),d=!1},d(I){I&&m(e),ue(o),ue(f)}}}function Qi(n){let e;return{c(){e=k("main"),this.h()},l(t){e=b(t,"MAIN",{style:!0,class:!0}),N(e).forEach(m),this.h()},h(){F(e,"background-color","gray"),F(e,"height","90 vh"),g(e,"class","svelte-1tn61l8")},m(t,i){R(t,e,i)},p:x,i:x,o:x,d(t){t&&m(e)}}}function Zi(n){let e,t,i,s,r,l,o,u,c,a="Toggle Dark Mode",f,d,p;const S=[Qi,Yi],I=[];function M(D,j){return D[2]?0:1}return e=M(n),t=I[e]=S[e](n),{c(){t.c(),i=V(),s=k("div"),r=k("label"),l=W("Debug:"),o=k("input"),u=V(),c=k("button"),c.textContent=a,this.h()},l(D){t.l(D),i=$(D),s=b(D,"DIV",{class:!0});var j=N(s);r=b(j,"LABEL",{id:!0});var E=N(r);l=X(E,"Debug:"),o=b(E,"INPUT",{type:!0}),u=$(E),c=b(E,"BUTTON",{"data-svelte-h":!0}),Q(c)!=="svelte-7kmdhl"&&(c.textContent=a),E.forEach(m),j.forEach(m),this.h()},h(){g(o,"type","checkbox"),g(r,"id","debug"),g(s,"class","debug-div svelte-1tn61l8")},m(D,j){I[e].m(D,j),R(D,i,j),R(D,s,j),h(s,r),h(r,l),h(r,o),o.checked=n[1],h(r,u),h(r,c),f=!0,d||(p=[G(o,"change",n[10]),G(c,"click",n[7])],d=!0)},p(D,[j]){let E=e;e=M(D),e===E?I[e].p(D,j):(Fe(),B(I[E],1,1,()=>{I[E]=null}),Be(),t=I[e],t?t.p(D,j):(t=I[e]=S[e](D),t.c()),U(t,1),t.m(i.parentNode,i)),j&2&&(o.checked=D[1])},i(D){f||(U(t),f=!0)},o(D){B(t),f=!1},d(D){D&&(m(i),m(s)),I[e].d(D),d=!1,Ve(p)}}}function xi(n,e,t){let i,s;De(n,en,S=>t(3,i=S)),De(n,ke,S=>t(8,s=S));let r=!1,l,o=!0;function u(S){ke.update(I=>I.addTimer(S.detail))}function c(S){ke.update(I=>I.setActive(S.detail))}function a(){ke.update(S=>S.resetActive())}Dn(()=>{console.log("get darkmode:",i),t(2,o=!1)});function f(){en.update(S=>!S),console.log("toggle dark",i)}function d(S){l=S,t(0,l)}function p(){r=this.checked,t(1,r)}return n.$$.update=()=>{n.$$.dirty&257&&s&&l!==void 0&&ke.update(S=>(S.updateActiveTimer(),S))},[l,r,o,i,u,c,a,f,s,d,p]}class ss extends pe{constructor(e){super(),we(this,e,xi,Zi,ge,{})}}export{ss as component};
