var Ye=Object.defineProperty;var Qe=(n,e,t)=>e in n?Ye(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var se=(n,e,t)=>Qe(n,typeof e!="symbol"?e+"":e,t);import{A as ve,s as J,c as je,e as T,b as L,p as te,d as $,f as R,i as h,j as B,v as y,k as D,O as F,u as Ge,g as We,a as ze,t as H,h as q,w as ce,l as S,m as he,P as ue,Q as $e,R as _e,n as K,S as x,T as we,r as be,U as Ke,V as Ze,W as ke,x as xe,X as et}from"../chunks/scheduler.DfcxTzeO.js";import{a as M,t as A,S as X,i as Y,b as j,d as G,m as W,e as z,g as ie,c as ae,f as tt}from"../chunks/index.cws5nFLo.js";import{b as ne}from"../chunks/paths.BQg9Asht.js";function ee(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Ce(n,e){M(n,1,1,()=>{e.delete(n.key)})}function Ie(n,e,t,l,s,r,a,o,i,u,f,c){let m=n.length,C=r.length,I=m;const P={};for(;I--;)P[n[I].key]=I;const g=[],v=new Map,_=new Map,w=[];for(I=C;I--;){const E=c(s,r,I),k=t(E);let O=a.get(k);O?w.push(()=>O.p(E,e)):(O=u(k,E),O.c()),v.set(k,g[I]=O),k in P&&_.set(k,Math.abs(I-P[k]))}const b=new Set,V=new Set;function Q(E){A(E,1),E.m(o,f),a.set(E.key,E),f=E.first,C--}for(;m&&C;){const E=g[C-1],k=n[m-1],O=E.key,d=k.key;E===k?(f=E.first,m--,C--):v.has(d)?!a.has(O)||b.has(O)?Q(E):V.has(d)?m--:_.get(O)>_.get(d)?(V.add(O),Q(E)):(b.add(d),m--):(i(k,a),m--)}for(;m--;){const E=n[m];v.has(E.key)||i(E,a)}for(;C;)Q(g[C-1]);return ve(w),g}function nt(n,e){const t={},l={},s={$$scope:1};let r=n.length;for(;r--;){const a=n[r],o=e[r];if(o){for(const i in a)i in o||(l[i]=1);for(const i in o)s[i]||(t[i]=o[i],s[i]=1);n[r]=o}else for(const i in a)s[i]=1}for(const a in l)a in t||(t[a]=void 0);return t}function lt(n){return typeof n=="object"&&n!==null?n:{}}const ot=ne+"/ring2.wav";let He=function(){},re,ge,qe=.5,fe;if(typeof window<"u"){let n=window.AudioContext||window.webkitAudioContext;re=new n,fetch(ot).then(e=>e.arrayBuffer()).then(e=>re.decodeAudioData(e)).then(e=>{ge=e}).catch(e=>console.error("Error loading sound file:",e)),He=function(){if(!ge)return;fe=re.createBufferSource(),fe.buffer=ge;let e=re.createGain();e.gain.value=qe,fe.connect(e),e.connect(re.destination),fe.start(0)}}function Se(){He()}function st(n,e){qe=n,Se()}function Pe(n){let e,t;return{c(){e=T("div"),t=H(n[0]),this.h()},l(l){e=$(l,"DIV",{style:!0,class:!0});var s=R(e);t=q(s,n[0]),s.forEach(h),this.h()},h(){ce(e,"top",n[3]+"px"),ce(e,"left",n[2]+"px"),y(e,"class","tooltip svelte-43gogz")},m(l,s){D(l,e,s),S(e,t)},p(l,s){s&1&&he(t,l[0]),s&8&&ce(e,"top",l[3]+"px"),s&4&&ce(e,"left",l[2]+"px")},d(l){l&&h(e)}}}function rt(n){let e,t,l,s,r,a;const o=n[8].default,i=je(o,n,n[7],null);let u=n[1]&&Pe(n);return{c(){e=T("div"),i&&i.c(),t=L(),u&&u.c(),l=te(),this.h()},l(f){e=$(f,"DIV",{"aria-hidden":!0});var c=R(e);i&&i.l(c),c.forEach(h),t=B(f),u&&u.l(f),l=te(),this.h()},h(){y(e,"aria-hidden","true")},m(f,c){D(f,e,c),i&&i.m(e,null),D(f,t,c),u&&u.m(f,c),D(f,l,c),s=!0,r||(a=[F(e,"mouseover",n[4]),F(e,"mouseleave",n[6]),F(e,"mousemove",n[5]),F(e,"focus",it)],r=!0)},p(f,[c]){i&&i.p&&(!s||c&128)&&Ge(i,o,f,f[7],s?ze(o,f[7],c,null):We(f[7]),null),f[1]?u?u.p(f,c):(u=Pe(f),u.c(),u.m(l.parentNode,l)):u&&(u.d(1),u=null)},i(f){s||(A(i,f),s=!0)},o(f){M(i,f),s=!1},d(f){f&&(h(e),h(t),h(l)),i&&i.d(f),u&&u.d(f),r=!1,ve(a)}}}const it=function(){};function at(n,e,t){let{$$slots:l={},$$scope:s}=e,{title:r=""}=e,a=!1,o,i;function u(m){t(1,a=!0),t(2,o=m.pageX+10),t(3,i=m.pageY+10)}function f(m){t(2,o=m.pageX+10),t(3,i=m.pageY+10)}function c(){t(1,a=!1)}return n.$$set=m=>{"title"in m&&t(0,r=m.title),"$$scope"in m&&t(7,s=m.$$scope)},[r,a,o,i,u,f,c,s,l]}class Te extends X{constructor(e){super(),Y(this,e,at,rt,J,{title:0})}}function Ee(n){let e=Math.floor(n/60).toString().padStart(2,"0"),t=Math.floor(n%60).toString().padStart(2,"0");return`${e}:${t}`}function ut(n){let e=Math.floor(n/60),t=Math.floor(n%60);return e>0?`${e} min`:`${t} sec`}function ye(n){let e=Math.floor(n/3600);e>0&&(n=n-e*3600);let t=Math.floor(n/60),l=Math.floor(n%60);return e==1?`${e} hour ${t} min`:e>0?`${e} hours ${t} min`:t>10?`${t} min`:t>1?`${t} min ${l} sec`:`${l} sec`}function ct(n){let e,t=Ee(n[0])+"",l,s,r;return{c(){e=T("button"),l=H(t),this.h()},l(a){e=$(a,"BUTTON",{id:!0,class:!0});var o=R(e);l=q(o,t),o.forEach(h),this.h()},h(){y(e,"id","watch"),y(e,"class","svelte-wj6dup")},m(a,o){D(a,e,o),S(e,l),s||(r=F(e,"click",n[1]),s=!0)},p(a,o){o&1&&t!==(t=Ee(a[0])+"")&&he(l,t)},d(a){a&&h(e),s=!1,r()}}}function ft(n){let e,t;return e=new Te({props:{title:"stop timer",$$slots:{default:[ct]},$$scope:{ctx:n}}}),{c(){j(e.$$.fragment)},l(l){G(e.$$.fragment,l)},m(l,s){W(e,l,s),t=!0},p(l,[s]){const r={};s&257&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){t||(A(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){z(e,l)}}}function mt(n,e,t){let{time:l=0}=e;const s=ue();let r=new Date,a=0,o=0;function i(c){console.log("runTimer",c),r=new Date,clearInterval(o),t(0,a=c),l!=0&&(o=setInterval(()=>{let m=l-Math.floor((Date.now()-r.getTime())/1e3);if(m<=0){u(),clearInterval(o);return}t(0,a=m)},500))}function u(){Se(),s("alarming")}function f(){s("stop")}return n.$$set=c=>{"time"in c&&t(2,l=c.time)},n.$$.update=()=>{n.$$.dirty&4&&i(l)},[a,f,l]}class dt extends X{constructor(e){super(),Y(this,e,mt,ft,J,{time:2})}}function ht(n){let e,t,l,s,r,a;return{c(){e=T("button"),t=H(n[1]),l=H(" min"),this.h()},l(o){e=$(o,"BUTTON",{class:!0});var i=R(e);t=q(i,n[1]),l=q(i," min"),i.forEach(h),this.h()},h(){y(e,"class",s=$e(n[2])+" svelte-14qegn3"),e.disabled=n[3],_e(e,"pressed",n[0])},m(o,i){D(o,e,i),S(e,t),S(e,l),r||(a=F(e,"click",n[5]),r=!0)},p(o,[i]){i&2&&he(t,o[1]),i&4&&s!==(s=$e(o[2])+" svelte-14qegn3")&&y(e,"class",s),i&8&&(e.disabled=o[3]),i&5&&_e(e,"pressed",o[0])},i:K,o:K,d(o){o&&h(e),r=!1,a()}}}function gt(n,e,t){const l=ue();let{value:s}=e,{name:r}=e,{disabled:a=!1}=e,{pressed:o=!1}=e;function i(c,m){l("start",{name:c,val:m}),t(0,o=!0)}function u(c){c||t(0,o=!1)}const f=function(){i(r,s)};return n.$$set=c=>{"value"in c&&t(1,s=c.value),"name"in c&&t(2,r=c.name),"disabled"in c&&t(3,a=c.disabled),"pressed"in c&&t(0,o=c.pressed)},n.$$.update=()=>{n.$$.dirty&8&&u(a)},[o,s,r,a,i,f]}class Je extends X{constructor(e){super(),Y(this,e,gt,ht,J,{value:1,name:2,disabled:3,pressed:0})}}function De(n,e,t){const l=n.slice();return l[6]=e[t],l}const _t=n=>({}),Oe=n=>({class:"item svelte-1rvg6ah"});function Ne(n,e,t){const l=n.slice();return l[6]=e[t],l}function Ae(n,e){let t,l,s,r,a;return l=new Je({props:{value:e[6],name:"work",disabled:!e[0]}}),l.$on("start",e[2]),{key:n,first:null,c(){t=te(),j(l.$$.fragment),s=L(),r=T("br"),this.h()},l(o){t=te(),G(l.$$.fragment,o),s=B(o),r=$(o,"BR",{}),this.h()},h(){this.first=t},m(o,i){D(o,t,i),W(l,o,i),D(o,s,i),D(o,r,i),a=!0},p(o,i){e=o;const u={};i&1&&(u.disabled=!e[0]),l.$set(u)},i(o){a||(A(l.$$.fragment,o),a=!0)},o(o){M(l.$$.fragment,o),a=!1},d(o){o&&(h(t),h(s),h(r)),z(l,o)}}}function Me(n,e){let t,l,s,r,a;return l=new Je({props:{value:e[6],name:"rest",disabled:!e[0]}}),l.$on("start",e[2]),{key:n,first:null,c(){t=te(),j(l.$$.fragment),s=L(),r=T("br"),this.h()},l(o){t=te(),G(l.$$.fragment,o),s=B(o),r=$(o,"BR",{}),this.h()},h(){this.first=t},m(o,i){D(o,t,i),W(l,o,i),D(o,s,i),D(o,r,i),a=!0},p(o,i){e=o;const u={};i&1&&(u.disabled=!e[0]),l.$set(u)},i(o){a||(A(l.$$.fragment,o),a=!0)},o(o){M(l.$$.fragment,o),a=!1},d(o){o&&(h(t),h(s),h(r)),z(l,o)}}}function pt(n){let e,t,l,s,r="Active",a,o,i=[],u=new Map,f,c,m,C,I="Rest",P,g,v=[],_=new Map,w,b=ee(n[1]);const V=d=>d[6];for(let d=0;d<b.length;d+=1){let p=Ne(n,b,d),N=V(p);u.set(N,i[d]=Ae(N,p))}const Q=n[4].default,E=je(Q,n,n[3],Oe);let k=ee(n[1]);const O=d=>d[6];for(let d=0;d<k.length;d+=1){let p=De(n,k,d),N=O(p);_.set(N,v[d]=Me(N,p))}return{c(){e=T("div"),t=T("div"),l=T("div"),s=T("span"),s.textContent=r,a=T("br"),o=L();for(let d=0;d<i.length;d+=1)i[d].c();f=L(),E&&E.c(),c=L(),m=T("div"),C=T("span"),C.textContent=I,P=T("br"),g=L();for(let d=0;d<v.length;d+=1)v[d].c();this.h()},l(d){e=$(d,"DIV",{});var p=R(e);t=$(p,"DIV",{class:!0});var N=R(t);l=$(N,"DIV",{class:!0});var le=R(l);s=$(le,"SPAN",{class:!0,"data-svelte-h":!0}),x(s)!=="svelte-19szg5l"&&(s.textContent=r),a=$(le,"BR",{}),o=B(le);for(let Z=0;Z<i.length;Z+=1)i[Z].l(le);le.forEach(h),f=B(N),E&&E.l(N),c=B(N),m=$(N,"DIV",{class:!0});var oe=R(m);C=$(oe,"SPAN",{class:!0,"data-svelte-h":!0}),x(C)!=="svelte-1gtata5"&&(C.textContent=I),P=$(oe,"BR",{}),g=B(oe);for(let Z=0;Z<v.length;Z+=1)v[Z].l(oe);oe.forEach(h),N.forEach(h),p.forEach(h),this.h()},h(){y(s,"class","label svelte-1rvg6ah"),y(l,"class","item svelte-1rvg6ah"),y(C,"class","label svelte-1rvg6ah"),y(m,"class","item svelte-1rvg6ah"),y(t,"class","grid-container svelte-1rvg6ah")},m(d,p){D(d,e,p),S(e,t),S(t,l),S(l,s),S(l,a),S(l,o);for(let N=0;N<i.length;N+=1)i[N]&&i[N].m(l,null);S(t,f),E&&E.m(t,null),S(t,c),S(t,m),S(m,C),S(m,P),S(m,g);for(let N=0;N<v.length;N+=1)v[N]&&v[N].m(m,null);w=!0},p(d,[p]){p&7&&(b=ee(d[1]),ie(),i=Ie(i,p,V,1,d,b,u,l,Ce,Ae,null,Ne),ae()),E&&E.p&&(!w||p&8)&&Ge(E,Q,d,d[3],w?ze(Q,d[3],p,_t):We(d[3]),Oe),p&7&&(k=ee(d[1]),ie(),v=Ie(v,p,O,1,d,k,_,m,Ce,Me,null,De),ae())},i(d){if(!w){for(let p=0;p<b.length;p+=1)A(i[p]);A(E,d);for(let p=0;p<k.length;p+=1)A(v[p]);w=!0}},o(d){for(let p=0;p<i.length;p+=1)M(i[p]);M(E,d);for(let p=0;p<v.length;p+=1)M(v[p]);w=!1},d(d){d&&h(e);for(let p=0;p<i.length;p+=1)i[p].d();E&&E.d(d);for(let p=0;p<v.length;p+=1)v[p].d()}}}function vt(n,e,t){let{$$slots:l={},$$scope:s}=e;const r=ue();let a=[5,10,15,20,25];function o(u){r("start",{timer:u.detail.val,name:u.detail.name}),console.log("handleTimerStart")}let{active:i=!0}=e;return n.$$set=u=>{"active"in u&&t(0,i=u.active),"$$scope"in u&&t(3,s=u.$$scope)},[i,a,o,s,l]}class bt extends X{constructor(e){super(),Y(this,e,vt,pt,J,{active:0})}}/*! js-cookie v3.0.5 | MIT */function me(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var l in t)n[l]=t[l]}return n}var kt={read:function(n){return n[0]==='"'&&(n=n.slice(1,-1)),n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(n){return encodeURIComponent(n).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function pe(n,e){function t(s,r,a){if(!(typeof document>"u")){a=me({},e,a),typeof a.expires=="number"&&(a.expires=new Date(Date.now()+a.expires*864e5)),a.expires&&(a.expires=a.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var i in a)a[i]&&(o+="; "+i,a[i]!==!0&&(o+="="+a[i].split(";")[0]));return document.cookie=s+"="+n.write(r,s)+o}}function l(s){if(!(typeof document>"u"||arguments.length&&!s)){for(var r=document.cookie?document.cookie.split("; "):[],a={},o=0;o<r.length;o++){var i=r[o].split("="),u=i.slice(1).join("=");try{var f=decodeURIComponent(i[0]);if(a[f]=n.read(u,f),s===f)break}catch{}}return s?a[s]:a}}return Object.create({set:t,get:l,remove:function(s,r){t(s,"",me({},r,{expires:-1}))},withAttributes:function(s){return pe(this.converter,me({},this.attributes,s))},withConverter:function(s){return pe(me({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(n)}})}var de=pe(kt,{path:"/"});function St(n){let e,t,l,s=`<img src="${ne}/volume_mute.svg" alt="Mute icon"/>`,r,a,o,i,u=`<img src="${ne}/volume_up.svg" alt="Volume max icon"/>`,f,c;return{c(){e=T("label"),t=T("div"),l=T("button"),l.innerHTML=s,r=L(),a=T("input"),o=L(),i=T("button"),i.innerHTML=u,this.h()},l(m){e=$(m,"LABEL",{});var C=R(e);t=$(C,"DIV",{class:!0});var I=R(t);l=$(I,"BUTTON",{class:!0,"data-svelte-h":!0}),x(l)!=="svelte-3ybpa7"&&(l.innerHTML=s),r=B(I),a=$(I,"INPUT",{class:!0,type:!0,min:!0,max:!0}),o=B(I),i=$(I,"BUTTON",{class:!0,"data-svelte-h":!0}),x(i)!=="svelte-vae9t2"&&(i.innerHTML=u),I.forEach(h),C.forEach(h),this.h()},h(){y(l,"class","leftbutton svelte-14xuhg1"),y(a,"class","slider bar svelte-14xuhg1"),y(a,"type","range"),y(a,"min","0"),y(a,"max","100"),y(i,"class","svelte-14xuhg1"),y(t,"class","container svelte-14xuhg1")},m(m,C){D(m,e,C),S(e,t),S(t,l),S(t,r),S(t,a),we(a,n[0]),S(t,o),S(t,i),f||(c=[F(l,"click",n[2]),F(a,"change",n[7]),F(a,"input",n[7]),F(a,"mouseup",n[1]),F(i,"click",n[3])],f=!0)},p(m,[C]){C&1&&we(a,m[0])},i:K,o:K,d(m){m&&h(e),f=!1,ve(c)}}}function Tt(n,e,t){let l,s,r,a=!1;function o(c){t(6,l=c.target.value)}function i(){t(6,l=0)}function u(){t(6,l=100),t(0,s=100)}be(()=>{const c=de.get("volume");if(console.log("vol",c),t(5,a=!0),c==null){t(4,r=10);return}t(4,r=parseInt(c))});function f(){s=Ke(this.value),t(0,s),t(6,l),t(4,r)}return n.$$.update=()=>{n.$$.dirty&16&&t(6,l=r),n.$$.dirty&64&&t(0,s=l),n.$$.dirty&96&&a&&(console.log("volume",l),st(l/100),de.set("volume",l.toString(),{expires:31}))},[s,o,i,u,r,a,l,f]}class $t extends X{constructor(e){super(),Y(this,e,Tt,St,J,{})}}function wt(n,e,t){const l=ue();let{intervalS:s=0}=e,{timeoutS:r=0}=e,{active:a=!0}=e,o=0,i=0;function u(c){console.log("run annoyer",c),clearInterval(o),clearTimeout(i),c&&(o=setInterval(()=>{Se(),a||clearInterval(o)},s*1e3),i=setTimeout(()=>{c=!1,f()},r*1e3))}function f(){l("off")}return n.$$set=c=>{"intervalS"in c&&t(0,s=c.intervalS),"timeoutS"in c&&t(1,r=c.timeoutS),"active"in c&&t(2,a=c.active)},n.$$.update=()=>{n.$$.dirty&4&&u(a)},[s,r,a]}class Ct extends X{constructor(e){super(),Y(this,e,wt,null,J,{intervalS:0,timeoutS:1,active:2})}}class Re{constructor(e=0,t=""){se(this,"start");se(this,"finish");se(this,"name");se(this,"value");this.start=new Date,this.finish=new Date,this.name=t,this.value=e}}const U={RUNNING:"RUNNING",STOPPED:"STOPPED",WAITING_FOR_STOP:"WAITING_FOR_STOP"},Le=ne+"/tea.png",It=ne+"/clock_red.png",Pt=ne+"/clock_yellow.png";function Et(n){if(console.log("changeFavicon",n),typeof document>"u"||document===null)return;const e=document.getElementById("favicon");if(e!==null)switch(n){case U.STOPPED:e.href=Le;break;case U.RUNNING:e.href=It;break;case U.WAITING_FOR_STOP:e.href=Pt;break;default:e.href=Le}}function yt(n){let e,t,l;return e=new $t({}),{c(){j(e.$$.fragment),t=T("br")},l(s){G(e.$$.fragment,s),t=$(s,"BR",{})},m(s,r){W(e,s,r),D(s,t,r),l=!0},p:K,i(s){l||(A(e.$$.fragment,s),l=!0)},o(s){M(e.$$.fragment,s),l=!1},d(s){s&&h(t),z(e,s)}}}function Be(n){let e,t;return e=new Te({props:{title:"stop and don't save logs",$$slots:{default:[Dt]},$$scope:{ctx:n}}}),{c(){j(e.$$.fragment)},l(l){G(e.$$.fragment,l)},m(l,s){W(e,l,s),t=!0},p(l,s){const r={};s&16388&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){t||(A(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){z(e,l)}}}function Dt(n){let e,t,l,s,r,a,o;return{c(){e=T("button"),t=H("cancel"),s=L(),r=T("br"),this.h()},l(i){e=$(i,"BUTTON",{id:!0,class:!0});var u=R(e);t=q(u,"cancel"),u.forEach(h),s=B(i),r=$(i,"BR",{}),this.h()},h(){y(e,"id","stopper"),e.hidden=l=n[2]===U.STOPPED,y(e,"class","svelte-15io30k")},m(i,u){D(i,e,u),S(e,t),D(i,s,u),D(i,r,u),a||(o=F(e,"click",n[7]),a=!0)},p(i,u){u&4&&l!==(l=i[2]===U.STOPPED)&&(e.hidden=l)},d(i){i&&(h(e),h(s),h(r)),a=!1,o()}}}function Ot(n){let e,t,l,s,r,a;t=new dt({props:{time:n[3]}}),t.$on("alarming",n[5]),t.$on("stop",n[8]),s=new Te({props:{title:"Volume",$$slots:{default:[yt]},$$scope:{ctx:n}}});let o=n[2]!==U.STOPPED&&Be(n);return{c(){e=T("div"),j(t.$$.fragment),l=L(),j(s.$$.fragment),r=L(),o&&o.c(),this.h()},l(i){e=$(i,"DIV",{class:!0});var u=R(e);G(t.$$.fragment,u),l=B(u),G(s.$$.fragment,u),r=B(u),o&&o.l(u),u.forEach(h),this.h()},h(){y(e,"class","clock svelte-15io30k")},m(i,u){D(i,e,u),W(t,e,null),S(e,l),W(s,e,null),S(e,r),o&&o.m(e,null),a=!0},p(i,u){const f={};u&8&&(f.time=i[3]),t.$set(f);const c={};u&16384&&(c.$$scope={dirty:u,ctx:i}),s.$set(c),i[2]!==U.STOPPED?o?(o.p(i,u),u&4&&A(o,1)):(o=Be(i),o.c(),A(o,1),o.m(e,null)):o&&(ie(),M(o,1,1,()=>{o=null}),ae())},i(i){a||(A(t.$$.fragment,i),A(s.$$.fragment,i),A(o),a=!0)},o(i){M(t.$$.fragment,i),M(s.$$.fragment,i),M(o),a=!1},d(i){i&&h(e),z(t),z(s),o&&o.d()}}}function Nt(n){let e,t,l,s;return e=new bt({props:{active:n[2]===U.STOPPED,$$slots:{default:[Ot]},$$scope:{ctx:n}}}),e.$on("start",n[4]),e.$on("stop",n[6]),l=new Ct({props:{active:n[2]===U.WAITING_FOR_STOP,intervalS:n[0],timeoutS:n[1]}}),l.$on("off",n[6]),{c(){j(e.$$.fragment),t=L(),j(l.$$.fragment)},l(r){G(e.$$.fragment,r),t=B(r),G(l.$$.fragment,r)},m(r,a){W(e,r,a),D(r,t,a),W(l,r,a),s=!0},p(r,[a]){const o={};a&4&&(o.active=r[2]===U.STOPPED),a&16396&&(o.$$scope={dirty:a,ctx:r}),e.$set(o);const i={};a&4&&(i.active=r[2]===U.WAITING_FOR_STOP),a&1&&(i.intervalS=r[0]),a&2&&(i.timeoutS=r[1]),l.$set(i)},i(r){s||(A(e.$$.fragment,r),A(l.$$.fragment,r),s=!0)},o(r){M(e.$$.fragment,r),M(l.$$.fragment,r),s=!1},d(r){r&&h(t),z(e,r),z(l,r)}}}function At(n,e,t){const l=ue();let{timersMultiplier:s}=e,{afterClockIntervaltS:r}=e,{afterClockTimeoutS:a}=e,o=U.STOPPED,i=new Re,u=0;function f(){t(3,u=0)}function c(v){t(3,u=v*s)}function m(v){t(2,o=U.RUNNING),c(v.detail.timer),i=new Re(v.detail.timer,v.detail.name)}function C(){if(typeof document<"u"&&document.visibilityState==="visible"){I(!0);return}t(2,o=U.WAITING_FOR_STOP)}function I(v=!0){t(2,o=U.STOPPED),i.finish=new Date,f(),v&&l("timer",i)}function P(){I(!1)}function g(){o!==U.STOPPED&&I(!0)}return be(()=>{document.addEventListener("visibilitychange",function(){o===U.WAITING_FOR_STOP&&document.visibilityState==="visible"&&(console.log("visibility change to visible"),I(!0))})}),n.$$set=v=>{"timersMultiplier"in v&&t(9,s=v.timersMultiplier),"afterClockIntervaltS"in v&&t(0,r=v.afterClockIntervaltS),"afterClockTimeoutS"in v&&t(1,a=v.afterClockTimeoutS)},n.$$.update=()=>{n.$$.dirty&4&&Et(o)},[r,a,o,u,m,C,I,P,g,s]}class Xe extends X{constructor(e){super(),Y(this,e,At,Nt,J,{timersMultiplier:9,afterClockIntervaltS:0,afterClockTimeoutS:1})}}function Mt(n){let e;return{c(){e=H("Active for")},l(t){e=q(t,"Active for")},m(t,l){D(t,e,l)},d(t){t&&h(e)}}}function Rt(n){let e;return{c(){e=H("Rest for")},l(t){e=q(t,"Rest for")},m(t,l){D(t,e,l)},d(t){t&&h(e)}}}function Lt(n){let e,t,l,s,r,a,o,i=ut(n[0])+"",u,f,c;function m(P,g){return P[2]?Rt:Mt}let I=m(n)(n);return{c(){e=T("snap"),t=T("snap"),l=H(n[1]),s=L(),r=T("snap"),I.c(),a=L(),o=T("snap"),u=H(i),f=L(),c=T("br"),this.h()},l(P){e=$(P,"SNAP",{class:!0});var g=R(e);t=$(g,"SNAP",{class:!0});var v=R(t);l=q(v,n[1]),v.forEach(h),s=B(g),r=$(g,"SNAP",{});var _=R(r);I.l(_),_.forEach(h),a=B(g),o=$(g,"SNAP",{class:!0});var w=R(o);u=q(w,i),w.forEach(h),f=B(g),g.forEach(h),c=$(P,"BR",{}),this.h()},h(){y(t,"class","time work svelte-1qlajhd"),y(o,"class","duration svelte-1qlajhd"),y(e,"class","logline svelte-1qlajhd"),_e(e,"rest",n[2])},m(P,g){D(P,e,g),S(e,t),S(t,l),S(e,s),S(e,r),I.m(r,null),S(e,a),S(e,o),S(o,u),S(e,f),D(P,c,g)},p:K,i:K,o:K,d(P){P&&(h(e),h(c)),I.d()}}}function Bt(n){let e=n.getHours().toString().padStart(2,"0"),t=n.getMinutes().toString().padStart(2,"0");return`${e}:${t}`}function Ut(n,e,t){let{start:l}=e,{finish:s}=e,{name:r}=e,a=(s.getTime()-l.getTime())/1e3,o=Bt(l),i=r==="rest";return n.$$set=u=>{"start"in u&&t(3,l=u.start),"finish"in u&&t(4,s=u.finish),"name"in u&&t(5,r=u.name)},n.$$.update=()=>{n.$$.dirty&56&&console.log("logline",l,s,r,a,o,i)},[a,o,i,l,s,r]}class Vt extends X{constructor(e){super(),Y(this,e,Ut,Lt,J,{start:3,finish:4,name:5})}}function Ue(n,e,t){const l=n.slice();return l[4]=e[t],l}function Ve(n){let e,t;const l=[n[4]];let s={};for(let r=0;r<l.length;r+=1)s=ke(s,l[r]);return e=new Vt({props:s}),{c(){j(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,a){W(e,r,a),t=!0},p(r,a){const o=a&1?nt(l,[lt(r[4])]):{};e.$set(o)},i(r){t||(A(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){z(e,r)}}}function Ft(n){let e,t="Clear logs",l,s,r="Active time: ",a,o=ye(Fe(n[0]))+"",i,u,f,c,m,C,I,P=ee(n[0]),g=[];for(let _=0;_<P.length;_+=1)g[_]=Ve(Ue(n,P,_));const v=_=>M(g[_],1,1,()=>{g[_]=null});return{c(){e=T("button"),e.textContent=t,l=L(),s=T("span"),s.textContent=r,a=T("span"),i=H(o),u=T("br"),f=L(),c=T("div");for(let _=0;_<g.length;_+=1)g[_].c();this.h()},l(_){e=$(_,"BUTTON",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-1t59hv2"&&(e.textContent=t),l=B(_),s=$(_,"SPAN",{class:!0,"data-svelte-h":!0}),x(s)!=="svelte-18pz33x"&&(s.textContent=r),a=$(_,"SPAN",{class:!0});var w=R(a);i=q(w,o),w.forEach(h),u=$(_,"BR",{}),f=B(_),c=$(_,"DIV",{class:!0});var b=R(c);for(let V=0;V<g.length;V+=1)g[V].l(b);b.forEach(h),this.h()},h(){y(e,"class","clear svelte-a8uao"),y(s,"class","svelte-a8uao"),y(a,"class","svelte-a8uao"),y(c,"class","logs svelte-a8uao")},m(_,w){D(_,e,w),D(_,l,w),D(_,s,w),D(_,a,w),S(a,i),D(_,u,w),D(_,f,w),D(_,c,w);for(let b=0;b<g.length;b+=1)g[b]&&g[b].m(c,null);m=!0,C||(I=F(e,"click",n[1]),C=!0)},p(_,[w]){if((!m||w&1)&&o!==(o=ye(Fe(_[0]))+"")&&he(i,o),w&1){P=ee(_[0]);let b;for(b=0;b<P.length;b+=1){const V=Ue(_,P,b);g[b]?(g[b].p(V,w),A(g[b],1)):(g[b]=Ve(V),g[b].c(),A(g[b],1),g[b].m(c,null))}for(ie(),b=P.length;b<g.length;b+=1)v(b);ae()}},i(_){if(!m){for(let w=0;w<P.length;w+=1)A(g[w]);m=!0}},o(_){g=g.filter(Boolean);for(let w=0;w<g.length;w+=1)M(g[w]);m=!1},d(_){_&&(h(e),h(l),h(s),h(a),h(u),h(f),h(c)),Ze(g,_),C=!1,I()}}}function Fe(n){let e=0;return n.forEach(t=>{t.name=="work"&&(e+=(t.finish.getTime()-t.start.getTime())/1e3)}),e}function jt(n){return n.forEach(e=>{if(!("name"in e&&"start"in e&&"finish"in e))return!1}),!0}function Gt(n){let e=[];return n.forEach(t=>{e.push({name:t.name,start:Math.floor(t.start.getTime()/1e3),finish:Math.floor(t.finish.getTime()/1e3)})}),console.log("Serializing logs:",JSON.stringify(e)),JSON.stringify(e)}function Wt(n){const e=JSON.parse(n);let t=[];if(jt(e))return e.forEach(l=>{t.push({value:0,name:l.name,finish:new Date(l.finish*1e3),start:new Date(l.start*1e3)})}),console.log("deserialized logs:",t),t}function zt(n,e,t){let{timerLogs:l=[]}=e,s=!1;function r(o){l!=null&&s&&de.set("logs",Gt(o),{expires:31})}be(()=>{let o=de.get("logs");console.log("coockies for logs contain",o),s=!0,o!=null&&t(0,l=Wt(o))});const a=()=>t(0,l=[]);return n.$$set=o=>{"timerLogs"in o&&t(0,l=o.timerLogs)},n.$$.update=()=>{n.$$.dirty&1&&r(l)},[l,a]}class Ht extends X{constructor(e){super(),Y(this,e,zt,Ft,J,{timerLogs:0})}}const qt={afterClockIntervaltS:3,afterClockTimeoutS:10,timersMultiplier:1},Jt={afterClockIntervaltS:10,afterClockTimeoutS:60*15,timersMultiplier:1*60};function Xt(n){let e,t;const l=[Jt];let s={};for(let r=0;r<l.length;r+=1)s=ke(s,l[r]);return e=new Xe({props:s}),e.$on("timer",n[2]),{c(){j(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,a){W(e,r,a),t=!0},p(r,a){const o={};e.$set(o)},i(r){t||(A(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){z(e,r)}}}function Yt(n){let e,t;const l=[qt];let s={};for(let r=0;r<l.length;r+=1)s=ke(s,l[r]);return e=new Xe({props:s}),e.$on("timer",n[2]),{c(){j(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,a){W(e,r,a),t=!0},p(r,a){const o={};e.$set(o)},i(r){t||(A(e.$$.fragment,r),t=!0)},o(r){M(e.$$.fragment,r),t=!1},d(r){z(e,r)}}}function Qt(n){let e,t,l,s="Let's Pomodoro!",r,a,o,i,u,f,c,m,C,I,P,g,v,_;const w=[Yt,Xt],b=[];function V(k,O){return k[0]?0:1}a=V(n),o=b[a]=w[a](n);function Q(k){n[3](k)}let E={};return n[1]!==void 0&&(E.timerLogs=n[1]),u=new Ht({props:E}),xe.push(()=>tt(u,"timerLogs",Q)),{c(){e=T("main"),t=T("div"),l=T("h1"),l.textContent=s,r=L(),o.c(),i=L(),j(u.$$.fragment),c=L(),m=T("div"),C=T("label"),I=H("Debug:"),P=T("input"),this.h()},l(k){e=$(k,"MAIN",{class:!0});var O=R(e);t=$(O,"DIV",{class:!0});var d=R(t);l=$(d,"H1",{class:!0,"data-svelte-h":!0}),x(l)!=="svelte-cxq7y3"&&(l.textContent=s),r=B(d),o.l(d),i=B(d),G(u.$$.fragment,d),d.forEach(h),O.forEach(h),c=B(k),m=$(k,"DIV",{class:!0});var p=R(m);C=$(p,"LABEL",{id:!0});var N=R(C);I=q(N,"Debug:"),P=$(N,"INPUT",{type:!0}),N.forEach(h),p.forEach(h),this.h()},h(){y(l,"class","logo svelte-b2iouv"),y(t,"class","centered-div"),y(e,"class","svelte-b2iouv"),y(P,"type","checkbox"),y(C,"id","debug"),y(m,"class","debug-div svelte-b2iouv")},m(k,O){D(k,e,O),S(e,t),S(t,l),S(t,r),b[a].m(t,null),S(t,i),W(u,t,null),D(k,c,O),D(k,m,O),S(m,C),S(C,I),S(C,P),P.checked=n[0],g=!0,v||(_=F(P,"change",n[4]),v=!0)},p(k,[O]){let d=a;a=V(k),a===d?b[a].p(k,O):(ie(),M(b[d],1,1,()=>{b[d]=null}),ae(),o=b[a],o?o.p(k,O):(o=b[a]=w[a](k),o.c()),A(o,1),o.m(t,i));const p={};!f&&O&2&&(f=!0,p.timerLogs=k[1],et(()=>f=!1)),u.$set(p),O&1&&(P.checked=k[0])},i(k){g||(A(o),A(u.$$.fragment,k),g=!0)},o(k){M(o),M(u.$$.fragment,k),g=!1},d(k){k&&(h(e),h(c),h(m)),b[a].d(),z(u),v=!1,_()}}}function Kt(n,e,t){let l=!1,s=[];function r(i){t(1,s=[...s,i.detail])}function a(i){s=i,t(1,s)}function o(){l=this.checked,t(0,l)}return[l,s,r,a,o]}class nn extends X{constructor(e){super(),Y(this,e,Kt,Qt,J,{})}}export{nn as component};
