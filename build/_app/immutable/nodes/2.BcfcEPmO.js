var Ye=Object.defineProperty;var Qe=(n,e,t)=>e in n?Ye(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var se=(n,e,t)=>Qe(n,typeof e!="symbol"?e+"":e,t);import{A as ve,s as X,c as Ge,e as $,b as L,p as te,d as C,f as R,i as h,j as B,v as E,k as N,O as F,u as ze,g as je,a as We,t as H,h as J,w as ue,l as w,m as ge,P as fe,Q as we,R as re,n as K,S as x,T as $e,r as ke,U as Ke,V as Ze,W as be,x as xe,X as et}from"../chunks/scheduler.DfcxTzeO.js";import{a as M,t as A,S as q,i as Y,b as G,d as z,m as j,e as W,g as ae,c as ce,f as tt}from"../chunks/index.cws5nFLo.js";import{b as ne}from"../chunks/paths.ZpvenBZT.js";function ee(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Ce(n,e){M(n,1,1,()=>{e.delete(n.key)})}function Ie(n,e,t,l,i,s,a,o,r,c,u,f){let m=n.length,p=s.length,k=m;const P={};for(;k--;)P[n[k].key]=k;const g=[],b=new Map,_=new Map,I=[];for(k=p;k--;){const y=f(i,s,k),S=t(y);let D=a.get(S);D?I.push(()=>D.p(y,e)):(D=c(S,y),D.c()),b.set(S,g[k]=D),S in P&&_.set(S,Math.abs(k-P[S]))}const T=new Set,V=new Set;function Q(y){A(y,1),y.m(o,u),a.set(y.key,y),u=y.first,p--}for(;m&&p;){const y=g[p-1],S=n[m-1],D=y.key,d=S.key;y===S?(u=y.first,m--,p--):b.has(d)?!a.has(D)||T.has(D)?Q(y):V.has(d)?m--:_.get(D)>_.get(d)?(V.add(D),Q(y)):(T.add(d),m--):(r(S,a),m--)}for(;m--;){const y=n[m];b.has(y.key)||r(y,a)}for(;p;)Q(g[p-1]);return ve(I),g}function nt(n,e){const t={},l={},i={$$scope:1};let s=n.length;for(;s--;){const a=n[s],o=e[s];if(o){for(const r in a)r in o||(l[r]=1);for(const r in o)i[r]||(t[r]=o[r],i[r]=1);n[s]=o}else for(const r in a)i[r]=1}for(const a in l)a in t||(t[a]=void 0);return t}function lt(n){return typeof n=="object"&&n!==null?n:{}}const it=ne+"/ring2.wav";let He=function(){},oe,_e,Je=.5,me;if(typeof window<"u"){let n=window.AudioContext||window.webkitAudioContext;oe=new n,fetch(it).then(e=>e.arrayBuffer()).then(e=>oe.decodeAudioData(e)).then(e=>{_e=e}).catch(e=>console.error("Error loading sound file:",e)),He=function(){if(!_e)return;me=oe.createBufferSource(),me.buffer=_e;let e=oe.createGain();e.gain.value=Je,me.connect(e),e.connect(oe.destination),me.start(0)}}function Te(){He()}function st(n,e){Je=n,Te()}function Pe(n){let e,t;return{c(){e=$("div"),t=H(n[0]),this.h()},l(l){e=C(l,"DIV",{style:!0,class:!0});var i=R(e);t=J(i,n[0]),i.forEach(h),this.h()},h(){ue(e,"top",n[3]+"px"),ue(e,"left",n[2]+"px"),E(e,"class","tooltip svelte-smlhfz")},m(l,i){N(l,e,i),w(e,t)},p(l,i){i&1&&ge(t,l[0]),i&8&&ue(e,"top",l[3]+"px"),i&4&&ue(e,"left",l[2]+"px")},d(l){l&&h(e)}}}function ot(n){let e,t,l,i,s,a;const o=n[8].default,r=Ge(o,n,n[7],null);let c=n[1]&&Pe(n);return{c(){e=$("div"),r&&r.c(),t=L(),c&&c.c(),l=te(),this.h()},l(u){e=C(u,"DIV",{"aria-hidden":!0});var f=R(e);r&&r.l(f),f.forEach(h),t=B(u),c&&c.l(u),l=te(),this.h()},h(){E(e,"aria-hidden","true")},m(u,f){N(u,e,f),r&&r.m(e,null),N(u,t,f),c&&c.m(u,f),N(u,l,f),i=!0,s||(a=[F(e,"mouseover",n[4]),F(e,"mouseleave",n[6]),F(e,"mousemove",n[5]),F(e,"focus",rt)],s=!0)},p(u,[f]){r&&r.p&&(!i||f&128)&&ze(r,o,u,u[7],i?We(o,u[7],f,null):je(u[7]),null),u[1]?c?c.p(u,f):(c=Pe(u),c.c(),c.m(l.parentNode,l)):c&&(c.d(1),c=null)},i(u){i||(A(r,u),i=!0)},o(u){M(r,u),i=!1},d(u){u&&(h(e),h(t),h(l)),r&&r.d(u),c&&c.d(u),s=!1,ve(a)}}}const rt=function(){};function at(n,e,t){let{$$slots:l={},$$scope:i}=e,{title:s=""}=e,a=!1,o,r;function c(m){t(1,a=!0),t(2,o=m.pageX+10),t(3,r=m.pageY+10)}function u(m){t(2,o=m.pageX+10),t(3,r=m.pageY+10)}function f(){t(1,a=!1)}return n.$$set=m=>{"title"in m&&t(0,s=m.title),"$$scope"in m&&t(7,i=m.$$scope)},[s,a,o,r,c,u,f,i,l]}class Se extends q{constructor(e){super(),Y(this,e,at,ot,X,{title:0})}}function ye(n){let e=Math.floor(n/60).toString().padStart(2,"0"),t=Math.floor(n%60).toString().padStart(2,"0");return`${e}:${t}`}function ct(n){let e=Math.floor(n/60),t=Math.floor(n%60);return e>0?`${e} min`:`${t} sec`}function Ee(n){let e=Math.floor(n/3600);e>0&&(n=n-e*3600);let t=Math.floor(n/60),l=Math.floor(n%60);return e==1?`${e} hour ${t} min`:e>0?`${e} hours ${t} min`:t>10?`${t} min`:t>1?`${t} min ${l} sec`:`${l} sec`}function ft(n){let e,t=ye(n[0])+"",l,i,s;return{c(){e=$("button"),l=H(t),this.h()},l(a){e=C(a,"BUTTON",{id:!0,class:!0});var o=R(e);l=J(o,t),o.forEach(h),this.h()},h(){E(e,"id","watch"),E(e,"class","svelte-9y7wid")},m(a,o){N(a,e,o),w(e,l),i||(s=F(e,"click",n[1]),i=!0)},p(a,o){o&1&&t!==(t=ye(a[0])+"")&&ge(l,t)},d(a){a&&h(e),i=!1,s()}}}function ut(n){let e,t;return e=new Se({props:{title:"stop timer",$$slots:{default:[ft]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},l(l){z(e.$$.fragment,l)},m(l,i){j(e,l,i),t=!0},p(l,[i]){const s={};i&257&&(s.$$scope={dirty:i,ctx:l}),e.$set(s)},i(l){t||(A(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function mt(n,e,t){let{time:l=0}=e;const i=fe();let s=new Date,a=0,o=0;function r(f){console.log("runTimer",f),s=new Date,clearInterval(o),t(0,a=f),l!=0&&(o=setInterval(()=>{let m=l-Math.floor((Date.now()-s.getTime())/1e3);if(m<=0){c(),clearInterval(o);return}t(0,a=m)},500))}function c(){Te(),i("alarming")}function u(){i("stop")}return n.$$set=f=>{"time"in f&&t(2,l=f.time)},n.$$.update=()=>{n.$$.dirty&4&&r(l)},[a,u,l]}class dt extends q{constructor(e){super(),Y(this,e,mt,ut,X,{time:2})}}function ht(n){let e,t,l,i,s,a;return{c(){e=$("button"),t=H(n[1]),l=H(" min"),this.h()},l(o){e=C(o,"BUTTON",{class:!0});var r=R(e);t=J(r,n[1]),l=J(r," min"),r.forEach(h),this.h()},h(){E(e,"class",i=we(n[2])+" svelte-nc29tu"),re(e,"pressed",n[0]),re(e,"inactive",n[3])},m(o,r){N(o,e,r),w(e,t),w(e,l),s||(a=F(e,"click",n[5]),s=!0)},p(o,[r]){r&2&&ge(t,o[1]),r&4&&i!==(i=we(o[2])+" svelte-nc29tu")&&E(e,"class",i),r&5&&re(e,"pressed",o[0]),r&12&&re(e,"inactive",o[3])},i:K,o:K,d(o){o&&h(e),s=!1,a()}}}function gt(n,e,t){const l=fe();let{value:i}=e,{name:s}=e,{inactive:a=!1}=e,{pressed:o=!1}=e;function r(f,m){l("start",{name:f,val:m}),t(0,o=!0)}function c(f){f||t(0,o=!1)}const u=function(){r(s,i)};return n.$$set=f=>{"value"in f&&t(1,i=f.value),"name"in f&&t(2,s=f.name),"inactive"in f&&t(3,a=f.inactive),"pressed"in f&&t(0,o=f.pressed)},n.$$.update=()=>{n.$$.dirty&8&&c(a)},[o,i,s,a,r,u]}class Xe extends q{constructor(e){super(),Y(this,e,gt,ht,X,{value:1,name:2,inactive:3,pressed:0})}}function Ne(n,e,t){const l=n.slice();return l[6]=e[t],l}const _t=n=>({}),De=n=>({class:"item svelte-1avocgd"});function Oe(n,e,t){const l=n.slice();return l[6]=e[t],l}function Ae(n,e){let t,l,i,s,a;return l=new Xe({props:{value:e[6],name:"work",inactive:!e[0]}}),l.$on("start",e[2]),{key:n,first:null,c(){t=te(),G(l.$$.fragment),i=L(),s=$("br"),this.h()},l(o){t=te(),z(l.$$.fragment,o),i=B(o),s=C(o,"BR",{}),this.h()},h(){this.first=t},m(o,r){N(o,t,r),j(l,o,r),N(o,i,r),N(o,s,r),a=!0},p(o,r){e=o;const c={};r&1&&(c.inactive=!e[0]),l.$set(c)},i(o){a||(A(l.$$.fragment,o),a=!0)},o(o){M(l.$$.fragment,o),a=!1},d(o){o&&(h(t),h(i),h(s)),W(l,o)}}}function Me(n,e){let t,l,i,s,a;return l=new Xe({props:{value:e[6],name:"rest",inactive:!e[0]}}),l.$on("start",e[2]),{key:n,first:null,c(){t=te(),G(l.$$.fragment),i=L(),s=$("br"),this.h()},l(o){t=te(),z(l.$$.fragment,o),i=B(o),s=C(o,"BR",{}),this.h()},h(){this.first=t},m(o,r){N(o,t,r),j(l,o,r),N(o,i,r),N(o,s,r),a=!0},p(o,r){e=o;const c={};r&1&&(c.inactive=!e[0]),l.$set(c)},i(o){a||(A(l.$$.fragment,o),a=!0)},o(o){M(l.$$.fragment,o),a=!1},d(o){o&&(h(t),h(i),h(s)),W(l,o)}}}function pt(n){let e,t,l,i,s="Active",a,o,r=[],c=new Map,u,f,m,p,k="Rest",P,g,b=[],_=new Map,I,T=ee(n[1]);const V=d=>d[6];for(let d=0;d<T.length;d+=1){let v=Oe(n,T,d),O=V(v);c.set(O,r[d]=Ae(O,v))}const Q=n[4].default,y=Ge(Q,n,n[3],De);let S=ee(n[1]);const D=d=>d[6];for(let d=0;d<S.length;d+=1){let v=Ne(n,S,d),O=D(v);_.set(O,b[d]=Me(O,v))}return{c(){e=$("div"),t=$("div"),l=$("div"),i=$("span"),i.textContent=s,a=$("br"),o=L();for(let d=0;d<r.length;d+=1)r[d].c();u=L(),y&&y.c(),f=L(),m=$("div"),p=$("span"),p.textContent=k,P=$("br"),g=L();for(let d=0;d<b.length;d+=1)b[d].c();this.h()},l(d){e=C(d,"DIV",{});var v=R(e);t=C(v,"DIV",{class:!0});var O=R(t);l=C(O,"DIV",{class:!0});var le=R(l);i=C(le,"SPAN",{class:!0,"data-svelte-h":!0}),x(i)!=="svelte-19szg5l"&&(i.textContent=s),a=C(le,"BR",{}),o=B(le);for(let Z=0;Z<r.length;Z+=1)r[Z].l(le);le.forEach(h),u=B(O),y&&y.l(O),f=B(O),m=C(O,"DIV",{class:!0});var ie=R(m);p=C(ie,"SPAN",{class:!0,"data-svelte-h":!0}),x(p)!=="svelte-1gtata5"&&(p.textContent=k),P=C(ie,"BR",{}),g=B(ie);for(let Z=0;Z<b.length;Z+=1)b[Z].l(ie);ie.forEach(h),O.forEach(h),v.forEach(h),this.h()},h(){E(i,"class","label svelte-1avocgd"),E(l,"class","item svelte-1avocgd"),E(p,"class","label svelte-1avocgd"),E(m,"class","item svelte-1avocgd"),E(t,"class","grid-container svelte-1avocgd")},m(d,v){N(d,e,v),w(e,t),w(t,l),w(l,i),w(l,a),w(l,o);for(let O=0;O<r.length;O+=1)r[O]&&r[O].m(l,null);w(t,u),y&&y.m(t,null),w(t,f),w(t,m),w(m,p),w(m,P),w(m,g);for(let O=0;O<b.length;O+=1)b[O]&&b[O].m(m,null);I=!0},p(d,[v]){v&7&&(T=ee(d[1]),ae(),r=Ie(r,v,V,1,d,T,c,l,Ce,Ae,null,Oe),ce()),y&&y.p&&(!I||v&8)&&ze(y,Q,d,d[3],I?We(Q,d[3],v,_t):je(d[3]),De),v&7&&(S=ee(d[1]),ae(),b=Ie(b,v,D,1,d,S,_,m,Ce,Me,null,Ne),ce())},i(d){if(!I){for(let v=0;v<T.length;v+=1)A(r[v]);A(y,d);for(let v=0;v<S.length;v+=1)A(b[v]);I=!0}},o(d){for(let v=0;v<r.length;v+=1)M(r[v]);M(y,d);for(let v=0;v<b.length;v+=1)M(b[v]);I=!1},d(d){d&&h(e);for(let v=0;v<r.length;v+=1)r[v].d();y&&y.d(d);for(let v=0;v<b.length;v+=1)b[v].d()}}}function vt(n,e,t){let{$$slots:l={},$$scope:i}=e;const s=fe();let a=[5,10,15,20,25];function o(c){s("start",{timer:c.detail.val,name:c.detail.name}),console.log("handleTimerStart")}let{active:r=!0}=e;return n.$$set=c=>{"active"in c&&t(0,r=c.active),"$$scope"in c&&t(3,i=c.$$scope)},[r,a,o,i,l]}class kt extends q{constructor(e){super(),Y(this,e,vt,pt,X,{active:0})}}/*! js-cookie v3.0.5 | MIT */function de(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var l in t)n[l]=t[l]}return n}var bt={read:function(n){return n[0]==='"'&&(n=n.slice(1,-1)),n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(n){return encodeURIComponent(n).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function pe(n,e){function t(i,s,a){if(!(typeof document>"u")){a=de({},e,a),typeof a.expires=="number"&&(a.expires=new Date(Date.now()+a.expires*864e5)),a.expires&&(a.expires=a.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var r in a)a[r]&&(o+="; "+r,a[r]!==!0&&(o+="="+a[r].split(";")[0]));return document.cookie=i+"="+n.write(s,i)+o}}function l(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var s=document.cookie?document.cookie.split("; "):[],a={},o=0;o<s.length;o++){var r=s[o].split("="),c=r.slice(1).join("=");try{var u=decodeURIComponent(r[0]);if(a[u]=n.read(c,u),i===u)break}catch{}}return i?a[i]:a}}return Object.create({set:t,get:l,remove:function(i,s){t(i,"",de({},s,{expires:-1}))},withAttributes:function(i){return pe(this.converter,de({},this.attributes,i))},withConverter:function(i){return pe(de({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(n)}})}var he=pe(bt,{path:"/"});function Tt(n){let e,t,l,i=`<img src="${ne}/volume_mute.svg" alt="Mute icon"/>`,s,a,o,r,c=`<img src="${ne}/volume_up.svg" alt="Volume max icon"/>`,u,f;return{c(){e=$("label"),t=$("div"),l=$("button"),l.innerHTML=i,s=L(),a=$("input"),o=L(),r=$("button"),r.innerHTML=c,this.h()},l(m){e=C(m,"LABEL",{});var p=R(e);t=C(p,"DIV",{class:!0});var k=R(t);l=C(k,"BUTTON",{class:!0,"data-svelte-h":!0}),x(l)!=="svelte-3ybpa7"&&(l.innerHTML=i),s=B(k),a=C(k,"INPUT",{class:!0,type:!0,min:!0,max:!0}),o=B(k),r=C(k,"BUTTON",{class:!0,"data-svelte-h":!0}),x(r)!=="svelte-vae9t2"&&(r.innerHTML=c),k.forEach(h),p.forEach(h),this.h()},h(){E(l,"class","leftbutton svelte-14xuhg1"),E(a,"class","slider bar svelte-14xuhg1"),E(a,"type","range"),E(a,"min","0"),E(a,"max","100"),E(r,"class","svelte-14xuhg1"),E(t,"class","container svelte-14xuhg1")},m(m,p){N(m,e,p),w(e,t),w(t,l),w(t,s),w(t,a),$e(a,n[0]),w(t,o),w(t,r),u||(f=[F(l,"click",n[2]),F(a,"change",n[7]),F(a,"input",n[7]),F(a,"mouseup",n[1]),F(r,"click",n[3])],u=!0)},p(m,[p]){p&1&&$e(a,m[0])},i:K,o:K,d(m){m&&h(e),u=!1,ve(f)}}}function St(n,e,t){let l,i,s,a=!1;function o(f){t(6,l=f.target.value)}function r(){t(6,l=0)}function c(){t(6,l=100),t(0,i=100)}ke(()=>{const f=he.get("volume");if(console.log("vol",f),t(5,a=!0),f==null){t(4,s=10);return}t(4,s=parseInt(f))});function u(){i=Ke(this.value),t(0,i),t(6,l),t(4,s)}return n.$$.update=()=>{n.$$.dirty&16&&t(6,l=s),n.$$.dirty&64&&t(0,i=l),n.$$.dirty&96&&a&&(console.log("volume",l),st(l/100),he.set("volume",l.toString(),{expires:31}))},[i,o,r,c,s,a,l,u]}class wt extends q{constructor(e){super(),Y(this,e,St,Tt,X,{})}}function $t(n,e,t){const l=fe();let{intervalS:i=0}=e,{timeoutS:s=0}=e,{active:a=!0}=e,o=0,r=0;function c(f){console.log("run annoyer",f),clearInterval(o),clearTimeout(r),f&&(o=setInterval(()=>{Te(),a||clearInterval(o)},i*1e3),r=setTimeout(()=>{f=!1,u()},s*1e3))}function u(){l("off")}return n.$$set=f=>{"intervalS"in f&&t(0,i=f.intervalS),"timeoutS"in f&&t(1,s=f.timeoutS),"active"in f&&t(2,a=f.active)},n.$$.update=()=>{n.$$.dirty&4&&c(a)},[i,s,a]}class Ct extends q{constructor(e){super(),Y(this,e,$t,null,X,{intervalS:0,timeoutS:1,active:2})}}class Re{constructor(e=0,t=""){se(this,"start");se(this,"finish");se(this,"name");se(this,"value");this.start=new Date,this.finish=new Date,this.name=t,this.value=e}}const U={RUNNING:"RUNNING",STOPPED:"STOPPED",WAITING_FOR_STOP:"WAITING_FOR_STOP"},Le=ne+"/tea.png",It=ne+"/clock_red.png",Pt=ne+"/clock_yellow.png";function yt(n){if(console.log("changeFavicon",n),typeof document>"u"||document===null)return;const e=document.getElementById("favicon");if(e!==null)switch(n){case U.STOPPED:e.href=Le;break;case U.RUNNING:e.href=It;break;case U.WAITING_FOR_STOP:e.href=Pt;break;default:e.href=Le}}function Et(n){let e,t,l;return e=new wt({}),{c(){G(e.$$.fragment),t=$("br")},l(i){z(e.$$.fragment,i),t=C(i,"BR",{})},m(i,s){j(e,i,s),N(i,t,s),l=!0},p:K,i(i){l||(A(e.$$.fragment,i),l=!0)},o(i){M(e.$$.fragment,i),l=!1},d(i){i&&h(t),W(e,i)}}}function Be(n){let e,t;return e=new Se({props:{title:"stop and don't save logs",$$slots:{default:[Nt]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},l(l){z(e.$$.fragment,l)},m(l,i){j(e,l,i),t=!0},p(l,i){const s={};i&16388&&(s.$$scope={dirty:i,ctx:l}),e.$set(s)},i(l){t||(A(e.$$.fragment,l),t=!0)},o(l){M(e.$$.fragment,l),t=!1},d(l){W(e,l)}}}function Nt(n){let e,t,l,i,s,a,o;return{c(){e=$("button"),t=H("cancel"),i=L(),s=$("br"),this.h()},l(r){e=C(r,"BUTTON",{id:!0,class:!0});var c=R(e);t=J(c,"cancel"),c.forEach(h),i=B(r),s=C(r,"BR",{}),this.h()},h(){E(e,"id","stopper"),e.hidden=l=n[2]===U.STOPPED,E(e,"class","svelte-x7f3g1")},m(r,c){N(r,e,c),w(e,t),N(r,i,c),N(r,s,c),a||(o=F(e,"click",n[7]),a=!0)},p(r,c){c&4&&l!==(l=r[2]===U.STOPPED)&&(e.hidden=l)},d(r){r&&(h(e),h(i),h(s)),a=!1,o()}}}function Dt(n){let e,t,l,i,s,a;t=new dt({props:{time:n[3]}}),t.$on("alarming",n[5]),t.$on("stop",n[8]),i=new Se({props:{title:"Volume",$$slots:{default:[Et]},$$scope:{ctx:n}}});let o=n[2]!==U.STOPPED&&Be(n);return{c(){e=$("div"),G(t.$$.fragment),l=L(),G(i.$$.fragment),s=L(),o&&o.c(),this.h()},l(r){e=C(r,"DIV",{class:!0});var c=R(e);z(t.$$.fragment,c),l=B(c),z(i.$$.fragment,c),s=B(c),o&&o.l(c),c.forEach(h),this.h()},h(){E(e,"class","clock svelte-x7f3g1")},m(r,c){N(r,e,c),j(t,e,null),w(e,l),j(i,e,null),w(e,s),o&&o.m(e,null),a=!0},p(r,c){const u={};c&8&&(u.time=r[3]),t.$set(u);const f={};c&16384&&(f.$$scope={dirty:c,ctx:r}),i.$set(f),r[2]!==U.STOPPED?o?(o.p(r,c),c&4&&A(o,1)):(o=Be(r),o.c(),A(o,1),o.m(e,null)):o&&(ae(),M(o,1,1,()=>{o=null}),ce())},i(r){a||(A(t.$$.fragment,r),A(i.$$.fragment,r),A(o),a=!0)},o(r){M(t.$$.fragment,r),M(i.$$.fragment,r),M(o),a=!1},d(r){r&&h(e),W(t),W(i),o&&o.d()}}}function Ot(n){let e,t,l,i;return e=new kt({props:{active:n[2]===U.STOPPED,$$slots:{default:[Dt]},$$scope:{ctx:n}}}),e.$on("start",n[4]),e.$on("stop",n[6]),l=new Ct({props:{active:n[2]===U.WAITING_FOR_STOP,intervalS:n[0],timeoutS:n[1]}}),l.$on("off",n[6]),{c(){G(e.$$.fragment),t=L(),G(l.$$.fragment)},l(s){z(e.$$.fragment,s),t=B(s),z(l.$$.fragment,s)},m(s,a){j(e,s,a),N(s,t,a),j(l,s,a),i=!0},p(s,[a]){const o={};a&4&&(o.active=s[2]===U.STOPPED),a&16396&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const r={};a&4&&(r.active=s[2]===U.WAITING_FOR_STOP),a&1&&(r.intervalS=s[0]),a&2&&(r.timeoutS=s[1]),l.$set(r)},i(s){i||(A(e.$$.fragment,s),A(l.$$.fragment,s),i=!0)},o(s){M(e.$$.fragment,s),M(l.$$.fragment,s),i=!1},d(s){s&&h(t),W(e,s),W(l,s)}}}function At(n,e,t){const l=fe();let{timersMultiplier:i}=e,{afterClockIntervaltS:s}=e,{afterClockTimeoutS:a}=e,o=U.STOPPED,r=new Re,c=0;function u(){t(3,c=0)}function f(b){t(3,c=b*i)}function m(b){o===U.RUNNING&&k(!0),t(2,o=U.RUNNING),f(b.detail.timer),r=new Re(b.detail.timer,b.detail.name)}function p(){if(typeof document<"u"&&document.visibilityState==="visible"){k(!0);return}t(2,o=U.WAITING_FOR_STOP)}function k(b=!0){t(2,o=U.STOPPED),r.finish=new Date,u(),b&&l("timer",r)}function P(){k(!1)}function g(){o!==U.STOPPED&&k(!0)}return ke(()=>{document.addEventListener("visibilitychange",function(){o===U.WAITING_FOR_STOP&&document.visibilityState==="visible"&&(console.log("visibility change to visible"),k(!0))})}),n.$$set=b=>{"timersMultiplier"in b&&t(9,i=b.timersMultiplier),"afterClockIntervaltS"in b&&t(0,s=b.afterClockIntervaltS),"afterClockTimeoutS"in b&&t(1,a=b.afterClockTimeoutS)},n.$$.update=()=>{n.$$.dirty&4&&yt(o)},[s,a,o,c,m,p,k,P,g,i]}class qe extends q{constructor(e){super(),Y(this,e,At,Ot,X,{timersMultiplier:9,afterClockIntervaltS:0,afterClockTimeoutS:1})}}function Mt(n){let e;return{c(){e=H("Active for")},l(t){e=J(t,"Active for")},m(t,l){N(t,e,l)},d(t){t&&h(e)}}}function Rt(n){let e;return{c(){e=H("Rest for")},l(t){e=J(t,"Rest for")},m(t,l){N(t,e,l)},d(t){t&&h(e)}}}function Lt(n){let e,t,l,i,s,a,o,r=ct(n[0])+"",c,u,f;function m(P,g){return P[2]?Rt:Mt}let k=m(n)(n);return{c(){e=$("snap"),t=$("snap"),l=H(n[1]),i=L(),s=$("snap"),k.c(),a=L(),o=$("snap"),c=H(r),u=L(),f=$("br"),this.h()},l(P){e=C(P,"SNAP",{class:!0});var g=R(e);t=C(g,"SNAP",{class:!0});var b=R(t);l=J(b,n[1]),b.forEach(h),i=B(g),s=C(g,"SNAP",{});var _=R(s);k.l(_),_.forEach(h),a=B(g),o=C(g,"SNAP",{class:!0});var I=R(o);c=J(I,r),I.forEach(h),u=B(g),g.forEach(h),f=C(P,"BR",{}),this.h()},h(){E(t,"class","time work svelte-v9dfpx"),E(o,"class","duration svelte-v9dfpx"),E(e,"class","logline svelte-v9dfpx"),re(e,"rest",n[2])},m(P,g){N(P,e,g),w(e,t),w(t,l),w(e,i),w(e,s),k.m(s,null),w(e,a),w(e,o),w(o,c),w(e,u),N(P,f,g)},p:K,i:K,o:K,d(P){P&&(h(e),h(f)),k.d()}}}function Bt(n){let e=n.getHours().toString().padStart(2,"0"),t=n.getMinutes().toString().padStart(2,"0");return`${e}:${t}`}function Ut(n,e,t){let{start:l}=e,{finish:i}=e,{name:s}=e,a=(i.getTime()-l.getTime())/1e3,o=Bt(l),r=s==="rest";return n.$$set=c=>{"start"in c&&t(3,l=c.start),"finish"in c&&t(4,i=c.finish),"name"in c&&t(5,s=c.name)},n.$$.update=()=>{n.$$.dirty&56&&console.log("logline",l,i,s,a,o,r)},[a,o,r,l,i,s]}class Vt extends q{constructor(e){super(),Y(this,e,Ut,Lt,X,{start:3,finish:4,name:5})}}function Ue(n,e,t){const l=n.slice();return l[6]=e[t],l}function Ve(n){let e,t;const l=[n[6]];let i={};for(let s=0;s<l.length;s+=1)i=be(i,l[s]);return e=new Vt({props:i}),{c(){G(e.$$.fragment)},l(s){z(e.$$.fragment,s)},m(s,a){j(e,s,a),t=!0},p(s,a){const o=a&2?nt(l,[lt(s[6])]):{};e.$set(o)},i(s){t||(A(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){W(e,s)}}}function Ft(n){let e,t="Clear logs",l,i,s="Active time: ",a,o=Ee(Fe(n[0]))+"",r,c,u,f,m,p,k,P=ee(n[1]),g=[];for(let _=0;_<P.length;_+=1)g[_]=Ve(Ue(n,P,_));const b=_=>M(g[_],1,1,()=>{g[_]=null});return{c(){e=$("button"),e.textContent=t,l=L(),i=$("span"),i.textContent=s,a=$("span"),r=H(o),c=$("br"),u=L(),f=$("div");for(let _=0;_<g.length;_+=1)g[_].c();this.h()},l(_){e=C(_,"BUTTON",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-1t59hv2"&&(e.textContent=t),l=B(_),i=C(_,"SPAN",{class:!0,"data-svelte-h":!0}),x(i)!=="svelte-18pz33x"&&(i.textContent=s),a=C(_,"SPAN",{class:!0});var I=R(a);r=J(I,o),I.forEach(h),c=C(_,"BR",{}),u=B(_),f=C(_,"DIV",{class:!0});var T=R(f);for(let V=0;V<g.length;V+=1)g[V].l(T);T.forEach(h),this.h()},h(){E(e,"class","clear svelte-1rgi6sd"),E(i,"class","svelte-1rgi6sd"),E(a,"class","svelte-1rgi6sd"),E(f,"class","logs svelte-1rgi6sd")},m(_,I){N(_,e,I),N(_,l,I),N(_,i,I),N(_,a,I),w(a,r),N(_,c,I),N(_,u,I),N(_,f,I);for(let T=0;T<g.length;T+=1)g[T]&&g[T].m(f,null);m=!0,p||(k=F(e,"click",n[2]),p=!0)},p(_,[I]){if((!m||I&1)&&o!==(o=Ee(Fe(_[0]))+"")&&ge(r,o),I&2){P=ee(_[1]);let T;for(T=0;T<P.length;T+=1){const V=Ue(_,P,T);g[T]?(g[T].p(V,I),A(g[T],1)):(g[T]=Ve(V),g[T].c(),A(g[T],1),g[T].m(f,null))}for(ae(),T=P.length;T<g.length;T+=1)b(T);ce()}},i(_){if(!m){for(let I=0;I<P.length;I+=1)A(g[I]);m=!0}},o(_){g=g.filter(Boolean);for(let I=0;I<g.length;I+=1)M(g[I]);m=!1},d(_){_&&(h(e),h(l),h(i),h(a),h(c),h(u),h(f)),Ze(g,_),p=!1,k()}}}function Fe(n){let e=0;return n.forEach(t=>{t.name=="work"&&(e+=(t.finish.getTime()-t.start.getTime())/1e3)}),e}function Gt(n){return n.forEach(e=>{if(!("name"in e&&"start"in e&&"finish"in e))return!1}),!0}function zt(n){let e=[];return n.forEach(t=>{e.push({name:t.name,start:Math.floor(t.start.getTime()/1e3),finish:Math.floor(t.finish.getTime()/1e3)})}),console.log("Serializing logs:",JSON.stringify(e)),JSON.stringify(e)}function jt(n){const e=JSON.parse(n);let t=[];if(Gt(e))return e.forEach(l=>{t.push({value:0,name:l.name,finish:new Date(l.finish*1e3),start:new Date(l.start*1e3)})}),console.log("deserialized logs:",t),t}function Wt(n,e,t){let{timerLogs:l=[]}=e,i=[],s=!1;function a(c){l!=null&&s&&he.set("logs",zt(c),{expires:31})}ke(()=>{let c=he.get("logs");console.log("coockies for logs contain",c),s=!0,c!=null&&t(0,l=jt(c))});function o(c){let u=[],f=0,m=0,p=c[0];if(c.length==0){t(1,i=[]);return}c.forEach(k=>{k.name==p.name?k.name=="work"?f+=(k.finish.getTime()-k.start.getTime())/1e3:m+=(k.finish.getTime()-k.start.getTime())/1e3:(u.push({name:p.name,start:p.start,finish:k.finish,value:p.name=="work"?f:m}),p=k,f=0,m=0)}),u.push({name:p.name,start:p.start,finish:p.finish,value:p.name=="work"?f:m}),t(1,i=u)}const r=()=>t(0,l=[]);return n.$$set=c=>{"timerLogs"in c&&t(0,l=c.timerLogs)},n.$$.update=()=>{n.$$.dirty&1&&a(l),n.$$.dirty&1&&o(l)},[l,i,r]}class Ht extends q{constructor(e){super(),Y(this,e,Wt,Ft,X,{timerLogs:0})}}const Jt={afterClockIntervaltS:3,afterClockTimeoutS:10,timersMultiplier:1},Xt={afterClockIntervaltS:10,afterClockTimeoutS:60*15,timersMultiplier:1*60};function qt(n){let e,t;const l=[Xt];let i={};for(let s=0;s<l.length;s+=1)i=be(i,l[s]);return e=new qe({props:i}),e.$on("timer",n[2]),{c(){G(e.$$.fragment)},l(s){z(e.$$.fragment,s)},m(s,a){j(e,s,a),t=!0},p(s,a){const o={};e.$set(o)},i(s){t||(A(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){W(e,s)}}}function Yt(n){let e,t;const l=[Jt];let i={};for(let s=0;s<l.length;s+=1)i=be(i,l[s]);return e=new qe({props:i}),e.$on("timer",n[2]),{c(){G(e.$$.fragment)},l(s){z(e.$$.fragment,s)},m(s,a){j(e,s,a),t=!0},p(s,a){const o={};e.$set(o)},i(s){t||(A(e.$$.fragment,s),t=!0)},o(s){M(e.$$.fragment,s),t=!1},d(s){W(e,s)}}}function Qt(n){let e,t,l,i="Let's Pomodoro!",s,a,o,r,c,u,f,m,p,k,P,g,b,_;const I=[Yt,qt],T=[];function V(S,D){return S[0]?0:1}a=V(n),o=T[a]=I[a](n);function Q(S){n[3](S)}let y={};return n[1]!==void 0&&(y.timerLogs=n[1]),c=new Ht({props:y}),xe.push(()=>tt(c,"timerLogs",Q)),{c(){e=$("main"),t=$("div"),l=$("h1"),l.textContent=i,s=L(),o.c(),r=L(),G(c.$$.fragment),f=L(),m=$("div"),p=$("label"),k=H("Debug:"),P=$("input"),this.h()},l(S){e=C(S,"MAIN",{class:!0});var D=R(e);t=C(D,"DIV",{class:!0});var d=R(t);l=C(d,"H1",{class:!0,"data-svelte-h":!0}),x(l)!=="svelte-cxq7y3"&&(l.textContent=i),s=B(d),o.l(d),r=B(d),z(c.$$.fragment,d),d.forEach(h),D.forEach(h),f=B(S),m=C(S,"DIV",{class:!0});var v=R(m);p=C(v,"LABEL",{id:!0});var O=R(p);k=J(O,"Debug:"),P=C(O,"INPUT",{type:!0}),O.forEach(h),v.forEach(h),this.h()},h(){E(l,"class","logo svelte-dj43kz"),E(t,"class","centered-div"),E(e,"class","svelte-dj43kz"),E(P,"type","checkbox"),E(p,"id","debug"),E(m,"class","debug-div svelte-dj43kz")},m(S,D){N(S,e,D),w(e,t),w(t,l),w(t,s),T[a].m(t,null),w(t,r),j(c,t,null),N(S,f,D),N(S,m,D),w(m,p),w(p,k),w(p,P),P.checked=n[0],g=!0,b||(_=F(P,"change",n[4]),b=!0)},p(S,[D]){let d=a;a=V(S),a===d?T[a].p(S,D):(ae(),M(T[d],1,1,()=>{T[d]=null}),ce(),o=T[a],o?o.p(S,D):(o=T[a]=I[a](S),o.c()),A(o,1),o.m(t,r));const v={};!u&&D&2&&(u=!0,v.timerLogs=S[1],et(()=>u=!1)),c.$set(v),D&1&&(P.checked=S[0])},i(S){g||(A(o),A(c.$$.fragment,S),g=!0)},o(S){M(o),M(c.$$.fragment,S),g=!1},d(S){S&&(h(e),h(f),h(m)),T[a].d(),W(c),b=!1,_()}}}function Kt(n,e,t){let l=!1,i=[];function s(r){t(1,i=[...i,r.detail])}function a(r){i=r,t(1,i)}function o(){l=this.checked,t(0,l)}return[l,i,s,a,o]}class nn extends q{constructor(e){super(),Y(this,e,Kt,Qt,X,{})}}export{nn as component};
